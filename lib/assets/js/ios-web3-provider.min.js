(function(Pe){typeof define=="function"&&define.amd?define(Pe):Pe()})(function(){"use strict";var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ii(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var se={},Pc={};Pc.byteLength=eE,Pc.toByteArray=rE,Pc.fromByteArray=sE;for(var si=[],Cn=[],J2=typeof Uint8Array<"u"?Uint8Array:Array,pl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ho=0,Q2=pl.length;ho<Q2;++ho)si[ho]=pl[ho],Cn[pl.charCodeAt(ho)]=ho;Cn["-".charCodeAt(0)]=62,Cn["_".charCodeAt(0)]=63;function rp(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function eE(e){var t=rp(e),r=t[0],n=t[1];return(r+n)*3/4-n}function tE(e,t,r){return(t+r)*3/4-r}function rE(e){var t,r=rp(e),n=r[0],s=r[1],i=new J2(tE(e,n,s)),o=0,a=s>0?n-4:n,f;for(f=0;f<a;f+=4)t=Cn[e.charCodeAt(f)]<<18|Cn[e.charCodeAt(f+1)]<<12|Cn[e.charCodeAt(f+2)]<<6|Cn[e.charCodeAt(f+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Cn[e.charCodeAt(f)]<<2|Cn[e.charCodeAt(f+1)]>>4,i[o++]=t&255),s===1&&(t=Cn[e.charCodeAt(f)]<<10|Cn[e.charCodeAt(f+1)]<<4|Cn[e.charCodeAt(f+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function nE(e){return si[e>>18&63]+si[e>>12&63]+si[e>>6&63]+si[e&63]}function iE(e,t,r){for(var n,s=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),s.push(nE(n));return s.join("")}function sE(e){for(var t,r=e.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(iE(e,o,o+i>a?a:o+i));return n===1?(t=e[r-1],s.push(si[t>>2]+si[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],s.push(si[t>>10]+si[t>>4&63]+si[t<<2&63]+"=")),s.join("")}var gl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */gl.read=function(e,t,r,n,s){var i,o,a=s*8-n-1,f=(1<<a)-1,u=f>>1,l=-7,p=r?s-1:0,_=r?-1:1,b=e[t+p];for(p+=_,i=b&(1<<-l)-1,b>>=-l,l+=a;l>0;i=i*256+e[t+p],p+=_,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+e[t+p],p+=_,l-=8);if(i===0)i=1-u;else{if(i===f)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(b?-1:1)*o*Math.pow(2,i-n)},gl.write=function(e,t,r,n,s,i){var o,a,f,u=i*8-s-1,l=(1<<u)-1,p=l>>1,_=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:i-1,T=n?1:-1,P=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+p>=1?t+=_/f:t+=_*Math.pow(2,1-p),t*f>=2&&(o++,f/=2),o+p>=l?(a=0,o=l):o+p>=1?(a=(t*f-1)*Math.pow(2,s),o=o+p):(a=t*Math.pow(2,p-1)*Math.pow(2,s),o=0));s>=8;e[r+b]=a&255,b+=T,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;e[r+b]=o&255,b+=T,o/=256,u-=8);e[r+b-T]|=P*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Pc,r=gl,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=F,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const O=new Uint8Array(1),E={foo:function(){return 42}};return Object.setPrototypeOf(E,Uint8Array.prototype),Object.setPrototypeOf(O,E),O.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(O){if(O>s)throw new RangeError('The value "'+O+'" is invalid for option "size"');const E=new Uint8Array(O);return Object.setPrototypeOf(E,a.prototype),E}function a(O,E,x){if(typeof O=="number"){if(typeof E=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(O)}return f(O,E,x)}a.poolSize=8192;function f(O,E,x){if(typeof O=="string")return _(O,E);if(ArrayBuffer.isView(O))return T(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(Ft(O,ArrayBuffer)||O&&Ft(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ft(O,SharedArrayBuffer)||O&&Ft(O.buffer,SharedArrayBuffer)))return P(O,E,x);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const H=O.valueOf&&O.valueOf();if(H!=null&&H!==O)return a.from(H,E,x);const W=$(O);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return a.from(O[Symbol.toPrimitive]("string"),E,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}a.from=function(O,E,x){return f(O,E,x)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function l(O,E,x){return u(O),O<=0?o(O):E!==void 0?typeof x=="string"?o(O).fill(E,x):o(O).fill(E):o(O)}a.alloc=function(O,E,x){return l(O,E,x)};function p(O){return u(O),o(O<0?0:j(O)|0)}a.allocUnsafe=function(O){return p(O)},a.allocUnsafeSlow=function(O){return p(O)};function _(O,E){if((typeof E!="string"||E==="")&&(E="utf8"),!a.isEncoding(E))throw new TypeError("Unknown encoding: "+E);const x=k(O,E)|0;let H=o(x);const W=H.write(O,E);return W!==x&&(H=H.slice(0,W)),H}function b(O){const E=O.length<0?0:j(O.length)|0,x=o(E);for(let H=0;H<E;H+=1)x[H]=O[H]&255;return x}function T(O){if(Ft(O,Uint8Array)){const E=new Uint8Array(O);return P(E.buffer,E.byteOffset,E.byteLength)}return b(O)}function P(O,E,x){if(E<0||O.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<E+(x||0))throw new RangeError('"length" is outside of buffer bounds');let H;return E===void 0&&x===void 0?H=new Uint8Array(O):x===void 0?H=new Uint8Array(O,E):H=new Uint8Array(O,E,x),Object.setPrototypeOf(H,a.prototype),H}function $(O){if(a.isBuffer(O)){const E=j(O.length)|0,x=o(E);return x.length===0||O.copy(x,0,0,E),x}if(O.length!==void 0)return typeof O.length!="number"||Et(O.length)?o(0):b(O);if(O.type==="Buffer"&&Array.isArray(O.data))return b(O.data)}function j(O){if(O>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return O|0}function F(O){return+O!=O&&(O=0),a.alloc(+O)}a.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==a.prototype},a.compare=function(E,x){if(Ft(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),Ft(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(E)||!a.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===x)return 0;let H=E.length,W=x.length;for(let te=0,oe=Math.min(H,W);te<oe;++te)if(E[te]!==x[te]){H=E[te],W=x[te];break}return H<W?-1:W<H?1:0},a.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(E,x){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return a.alloc(0);let H;if(x===void 0)for(x=0,H=0;H<E.length;++H)x+=E[H].length;const W=a.allocUnsafe(x);let te=0;for(H=0;H<E.length;++H){let oe=E[H];if(Ft(oe,Uint8Array))te+oe.length>W.length?(a.isBuffer(oe)||(oe=a.from(oe)),oe.copy(W,te)):Uint8Array.prototype.set.call(W,oe,te);else if(a.isBuffer(oe))oe.copy(W,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=oe.length}return W};function k(O,E){if(a.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||Ft(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);const x=O.length,H=arguments.length>2&&arguments[2]===!0;if(!H&&x===0)return 0;let W=!1;for(;;)switch(E){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return De(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return ft(O).length;default:if(W)return H?-1:De(O).length;E=(""+E).toLowerCase(),W=!0}}a.byteLength=k;function C(O,E,x){let H=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,E>>>=0,x<=E))return"";for(O||(O="utf8");;)switch(O){case"hex":return B(this,E,x);case"utf8":case"utf-8":return c(this,E,x);case"ascii":return v(this,E,x);case"latin1":case"binary":return S(this,E,x);case"base64":return d(this,E,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,E,x);default:if(H)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),H=!0}}a.prototype._isBuffer=!0;function X(O,E,x){const H=O[E];O[E]=O[x],O[x]=H}a.prototype.swap16=function(){const E=this.length;if(E%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<E;x+=2)X(this,x,x+1);return this},a.prototype.swap32=function(){const E=this.length;if(E%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<E;x+=4)X(this,x,x+3),X(this,x+1,x+2);return this},a.prototype.swap64=function(){const E=this.length;if(E%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<E;x+=8)X(this,x,x+7),X(this,x+1,x+6),X(this,x+2,x+5),X(this,x+3,x+4);return this},a.prototype.toString=function(){const E=this.length;return E===0?"":arguments.length===0?c(this,0,E):C.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(E){if(!a.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:a.compare(this,E)===0},a.prototype.inspect=function(){let E="";const x=e.INSPECT_MAX_BYTES;return E=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(E+=" ... "),"<Buffer "+E+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(E,x,H,W,te){if(Ft(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),!a.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(x===void 0&&(x=0),H===void 0&&(H=E?E.length:0),W===void 0&&(W=0),te===void 0&&(te=this.length),x<0||H>E.length||W<0||te>this.length)throw new RangeError("out of range index");if(W>=te&&x>=H)return 0;if(W>=te)return-1;if(x>=H)return 1;if(x>>>=0,H>>>=0,W>>>=0,te>>>=0,this===E)return 0;let oe=te-W,Xe=H-x;const Je=Math.min(oe,Xe),Ze=this.slice(W,te),Ht=E.slice(x,H);for(let ze=0;ze<Je;++ze)if(Ze[ze]!==Ht[ze]){oe=Ze[ze],Xe=Ht[ze];break}return oe<Xe?-1:Xe<oe?1:0};function Q(O,E,x,H,W){if(O.length===0)return-1;if(typeof x=="string"?(H=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,Et(x)&&(x=W?0:O.length-1),x<0&&(x=O.length+x),x>=O.length){if(W)return-1;x=O.length-1}else if(x<0)if(W)x=0;else return-1;if(typeof E=="string"&&(E=a.from(E,H)),a.isBuffer(E))return E.length===0?-1:Z(O,E,x,H,W);if(typeof E=="number")return E=E&255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(O,E,x):Uint8Array.prototype.lastIndexOf.call(O,E,x):Z(O,[E],x,H,W);throw new TypeError("val must be string, number or Buffer")}function Z(O,E,x,H,W){let te=1,oe=O.length,Xe=E.length;if(H!==void 0&&(H=String(H).toLowerCase(),H==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(O.length<2||E.length<2)return-1;te=2,oe/=2,Xe/=2,x/=2}function Je(Ht,ze){return te===1?Ht[ze]:Ht.readUInt16BE(ze*te)}let Ze;if(W){let Ht=-1;for(Ze=x;Ze<oe;Ze++)if(Je(O,Ze)===Je(E,Ht===-1?0:Ze-Ht)){if(Ht===-1&&(Ht=Ze),Ze-Ht+1===Xe)return Ht*te}else Ht!==-1&&(Ze-=Ze-Ht),Ht=-1}else for(x+Xe>oe&&(x=oe-Xe),Ze=x;Ze>=0;Ze--){let Ht=!0;for(let ze=0;ze<Xe;ze++)if(Je(O,Ze+ze)!==Je(E,ze)){Ht=!1;break}if(Ht)return Ze}return-1}a.prototype.includes=function(E,x,H){return this.indexOf(E,x,H)!==-1},a.prototype.indexOf=function(E,x,H){return Q(this,E,x,H,!0)},a.prototype.lastIndexOf=function(E,x,H){return Q(this,E,x,H,!1)};function z(O,E,x,H){x=Number(x)||0;const W=O.length-x;H?(H=Number(H),H>W&&(H=W)):H=W;const te=E.length;H>te/2&&(H=te/2);let oe;for(oe=0;oe<H;++oe){const Xe=parseInt(E.substr(oe*2,2),16);if(Et(Xe))return oe;O[x+oe]=Xe}return oe}function G(O,E,x,H){return pt(De(E,O.length-x),O,x,H)}function D(O,E,x,H){return pt(st(E),O,x,H)}function V(O,E,x,H){return pt(ft(E),O,x,H)}function m(O,E,x,H){return pt(Ut(E,O.length-x),O,x,H)}a.prototype.write=function(E,x,H,W){if(x===void 0)W="utf8",H=this.length,x=0;else if(H===void 0&&typeof x=="string")W=x,H=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(H)?(H=H>>>0,W===void 0&&(W="utf8")):(W=H,H=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const te=this.length-x;if((H===void 0||H>te)&&(H=te),E.length>0&&(H<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let oe=!1;for(;;)switch(W){case"hex":return z(this,E,x,H);case"utf8":case"utf-8":return G(this,E,x,H);case"ascii":case"latin1":case"binary":return D(this,E,x,H);case"base64":return V(this,E,x,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,E,x,H);default:if(oe)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),oe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function d(O,E,x){return E===0&&x===O.length?t.fromByteArray(O):t.fromByteArray(O.slice(E,x))}function c(O,E,x){x=Math.min(O.length,x);const H=[];let W=E;for(;W<x;){const te=O[W];let oe=null,Xe=te>239?4:te>223?3:te>191?2:1;if(W+Xe<=x){let Je,Ze,Ht,ze;switch(Xe){case 1:te<128&&(oe=te);break;case 2:Je=O[W+1],(Je&192)===128&&(ze=(te&31)<<6|Je&63,ze>127&&(oe=ze));break;case 3:Je=O[W+1],Ze=O[W+2],(Je&192)===128&&(Ze&192)===128&&(ze=(te&15)<<12|(Je&63)<<6|Ze&63,ze>2047&&(ze<55296||ze>57343)&&(oe=ze));break;case 4:Je=O[W+1],Ze=O[W+2],Ht=O[W+3],(Je&192)===128&&(Ze&192)===128&&(Ht&192)===128&&(ze=(te&15)<<18|(Je&63)<<12|(Ze&63)<<6|Ht&63,ze>65535&&ze<1114112&&(oe=ze))}}oe===null?(oe=65533,Xe=1):oe>65535&&(oe-=65536,H.push(oe>>>10&1023|55296),oe=56320|oe&1023),H.push(oe),W+=Xe}return y(H)}const h=4096;function y(O){const E=O.length;if(E<=h)return String.fromCharCode.apply(String,O);let x="",H=0;for(;H<E;)x+=String.fromCharCode.apply(String,O.slice(H,H+=h));return x}function v(O,E,x){let H="";x=Math.min(O.length,x);for(let W=E;W<x;++W)H+=String.fromCharCode(O[W]&127);return H}function S(O,E,x){let H="";x=Math.min(O.length,x);for(let W=E;W<x;++W)H+=String.fromCharCode(O[W]);return H}function B(O,E,x){const H=O.length;(!E||E<0)&&(E=0),(!x||x<0||x>H)&&(x=H);let W="";for(let te=E;te<x;++te)W+=It[O[te]];return W}function L(O,E,x){const H=O.slice(E,x);let W="";for(let te=0;te<H.length-1;te+=2)W+=String.fromCharCode(H[te]+H[te+1]*256);return W}a.prototype.slice=function(E,x){const H=this.length;E=~~E,x=x===void 0?H:~~x,E<0?(E+=H,E<0&&(E=0)):E>H&&(E=H),x<0?(x+=H,x<0&&(x=0)):x>H&&(x=H),x<E&&(x=E);const W=this.subarray(E,x);return Object.setPrototypeOf(W,a.prototype),W};function I(O,E,x){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+E>x)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(E,x,H){E=E>>>0,x=x>>>0,H||I(E,x,this.length);let W=this[E],te=1,oe=0;for(;++oe<x&&(te*=256);)W+=this[E+oe]*te;return W},a.prototype.readUintBE=a.prototype.readUIntBE=function(E,x,H){E=E>>>0,x=x>>>0,H||I(E,x,this.length);let W=this[E+--x],te=1;for(;x>0&&(te*=256);)W+=this[E+--x]*te;return W},a.prototype.readUint8=a.prototype.readUInt8=function(E,x){return E=E>>>0,x||I(E,1,this.length),this[E]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(E,x){return E=E>>>0,x||I(E,2,this.length),this[E]|this[E+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(E,x){return E=E>>>0,x||I(E,2,this.length),this[E]<<8|this[E+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(E,x){return E=E>>>0,x||I(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+this[E+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(E,x){return E=E>>>0,x||I(E,4,this.length),this[E]*16777216+(this[E+1]<<16|this[E+2]<<8|this[E+3])},a.prototype.readBigUInt64LE=Zt(function(E){E=E>>>0,we(E,"offset");const x=this[E],H=this[E+7];(x===void 0||H===void 0)&&me(E,this.length-8);const W=x+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24,te=this[++E]+this[++E]*2**8+this[++E]*2**16+H*2**24;return BigInt(W)+(BigInt(te)<<BigInt(32))}),a.prototype.readBigUInt64BE=Zt(function(E){E=E>>>0,we(E,"offset");const x=this[E],H=this[E+7];(x===void 0||H===void 0)&&me(E,this.length-8);const W=x*2**24+this[++E]*2**16+this[++E]*2**8+this[++E],te=this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+H;return(BigInt(W)<<BigInt(32))+BigInt(te)}),a.prototype.readIntLE=function(E,x,H){E=E>>>0,x=x>>>0,H||I(E,x,this.length);let W=this[E],te=1,oe=0;for(;++oe<x&&(te*=256);)W+=this[E+oe]*te;return te*=128,W>=te&&(W-=Math.pow(2,8*x)),W},a.prototype.readIntBE=function(E,x,H){E=E>>>0,x=x>>>0,H||I(E,x,this.length);let W=x,te=1,oe=this[E+--W];for(;W>0&&(te*=256);)oe+=this[E+--W]*te;return te*=128,oe>=te&&(oe-=Math.pow(2,8*x)),oe},a.prototype.readInt8=function(E,x){return E=E>>>0,x||I(E,1,this.length),this[E]&128?(255-this[E]+1)*-1:this[E]},a.prototype.readInt16LE=function(E,x){E=E>>>0,x||I(E,2,this.length);const H=this[E]|this[E+1]<<8;return H&32768?H|4294901760:H},a.prototype.readInt16BE=function(E,x){E=E>>>0,x||I(E,2,this.length);const H=this[E+1]|this[E]<<8;return H&32768?H|4294901760:H},a.prototype.readInt32LE=function(E,x){return E=E>>>0,x||I(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},a.prototype.readInt32BE=function(E,x){return E=E>>>0,x||I(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},a.prototype.readBigInt64LE=Zt(function(E){E=E>>>0,we(E,"offset");const x=this[E],H=this[E+7];(x===void 0||H===void 0)&&me(E,this.length-8);const W=this[E+4]+this[E+5]*2**8+this[E+6]*2**16+(H<<24);return(BigInt(W)<<BigInt(32))+BigInt(x+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24)}),a.prototype.readBigInt64BE=Zt(function(E){E=E>>>0,we(E,"offset");const x=this[E],H=this[E+7];(x===void 0||H===void 0)&&me(E,this.length-8);const W=(x<<24)+this[++E]*2**16+this[++E]*2**8+this[++E];return(BigInt(W)<<BigInt(32))+BigInt(this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+H)}),a.prototype.readFloatLE=function(E,x){return E=E>>>0,x||I(E,4,this.length),r.read(this,E,!0,23,4)},a.prototype.readFloatBE=function(E,x){return E=E>>>0,x||I(E,4,this.length),r.read(this,E,!1,23,4)},a.prototype.readDoubleLE=function(E,x){return E=E>>>0,x||I(E,8,this.length),r.read(this,E,!0,52,8)},a.prototype.readDoubleBE=function(E,x){return E=E>>>0,x||I(E,8,this.length),r.read(this,E,!1,52,8)};function w(O,E,x,H,W,te){if(!a.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>W||E<te)throw new RangeError('"value" argument is out of bounds');if(x+H>O.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(E,x,H,W){if(E=+E,x=x>>>0,H=H>>>0,!W){const Xe=Math.pow(2,8*H)-1;w(this,E,x,H,Xe,0)}let te=1,oe=0;for(this[x]=E&255;++oe<H&&(te*=256);)this[x+oe]=E/te&255;return x+H},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(E,x,H,W){if(E=+E,x=x>>>0,H=H>>>0,!W){const Xe=Math.pow(2,8*H)-1;w(this,E,x,H,Xe,0)}let te=H-1,oe=1;for(this[x+te]=E&255;--te>=0&&(oe*=256);)this[x+te]=E/oe&255;return x+H},a.prototype.writeUint8=a.prototype.writeUInt8=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,1,255,0),this[x]=E&255,x+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,2,65535,0),this[x]=E&255,this[x+1]=E>>>8,x+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,2,65535,0),this[x]=E>>>8,this[x+1]=E&255,x+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,4,4294967295,0),this[x+3]=E>>>24,this[x+2]=E>>>16,this[x+1]=E>>>8,this[x]=E&255,x+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,4,4294967295,0),this[x]=E>>>24,this[x+1]=E>>>16,this[x+2]=E>>>8,this[x+3]=E&255,x+4};function R(O,E,x,H,W){He(E,H,W,O,x,7);let te=Number(E&BigInt(4294967295));O[x++]=te,te=te>>8,O[x++]=te,te=te>>8,O[x++]=te,te=te>>8,O[x++]=te;let oe=Number(E>>BigInt(32)&BigInt(4294967295));return O[x++]=oe,oe=oe>>8,O[x++]=oe,oe=oe>>8,O[x++]=oe,oe=oe>>8,O[x++]=oe,x}function Y(O,E,x,H,W){He(E,H,W,O,x,7);let te=Number(E&BigInt(4294967295));O[x+7]=te,te=te>>8,O[x+6]=te,te=te>>8,O[x+5]=te,te=te>>8,O[x+4]=te;let oe=Number(E>>BigInt(32)&BigInt(4294967295));return O[x+3]=oe,oe=oe>>8,O[x+2]=oe,oe=oe>>8,O[x+1]=oe,oe=oe>>8,O[x]=oe,x+8}a.prototype.writeBigUInt64LE=Zt(function(E,x=0){return R(this,E,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Zt(function(E,x=0){return Y(this,E,x,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(E,x,H,W){if(E=+E,x=x>>>0,!W){const Je=Math.pow(2,8*H-1);w(this,E,x,H,Je-1,-Je)}let te=0,oe=1,Xe=0;for(this[x]=E&255;++te<H&&(oe*=256);)E<0&&Xe===0&&this[x+te-1]!==0&&(Xe=1),this[x+te]=(E/oe>>0)-Xe&255;return x+H},a.prototype.writeIntBE=function(E,x,H,W){if(E=+E,x=x>>>0,!W){const Je=Math.pow(2,8*H-1);w(this,E,x,H,Je-1,-Je)}let te=H-1,oe=1,Xe=0;for(this[x+te]=E&255;--te>=0&&(oe*=256);)E<0&&Xe===0&&this[x+te+1]!==0&&(Xe=1),this[x+te]=(E/oe>>0)-Xe&255;return x+H},a.prototype.writeInt8=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,1,127,-128),E<0&&(E=255+E+1),this[x]=E&255,x+1},a.prototype.writeInt16LE=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,2,32767,-32768),this[x]=E&255,this[x+1]=E>>>8,x+2},a.prototype.writeInt16BE=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,2,32767,-32768),this[x]=E>>>8,this[x+1]=E&255,x+2},a.prototype.writeInt32LE=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,4,2147483647,-2147483648),this[x]=E&255,this[x+1]=E>>>8,this[x+2]=E>>>16,this[x+3]=E>>>24,x+4},a.prototype.writeInt32BE=function(E,x,H){return E=+E,x=x>>>0,H||w(this,E,x,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[x]=E>>>24,this[x+1]=E>>>16,this[x+2]=E>>>8,this[x+3]=E&255,x+4},a.prototype.writeBigInt64LE=Zt(function(E,x=0){return R(this,E,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Zt(function(E,x=0){return Y(this,E,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function K(O,E,x,H,W,te){if(x+H>O.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function ne(O,E,x,H,W){return E=+E,x=x>>>0,W||K(O,E,x,4),r.write(O,E,x,H,23,4),x+4}a.prototype.writeFloatLE=function(E,x,H){return ne(this,E,x,!0,H)},a.prototype.writeFloatBE=function(E,x,H){return ne(this,E,x,!1,H)};function Re(O,E,x,H,W){return E=+E,x=x>>>0,W||K(O,E,x,8),r.write(O,E,x,H,52,8),x+8}a.prototype.writeDoubleLE=function(E,x,H){return Re(this,E,x,!0,H)},a.prototype.writeDoubleBE=function(E,x,H){return Re(this,E,x,!1,H)},a.prototype.copy=function(E,x,H,W){if(!a.isBuffer(E))throw new TypeError("argument should be a Buffer");if(H||(H=0),!W&&W!==0&&(W=this.length),x>=E.length&&(x=E.length),x||(x=0),W>0&&W<H&&(W=H),W===H||E.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),E.length-x<W-H&&(W=E.length-x+H);const te=W-H;return this===E&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,H,W):Uint8Array.prototype.set.call(E,this.subarray(H,W),x),te},a.prototype.fill=function(E,x,H,W){if(typeof E=="string"){if(typeof x=="string"?(W=x,x=0,H=this.length):typeof H=="string"&&(W=H,H=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!a.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(E.length===1){const oe=E.charCodeAt(0);(W==="utf8"&&oe<128||W==="latin1")&&(E=oe)}}else typeof E=="number"?E=E&255:typeof E=="boolean"&&(E=Number(E));if(x<0||this.length<x||this.length<H)throw new RangeError("Out of range index");if(H<=x)return this;x=x>>>0,H=H===void 0?this.length:H>>>0,E||(E=0);let te;if(typeof E=="number")for(te=x;te<H;++te)this[te]=E;else{const oe=a.isBuffer(E)?E:a.from(E,W),Xe=oe.length;if(Xe===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(te=0;te<H-x;++te)this[te+x]=oe[te%Xe]}return this};const ge={};function ye(O,E,x){ge[O]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:E.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${O}]`,this.stack,delete this.name}get code(){return O}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${O}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(O){return O?`${O} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(O,E){return`The "${O}" argument must be of type number. Received type ${typeof E}`},TypeError),ye("ERR_OUT_OF_RANGE",function(O,E,x){let H=`The value of "${O}" is out of range.`,W=x;return Number.isInteger(x)&&Math.abs(x)>2**32?W=Ye(String(x)):typeof x=="bigint"&&(W=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(W=Ye(W)),W+="n"),H+=` It must be ${E}. Received ${W}`,H},RangeError);function Ye(O){let E="",x=O.length;const H=O[0]==="-"?1:0;for(;x>=H+4;x-=3)E=`_${O.slice(x-3,x)}${E}`;return`${O.slice(0,x)}${E}`}function Me(O,E,x){we(E,"offset"),(O[E]===void 0||O[E+x]===void 0)&&me(E,O.length-(x+1))}function He(O,E,x,H,W,te){if(O>x||O<E){const oe=typeof E=="bigint"?"n":"";let Xe;throw te>3?E===0||E===BigInt(0)?Xe=`>= 0${oe} and < 2${oe} ** ${(te+1)*8}${oe}`:Xe=`>= -(2${oe} ** ${(te+1)*8-1}${oe}) and < 2 ** ${(te+1)*8-1}${oe}`:Xe=`>= ${E}${oe} and <= ${x}${oe}`,new ge.ERR_OUT_OF_RANGE("value",Xe,O)}Me(H,W,te)}function we(O,E){if(typeof O!="number")throw new ge.ERR_INVALID_ARG_TYPE(E,"number",O)}function me(O,E,x){throw Math.floor(O)!==O?(we(O,x),new ge.ERR_OUT_OF_RANGE(x||"offset","an integer",O)):E<0?new ge.ERR_BUFFER_OUT_OF_BOUNDS:new ge.ERR_OUT_OF_RANGE(x||"offset",`>= ${x?1:0} and <= ${E}`,O)}const ke=/[^+/0-9A-Za-z-_]/g;function Bt(O){if(O=O.split("=")[0],O=O.trim().replace(ke,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function De(O,E){E=E||1/0;let x;const H=O.length;let W=null;const te=[];for(let oe=0;oe<H;++oe){if(x=O.charCodeAt(oe),x>55295&&x<57344){if(!W){if(x>56319){(E-=3)>-1&&te.push(239,191,189);continue}else if(oe+1===H){(E-=3)>-1&&te.push(239,191,189);continue}W=x;continue}if(x<56320){(E-=3)>-1&&te.push(239,191,189),W=x;continue}x=(W-55296<<10|x-56320)+65536}else W&&(E-=3)>-1&&te.push(239,191,189);if(W=null,x<128){if((E-=1)<0)break;te.push(x)}else if(x<2048){if((E-=2)<0)break;te.push(x>>6|192,x&63|128)}else if(x<65536){if((E-=3)<0)break;te.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((E-=4)<0)break;te.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return te}function st(O){const E=[];for(let x=0;x<O.length;++x)E.push(O.charCodeAt(x)&255);return E}function Ut(O,E){let x,H,W;const te=[];for(let oe=0;oe<O.length&&!((E-=2)<0);++oe)x=O.charCodeAt(oe),H=x>>8,W=x%256,te.push(W),te.push(H);return te}function ft(O){return t.toByteArray(Bt(O))}function pt(O,E,x,H){let W;for(W=0;W<H&&!(W+x>=E.length||W>=O.length);++W)E[W+x]=O[W];return W}function Ft(O,E){return O instanceof E||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===E.name}function Et(O){return O!==O}const It=function(){const O="0123456789abcdef",E=new Array(256);for(let x=0;x<16;++x){const H=x*16;for(let W=0;W<16;++W)E[H+W]=O[x]+O[W]}return E}();function Zt(O){return typeof BigInt>"u"?Tt:O}function Tt(){throw new Error("BigInt not supported")}})(se);var On={exports:{}},po=typeof Reflect=="object"?Reflect:null,np=po&&typeof po.apply=="function"?po.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Uc;po&&typeof po.ownKeys=="function"?Uc=po.ownKeys:Object.getOwnPropertySymbols?Uc=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Uc=function(t){return Object.getOwnPropertyNames(t)};function oE(e){console&&console.warn&&console.warn(e)}var ip=Number.isNaN||function(t){return t!==t};function Vt(){Vt.init.call(this)}On.exports=Vt,On.exports.once=uE,Vt.EventEmitter=Vt,Vt.prototype._events=void 0,Vt.prototype._eventsCount=0,Vt.prototype._maxListeners=void 0;var sp=10;function Fc(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Vt,"defaultMaxListeners",{enumerable:!0,get:function(){return sp},set:function(e){if(typeof e!="number"||e<0||ip(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");sp=e}}),Vt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Vt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||ip(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function op(e){return e._maxListeners===void 0?Vt.defaultMaxListeners:e._maxListeners}Vt.prototype.getMaxListeners=function(){return op(this)},Vt.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=t==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var f=i[t];if(f===void 0)return!1;if(typeof f=="function")np(f,this,r);else for(var u=f.length,l=lp(f,u),n=0;n<u;++n)np(l[n],this,r);return!0};function ap(e,t,r,n){var s,i,o;if(Fc(r),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),o===void 0)o=i[t]=r,++e._eventsCount;else if(typeof o=="function"?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=op(e),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,oE(a)}return e}Vt.prototype.addListener=function(t,r){return ap(this,t,r,!1)},Vt.prototype.on=Vt.prototype.addListener,Vt.prototype.prependListener=function(t,r){return ap(this,t,r,!0)};function aE(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function cp(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=aE.bind(n);return s.listener=r,n.wrapFn=s,s}Vt.prototype.once=function(t,r){return Fc(r),this.on(t,cp(this,t,r)),this},Vt.prototype.prependOnceListener=function(t,r){return Fc(r),this.prependListener(t,cp(this,t,r)),this},Vt.prototype.removeListener=function(t,r){var n,s,i,o,a;if(Fc(r),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():cE(n,i),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,a||r)}return this},Vt.prototype.off=Vt.prototype.removeListener,Vt.prototype.removeAllListeners=function(t){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(t,r[s]);return this};function fp(e,t,r){var n=e._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?fE(s):lp(s,s.length)}Vt.prototype.listeners=function(t){return fp(this,t,!0)},Vt.prototype.rawListeners=function(t){return fp(this,t,!1)},Vt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):up.call(e,t)},Vt.prototype.listenerCount=up;function up(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Vt.prototype.eventNames=function(){return this._eventsCount>0?Uc(this._events):[]};function lp(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function cE(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function fE(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function uE(e,t){return new Promise(function(r,n){function s(o){e.removeListener(t,i),n(o)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}hp(e,t,i,{once:!0}),t!=="error"&&lE(e,s,{once:!0})})}function lE(e,t,r){typeof e.on=="function"&&hp(e,"error",t,r)}function hp(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(i){n.once&&e.removeEventListener(t,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}const va={PROMISES:"PROMISES",CALLBACK:"CALLBACK"};class Hc{static isCallbackAdapterRequest(t){return t.id!==void 0}constructor(t){this.setStrategy(t)}setHandler(t){return this.handler=t,this}request(t,r){if(!this.handler)throw new Error("No handler defined for Adapter");return Hc.isCallbackAdapterRequest(t)?this.handler({network:r,id:t.id,name:t.method,params:t.params,object:t.params}):this.handler({name:t.method,network:r,params:t.params,object:t.params})}setStrategy(t){return this.strategy=t,this}getStrategy(){return this.strategy}}var hE=Object.defineProperty,dE=Object.defineProperties,pE=Object.getOwnPropertyDescriptors,dp=Object.getOwnPropertySymbols,gE=Object.prototype.hasOwnProperty,yE=Object.prototype.propertyIsEnumerable,pp=(e,t,r)=>t in e?hE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wE=(e,t)=>{for(var r in t||(t={}))gE.call(t,r)&&pp(e,r,t[r]);if(dp)for(var r of dp(t))yE.call(t,r)&&pp(e,r,t[r]);return e},mE=(e,t)=>dE(e,pE(t));class bE extends Hc{constructor(){super(va.CALLBACK),this.callback=new Map}async request(t,r){return new Promise((n,s)=>{const i=new Date().getTime()+Math.floor(Math.random()*1e3);this.callback.set(i.toString(),{reject:s,resolve:n}),super.request(mE(wE({},t),{id:i}),r)})}sendResponse(t,r){if(this.callback.has(t.toString())){const n=this.callback.get(t.toString());this.callback.delete(t.toString()),n?.resolve(r)}else console.error(`Unable to find callback for requestId: ${t}`)}sendError(t,r){if(this.callback.has(t.toString())){const n=this.callback.get(t.toString());this.callback.delete(t.toString()),n?.reject(r)}else console.error(`Unable to find callback for requestId: ${t}`)}}class vE extends Hc{constructor(){super(va.PROMISES)}request(t,r){return super.request(t,r)}}class jc extends On.exports.EventEmitter{setAdapter(t){return this.adapter=t,this}async request(t){try{if(!this.adapter)throw new Error("No adapter set, maybe you forgot to register the provider?");const r=await this.adapter.request(t,this.getNetwork());return this.emit("onResponseReady",t,r),r}catch(r){throw r}}sendResponse(t,r){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==va.CALLBACK)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendResponse(t,r)}sendError(t,r){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==va.CALLBACK)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendError(t,r)}}class _E{constructor(t){const r=t.strategy===va.CALLBACK?new bE:new vE;t.handler&&r.setHandler(t.handler),this.setAdapter(r)}setHandler(t){this.adapter.setHandler(t)}setAdapter(t){return this.adapter=t,this}registerProvider(t){return t.setAdapter(this.adapter),this}registerProviders(t){return t.forEach(r=>this.registerProvider(r)),this}sendResponse(t,r){this.adapter.getStrategy()==="CALLBACK"&&this.adapter.sendResponse(t,r)}sendError(t,r){this.adapter.getStrategy()==="CALLBACK"&&this.adapter.sendError(t,r)}}function gp(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function EE(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Dc(e,...t){if(!EE(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function xE(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");gp(e.outputLen),gp(e.blockLen)}function zc(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function SE(e,t){Dc(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const go=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yl=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),oi=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function AE(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function wl(e){return typeof e=="string"&&(e=AE(e)),Dc(e),e}function BE(...e){let t=0;for(let n=0;n<e.length;n++){const s=e[n];Dc(s),t+=s.length}const r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){const i=e[n];r.set(i,s),s+=i.length}return r}class yp{clone(){return this._cloneInto()}}function wp(e){const t=n=>e().update(wl(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function mp(e=32){if(go&&typeof go.getRandomValues=="function")return go.getRandomValues(new Uint8Array(e));if(go&&typeof go.randomBytes=="function")return go.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function IE(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),f=n?4:0,u=n?0:4;e.setUint32(t+f,o,n),e.setUint32(t+u,a,n)}const TE=(e,t,r)=>e&t^~e&r,RE=(e,t,r)=>e&t^e&r^t&r;class bp extends yp{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=yl(this.buffer)}update(t){zc(this);const{view:r,buffer:n,blockLen:s}=this;t=wl(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const f=yl(t);for(;s<=i-o;o+=s)this.process(f,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){zc(this),SE(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let p=o;p<s;p++)r[p]=0;IE(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=yl(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=f/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<u;p++)a.setUint32(4*p,l[p],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%r&&t.buffer.set(n),t}}const qc=BigInt(2**32-1),ml=BigInt(32);function vp(e,t=!1){return t?{h:Number(e&qc),l:Number(e>>ml&qc)}:{h:Number(e>>ml&qc)|0,l:Number(e&qc)|0}}function kE(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=vp(e[s],t);[r[s],n[s]]=[i,o]}return[r,n]}const LE=(e,t)=>BigInt(e>>>0)<<ml|BigInt(t>>>0),CE=(e,t,r)=>e>>>r,OE=(e,t,r)=>e<<32-r|t>>>r,$E=(e,t,r)=>e>>>r|t<<32-r,ME=(e,t,r)=>e<<32-r|t>>>r,NE=(e,t,r)=>e<<64-r|t>>>r-32,PE=(e,t,r)=>e>>>r-32|t<<64-r,UE=(e,t)=>t,FE=(e,t)=>e,HE=(e,t,r)=>e<<r|t>>>32-r,jE=(e,t,r)=>t<<r|e>>>32-r,DE=(e,t,r)=>t<<r-32|e>>>64-r,zE=(e,t,r)=>e<<r-32|t>>>64-r;function qE(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:s|0}}const mt={fromBig:vp,split:kE,toBig:LE,shrSH:CE,shrSL:OE,rotrSH:$E,rotrSL:ME,rotrBH:NE,rotrBL:PE,rotr32H:UE,rotr32L:FE,rotlSH:HE,rotlSL:jE,rotlBH:DE,rotlBL:zE,add:qE,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0,add5H:(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0,add5L:(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0)},[VE,KE]=(()=>mt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),Zi=new Uint32Array(80),Gi=new Uint32Array(80);class WE extends bp{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:f,Eh:u,El:l,Fh:p,Fl:_,Gh:b,Gl:T,Hh:P,Hl:$}=this;return[t,r,n,s,i,o,a,f,u,l,p,_,b,T,P,$]}set(t,r,n,s,i,o,a,f,u,l,p,_,b,T,P,$){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=f|0,this.Eh=u|0,this.El=l|0,this.Fh=p|0,this.Fl=_|0,this.Gh=b|0,this.Gl=T|0,this.Hh=P|0,this.Hl=$|0}process(t,r){for(let k=0;k<16;k++,r+=4)Zi[k]=t.getUint32(r),Gi[k]=t.getUint32(r+=4);for(let k=16;k<80;k++){const C=Zi[k-15]|0,X=Gi[k-15]|0,Q=mt.rotrSH(C,X,1)^mt.rotrSH(C,X,8)^mt.shrSH(C,X,7),Z=mt.rotrSL(C,X,1)^mt.rotrSL(C,X,8)^mt.shrSL(C,X,7),z=Zi[k-2]|0,G=Gi[k-2]|0,D=mt.rotrSH(z,G,19)^mt.rotrBH(z,G,61)^mt.shrSH(z,G,6),V=mt.rotrSL(z,G,19)^mt.rotrBL(z,G,61)^mt.shrSL(z,G,6),m=mt.add4L(Z,V,Gi[k-7],Gi[k-16]),d=mt.add4H(m,Q,D,Zi[k-7],Zi[k-16]);Zi[k]=d|0,Gi[k]=m|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:f,Dh:u,Dl:l,Eh:p,El:_,Fh:b,Fl:T,Gh:P,Gl:$,Hh:j,Hl:F}=this;for(let k=0;k<80;k++){const C=mt.rotrSH(p,_,14)^mt.rotrSH(p,_,18)^mt.rotrBH(p,_,41),X=mt.rotrSL(p,_,14)^mt.rotrSL(p,_,18)^mt.rotrBL(p,_,41),Q=p&b^~p&P,Z=_&T^~_&$,z=mt.add5L(F,X,Z,KE[k],Gi[k]),G=mt.add5H(z,j,C,Q,VE[k],Zi[k]),D=z|0,V=mt.rotrSH(n,s,28)^mt.rotrBH(n,s,34)^mt.rotrBH(n,s,39),m=mt.rotrSL(n,s,28)^mt.rotrBL(n,s,34)^mt.rotrBL(n,s,39),d=n&i^n&a^i&a,c=s&o^s&f^o&f;j=P|0,F=$|0,P=b|0,$=T|0,b=p|0,T=_|0,{h:p,l:_}=mt.add(u|0,l|0,G|0,D|0),u=a|0,l=f|0,a=i|0,f=o|0,i=n|0,o=s|0;const h=mt.add3L(D,m,c);n=mt.add3H(h,G,V,d),s=h|0}({h:n,l:s}=mt.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=mt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:f}=mt.add(this.Ch|0,this.Cl|0,a|0,f|0),{h:u,l}=mt.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:p,l:_}=mt.add(this.Eh|0,this.El|0,p|0,_|0),{h:b,l:T}=mt.add(this.Fh|0,this.Fl|0,b|0,T|0),{h:P,l:$}=mt.add(this.Gh|0,this.Gl|0,P|0,$|0),{h:j,l:F}=mt.add(this.Hh|0,this.Hl|0,j|0,F|0),this.set(n,s,i,o,a,f,u,l,p,_,b,T,P,$,j,F)}roundClean(){Zi.fill(0),Gi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ZE=wp(()=>new WE);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bl=BigInt(0),Vc=BigInt(1),GE=BigInt(2);function Os(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function _a(e){if(!Os(e))throw new Error("Uint8Array expected")}function Ai(e,t){if(typeof t!="boolean")throw new Error(`${e} must be valid boolean, got "${t}".`)}const YE=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $s(e){_a(e);let t="";for(let r=0;r<e.length;r++)t+=YE[e[r]];return t}function yo(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function vl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const Bi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function _p(e){if(e>=Bi._0&&e<=Bi._9)return e-Bi._0;if(e>=Bi._A&&e<=Bi._F)return e-(Bi._A-10);if(e>=Bi._a&&e<=Bi._f)return e-(Bi._a-10)}function wo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=_p(e.charCodeAt(i)),a=_p(e.charCodeAt(i+1));if(o===void 0||a===void 0){const f=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}n[s]=o*16+a}return n}function Ms(e){return vl($s(e))}function mo(e){return _a(e),vl($s(Uint8Array.from(e).reverse()))}function bo(e,t){return wo(e.toString(16).padStart(t*2,"0"))}function Ea(e,t){return bo(e,t).reverse()}function XE(e){return wo(yo(e))}function Br(e,t,r){let n;if(typeof t=="string")try{n=wo(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Os(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${e} expected ${r} bytes, got ${s}`);return n}function Ns(...e){let t=0;for(let n=0;n<e.length;n++){const s=e[n];_a(s),t+=s.length}const r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){const i=e[n];r.set(i,s),s+=i.length}return r}function JE(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function QE(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}const _l=e=>typeof e=="bigint"&&bl<=e;function Kc(e,t,r){return _l(e)&&_l(t)&&_l(r)&&t<=e&&e<r}function $n(e,t,r,n){if(!Kc(t,r,n))throw new Error(`expected valid ${e}: ${r} <= n < ${n}, got ${typeof t} ${t}`)}function Ep(e){let t;for(t=0;e>bl;e>>=Vc,t+=1);return t}function ex(e,t){return e>>BigInt(t)&Vc}function tx(e,t,r){return e|(r?Vc:bl)<<BigInt(t)}const El=e=>(GE<<BigInt(e-1))-Vc,xl=e=>new Uint8Array(e),xp=e=>Uint8Array.from(e);function Sp(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=xl(e),s=xl(e),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...p)=>r(s,n,...p),f=(p=xl())=>{s=a(xp([0]),p),n=a(),p.length!==0&&(s=a(xp([1]),p),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const _=[];for(;p<t;){n=a();const b=n.slice();_.push(b),p+=n.length}return Ns(..._)};return(p,_)=>{o(),f(p);let b;for(;!(b=_(u()));)f();return o(),b}}const rx={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Os(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function vo(e,t,r={}){const n=(s,i,o)=>{const a=rx[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const f=e[s];if(!(o&&f===void 0)&&!a(f,e))throw new Error(`Invalid param ${String(s)}=${f} (${typeof f}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return e}const nx=()=>{throw new Error("not implemented")};function xa(e){const t=new WeakMap;return(r,...n)=>{const s=t.get(r);if(s!==void 0)return s;const i=e(r,...n);return t.set(r,i),i}}var ix=Object.freeze({__proto__:null,isBytes:Os,abytes:_a,abool:Ai,bytesToHex:$s,numberToHexUnpadded:yo,hexToNumber:vl,hexToBytes:wo,bytesToNumberBE:Ms,bytesToNumberLE:mo,numberToBytesBE:bo,numberToBytesLE:Ea,numberToVarBytesBE:XE,ensureBytes:Br,concatBytes:Ns,equalBytes:JE,utf8ToBytes:QE,inRange:Kc,aInRange:$n,bitLen:Ep,bitGet:ex,bitSet:tx,bitMask:El,createHmacDrbg:Sp,validateObject:vo,notImplemented:nx,memoized:xa});/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Or=BigInt(0),ur=BigInt(1),Ps=BigInt(2),sx=BigInt(3),Sl=BigInt(4),Ap=BigInt(5),Bp=BigInt(8);BigInt(9),BigInt(16);function nr(e,t){const r=e%t;return r>=Or?r:t+r}function ox(e,t,r){if(r<=Or||t<Or)throw new Error("Expected power/modulo > 0");if(r===ur)return Or;let n=ur;for(;t>Or;)t&ur&&(n=n*e%r),e=e*e%r,t>>=ur;return n}function yr(e,t,r){let n=e;for(;t-- >Or;)n*=n,n%=r;return n}function Al(e,t){if(e===Or||t<=Or)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=nr(e,t),n=t,s=Or,i=ur;for(;r!==Or;){const a=n/r,f=n%r,u=s-i*a;n=r,r=f,s=i,i=u}if(n!==ur)throw new Error("invert: does not exist");return nr(s,t)}function ax(e){const t=(e-ur)/Ps;let r,n,s;for(r=e-ur,n=0;r%Ps===Or;r/=Ps,n++);for(s=Ps;s<e&&ox(s,t,e)!==e-ur;s++);if(n===1){const o=(e+ur)/Sl;return function(f,u){const l=f.pow(u,o);if(!f.eql(f.sqr(l),u))throw new Error("Cannot find square root");return l}}const i=(r+ur)/Ps;return function(a,f){if(a.pow(f,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,l=a.pow(a.mul(a.ONE,s),r),p=a.pow(f,i),_=a.pow(f,r);for(;!a.eql(_,a.ONE);){if(a.eql(_,a.ZERO))return a.ZERO;let b=1;for(let P=a.sqr(_);b<u&&!a.eql(P,a.ONE);b++)P=a.sqr(P);const T=a.pow(l,ur<<BigInt(u-b-1));l=a.sqr(T),p=a.mul(p,T),_=a.mul(_,l),u=b}return p}}function cx(e){if(e%Sl===sx){const t=(e+ur)/Sl;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(e%Bp===Ap){const t=(e-Ap)/Bp;return function(n,s){const i=n.mul(s,Ps),o=n.pow(i,t),a=n.mul(s,o),f=n.mul(n.mul(a,Ps),o),u=n.mul(a,n.sub(f,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return ax(e)}const fx=(e,t)=>(nr(e,t)&ur)===ur,ux=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lx(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=ux.reduce((n,s)=>(n[s]="function",n),t);return vo(e,r)}function hx(e,t,r){if(r<Or)throw new Error("Expected power > 0");if(r===Or)return e.ONE;if(r===ur)return t;let n=e.ONE,s=t;for(;r>Or;)r&ur&&(n=e.mul(n,s)),s=e.sqr(s),r>>=ur;return n}function dx(e,t){const r=new Array(t.length),n=t.reduce((i,o,a)=>e.is0(o)?i:(r[a]=i,e.mul(i,o)),e.ONE),s=e.inv(n);return t.reduceRight((i,o,a)=>e.is0(o)?i:(r[a]=e.mul(i,r[a]),e.mul(i,o)),s),r}function Ip(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Wc(e,t,r=!1,n={}){if(e<=Or)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:i}=Ip(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=cx(e),a=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:El(s),ZERO:Or,ONE:ur,create:f=>nr(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return Or<=f&&f<e},is0:f=>f===Or,isOdd:f=>(f&ur)===ur,neg:f=>nr(-f,e),eql:(f,u)=>f===u,sqr:f=>nr(f*f,e),add:(f,u)=>nr(f+u,e),sub:(f,u)=>nr(f-u,e),mul:(f,u)=>nr(f*u,e),pow:(f,u)=>hx(a,f,u),div:(f,u)=>nr(f*Al(u,e),e),sqrN:f=>f*f,addN:(f,u)=>f+u,subN:(f,u)=>f-u,mulN:(f,u)=>f*u,inv:f=>Al(f,e),sqrt:n.sqrt||(f=>o(a,f)),invertBatch:f=>dx(a,f),cmov:(f,u,l)=>l?u:f,toBytes:f=>r?Ea(f,i):bo(f,i),fromBytes:f=>{if(f.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${f.length}`);return r?mo(f):Ms(f)}});return Object.freeze(a)}function Tp(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Rp(e){const t=Tp(e);return t+Math.ceil(t/2)}function px(e,t,r=!1){const n=e.length,s=Tp(t),i=Rp(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=r?Ms(e):mo(e),a=nr(o,t-ur)+ur;return r?Ea(a,s):bo(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gx=BigInt(0),Bl=BigInt(1),Il=new WeakMap,kp=new WeakMap;function Lp(e,t){const r=(i,o)=>{const a=o.negate();return i?a:o},n=i=>{if(!Number.isSafeInteger(i)||i<=0||i>t)throw new Error(`Wrong window size=${i}, should be [1..${t}]`)},s=i=>{n(i);const o=Math.ceil(t/i)+1,a=2**(i-1);return{windows:o,windowSize:a}};return{constTimeNegate:r,unsafeLadder(i,o){let a=e.ZERO,f=i;for(;o>gx;)o&Bl&&(a=a.add(f)),f=f.double(),o>>=Bl;return a},precomputeWindow(i,o){const{windows:a,windowSize:f}=s(o),u=[];let l=i,p=l;for(let _=0;_<a;_++){p=l,u.push(p);for(let b=1;b<f;b++)p=p.add(l),u.push(p);l=p.double()}return u},wNAF(i,o,a){const{windows:f,windowSize:u}=s(i);let l=e.ZERO,p=e.BASE;const _=BigInt(2**i-1),b=2**i,T=BigInt(i);for(let P=0;P<f;P++){const $=P*u;let j=Number(a&_);a>>=T,j>u&&(j-=b,a+=Bl);const F=$,k=$+Math.abs(j)-1,C=P%2!==0,X=j<0;j===0?p=p.add(r(C,o[F])):l=l.add(r(X,o[k]))}return{p:l,f:p}},wNAFCached(i,o,a){const f=kp.get(i)||1;let u=Il.get(i);return u||(u=this.precomputeWindow(i,f),f!==1&&Il.set(i,a(u))),this.wNAF(f,u,o)},setWindowSize(i,o){n(o),kp.set(i,o),Il.delete(i)}}}function Cp(e,t,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((l,p)=>{if(!t.isValid(l))throw new Error(`wrong scalar at index ${p}`)}),r.forEach((l,p)=>{if(!(l instanceof e))throw new Error(`wrong point at index ${p}`)});const s=Ep(BigInt(r.length)),i=s>12?s-3:s>4?s-2:s?2:1,o=(1<<i)-1,a=new Array(o+1).fill(e.ZERO),f=Math.floor((t.BITS-1)/i)*i;let u=e.ZERO;for(let l=f;l>=0;l-=i){a.fill(e.ZERO);for(let _=0;_<n.length;_++){const b=n[_],T=Number(b>>BigInt(l)&BigInt(o));a[T]=a[T].add(r[_])}let p=e.ZERO;for(let _=a.length-1,b=e.ZERO;_>0;_--)b=b.add(a[_]),p=p.add(b);if(u=u.add(p),l!==0)for(let _=0;_<i;_++)u=u.double()}return u}function Tl(e){return lx(e.Fp),vo(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ip(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vn=BigInt(0),dn=BigInt(1),Zc=BigInt(2),yx=BigInt(8),wx={zip215:!0};function mx(e){const t=Tl(e);return vo(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function bx(e){const t=mx(e),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:f}=t,u=Zc<<BigInt(a*8)-dn,l=r.create,p=Wc(t.n,t.nBitLength),_=t.uvRatio||((y,v)=>{try{return{isValid:!0,value:r.sqrt(y*r.inv(v))}}catch{return{isValid:!1,value:Vn}}}),b=t.adjustScalarBytes||(y=>y),T=t.domain||((y,v,S)=>{if(Ai("phflag",S),v.length||S)throw new Error("Contexts/pre-hash are not supported");return y});function P(y,v){$n("coordinate "+y,v,Vn,u)}function $(y){if(!(y instanceof k))throw new Error("ExtendedPoint expected")}const j=xa((y,v)=>{const{ex:S,ey:B,ez:L}=y,I=y.is0();v==null&&(v=I?yx:r.inv(L));const w=l(S*v),R=l(B*v),Y=l(L*v);if(I)return{x:Vn,y:dn};if(Y!==dn)throw new Error("invZ was invalid");return{x:w,y:R}}),F=xa(y=>{const{a:v,d:S}=t;if(y.is0())throw new Error("bad point: ZERO");const{ex:B,ey:L,ez:I,et:w}=y,R=l(B*B),Y=l(L*L),K=l(I*I),ne=l(K*K),Re=l(R*v),ge=l(K*l(Re+Y)),ye=l(ne+l(S*l(R*Y)));if(ge!==ye)throw new Error("bad point: equation left != right (1)");const Ye=l(B*L),Me=l(I*w);if(Ye!==Me)throw new Error("bad point: equation left != right (2)");return!0});class k{constructor(v,S,B,L){this.ex=v,this.ey=S,this.ez=B,this.et=L,P("x",v),P("y",S),P("z",B),P("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(v){if(v instanceof k)throw new Error("extended point not allowed");const{x:S,y:B}=v||{};return P("x",S),P("y",B),new k(S,B,dn,l(S*B))}static normalizeZ(v){const S=r.invertBatch(v.map(B=>B.ez));return v.map((B,L)=>B.toAffine(S[L])).map(k.fromAffine)}static msm(v,S){return Cp(k,p,v,S)}_setWindowSize(v){Q.setWindowSize(this,v)}assertValidity(){F(this)}equals(v){$(v);const{ex:S,ey:B,ez:L}=this,{ex:I,ey:w,ez:R}=v,Y=l(S*R),K=l(I*L),ne=l(B*R),Re=l(w*L);return Y===K&&ne===Re}is0(){return this.equals(k.ZERO)}negate(){return new k(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:v}=t,{ex:S,ey:B,ez:L}=this,I=l(S*S),w=l(B*B),R=l(Zc*l(L*L)),Y=l(v*I),K=S+B,ne=l(l(K*K)-I-w),Re=Y+w,ge=Re-R,ye=Y-w,Ye=l(ne*ge),Me=l(Re*ye),He=l(ne*ye),we=l(ge*Re);return new k(Ye,Me,we,He)}add(v){$(v);const{a:S,d:B}=t,{ex:L,ey:I,ez:w,et:R}=this,{ex:Y,ey:K,ez:ne,et:Re}=v;if(S===BigInt(-1)){const ft=l((I-L)*(K+Y)),pt=l((I+L)*(K-Y)),Ft=l(pt-ft);if(Ft===Vn)return this.double();const Et=l(w*Zc*Re),It=l(R*Zc*ne),Zt=It+Et,Tt=pt+ft,O=It-Et,E=l(Zt*Ft),x=l(Tt*O),H=l(Zt*O),W=l(Ft*Tt);return new k(E,x,W,H)}const ge=l(L*Y),ye=l(I*K),Ye=l(R*B*Re),Me=l(w*ne),He=l((L+I)*(Y+K)-ge-ye),we=Me-Ye,me=Me+Ye,ke=l(ye-S*ge),Bt=l(He*we),De=l(me*ke),st=l(He*ke),Ut=l(we*me);return new k(Bt,De,Ut,st)}subtract(v){return this.add(v.negate())}wNAF(v){return Q.wNAFCached(this,v,k.normalizeZ)}multiply(v){const S=v;$n("scalar",S,dn,n);const{p:B,f:L}=this.wNAF(S);return k.normalizeZ([B,L])[0]}multiplyUnsafe(v){const S=v;return $n("scalar",S,Vn,n),S===Vn?X:this.equals(X)||S===dn?this:this.equals(C)?this.wNAF(S).p:Q.unsafeLadder(this,S)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return Q.unsafeLadder(this,n).is0()}toAffine(v){return j(this,v)}clearCofactor(){const{h:v}=t;return v===dn?this:this.multiplyUnsafe(v)}static fromHex(v,S=!1){const{d:B,a:L}=t,I=r.BYTES;v=Br("pointHex",v,I),Ai("zip215",S);const w=v.slice(),R=v[I-1];w[I-1]=R&-129;const Y=mo(w),K=S?u:r.ORDER;$n("pointHex.y",Y,Vn,K);const ne=l(Y*Y),Re=l(ne-dn),ge=l(B*ne-L);let{isValid:ye,value:Ye}=_(Re,ge);if(!ye)throw new Error("Point.fromHex: invalid y coordinate");const Me=(Ye&dn)===dn,He=(R&128)!==0;if(!S&&Ye===Vn&&He)throw new Error("Point.fromHex: x=0 and x_0=1");return He!==Me&&(Ye=l(-Ye)),k.fromAffine({x:Ye,y:Y})}static fromPrivateKey(v){return G(v).point}toRawBytes(){const{x:v,y:S}=this.toAffine(),B=Ea(S,r.BYTES);return B[B.length-1]|=v&dn?128:0,B}toHex(){return $s(this.toRawBytes())}}k.BASE=new k(t.Gx,t.Gy,dn,l(t.Gx*t.Gy)),k.ZERO=new k(Vn,dn,dn,Vn);const{BASE:C,ZERO:X}=k,Q=Lp(k,a*8);function Z(y){return nr(y,n)}function z(y){return Z(mo(y))}function G(y){const v=a;y=Br("private key",y,v);const S=Br("hashed private key",i(y),2*v),B=b(S.slice(0,v)),L=S.slice(v,2*v),I=z(B),w=C.multiply(I),R=w.toRawBytes();return{head:B,prefix:L,scalar:I,point:w,pointBytes:R}}function D(y){return G(y).pointBytes}function V(y=new Uint8Array,...v){const S=Ns(...v);return z(i(T(S,Br("context",y),!!s)))}function m(y,v,S={}){y=Br("message",y),s&&(y=s(y));const{prefix:B,scalar:L,pointBytes:I}=G(v),w=V(S.context,B,y),R=C.multiply(w).toRawBytes(),Y=V(S.context,R,I,y),K=Z(w+Y*L);$n("signature.s",K,Vn,n);const ne=Ns(R,Ea(K,r.BYTES));return Br("result",ne,a*2)}const d=wx;function c(y,v,S,B=d){const{context:L,zip215:I}=B,w=r.BYTES;y=Br("signature",y,2*w),v=Br("message",v),I!==void 0&&Ai("zip215",I),s&&(v=s(v));const R=mo(y.slice(w,2*w));let Y,K,ne;try{Y=k.fromHex(S,I),K=k.fromHex(y.slice(0,w),I),ne=C.multiplyUnsafe(R)}catch{return!1}if(!I&&Y.isSmallOrder())return!1;const Re=V(L,K.toRawBytes(),Y.toRawBytes(),v);return K.add(Y.multiplyUnsafe(Re)).subtract(ne).clearCofactor().equals(k.ZERO)}return C._setWindowSize(8),{CURVE:t,getPublicKey:D,sign:m,verify:c,ExtendedPoint:k,utils:{getExtendedPublicKey:G,randomPrivateKey:()=>o(r.BYTES),precompute(y=8,v=k.BASE){return v._setWindowSize(y),v.multiply(BigInt(3)),v}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0),BigInt(1);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rl=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Op=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const vx=BigInt(1),$p=BigInt(2);BigInt(3);const _x=BigInt(5),Ex=BigInt(8);function xx(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Rl,a=e*e%i*e%i,f=yr(a,$p,i)*a%i,u=yr(f,vx,i)*e%i,l=yr(u,_x,i)*u%i,p=yr(l,t,i)*l%i,_=yr(p,r,i)*p%i,b=yr(_,n,i)*_%i,T=yr(b,s,i)*b%i,P=yr(T,s,i)*b%i,$=yr(P,t,i)*l%i;return{pow_p_5_8:yr($,$p,i)*e%i,b2:a}}function Sx(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Ax(e,t){const r=Rl,n=nr(t*t*t,r),s=nr(n*n*t,r),i=xx(e*s).pow_p_5_8;let o=nr(e*n*i,r);const a=nr(t*o*o,r),f=o,u=nr(o*Op,r),l=a===e,p=a===nr(-e,r),_=a===nr(-e*Op,r);return l&&(o=f),(p||_)&&(o=u),fx(o,r)&&(o=nr(-o,r)),{isValid:l||p,value:o}}const Bx=(()=>Wc(Rl,void 0,!0))(),Ix=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Bx,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ex,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ZE,randomBytes:mp,adjustScalarBytes:Sx,uvRatio:Ax}))(),Gc=(()=>bx(Ix))();var kl={exports:{}},Tx={},Rx=Object.freeze({__proto__:null,default:Tx}),Mp=ii(Rx);(function(e){(function(t,r){function n(d,c){if(!d)throw new Error(c||"Assertion failed")}function s(d,c){d.super_=c;var h=function(){};h.prototype=c.prototype,d.prototype=new h,d.prototype.constructor=d}function i(d,c,h){if(i.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((c==="le"||c==="be")&&(h=c,c=10),this._init(d||0,c||10,h||"be"))}typeof t=="object"?t.exports=i:r.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Mp.Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,h){return c.cmp(h)>0?c:h},i.min=function(c,h){return c.cmp(h)<0?c:h},i.prototype._init=function(c,h,y){if(typeof c=="number")return this._initNumber(c,h,y);if(typeof c=="object")return this._initArray(c,h,y);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),c=c.toString().replace(/\s+/g,"");var v=0;c[0]==="-"&&(v++,this.negative=1),v<c.length&&(h===16?this._parseHex(c,v,y):(this._parseBase(c,h,v),y==="le"&&this._initArray(this.toArray(),h,y)))},i.prototype._initNumber=function(c,h,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),h,y)},i.prototype._initArray=function(c,h,y){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S,B,L=0;if(y==="be")for(v=c.length-1,S=0;v>=0;v-=3)B=c[v]|c[v-1]<<8|c[v-2]<<16,this.words[S]|=B<<L&67108863,this.words[S+1]=B>>>26-L&67108863,L+=24,L>=26&&(L-=26,S++);else if(y==="le")for(v=0,S=0;v<c.length;v+=3)B=c[v]|c[v+1]<<8|c[v+2]<<16,this.words[S]|=B<<L&67108863,this.words[S+1]=B>>>26-L&67108863,L+=24,L>=26&&(L-=26,S++);return this._strip()};function a(d,c){var h=d.charCodeAt(c);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;n(!1,"Invalid character in "+d)}function f(d,c,h){var y=a(d,h);return h-1>=c&&(y|=a(d,h-1)<<4),y}i.prototype._parseHex=function(c,h,y){this.length=Math.ceil((c.length-h)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S=0,B=0,L;if(y==="be")for(v=c.length-1;v>=h;v-=2)L=f(c,h,v)<<S,this.words[B]|=L&67108863,S>=18?(S-=18,B+=1,this.words[B]|=L>>>26):S+=8;else{var I=c.length-h;for(v=I%2===0?h+1:h;v<c.length;v+=2)L=f(c,h,v)<<S,this.words[B]|=L&67108863,S>=18?(S-=18,B+=1,this.words[B]|=L>>>26):S+=8}this._strip()};function u(d,c,h,y){for(var v=0,S=0,B=Math.min(d.length,h),L=c;L<B;L++){var I=d.charCodeAt(L)-48;v*=y,I>=49?S=I-49+10:I>=17?S=I-17+10:S=I,n(I>=0&&S<y,"Invalid character"),v+=S}return v}i.prototype._parseBase=function(c,h,y){this.words=[0],this.length=1;for(var v=0,S=1;S<=67108863;S*=h)v++;v--,S=S/h|0;for(var B=c.length-y,L=B%v,I=Math.min(B,B-L)+y,w=0,R=y;R<I;R+=v)w=u(c,R,R+v,h),this.imuln(S),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w);if(L!==0){var Y=1;for(w=u(c,R,c.length,h),R=0;R<L;R++)Y*=h;this.imuln(Y),this.words[0]+w<67108864?this.words[0]+=w:this._iaddn(w)}this._strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var h=0;h<this.length;h++)c.words[h]=this.words[h];c.length=this.length,c.negative=this.negative,c.red=this.red};function l(d,c){d.words=c.words,d.length=c.length,d.negative=c.negative,d.red=c.red}if(i.prototype._move=function(c){l(c,this)},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{i.prototype.inspect=p}else i.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,h){c=c||10,h=h|0||1;var y;if(c===16||c==="hex"){y="";for(var v=0,S=0,B=0;B<this.length;B++){var L=this.words[B],I=((L<<v|S)&16777215).toString(16);S=L>>>24-v&16777215,v+=2,v>=26&&(v-=26,B--),S!==0||B!==this.length-1?y=_[6-I.length]+I+y:y=I+y}for(S!==0&&(y=S.toString(16)+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var w=b[c],R=T[c];y="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var K=Y.modrn(R).toString(c);Y=Y.idivn(R),Y.isZero()?y=K+y:y=_[w-K.length]+K+y}for(this.isZero()&&(y="0"+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(c,h){return this.toArrayLike(o,c,h)}),i.prototype.toArray=function(c,h){return this.toArrayLike(Array,c,h)};var P=function(c,h){return c.allocUnsafe?c.allocUnsafe(h):new c(h)};i.prototype.toArrayLike=function(c,h,y){this._strip();var v=this.byteLength(),S=y||Math.max(1,v);n(v<=S,"byte array longer than desired length"),n(S>0,"Requested array length <= 0");var B=P(c,S),L=h==="le"?"LE":"BE";return this["_toArrayLike"+L](B,v),B},i.prototype._toArrayLikeLE=function(c,h){for(var y=0,v=0,S=0,B=0;S<this.length;S++){var L=this.words[S]<<B|v;c[y++]=L&255,y<c.length&&(c[y++]=L>>8&255),y<c.length&&(c[y++]=L>>16&255),B===6?(y<c.length&&(c[y++]=L>>24&255),v=0,B=0):(v=L>>>24,B+=2)}if(y<c.length)for(c[y++]=v;y<c.length;)c[y++]=0},i.prototype._toArrayLikeBE=function(c,h){for(var y=c.length-1,v=0,S=0,B=0;S<this.length;S++){var L=this.words[S]<<B|v;c[y--]=L&255,y>=0&&(c[y--]=L>>8&255),y>=0&&(c[y--]=L>>16&255),B===6?(y>=0&&(c[y--]=L>>24&255),v=0,B=0):(v=L>>>24,B+=2)}if(y>=0)for(c[y--]=v;y>=0;)c[y--]=0},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var h=c,y=0;return h>=4096&&(y+=13,h>>>=13),h>=64&&(y+=7,h>>>=7),h>=8&&(y+=4,h>>>=4),h>=2&&(y+=2,h>>>=2),y+h},i.prototype._zeroBits=function(c){if(c===0)return 26;var h=c,y=0;return h&8191||(y+=13,h>>>=13),h&127||(y+=7,h>>>=7),h&15||(y+=4,h>>>=4),h&3||(y+=2,h>>>=2),h&1||y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],h=this._countBits(c);return(this.length-1)*26+h};function $(d){for(var c=new Array(d.bitLength()),h=0;h<c.length;h++){var y=h/26|0,v=h%26;c[h]=d.words[y]>>>v&1}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,h=0;h<this.length;h++){var y=this._zeroBits(this.words[h]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]|c.words[h];return this._strip()},i.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var h;this.length>c.length?h=c:h=this;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=h.length,this._strip()},i.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var h,y;this.length>c.length?(h=this,y=c):(h=c,y=this);for(var v=0;v<y.length;v++)this.words[v]=h.words[v]^y.words[v];if(this!==h)for(;v<h.length;v++)this.words[v]=h.words[v];return this.length=h.length,this._strip()},i.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var h=Math.ceil(c/26)|0,y=c%26;this._expand(h),y>0&&h--;for(var v=0;v<h;v++)this.words[v]=~this.words[v]&67108863;return y>0&&(this.words[v]=~this.words[v]&67108863>>26-y),this._strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,h){n(typeof c=="number"&&c>=0);var y=c/26|0,v=c%26;return this._expand(y+1),h?this.words[y]=this.words[y]|1<<v:this.words[y]=this.words[y]&~(1<<v),this._strip()},i.prototype.iadd=function(c){var h;if(this.negative!==0&&c.negative===0)return this.negative=0,h=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,h=this.isub(c),c.negative=1,h._normSign();var y,v;this.length>c.length?(y=this,v=c):(y=c,v=this);for(var S=0,B=0;B<v.length;B++)h=(y.words[B]|0)+(v.words[B]|0)+S,this.words[B]=h&67108863,S=h>>>26;for(;S!==0&&B<y.length;B++)h=(y.words[B]|0)+S,this.words[B]=h&67108863,S=h>>>26;if(this.length=y.length,S!==0)this.words[this.length]=S,this.length++;else if(y!==this)for(;B<y.length;B++)this.words[B]=y.words[B];return this},i.prototype.add=function(c){var h;return c.negative!==0&&this.negative===0?(c.negative=0,h=this.sub(c),c.negative^=1,h):c.negative===0&&this.negative!==0?(this.negative=0,h=c.sub(this),this.negative=1,h):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var h=this.iadd(c);return c.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,S;y>0?(v=this,S=c):(v=c,S=this);for(var B=0,L=0;L<S.length;L++)h=(v.words[L]|0)-(S.words[L]|0)+B,B=h>>26,this.words[L]=h&67108863;for(;B!==0&&L<v.length;L++)h=(v.words[L]|0)+B,B=h>>26,this.words[L]=h&67108863;if(B===0&&L<v.length&&v!==this)for(;L<v.length;L++)this.words[L]=v.words[L];return this.length=Math.max(this.length,L),v!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function j(d,c,h){h.negative=c.negative^d.negative;var y=d.length+c.length|0;h.length=y,y=y-1|0;var v=d.words[0]|0,S=c.words[0]|0,B=v*S,L=B&67108863,I=B/67108864|0;h.words[0]=L;for(var w=1;w<y;w++){for(var R=I>>>26,Y=I&67108863,K=Math.min(w,c.length-1),ne=Math.max(0,w-d.length+1);ne<=K;ne++){var Re=w-ne|0;v=d.words[Re]|0,S=c.words[ne]|0,B=v*S+Y,R+=B/67108864|0,Y=B&67108863}h.words[w]=Y|0,I=R|0}return I!==0?h.words[w]=I|0:h.length--,h._strip()}var F=function(c,h,y){var v=c.words,S=h.words,B=y.words,L=0,I,w,R,Y=v[0]|0,K=Y&8191,ne=Y>>>13,Re=v[1]|0,ge=Re&8191,ye=Re>>>13,Ye=v[2]|0,Me=Ye&8191,He=Ye>>>13,we=v[3]|0,me=we&8191,ke=we>>>13,Bt=v[4]|0,De=Bt&8191,st=Bt>>>13,Ut=v[5]|0,ft=Ut&8191,pt=Ut>>>13,Ft=v[6]|0,Et=Ft&8191,It=Ft>>>13,Zt=v[7]|0,Tt=Zt&8191,O=Zt>>>13,E=v[8]|0,x=E&8191,H=E>>>13,W=v[9]|0,te=W&8191,oe=W>>>13,Xe=S[0]|0,Je=Xe&8191,Ze=Xe>>>13,Ht=S[1]|0,ze=Ht&8191,er=Ht>>>13,ba=S[2]|0,gr=ba&8191,br=ba>>>13,dl=S[3]|0,jt=dl&8191,Wt=dl>>>13,Wi=S[4]|0,cr=Wi&8191,fr=Wi>>>13,Mc=S[5]|0,vr=Mc&8191,Rt=Mc>>>13,Nc=S[6]|0,A=Nc&8191,M=Nc>>>13,N=S[7]|0,g=N&8191,U=N>>>13,ee=S[8]|0,J=ee&8191,fe=ee>>>13,ve=S[9]|0,xe=ve&8191,_e=ve>>>13;y.negative=c.negative^h.negative,y.length=19,I=Math.imul(K,Je),w=Math.imul(K,Ze),w=w+Math.imul(ne,Je)|0,R=Math.imul(ne,Ze);var At=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(At>>>26)|0,At&=67108863,I=Math.imul(ge,Je),w=Math.imul(ge,Ze),w=w+Math.imul(ye,Je)|0,R=Math.imul(ye,Ze),I=I+Math.imul(K,ze)|0,w=w+Math.imul(K,er)|0,w=w+Math.imul(ne,ze)|0,R=R+Math.imul(ne,er)|0;var Le=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(Le>>>26)|0,Le&=67108863,I=Math.imul(Me,Je),w=Math.imul(Me,Ze),w=w+Math.imul(He,Je)|0,R=Math.imul(He,Ze),I=I+Math.imul(ge,ze)|0,w=w+Math.imul(ge,er)|0,w=w+Math.imul(ye,ze)|0,R=R+Math.imul(ye,er)|0,I=I+Math.imul(K,gr)|0,w=w+Math.imul(K,br)|0,w=w+Math.imul(ne,gr)|0,R=R+Math.imul(ne,br)|0;var Ge=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,I=Math.imul(me,Je),w=Math.imul(me,Ze),w=w+Math.imul(ke,Je)|0,R=Math.imul(ke,Ze),I=I+Math.imul(Me,ze)|0,w=w+Math.imul(Me,er)|0,w=w+Math.imul(He,ze)|0,R=R+Math.imul(He,er)|0,I=I+Math.imul(ge,gr)|0,w=w+Math.imul(ge,br)|0,w=w+Math.imul(ye,gr)|0,R=R+Math.imul(ye,br)|0,I=I+Math.imul(K,jt)|0,w=w+Math.imul(K,Wt)|0,w=w+Math.imul(ne,jt)|0,R=R+Math.imul(ne,Wt)|0;var Qe=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,I=Math.imul(De,Je),w=Math.imul(De,Ze),w=w+Math.imul(st,Je)|0,R=Math.imul(st,Ze),I=I+Math.imul(me,ze)|0,w=w+Math.imul(me,er)|0,w=w+Math.imul(ke,ze)|0,R=R+Math.imul(ke,er)|0,I=I+Math.imul(Me,gr)|0,w=w+Math.imul(Me,br)|0,w=w+Math.imul(He,gr)|0,R=R+Math.imul(He,br)|0,I=I+Math.imul(ge,jt)|0,w=w+Math.imul(ge,Wt)|0,w=w+Math.imul(ye,jt)|0,R=R+Math.imul(ye,Wt)|0,I=I+Math.imul(K,cr)|0,w=w+Math.imul(K,fr)|0,w=w+Math.imul(ne,cr)|0,R=R+Math.imul(ne,fr)|0;var lt=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(lt>>>26)|0,lt&=67108863,I=Math.imul(ft,Je),w=Math.imul(ft,Ze),w=w+Math.imul(pt,Je)|0,R=Math.imul(pt,Ze),I=I+Math.imul(De,ze)|0,w=w+Math.imul(De,er)|0,w=w+Math.imul(st,ze)|0,R=R+Math.imul(st,er)|0,I=I+Math.imul(me,gr)|0,w=w+Math.imul(me,br)|0,w=w+Math.imul(ke,gr)|0,R=R+Math.imul(ke,br)|0,I=I+Math.imul(Me,jt)|0,w=w+Math.imul(Me,Wt)|0,w=w+Math.imul(He,jt)|0,R=R+Math.imul(He,Wt)|0,I=I+Math.imul(ge,cr)|0,w=w+Math.imul(ge,fr)|0,w=w+Math.imul(ye,cr)|0,R=R+Math.imul(ye,fr)|0,I=I+Math.imul(K,vr)|0,w=w+Math.imul(K,Rt)|0,w=w+Math.imul(ne,vr)|0,R=R+Math.imul(ne,Rt)|0;var ut=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(ut>>>26)|0,ut&=67108863,I=Math.imul(Et,Je),w=Math.imul(Et,Ze),w=w+Math.imul(It,Je)|0,R=Math.imul(It,Ze),I=I+Math.imul(ft,ze)|0,w=w+Math.imul(ft,er)|0,w=w+Math.imul(pt,ze)|0,R=R+Math.imul(pt,er)|0,I=I+Math.imul(De,gr)|0,w=w+Math.imul(De,br)|0,w=w+Math.imul(st,gr)|0,R=R+Math.imul(st,br)|0,I=I+Math.imul(me,jt)|0,w=w+Math.imul(me,Wt)|0,w=w+Math.imul(ke,jt)|0,R=R+Math.imul(ke,Wt)|0,I=I+Math.imul(Me,cr)|0,w=w+Math.imul(Me,fr)|0,w=w+Math.imul(He,cr)|0,R=R+Math.imul(He,fr)|0,I=I+Math.imul(ge,vr)|0,w=w+Math.imul(ge,Rt)|0,w=w+Math.imul(ye,vr)|0,R=R+Math.imul(ye,Rt)|0,I=I+Math.imul(K,A)|0,w=w+Math.imul(K,M)|0,w=w+Math.imul(ne,A)|0,R=R+Math.imul(ne,M)|0;var et=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(et>>>26)|0,et&=67108863,I=Math.imul(Tt,Je),w=Math.imul(Tt,Ze),w=w+Math.imul(O,Je)|0,R=Math.imul(O,Ze),I=I+Math.imul(Et,ze)|0,w=w+Math.imul(Et,er)|0,w=w+Math.imul(It,ze)|0,R=R+Math.imul(It,er)|0,I=I+Math.imul(ft,gr)|0,w=w+Math.imul(ft,br)|0,w=w+Math.imul(pt,gr)|0,R=R+Math.imul(pt,br)|0,I=I+Math.imul(De,jt)|0,w=w+Math.imul(De,Wt)|0,w=w+Math.imul(st,jt)|0,R=R+Math.imul(st,Wt)|0,I=I+Math.imul(me,cr)|0,w=w+Math.imul(me,fr)|0,w=w+Math.imul(ke,cr)|0,R=R+Math.imul(ke,fr)|0,I=I+Math.imul(Me,vr)|0,w=w+Math.imul(Me,Rt)|0,w=w+Math.imul(He,vr)|0,R=R+Math.imul(He,Rt)|0,I=I+Math.imul(ge,A)|0,w=w+Math.imul(ge,M)|0,w=w+Math.imul(ye,A)|0,R=R+Math.imul(ye,M)|0,I=I+Math.imul(K,g)|0,w=w+Math.imul(K,U)|0,w=w+Math.imul(ne,g)|0,R=R+Math.imul(ne,U)|0;var nt=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(nt>>>26)|0,nt&=67108863,I=Math.imul(x,Je),w=Math.imul(x,Ze),w=w+Math.imul(H,Je)|0,R=Math.imul(H,Ze),I=I+Math.imul(Tt,ze)|0,w=w+Math.imul(Tt,er)|0,w=w+Math.imul(O,ze)|0,R=R+Math.imul(O,er)|0,I=I+Math.imul(Et,gr)|0,w=w+Math.imul(Et,br)|0,w=w+Math.imul(It,gr)|0,R=R+Math.imul(It,br)|0,I=I+Math.imul(ft,jt)|0,w=w+Math.imul(ft,Wt)|0,w=w+Math.imul(pt,jt)|0,R=R+Math.imul(pt,Wt)|0,I=I+Math.imul(De,cr)|0,w=w+Math.imul(De,fr)|0,w=w+Math.imul(st,cr)|0,R=R+Math.imul(st,fr)|0,I=I+Math.imul(me,vr)|0,w=w+Math.imul(me,Rt)|0,w=w+Math.imul(ke,vr)|0,R=R+Math.imul(ke,Rt)|0,I=I+Math.imul(Me,A)|0,w=w+Math.imul(Me,M)|0,w=w+Math.imul(He,A)|0,R=R+Math.imul(He,M)|0,I=I+Math.imul(ge,g)|0,w=w+Math.imul(ge,U)|0,w=w+Math.imul(ye,g)|0,R=R+Math.imul(ye,U)|0,I=I+Math.imul(K,J)|0,w=w+Math.imul(K,fe)|0,w=w+Math.imul(ne,J)|0,R=R+Math.imul(ne,fe)|0;var tt=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(tt>>>26)|0,tt&=67108863,I=Math.imul(te,Je),w=Math.imul(te,Ze),w=w+Math.imul(oe,Je)|0,R=Math.imul(oe,Ze),I=I+Math.imul(x,ze)|0,w=w+Math.imul(x,er)|0,w=w+Math.imul(H,ze)|0,R=R+Math.imul(H,er)|0,I=I+Math.imul(Tt,gr)|0,w=w+Math.imul(Tt,br)|0,w=w+Math.imul(O,gr)|0,R=R+Math.imul(O,br)|0,I=I+Math.imul(Et,jt)|0,w=w+Math.imul(Et,Wt)|0,w=w+Math.imul(It,jt)|0,R=R+Math.imul(It,Wt)|0,I=I+Math.imul(ft,cr)|0,w=w+Math.imul(ft,fr)|0,w=w+Math.imul(pt,cr)|0,R=R+Math.imul(pt,fr)|0,I=I+Math.imul(De,vr)|0,w=w+Math.imul(De,Rt)|0,w=w+Math.imul(st,vr)|0,R=R+Math.imul(st,Rt)|0,I=I+Math.imul(me,A)|0,w=w+Math.imul(me,M)|0,w=w+Math.imul(ke,A)|0,R=R+Math.imul(ke,M)|0,I=I+Math.imul(Me,g)|0,w=w+Math.imul(Me,U)|0,w=w+Math.imul(He,g)|0,R=R+Math.imul(He,U)|0,I=I+Math.imul(ge,J)|0,w=w+Math.imul(ge,fe)|0,w=w+Math.imul(ye,J)|0,R=R+Math.imul(ye,fe)|0,I=I+Math.imul(K,xe)|0,w=w+Math.imul(K,_e)|0,w=w+Math.imul(ne,xe)|0,R=R+Math.imul(ne,_e)|0;var Ce=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,I=Math.imul(te,ze),w=Math.imul(te,er),w=w+Math.imul(oe,ze)|0,R=Math.imul(oe,er),I=I+Math.imul(x,gr)|0,w=w+Math.imul(x,br)|0,w=w+Math.imul(H,gr)|0,R=R+Math.imul(H,br)|0,I=I+Math.imul(Tt,jt)|0,w=w+Math.imul(Tt,Wt)|0,w=w+Math.imul(O,jt)|0,R=R+Math.imul(O,Wt)|0,I=I+Math.imul(Et,cr)|0,w=w+Math.imul(Et,fr)|0,w=w+Math.imul(It,cr)|0,R=R+Math.imul(It,fr)|0,I=I+Math.imul(ft,vr)|0,w=w+Math.imul(ft,Rt)|0,w=w+Math.imul(pt,vr)|0,R=R+Math.imul(pt,Rt)|0,I=I+Math.imul(De,A)|0,w=w+Math.imul(De,M)|0,w=w+Math.imul(st,A)|0,R=R+Math.imul(st,M)|0,I=I+Math.imul(me,g)|0,w=w+Math.imul(me,U)|0,w=w+Math.imul(ke,g)|0,R=R+Math.imul(ke,U)|0,I=I+Math.imul(Me,J)|0,w=w+Math.imul(Me,fe)|0,w=w+Math.imul(He,J)|0,R=R+Math.imul(He,fe)|0,I=I+Math.imul(ge,xe)|0,w=w+Math.imul(ge,_e)|0,w=w+Math.imul(ye,xe)|0,R=R+Math.imul(ye,_e)|0;var Fe=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,I=Math.imul(te,gr),w=Math.imul(te,br),w=w+Math.imul(oe,gr)|0,R=Math.imul(oe,br),I=I+Math.imul(x,jt)|0,w=w+Math.imul(x,Wt)|0,w=w+Math.imul(H,jt)|0,R=R+Math.imul(H,Wt)|0,I=I+Math.imul(Tt,cr)|0,w=w+Math.imul(Tt,fr)|0,w=w+Math.imul(O,cr)|0,R=R+Math.imul(O,fr)|0,I=I+Math.imul(Et,vr)|0,w=w+Math.imul(Et,Rt)|0,w=w+Math.imul(It,vr)|0,R=R+Math.imul(It,Rt)|0,I=I+Math.imul(ft,A)|0,w=w+Math.imul(ft,M)|0,w=w+Math.imul(pt,A)|0,R=R+Math.imul(pt,M)|0,I=I+Math.imul(De,g)|0,w=w+Math.imul(De,U)|0,w=w+Math.imul(st,g)|0,R=R+Math.imul(st,U)|0,I=I+Math.imul(me,J)|0,w=w+Math.imul(me,fe)|0,w=w+Math.imul(ke,J)|0,R=R+Math.imul(ke,fe)|0,I=I+Math.imul(Me,xe)|0,w=w+Math.imul(Me,_e)|0,w=w+Math.imul(He,xe)|0,R=R+Math.imul(He,_e)|0;var Te=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(Te>>>26)|0,Te&=67108863,I=Math.imul(te,jt),w=Math.imul(te,Wt),w=w+Math.imul(oe,jt)|0,R=Math.imul(oe,Wt),I=I+Math.imul(x,cr)|0,w=w+Math.imul(x,fr)|0,w=w+Math.imul(H,cr)|0,R=R+Math.imul(H,fr)|0,I=I+Math.imul(Tt,vr)|0,w=w+Math.imul(Tt,Rt)|0,w=w+Math.imul(O,vr)|0,R=R+Math.imul(O,Rt)|0,I=I+Math.imul(Et,A)|0,w=w+Math.imul(Et,M)|0,w=w+Math.imul(It,A)|0,R=R+Math.imul(It,M)|0,I=I+Math.imul(ft,g)|0,w=w+Math.imul(ft,U)|0,w=w+Math.imul(pt,g)|0,R=R+Math.imul(pt,U)|0,I=I+Math.imul(De,J)|0,w=w+Math.imul(De,fe)|0,w=w+Math.imul(st,J)|0,R=R+Math.imul(st,fe)|0,I=I+Math.imul(me,xe)|0,w=w+Math.imul(me,_e)|0,w=w+Math.imul(ke,xe)|0,R=R+Math.imul(ke,_e)|0;var $e=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+($e>>>26)|0,$e&=67108863,I=Math.imul(te,cr),w=Math.imul(te,fr),w=w+Math.imul(oe,cr)|0,R=Math.imul(oe,fr),I=I+Math.imul(x,vr)|0,w=w+Math.imul(x,Rt)|0,w=w+Math.imul(H,vr)|0,R=R+Math.imul(H,Rt)|0,I=I+Math.imul(Tt,A)|0,w=w+Math.imul(Tt,M)|0,w=w+Math.imul(O,A)|0,R=R+Math.imul(O,M)|0,I=I+Math.imul(Et,g)|0,w=w+Math.imul(Et,U)|0,w=w+Math.imul(It,g)|0,R=R+Math.imul(It,U)|0,I=I+Math.imul(ft,J)|0,w=w+Math.imul(ft,fe)|0,w=w+Math.imul(pt,J)|0,R=R+Math.imul(pt,fe)|0,I=I+Math.imul(De,xe)|0,w=w+Math.imul(De,_e)|0,w=w+Math.imul(st,xe)|0,R=R+Math.imul(st,_e)|0;var Ne=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,I=Math.imul(te,vr),w=Math.imul(te,Rt),w=w+Math.imul(oe,vr)|0,R=Math.imul(oe,Rt),I=I+Math.imul(x,A)|0,w=w+Math.imul(x,M)|0,w=w+Math.imul(H,A)|0,R=R+Math.imul(H,M)|0,I=I+Math.imul(Tt,g)|0,w=w+Math.imul(Tt,U)|0,w=w+Math.imul(O,g)|0,R=R+Math.imul(O,U)|0,I=I+Math.imul(Et,J)|0,w=w+Math.imul(Et,fe)|0,w=w+Math.imul(It,J)|0,R=R+Math.imul(It,fe)|0,I=I+Math.imul(ft,xe)|0,w=w+Math.imul(ft,_e)|0,w=w+Math.imul(pt,xe)|0,R=R+Math.imul(pt,_e)|0;var Ae=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,I=Math.imul(te,A),w=Math.imul(te,M),w=w+Math.imul(oe,A)|0,R=Math.imul(oe,M),I=I+Math.imul(x,g)|0,w=w+Math.imul(x,U)|0,w=w+Math.imul(H,g)|0,R=R+Math.imul(H,U)|0,I=I+Math.imul(Tt,J)|0,w=w+Math.imul(Tt,fe)|0,w=w+Math.imul(O,J)|0,R=R+Math.imul(O,fe)|0,I=I+Math.imul(Et,xe)|0,w=w+Math.imul(Et,_e)|0,w=w+Math.imul(It,xe)|0,R=R+Math.imul(It,_e)|0;var ae=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(ae>>>26)|0,ae&=67108863,I=Math.imul(te,g),w=Math.imul(te,U),w=w+Math.imul(oe,g)|0,R=Math.imul(oe,U),I=I+Math.imul(x,J)|0,w=w+Math.imul(x,fe)|0,w=w+Math.imul(H,J)|0,R=R+Math.imul(H,fe)|0,I=I+Math.imul(Tt,xe)|0,w=w+Math.imul(Tt,_e)|0,w=w+Math.imul(O,xe)|0,R=R+Math.imul(O,_e)|0;var ce=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(ce>>>26)|0,ce&=67108863,I=Math.imul(te,J),w=Math.imul(te,fe),w=w+Math.imul(oe,J)|0,R=Math.imul(oe,fe),I=I+Math.imul(x,xe)|0,w=w+Math.imul(x,_e)|0,w=w+Math.imul(H,xe)|0,R=R+Math.imul(H,_e)|0;var de=(L+I|0)+((w&8191)<<13)|0;L=(R+(w>>>13)|0)+(de>>>26)|0,de&=67108863,I=Math.imul(te,xe),w=Math.imul(te,_e),w=w+Math.imul(oe,xe)|0,R=Math.imul(oe,_e);var le=(L+I|0)+((w&8191)<<13)|0;return L=(R+(w>>>13)|0)+(le>>>26)|0,le&=67108863,B[0]=At,B[1]=Le,B[2]=Ge,B[3]=Qe,B[4]=lt,B[5]=ut,B[6]=et,B[7]=nt,B[8]=tt,B[9]=Ce,B[10]=Fe,B[11]=Te,B[12]=$e,B[13]=Ne,B[14]=Ae,B[15]=ae,B[16]=ce,B[17]=de,B[18]=le,L!==0&&(B[19]=L,y.length++),y};Math.imul||(F=j);function k(d,c,h){h.negative=c.negative^d.negative,h.length=d.length+c.length;for(var y=0,v=0,S=0;S<h.length-1;S++){var B=v;v=0;for(var L=y&67108863,I=Math.min(S,c.length-1),w=Math.max(0,S-d.length+1);w<=I;w++){var R=S-w,Y=d.words[R]|0,K=c.words[w]|0,ne=Y*K,Re=ne&67108863;B=B+(ne/67108864|0)|0,Re=Re+L|0,L=Re&67108863,B=B+(Re>>>26)|0,v+=B>>>26,B&=67108863}h.words[S]=L,y=B,B=v}return y!==0?h.words[S]=y:h.length--,h._strip()}function C(d,c,h){return k(d,c,h)}i.prototype.mulTo=function(c,h){var y,v=this.length+c.length;return this.length===10&&c.length===10?y=F(this,c,h):v<63?y=j(this,c,h):v<1024?y=k(this,c,h):y=C(this,c,h),y},i.prototype.mul=function(c){var h=new i(null);return h.words=new Array(this.length+c.length),this.mulTo(c,h)},i.prototype.mulf=function(c){var h=new i(null);return h.words=new Array(this.length+c.length),C(this,c,h)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){var h=c<0;h&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var y=0,v=0;v<this.length;v++){var S=(this.words[v]|0)*c,B=(S&67108863)+(y&67108863);y>>=26,y+=S/67108864|0,y+=B>>>26,this.words[v]=B&67108863}return y!==0&&(this.words[v]=y,this.length++),h?this.ineg():this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var h=$(c);if(h.length===0)return new i(1);for(var y=this,v=0;v<h.length&&h[v]===0;v++,y=y.sqr());if(++v<h.length)for(var S=y.sqr();v<h.length;v++,S=S.sqr())h[v]!==0&&(y=y.mul(S));return y},i.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26,v=67108863>>>26-h<<26-h,S;if(h!==0){var B=0;for(S=0;S<this.length;S++){var L=this.words[S]&v,I=(this.words[S]|0)-L<<h;this.words[S]=I|B,B=L>>>26-h}B&&(this.words[S]=B,this.length++)}if(y!==0){for(S=this.length-1;S>=0;S--)this.words[S+y]=this.words[S];for(S=0;S<y;S++)this.words[S]=0;this.length+=y}return this._strip()},i.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,h,y){n(typeof c=="number"&&c>=0);var v;h?v=(h-h%26)/26:v=0;var S=c%26,B=Math.min((c-S)/26,this.length),L=67108863^67108863>>>S<<S,I=y;if(v-=B,v=Math.max(0,v),I){for(var w=0;w<B;w++)I.words[w]=this.words[w];I.length=B}if(B!==0)if(this.length>B)for(this.length-=B,w=0;w<this.length;w++)this.words[w]=this.words[w+B];else this.words[0]=0,this.length=1;var R=0;for(w=this.length-1;w>=0&&(R!==0||w>=v);w--){var Y=this.words[w]|0;this.words[w]=R<<26-S|Y>>>S,R=Y&L}return I&&R!==0&&(I.words[I.length++]=R),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(c,h,y){return n(this.negative===0),this.iushrn(c,h,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26,v=1<<h;if(this.length<=y)return!1;var S=this.words[y];return!!(S&v)},i.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(h!==0&&y++,this.length=Math.min(y,this.length),h!==0){var v=67108863^67108863>>>h<<h;this.words[this.length-1]&=v}return this._strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,h,y){var v=c.length+y,S;this._expand(v);var B,L=0;for(S=0;S<c.length;S++){B=(this.words[S+y]|0)+L;var I=(c.words[S]|0)*h;B-=I&67108863,L=(B>>26)-(I/67108864|0),this.words[S+y]=B&67108863}for(;S<this.length-y;S++)B=(this.words[S+y]|0)+L,L=B>>26,this.words[S+y]=B&67108863;if(L===0)return this._strip();for(n(L===-1),L=0,S=0;S<this.length;S++)B=-(this.words[S]|0)+L,L=B>>26,this.words[S]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(c,h){var y=this.length-c.length,v=this.clone(),S=c,B=S.words[S.length-1]|0,L=this._countBits(B);y=26-L,y!==0&&(S=S.ushln(y),v.iushln(y),B=S.words[S.length-1]|0);var I=v.length-S.length,w;if(h!=="mod"){w=new i(null),w.length=I+1,w.words=new Array(w.length);for(var R=0;R<w.length;R++)w.words[R]=0}var Y=v.clone()._ishlnsubmul(S,1,I);Y.negative===0&&(v=Y,w&&(w.words[I]=1));for(var K=I-1;K>=0;K--){var ne=(v.words[S.length+K]|0)*67108864+(v.words[S.length+K-1]|0);for(ne=Math.min(ne/B|0,67108863),v._ishlnsubmul(S,ne,K);v.negative!==0;)ne--,v.negative=0,v._ishlnsubmul(S,1,K),v.isZero()||(v.negative^=1);w&&(w.words[K]=ne)}return w&&w._strip(),v._strip(),h!=="div"&&y!==0&&v.iushrn(y),{div:w||null,mod:v}},i.prototype.divmod=function(c,h,y){if(n(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,S,B;return this.negative!==0&&c.negative===0?(B=this.neg().divmod(c,h),h!=="mod"&&(v=B.div.neg()),h!=="div"&&(S=B.mod.neg(),y&&S.negative!==0&&S.iadd(c)),{div:v,mod:S}):this.negative===0&&c.negative!==0?(B=this.divmod(c.neg(),h),h!=="mod"&&(v=B.div.neg()),{div:v,mod:B.mod}):this.negative&c.negative?(B=this.neg().divmod(c.neg(),h),h!=="div"&&(S=B.mod.neg(),y&&S.negative!==0&&S.isub(c)),{div:B.div,mod:S}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?h==="div"?{div:this.divn(c.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modrn(c.words[0]))}:this._wordDiv(c,h)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var h=this.divmod(c);if(h.mod.isZero())return h.div;var y=h.div.negative!==0?h.mod.isub(c):h.mod,v=c.ushrn(1),S=c.andln(1),B=y.cmp(v);return B<0||S===1&&B===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(c){var h=c<0;h&&(c=-c),n(c<=67108863);for(var y=(1<<26)%c,v=0,S=this.length-1;S>=0;S--)v=(y*v+(this.words[S]|0))%c;return h?-v:v},i.prototype.modn=function(c){return this.modrn(c)},i.prototype.idivn=function(c){var h=c<0;h&&(c=-c),n(c<=67108863);for(var y=0,v=this.length-1;v>=0;v--){var S=(this.words[v]|0)+y*67108864;this.words[v]=S/c|0,y=S%c}return this._strip(),h?this.ineg():this},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var h=this,y=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var v=new i(1),S=new i(0),B=new i(0),L=new i(1),I=0;h.isEven()&&y.isEven();)h.iushrn(1),y.iushrn(1),++I;for(var w=y.clone(),R=h.clone();!h.isZero();){for(var Y=0,K=1;!(h.words[0]&K)&&Y<26;++Y,K<<=1);if(Y>0)for(h.iushrn(Y);Y-- >0;)(v.isOdd()||S.isOdd())&&(v.iadd(w),S.isub(R)),v.iushrn(1),S.iushrn(1);for(var ne=0,Re=1;!(y.words[0]&Re)&&ne<26;++ne,Re<<=1);if(ne>0)for(y.iushrn(ne);ne-- >0;)(B.isOdd()||L.isOdd())&&(B.iadd(w),L.isub(R)),B.iushrn(1),L.iushrn(1);h.cmp(y)>=0?(h.isub(y),v.isub(B),S.isub(L)):(y.isub(h),B.isub(v),L.isub(S))}return{a:B,b:L,gcd:y.iushln(I)}},i.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var h=this,y=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var v=new i(1),S=new i(0),B=y.clone();h.cmpn(1)>0&&y.cmpn(1)>0;){for(var L=0,I=1;!(h.words[0]&I)&&L<26;++L,I<<=1);if(L>0)for(h.iushrn(L);L-- >0;)v.isOdd()&&v.iadd(B),v.iushrn(1);for(var w=0,R=1;!(y.words[0]&R)&&w<26;++w,R<<=1);if(w>0)for(y.iushrn(w);w-- >0;)S.isOdd()&&S.iadd(B),S.iushrn(1);h.cmp(y)>=0?(h.isub(y),v.isub(S)):(y.isub(h),S.isub(v))}var Y;return h.cmpn(1)===0?Y=v:Y=S,Y.cmpn(0)<0&&Y.iadd(c),Y},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var h=this.clone(),y=c.clone();h.negative=0,y.negative=0;for(var v=0;h.isEven()&&y.isEven();v++)h.iushrn(1),y.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;y.isEven();)y.iushrn(1);var S=h.cmp(y);if(S<0){var B=h;h=y,y=B}else if(S===0||y.cmpn(1)===0)break;h.isub(y)}while(!0);return y.iushln(v)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){n(typeof c=="number");var h=c%26,y=(c-h)/26,v=1<<h;if(this.length<=y)return this._expand(y+1),this.words[y]|=v,this;for(var S=v,B=y;S!==0&&B<this.length;B++){var L=this.words[B]|0;L+=S,S=L>>>26,L&=67108863,this.words[B]=L}return S!==0&&(this.words[B]=S,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var h=c<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var y;if(this.length>1)y=1;else{h&&(c=-c),n(c<=67108863,"Number is too big");var v=this.words[0]|0;y=v===c?0:v<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var h=this.ucmp(c);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var h=0,y=this.length-1;y>=0;y--){var v=this.words[y]|0,S=c.words[y]|0;if(v!==S){v<S?h=-1:v>S&&(h=1);break}}return h},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new V(c)},i.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var X={k256:null,p224:null,p192:null,p25519:null};function Q(d,c){this.name=d,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Q.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},Q.prototype.ireduce=function(c){var h=c,y;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),y=h.bitLength();while(y>this.n);var v=y<this.n?-1:h.ucmp(this.p);return v===0?(h.words[0]=0,h.length=1):v>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},Q.prototype.split=function(c,h){c.iushrn(this.n,0,h)},Q.prototype.imulK=function(c){return c.imul(this.k)};function Z(){Q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Z,Q),Z.prototype.split=function(c,h){for(var y=4194303,v=Math.min(c.length,9),S=0;S<v;S++)h.words[S]=c.words[S];if(h.length=v,c.length<=9){c.words[0]=0,c.length=1;return}var B=c.words[9];for(h.words[h.length++]=B&y,S=10;S<c.length;S++){var L=c.words[S]|0;c.words[S-10]=(L&y)<<4|B>>>22,B=L}B>>>=22,c.words[S-10]=B,B===0&&c.length>10?c.length-=10:c.length-=9},Z.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var h=0,y=0;y<c.length;y++){var v=c.words[y]|0;h+=v*977,c.words[y]=h&67108863,h=v*64+(h/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function z(){Q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(z,Q);function G(){Q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(G,Q);function D(){Q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(D,Q),D.prototype.imulK=function(c){for(var h=0,y=0;y<c.length;y++){var v=(c.words[y]|0)*19+h,S=v&67108863;v>>>=26,c.words[y]=S,h=v}return h!==0&&(c.words[c.length++]=h),c},i._prime=function(c){if(X[c])return X[c];var h;if(c==="k256")h=new Z;else if(c==="p224")h=new z;else if(c==="p192")h=new G;else if(c==="p25519")h=new D;else throw new Error("Unknown prime "+c);return X[c]=h,h};function V(d){if(typeof d=="string"){var c=i._prime(d);this.m=c.p,this.prime=c}else n(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}V.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},V.prototype._verify2=function(c,h){n((c.negative|h.negative)===0,"red works only with positives"),n(c.red&&c.red===h.red,"red works only with red numbers")},V.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(l(c,c.umod(this.m)._forceRed(this)),c)},V.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},V.prototype.add=function(c,h){this._verify2(c,h);var y=c.add(h);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},V.prototype.iadd=function(c,h){this._verify2(c,h);var y=c.iadd(h);return y.cmp(this.m)>=0&&y.isub(this.m),y},V.prototype.sub=function(c,h){this._verify2(c,h);var y=c.sub(h);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},V.prototype.isub=function(c,h){this._verify2(c,h);var y=c.isub(h);return y.cmpn(0)<0&&y.iadd(this.m),y},V.prototype.shl=function(c,h){return this._verify1(c),this.imod(c.ushln(h))},V.prototype.imul=function(c,h){return this._verify2(c,h),this.imod(c.imul(h))},V.prototype.mul=function(c,h){return this._verify2(c,h),this.imod(c.mul(h))},V.prototype.isqr=function(c){return this.imul(c,c.clone())},V.prototype.sqr=function(c){return this.mul(c,c)},V.prototype.sqrt=function(c){if(c.isZero())return c.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var v=this.m.subn(1),S=0;!v.isZero()&&v.andln(1)===0;)S++,v.iushrn(1);n(!v.isZero());var B=new i(1).toRed(this),L=B.redNeg(),I=this.m.subn(1).iushrn(1),w=this.m.bitLength();for(w=new i(2*w*w).toRed(this);this.pow(w,I).cmp(L)!==0;)w.redIAdd(L);for(var R=this.pow(w,v),Y=this.pow(c,v.addn(1).iushrn(1)),K=this.pow(c,v),ne=S;K.cmp(B)!==0;){for(var Re=K,ge=0;Re.cmp(B)!==0;ge++)Re=Re.redSqr();n(ge<ne);var ye=this.pow(R,new i(1).iushln(ne-ge-1));Y=Y.redMul(ye),R=ye.redSqr(),K=K.redMul(R),ne=ge}return Y},V.prototype.invm=function(c){var h=c._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},V.prototype.pow=function(c,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return c.clone();var y=4,v=new Array(1<<y);v[0]=new i(1).toRed(this),v[1]=c;for(var S=2;S<v.length;S++)v[S]=this.mul(v[S-1],c);var B=v[0],L=0,I=0,w=h.bitLength()%26;for(w===0&&(w=26),S=h.length-1;S>=0;S--){for(var R=h.words[S],Y=w-1;Y>=0;Y--){var K=R>>Y&1;if(B!==v[0]&&(B=this.sqr(B)),K===0&&L===0){I=0;continue}L<<=1,L|=K,I++,!(I!==y&&(S!==0||Y!==0))&&(B=this.mul(B,v[L]),I=0,L=0)}w=26}return B},V.prototype.convertTo=function(c){var h=c.umod(this.m);return h===c?h.clone():h},V.prototype.convertFrom=function(c){var h=c.clone();return h.red=null,h},i.mont=function(c){return new m(c)};function m(d){V.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(m,V),m.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},m.prototype.convertFrom=function(c){var h=this.imod(c.mul(this.rinv));return h.red=null,h},m.prototype.imul=function(c,h){if(c.isZero()||h.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(h),v=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=y.isub(v).iushrn(this.shift),B=S;return S.cmp(this.m)>=0?B=S.isub(this.m):S.cmpn(0)<0&&(B=S.iadd(this.m)),B._forceRed(this)},m.prototype.mul=function(c,h){if(c.isZero()||h.isZero())return new i(0)._forceRed(this);var y=c.mul(h),v=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=y.isub(v).iushrn(this.shift),B=S;return S.cmp(this.m)>=0?B=S.isub(this.m):S.cmpn(0)<0&&(B=S.iadd(this.m)),B._forceRed(this)},m.prototype.invm=function(c){var h=this.imod(c._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(e,Pe)})(kl);var Np=kl.exports,Yc={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var r=se,n=r.Buffer;function s(o,a){for(var f in o)a[f]=o[f]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=i);function i(o,a,f){return n(o,a,f)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,f){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,f)},i.alloc=function(o,a,f){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=n(o);return a!==void 0?typeof f=="string"?u.fill(a,f):u.fill(a):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(Yc,Yc.exports);var Xc=Yc.exports.Buffer;function kx(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=e.length,a=e.charAt(0),f=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function l(b){if((Array.isArray(b)||b instanceof Uint8Array)&&(b=Xc.from(b)),!Xc.isBuffer(b))throw new TypeError("Expected Buffer");if(b.length===0)return"";for(var T=0,P=0,$=0,j=b.length;$!==j&&b[$]===0;)$++,T++;for(var F=(j-$)*u+1>>>0,k=new Uint8Array(F);$!==j;){for(var C=b[$],X=0,Q=F-1;(C!==0||X<P)&&Q!==-1;Q--,X++)C+=256*k[Q]>>>0,k[Q]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");P=X,$++}for(var Z=F-P;Z!==F&&k[Z]===0;)Z++;for(var z=a.repeat(T);Z<F;++Z)z+=e.charAt(k[Z]);return z}function p(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return Xc.alloc(0);for(var T=0,P=0,$=0;b[T]===a;)P++,T++;for(var j=(b.length-T)*f+1>>>0,F=new Uint8Array(j);b[T];){var k=t[b.charCodeAt(T)];if(k===255)return;for(var C=0,X=j-1;(k!==0||C<$)&&X!==-1;X--,C++)k+=o*F[X]>>>0,F[X]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");$=C,T++}for(var Q=j-$;Q!==j&&F[Q]===0;)Q++;var Z=Xc.allocUnsafe(P+(j-Q));Z.fill(0,0,P);for(var z=P;Q!==j;)Z[z++]=F[Q++];return Z}function _(b){var T=p(b);if(T)return T;throw new Error("Non-base"+o+" character")}return{encode:l,decodeUnsafe:p,decode:_}}var Lx=kx,Cx=Lx,Ox="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Sr=Cx(Ox);const $x=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xi=new Uint32Array(64);class Mx extends bp{constructor(){super(64,32,8,!1),this.A=Yi[0]|0,this.B=Yi[1]|0,this.C=Yi[2]|0,this.D=Yi[3]|0,this.E=Yi[4]|0,this.F=Yi[5]|0,this.G=Yi[6]|0,this.H=Yi[7]|0}get(){const{A:t,B:r,C:n,D:s,E:i,F:o,G:a,H:f}=this;return[t,r,n,s,i,o,a,f]}set(t,r,n,s,i,o,a,f){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=f|0}process(t,r){for(let p=0;p<16;p++,r+=4)Xi[p]=t.getUint32(r,!1);for(let p=16;p<64;p++){const _=Xi[p-15],b=Xi[p-2],T=oi(_,7)^oi(_,18)^_>>>3,P=oi(b,17)^oi(b,19)^b>>>10;Xi[p]=P+Xi[p-7]+T+Xi[p-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:f,G:u,H:l}=this;for(let p=0;p<64;p++){const _=oi(a,6)^oi(a,11)^oi(a,25),b=l+_+TE(a,f,u)+$x[p]+Xi[p]|0,P=(oi(n,2)^oi(n,13)^oi(n,22))+RE(n,s,i)|0;l=u,u=f,f=a,a=o+b|0,o=i,i=s,s=n,n=b+P|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,f,u,l)}roundClean(){Xi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ll=wp(()=>new Mx);var Dr={};function Ii(e,t,r){return t<=e&&e<=r}function Jc(e){if(e===void 0)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function Nx(e){for(var t=String(e),r=t.length,n=0,s=[];n<r;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===r-1)s.push(65533);else{var o=e.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,f=o&1023;s.push(65536+(a<<10)+f),n+=1}else s.push(65533)}n+=1}return s}function Px(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Qc=-1;function Cl(e){this.tokens=[].slice.call(e)}Cl.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Qc},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var _o=-1;function Ol(e,t){if(e)throw TypeError("Decoder error");return t||65533}var ef="utf-8";function tf(e,t){if(!(this instanceof tf))return new tf(e,t);if(e=e!==void 0?String(e).toLowerCase():ef,e!==ef)throw new Error("Encoding not supported. Only utf-8 is supported");t=Jc(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}tf.prototype={decode:function(t,r){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),r=Jc(r),this._streaming||(this._decoder=new Ux({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var s=new Cl(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==_o);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===_o)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Px(i)}};function rf(e,t){if(!(this instanceof rf))return new rf(e,t);if(e=e!==void 0?String(e).toLowerCase():ef,e!==ef)throw new Error("Encoding not supported. Only utf-8 is supported");t=Jc(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}rf.prototype={encode:function(t,r){t=t?String(t):"",r=Jc(r),this._streaming||(this._encoder=new Fx(this._options)),this._streaming=!!r.stream;for(var n=[],s=new Cl(Nx(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==_o);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==_o;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Ux(e){var t=e.fatal,r=0,n=0,s=0,i=128,o=191;this.handler=function(a,f){if(f===Qc&&s!==0)return s=0,Ol(t);if(f===Qc)return _o;if(s===0){if(Ii(f,0,127))return f;if(Ii(f,194,223))s=1,r=f-192;else if(Ii(f,224,239))f===224&&(i=160),f===237&&(o=159),s=2,r=f-224;else if(Ii(f,240,244))f===240&&(i=144),f===244&&(o=143),s=3,r=f-240;else return Ol(t);return r=r<<6*s,null}if(!Ii(f,i,o))return r=s=n=0,i=128,o=191,a.prepend(f),Ol(t);if(i=128,o=191,n+=1,r+=f-128<<6*(s-n),n!==s)return null;var u=r;return r=s=n=0,u}}function Fx(e){e.fatal,this.handler=function(t,r){if(r===Qc)return _o;if(Ii(r,0,127))return r;var n,s;Ii(r,128,2047)?(n=1,s=192):Ii(r,2048,65535)?(n=2,s=224):Ii(r,65536,1114111)&&(n=3,s=240);for(var i=[(r>>6*n)+s];n>0;){var o=r>>6*(n-1);i.push(128|o&63),n-=1}return i}}var Hx=Object.freeze({__proto__:null,TextEncoder:rf,TextDecoder:tf}),jx=ii(Hx),Dx=Pe&&Pe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),zx=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ai=Pe&&Pe.__decorate||function(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},qx=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Dx(t,e,r);return zx(t,e),t},Pp=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dr,"__esModule",{value:!0});var Up=Dr.deserializeUnchecked=qp=Dr.deserialize=zp=Dr.serialize=Dr.BinaryReader=Dr.BinaryWriter=Dr.BorshError=Dr.baseDecode=Dr.baseEncode=void 0;const Ji=Pp(kl.exports),Fp=Pp(Sr),Vx=qx(jx),Kx=typeof TextDecoder!="function"?Vx.TextDecoder:TextDecoder,Wx=new Kx("utf-8",{fatal:!0});function Zx(e){return typeof e=="string"&&(e=se.Buffer.from(e,"utf8")),Fp.default.encode(se.Buffer.from(e))}Dr.baseEncode=Zx;function Gx(e){return se.Buffer.from(Fp.default.decode(e))}Dr.baseDecode=Gx;const $l=1024;class cn extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Dr.BorshError=cn;class Hp{constructor(){this.buf=se.Buffer.alloc($l),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=se.Buffer.concat([this.buf,se.Buffer.alloc($l)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(se.Buffer.from(new Ji.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(se.Buffer.from(new Ji.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(se.Buffer.from(new Ji.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(se.Buffer.from(new Ji.default(t).toArray("le",64)))}writeBuffer(t){this.buf=se.Buffer.concat([se.Buffer.from(this.buf.subarray(0,this.length)),t,se.Buffer.alloc($l)]),this.length+=t.length}writeString(t){this.maybeResize();const r=se.Buffer.from(t,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(t){this.writeBuffer(se.Buffer.from(t))}writeArray(t,r){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}Dr.BinaryWriter=Hp;function ci(e,t,r){const n=r.value;r.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new cn("Reached the end of buffer when deserializing")}throw i}}}class bn{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Ji.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Ji.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Ji.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Ji.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new cn(`Expected buffer length ${t} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,r}readString(){const t=this.readU32(),r=this.readBuffer(t);try{return Wx.decode(r)}catch(n){throw new cn(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const r=this.readU32(),n=Array();for(let s=0;s<r;++s)n.push(t());return n}}ai([ci],bn.prototype,"readU8",null),ai([ci],bn.prototype,"readU16",null),ai([ci],bn.prototype,"readU32",null),ai([ci],bn.prototype,"readU64",null),ai([ci],bn.prototype,"readU128",null),ai([ci],bn.prototype,"readU256",null),ai([ci],bn.prototype,"readU512",null),ai([ci],bn.prototype,"readString",null),ai([ci],bn.prototype,"readFixedArray",null),ai([ci],bn.prototype,"readArray",null),Dr.BinaryReader=bn;function jp(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Us(e,t,r,n,s){try{if(typeof n=="string")s[`write${jp(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new cn(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);s.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new cn(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let i=0;i<n[1];i++)Us(e,null,r[i],n[0],s)}else s.writeArray(r,i=>{Us(e,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?s.writeU8(0):(s.writeU8(1),Us(e,t,r,n.type,s));break}case"map":{s.writeU32(r.size),r.forEach((i,o)=>{Us(e,t,o,n.key,s),Us(e,t,i,n.value,s)});break}default:throw new cn(`FieldType ${n} unrecognized`)}else Dp(e,r,s)}catch(i){throw i instanceof cn&&i.addToFieldPath(t),i}}function Dp(e,t,r){if(typeof t.borshSerialize=="function"){t.borshSerialize(r);return}const n=e.get(t.constructor);if(!n)throw new cn(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{Us(e,s,t[s],i,r)});else if(n.kind==="enum"){const s=t[n.field];for(let i=0;i<n.values.length;++i){const[o,a]=n.values[i];if(o===s){r.writeU8(i),Us(e,o,t[o],a,r);break}}}else throw new cn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Yx(e,t,r=Hp){const n=new r;return Dp(e,t,n),n.toArray()}var zp=Dr.serialize=Yx;function Fs(e,t,r,n){try{if(typeof r=="string")return n[`read${jp(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const s=[];for(let i=0;i<r[1];i++)s.push(Fs(e,null,r[0],n));return s}else return n.readArray(()=>Fs(e,t,r[0],n))}if(r.kind==="option")return n.readU8()?Fs(e,t,r.type,n):void 0;if(r.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const a=Fs(e,t,r.key,n),f=Fs(e,t,r.value,n);s.set(a,f)}return s}return Ml(e,r,n)}catch(s){throw s instanceof cn&&s.addToFieldPath(t),s}}function Ml(e,t,r){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new cn(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of e.get(t).fields)s[i]=Fs(e,i,o,r);return new t(s)}if(n.kind==="enum"){const s=r.readU8();if(s>=n.values.length)throw new cn(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],a=Fs(e,i,o,r);return new t({[i]:a})}throw new cn(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Xx(e,t,r,n=bn){const s=new n(r),i=Ml(e,t,s);if(s.offset<r.length)throw new cn(`Unexpected ${r.length-s.offset} bytes after deserialized data`);return i}var qp=Dr.deserialize=Xx;function Jx(e,t,r,n=bn){const s=new n(r);return Ml(e,t,s)}Up=Dr.deserializeUnchecked=Jx;var ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.s16=ie.s8=ie.nu64be=ie.u48be=ie.u40be=ie.u32be=ie.u24be=ie.u16be=zr=ie.nu64=ie.u48=ie.u40=qe=ie.u32=ie.u24=Nn=ie.u16=Nt=ie.u8=js=ie.offset=ie.greedy=ie.Constant=ie.UTF8=ie.CString=ie.Blob=ie.Boolean=ie.BitField=ie.BitStructure=ie.VariantLayout=ie.Union=ie.UnionLayoutDiscriminator=ie.UnionDiscriminator=ie.Structure=ie.Sequence=ie.DoubleBE=ie.Double=ie.FloatBE=ie.Float=ie.NearInt64BE=ie.NearInt64=ie.NearUInt64BE=ie.NearUInt64=ie.IntBE=ie.Int=ie.UIntBE=ie.UInt=ie.OffsetLayout=ie.GreedyCount=ie.ExternalLayout=ie.bindConstructorLayout=ie.nameWithProperty=ie.Layout=ie.uint8ArrayToBuffer=ie.checkUint8Array=void 0,ie.constant=ie.utf8=ie.cstr=tr=ie.blob=ie.unionLayoutDiscriminator=ie.union=Yr=ie.seq=ie.bits=Ue=ie.struct=ie.f64be=ie.f64=ie.f32be=ie.f32=ie.ns64be=ie.s48be=ie.s40be=ie.s32be=ie.s24be=ie.s16be=vn=ie.ns64=ie.s48=ie.s40=ie.s32=ie.s24=void 0;const Nl=se;function Eo(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}ie.checkUint8Array=Eo;function $t(e){return Eo(e),Nl.Buffer.from(e.buffer,e.byteOffset,e.length)}ie.uint8ArrayToBuffer=$t;class Dt{constructor(t,r){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=r}makeDestinationObject(){return{}}getSpan(t,r){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const r=Object.create(this.constructor.prototype);return Object.assign(r,this),r.property=t,r}fromArray(t){}}ie.Layout=Dt;function Pl(e,t){return t.property?e+"["+t.property+"]":e}ie.nameWithProperty=Pl;function Qx(e,t){if(typeof e!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Dt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(r,n){return t.encode(this,r,n)},writable:!0}),Object.defineProperty(e,"decode",{value(r,n){return t.decode(r,n)},writable:!0})}ie.bindConstructorLayout=Qx;class pn extends Dt{isCount(){throw new Error("ExternalLayout is abstract")}}ie.ExternalLayout=pn;class Vp extends pn{constructor(t=1,r){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,r),this.elementSpan=t}isCount(){return!0}decode(t,r=0){Eo(t);const n=t.length-r;return Math.floor(n/this.elementSpan)}encode(t,r,n){return 0}}ie.GreedyCount=Vp;class Ul extends pn{constructor(t,r=0,n){if(!(t instanceof Dt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=r}isCount(){return this.layout instanceof Mn||this.layout instanceof Kn}decode(t,r=0){return this.layout.decode(t,r+this.offset)}encode(t,r,n=0){return this.layout.encode(t,r,n+this.offset)}}ie.OffsetLayout=Ul;class Mn extends Dt{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return $t(t).readUIntLE(r,this.span)}encode(t,r,n=0){return $t(r).writeUIntLE(t,n,this.span),this.span}}ie.UInt=Mn;class Kn extends Dt{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return $t(t).readUIntBE(r,this.span)}encode(t,r,n=0){return $t(r).writeUIntBE(t,n,this.span),this.span}}ie.UIntBE=Kn;class Hs extends Dt{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return $t(t).readIntLE(r,this.span)}encode(t,r,n=0){return $t(r).writeIntLE(t,n,this.span),this.span}}ie.Int=Hs;class xo extends Dt{constructor(t,r){if(super(t,r),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,r=0){return $t(t).readIntBE(r,this.span)}encode(t,r,n=0){return $t(r).writeIntBE(t,n,this.span),this.span}}ie.IntBE=xo;const Fl=Math.pow(2,32);function nf(e){const t=Math.floor(e/Fl),r=e-t*Fl;return{hi32:t,lo32:r}}function sf(e,t){return e*Fl+t}class Kp extends Dt{constructor(t){super(8,t)}decode(t,r=0){const n=$t(t),s=n.readUInt32LE(r),i=n.readUInt32LE(r+4);return sf(i,s)}encode(t,r,n=0){const s=nf(t),i=$t(r);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}ie.NearUInt64=Kp;class Wp extends Dt{constructor(t){super(8,t)}decode(t,r=0){const n=$t(t),s=n.readUInt32BE(r),i=n.readUInt32BE(r+4);return sf(s,i)}encode(t,r,n=0){const s=nf(t),i=$t(r);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}ie.NearUInt64BE=Wp;class Zp extends Dt{constructor(t){super(8,t)}decode(t,r=0){const n=$t(t),s=n.readUInt32LE(r),i=n.readInt32LE(r+4);return sf(i,s)}encode(t,r,n=0){const s=nf(t),i=$t(r);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}ie.NearInt64=Zp;class Gp extends Dt{constructor(t){super(8,t)}decode(t,r=0){const n=$t(t),s=n.readInt32BE(r),i=n.readUInt32BE(r+4);return sf(s,i)}encode(t,r,n=0){const s=nf(t),i=$t(r);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}ie.NearInt64BE=Gp;class Yp extends Dt{constructor(t){super(4,t)}decode(t,r=0){return $t(t).readFloatLE(r)}encode(t,r,n=0){return $t(r).writeFloatLE(t,n),4}}ie.Float=Yp;class Xp extends Dt{constructor(t){super(4,t)}decode(t,r=0){return $t(t).readFloatBE(r)}encode(t,r,n=0){return $t(r).writeFloatBE(t,n),4}}ie.FloatBE=Xp;class Jp extends Dt{constructor(t){super(8,t)}decode(t,r=0){return $t(t).readDoubleLE(r)}encode(t,r,n=0){return $t(r).writeDoubleLE(t,n),8}}ie.Double=Jp;class Qp extends Dt{constructor(t){super(8,t)}decode(t,r=0){return $t(t).readDoubleBE(r)}encode(t,r,n=0){return $t(r).writeDoubleBE(t,n),8}}ie.DoubleBE=Qp;class eg extends Dt{constructor(t,r,n){if(!(t instanceof Dt))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof pn&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(r instanceof pn)&&0<t.span&&(s=r*t.span),super(s,n),this.elementLayout=t,this.count=r}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof pn&&(s=s.decode(t,r)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,r+n),++i}return n}decode(t,r=0){const n=[];let s=0,i=this.count;for(i instanceof pn&&(i=i.decode(t,r));s<i;)n.push(this.elementLayout.decode(t,r)),r+=this.elementLayout.getSpan(t,r),s+=1;return n}encode(t,r,n=0){const s=this.elementLayout,i=t.reduce((o,a)=>o+s.encode(a,r,n+o),0);return this.count instanceof pn&&this.count.encode(t.length,r,n),i}}ie.Sequence=eg;class tg extends Dt{constructor(t,r,n){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof Dt,!0)))throw new TypeError("fields must be array of Layout instances");typeof r=="boolean"&&n===void 0&&(n=r,r=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,r),this.fields=t,this.decodePrefixes=!!n}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(t,r);return r+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,r=0){Eo(t);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,r)),r+=s.getSpan(t,r),this.decodePrefixes&&t.length===r)break;return n}encode(t,r,n=0){const s=n;let i=0,o=0;for(const a of this.fields){let f=a.span;if(o=0<f?f:0,a.property!==void 0){const u=t[a.property];u!==void 0&&(o=a.encode(u,r,n),0>f&&(f=a.getSpan(r,n)))}i=n,n+=f}return i+o-s}fromArray(t){const r=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(r[n.property]=t.shift());return r}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const r of this.fields)if(r.property===t)return r}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let r=0;for(const n of this.fields){if(n.property===t)return r;0>n.span?r=-1:0<=r&&(r+=n.span)}}}ie.Structure=tg;class Hl{constructor(t){this.property=t}decode(t,r){throw new Error("UnionDiscriminator is abstract")}encode(t,r,n){throw new Error("UnionDiscriminator is abstract")}}ie.UnionDiscriminator=Hl;class of extends Hl{constructor(t,r){if(!(t instanceof pn&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(r||t.property||"variant"),this.layout=t}decode(t,r){return this.layout.decode(t,r)}encode(t,r,n){return this.layout.encode(t,r,n)}}ie.UnionLayoutDiscriminator=of;class jl extends Dt{constructor(t,r,n){let s;if(t instanceof Mn||t instanceof Kn)s=new of(new Ul(t));else if(t instanceof pn&&t.isCount())s=new of(t);else if(t instanceof Hl)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(r===void 0&&(r=null),!(r===null||r instanceof Dt))throw new TypeError("defaultLayout must be null or a Layout");if(r!==null){if(0>r.span)throw new Error("defaultLayout must have constant span");r.property===void 0&&(r=r.replicate("content"))}let i=-1;r&&(i=r.span,0<=i&&(t instanceof Mn||t instanceof Kn)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Mn||t instanceof Kn,this.defaultLayout=r,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,r=0){if(0<=this.span)return this.span;const n=this.getVariant(t,r);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,r)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const r=this.registry[t[this.discriminator.property]];if(r&&(!r.layout||r.property&&Object.prototype.hasOwnProperty.call(t,r.property)))return r}else for(const r in this.registry){const n=this.registry[r];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,r=0){let n;const s=this.discriminator,i=s.decode(t,r),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let f=0;this.usesPrefixDiscriminator&&(f=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[a.property]=a.decode(t,r+f)}else n=o.decode(t,r);return n}encode(t,r,n=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(t[i.property],r,n),a+o.encode(t[o.property],r,n+a)}return s.encode(t,r,n)}addVariant(t,r,n){const s=new rg(this,t,r,n);return this.registry[t]=s,s}getVariant(t,r=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,r):n=t,this.registry[n]}}ie.Union=jl;class rg extends Dt{constructor(t,r,n,s){if(!(t instanceof jl))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Dt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=r,this.layout=n||null}getSpan(t,r=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,r+n)),n+s}decode(t,r=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,r))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,r+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,r,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,r,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],r,n+s),i+=this.layout.getSpan(r,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}ie.VariantLayout=rg;function So(e){return 0>e&&(e+=4294967296),e}class Dl extends Dt{constructor(t,r,n){if(!(t instanceof Mn||t instanceof Kn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof r=="string"&&n===void 0&&(n=r,r=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!r,this.fields=[];let s=0;this._packedSetValue=function(i){return s=So(i),this},this._packedGetValue=function(){return s}}decode(t,r=0){const n=this.makeDestinationObject(),s=this.word.decode(t,r);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,r,n=0){const s=this.word.decode(r,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),r,n)}addField(t,r){const n=new zl(this,t,r);return this.fields.push(n),n}addBoolean(t){const r=new ng(this,t);return this.fields.push(r),r}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const r of this.fields)if(r.property===t)return r}}ie.BitStructure=Dl;class zl{constructor(t,r,n){if(!(t instanceof Dl))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(r)||0>=r)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,a)=>o+a.bits,0);if(r+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=r,this.valueMask=(1<<r)-1,r===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-r),this.wordMask=So(this.valueMask<<this.start),this.property=n}decode(t,r){const n=this.container._packedGetValue();return So(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==So(t&this.valueMask))throw new TypeError(Pl("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const r=this.container._packedGetValue(),n=So(t<<this.start);this.container._packedSetValue(So(r&~this.wordMask)|n)}}ie.BitField=zl;class ng extends zl{constructor(t,r){super(t,1,r)}decode(t,r){return!!super.decode(t,r)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}}ie.Boolean=ng;class ig extends Dt{constructor(t,r){if(!(t instanceof pn&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof pn||(n=t),super(n,r),this.length=t}getSpan(t,r){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),n}decode(t,r=0){let n=this.span;return 0>n&&(n=this.length.decode(t,r)),$t(t).slice(r,r+n)}encode(t,r,n){let s=this.length;if(this.length instanceof pn&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(Pl("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>r.length)throw new RangeError("encoding overruns Uint8Array");const i=$t(t);return $t(r).write(i.toString("hex"),n,s,"hex"),this.length instanceof pn&&this.length.encode(s,r,n),s}}ie.Blob=ig;class sg extends Dt{constructor(t){super(-1,t)}getSpan(t,r=0){Eo(t);let n=r;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-r}decode(t,r=0){const n=this.getSpan(t,r);return $t(t).slice(r,r+n-1).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));const s=Nl.Buffer.from(t,"utf8"),i=s.length;if(n+i>r.length)throw new RangeError("encoding overruns Buffer");const o=$t(r);return s.copy(o,n),o[n+i]=0,i+1}}ie.CString=sg;class og extends Dt{constructor(t,r){if(typeof t=="string"&&r===void 0&&(r=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,r),this.maxSpan=t}getSpan(t,r=0){return Eo(t),t.length-r}decode(t,r=0){const n=this.getSpan(t,r);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return $t(t).slice(r,r+n).toString("utf-8")}encode(t,r,n=0){typeof t!="string"&&(t=String(t));const s=Nl.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>r.length)throw new RangeError("encoding overruns Buffer");return s.copy($t(r),n),i}}ie.UTF8=og;class ag extends Dt{constructor(t,r){super(0,r),this.value=t}decode(t,r){return this.value}encode(t,r,n){return 0}}ie.Constant=ag,ie.greedy=(e,t)=>new Vp(e,t);var js=ie.offset=(e,t,r)=>new Ul(e,t,r),Nt=ie.u8=e=>new Mn(1,e),Nn=ie.u16=e=>new Mn(2,e);ie.u24=e=>new Mn(3,e);var qe=ie.u32=e=>new Mn(4,e);ie.u40=e=>new Mn(5,e),ie.u48=e=>new Mn(6,e);var zr=ie.nu64=e=>new Kp(e);ie.u16be=e=>new Kn(2,e),ie.u24be=e=>new Kn(3,e),ie.u32be=e=>new Kn(4,e),ie.u40be=e=>new Kn(5,e),ie.u48be=e=>new Kn(6,e),ie.nu64be=e=>new Wp(e),ie.s8=e=>new Hs(1,e),ie.s16=e=>new Hs(2,e),ie.s24=e=>new Hs(3,e),ie.s32=e=>new Hs(4,e),ie.s40=e=>new Hs(5,e),ie.s48=e=>new Hs(6,e);var vn=ie.ns64=e=>new Zp(e);ie.s16be=e=>new xo(2,e),ie.s24be=e=>new xo(3,e),ie.s32be=e=>new xo(4,e),ie.s40be=e=>new xo(5,e),ie.s48be=e=>new xo(6,e),ie.ns64be=e=>new Gp(e),ie.f32=e=>new Yp(e),ie.f32be=e=>new Xp(e),ie.f64=e=>new Jp(e),ie.f64be=e=>new Qp(e);var Ue=ie.struct=(e,t,r)=>new tg(e,t,r);ie.bits=(e,t,r)=>new Dl(e,t,r);var Yr=ie.seq=(e,t,r)=>new eg(e,t,r);ie.union=(e,t,r)=>new jl(e,t,r),ie.unionLayoutDiscriminator=(e,t)=>new of(e,t);var tr=ie.blob=(e,t)=>new ig(e,t);ie.cstr=e=>new sg(e),ie.utf8=(e,t)=>new og(e,t),ie.constant=(e,t)=>new ag(e,t);var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});function eS(e){{const t=se.Buffer.from(e);t.reverse();const r=t.toString("hex");return r.length===0?BigInt(0):BigInt(`0x${r}`)}}var tS=Sa.toBigIntLE=eS;function rS(e){{const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Sa.toBigIntBE=rS;function nS(e,t){{const r=e.toString(16),n=se.Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}}var iS=Sa.toBufferLE=nS;function sS(e,t){{const r=e.toString(16);return se.Buffer.from(r.padStart(t*2,"0").slice(0,t*2),"hex")}}Sa.toBufferBE=sS;class oS extends TypeError{constructor(t,r){let n;const{message:s,explanation:i,...o}=t,{path:a}=t,f=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??f),i!=null&&(this.cause=f),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...r()])}}function aS(e){return Aa(e)&&typeof e[Symbol.iterator]=="function"}function Aa(e){return typeof e=="object"&&e!=null}function af(e){return Aa(e)&&!Array.isArray(e)}function Wn(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}function cS(e){const{done:t,value:r}=e.next();return t?void 0:r}function fS(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:s,branch:i}=t,{type:o}=r,{refinement:a,message:f=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Wn(n)}\``}=e;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...e,message:f}}function*cg(e,t,r,n){aS(e)||(e=[e]);for(const s of e){const i=fS(s,t,r,n);i&&(yield i)}}function*ql(e,t,r={}){const{path:n=[],branch:s=[e],coerce:i=!1,mask:o=!1}=r,a={path:n,branch:s,mask:o};i&&(e=t.coercer(e,a));let f="valid";for(const u of t.validator(e,a))u.explanation=r.message,f="not_valid",yield[u,void 0];for(let[u,l,p]of t.entries(e,a)){const _=ql(l,p,{path:u===void 0?n:[...n,u],branch:u===void 0?s:[...s,l],coerce:i,mask:o,message:r.message});for(const b of _)b[0]?(f=b[0].refinement!=null?"not_refined":"not_valid",yield[b[0],void 0]):i&&(l=b[1],u===void 0?e=l:e instanceof Map?e.set(u,l):e instanceof Set?e.add(l):Aa(e)&&(l!==void 0||u in e)&&(e[u]=l))}if(f!=="not_valid")for(const u of t.refiner(e,a))u.explanation=r.message,f="not_refined",yield[u,void 0];f==="valid"&&(yield[void 0,e])}class fi{constructor(t){const{type:r,schema:n,validator:s,refiner:i,coercer:o=f=>f,entries:a=function*(){}}=t;this.type=r,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(f,u)=>{const l=s(f,u);return cg(l,u,this,f)}:this.validator=()=>[],i?this.refiner=(f,u)=>{const l=i(f,u);return cg(l,u,this,f)}:this.refiner=()=>[]}assert(t,r){return uS(t,this,r)}create(t,r){return Se(t,this,r)}is(t){return fg(t,this)}mask(t,r){return lS(t,this,r)}validate(t,r={}){return Ba(t,this,r)}}function uS(e,t,r){const n=Ba(e,t,{message:r});if(n[0])throw n[0]}function Se(e,t,r){const n=Ba(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function lS(e,t,r){const n=Ba(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function fg(e,t){return!Ba(e,t)[0]}function Ba(e,t,r={}){const n=ql(e,t,r),s=cS(n);return s[0]?[new oS(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Ds(e,t){return new fi({type:e,schema:null,validator:t})}function hS(){return Ds("any",()=>!0)}function Be(e){return new fi({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Wn(t)}`}})}function ui(){return Ds("boolean",e=>typeof e=="boolean")}function Vl(e){return Ds("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${Wn(t)}`)}function lr(e){const t=Wn(e),r=typeof e;return new fi({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?e:null,validator(n){return n===e||`Expected the literal \`${t}\`, but received: ${Wn(n)}`}})}function dS(){return Ds("never",()=>!1)}function Ie(e){return new fi({...e,validator:(t,r)=>t===null||e.validator(t,r),refiner:(t,r)=>t===null||e.refiner(t,r)})}function re(){return Ds("number",e=>typeof e=="number"&&!isNaN(e)||`Expected a number, but received: ${Wn(e)}`)}function We(e){return new fi({...e,validator:(t,r)=>t===void 0||e.validator(t,r),refiner:(t,r)=>t===void 0||e.refiner(t,r)})}function ug(e,t){return new fi({type:"record",schema:null,*entries(r){if(Aa(r))for(const n in r){const s=r[n];yield[n,n,e],yield[n,s,t]}},validator(r){return af(r)||`Expected an object, but received: ${Wn(r)}`},coercer(r){return af(r)?{...r}:r}})}function Ee(){return Ds("string",e=>typeof e=="string"||`Expected a string, but received: ${Wn(e)}`)}function Kl(e){const t=dS();return new fi({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],e[s]||t]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${Wn(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function pe(e){const t=Object.keys(e);return new fi({type:"type",schema:e,*entries(r){if(Aa(r))for(const n of t)yield[n,r[n],e[n]]},validator(r){return af(r)||`Expected an object, but received: ${Wn(r)}`},coercer(r){return af(r)?{...r}:r}})}function fn(e){const t=e.map(r=>r.type).join(" | ");return new fi({type:"union",schema:null,coercer(r,n){for(const s of e){const[i,o]=s.validate(r,{coerce:!0,mask:n.mask});if(!i)return o}return r},validator(r,n){const s=[];for(const i of e){const[...o]=ql(r,i,n),[a]=o;if(a[0])for(const[f]of o)f&&s.push(f);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Wn(r)}`,...s]}})}function Ao(){return Ds("unknown",()=>!0)}function Ia(e,t,r){return new fi({...e,coercer:(n,s)=>fg(n,t)?e.coercer(r(n,s),s):e.coercer(n,s)})}var cf,pS=new Uint8Array(16);function lg(){if(!cf&&(cf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!cf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cf(pS)}var gS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ff(e){return typeof e=="string"&&gS.test(e)}for(var qr=[],Wl=0;Wl<256;++Wl)qr.push((Wl+256).toString(16).substr(1));function uf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(qr[e[t+0]]+qr[e[t+1]]+qr[e[t+2]]+qr[e[t+3]]+"-"+qr[e[t+4]]+qr[e[t+5]]+"-"+qr[e[t+6]]+qr[e[t+7]]+"-"+qr[e[t+8]]+qr[e[t+9]]+"-"+qr[e[t+10]]+qr[e[t+11]]+qr[e[t+12]]+qr[e[t+13]]+qr[e[t+14]]+qr[e[t+15]]).toLowerCase();if(!ff(r))throw TypeError("Stringified UUID is invalid");return r}var hg,Zl,Gl=0,Yl=0;function yS(e,t,r){var n=t&&r||0,s=t||new Array(16);e=e||{};var i=e.node||hg,o=e.clockseq!==void 0?e.clockseq:Zl;if(i==null||o==null){var a=e.random||(e.rng||lg)();i==null&&(i=hg=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Zl=(a[6]<<8|a[7])&16383)}var f=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:Yl+1,l=f-Gl+(u-Yl)/1e4;if(l<0&&e.clockseq===void 0&&(o=o+1&16383),(l<0||f>Gl)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Gl=f,Yl=u,Zl=o,f+=122192928e5;var p=((f&268435455)*1e4+u)%4294967296;s[n++]=p>>>24&255,s[n++]=p>>>16&255,s[n++]=p>>>8&255,s[n++]=p&255;var _=f/4294967296*1e4&268435455;s[n++]=_>>>8&255,s[n++]=_&255,s[n++]=_>>>24&15|16,s[n++]=_>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var b=0;b<6;++b)s[n+b]=i[b];return t||uf(s)}function dg(e){if(!ff(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function wS(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var mS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",bS="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function pg(e,t,r){function n(s,i,o,a){if(typeof s=="string"&&(s=wS(s)),typeof i=="string"&&(i=dg(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+s.length);if(f.set(i),f.set(s,i.length),f=r(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=f[u];return o}return uf(f)}try{n.name=e}catch{}return n.DNS=mS,n.URL=bS,n}function vS(e){if(typeof e=="string"){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return _S(ES(xS(e),e.length*8))}function _S(e){for(var t=[],r=e.length*32,n="0123456789abcdef",s=0;s<r;s+=8){var i=e[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function gg(e){return(e+64>>>9<<4)+14+1}function ES(e,t){e[t>>5]|=128<<t%32,e[gg(t)-1]=t;for(var r=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<e.length;o+=16){var a=r,f=n,u=s,l=i;r=Xr(r,n,s,i,e[o],7,-680876936),i=Xr(i,r,n,s,e[o+1],12,-389564586),s=Xr(s,i,r,n,e[o+2],17,606105819),n=Xr(n,s,i,r,e[o+3],22,-1044525330),r=Xr(r,n,s,i,e[o+4],7,-176418897),i=Xr(i,r,n,s,e[o+5],12,1200080426),s=Xr(s,i,r,n,e[o+6],17,-1473231341),n=Xr(n,s,i,r,e[o+7],22,-45705983),r=Xr(r,n,s,i,e[o+8],7,1770035416),i=Xr(i,r,n,s,e[o+9],12,-1958414417),s=Xr(s,i,r,n,e[o+10],17,-42063),n=Xr(n,s,i,r,e[o+11],22,-1990404162),r=Xr(r,n,s,i,e[o+12],7,1804603682),i=Xr(i,r,n,s,e[o+13],12,-40341101),s=Xr(s,i,r,n,e[o+14],17,-1502002290),n=Xr(n,s,i,r,e[o+15],22,1236535329),r=Jr(r,n,s,i,e[o+1],5,-165796510),i=Jr(i,r,n,s,e[o+6],9,-1069501632),s=Jr(s,i,r,n,e[o+11],14,643717713),n=Jr(n,s,i,r,e[o],20,-373897302),r=Jr(r,n,s,i,e[o+5],5,-701558691),i=Jr(i,r,n,s,e[o+10],9,38016083),s=Jr(s,i,r,n,e[o+15],14,-660478335),n=Jr(n,s,i,r,e[o+4],20,-405537848),r=Jr(r,n,s,i,e[o+9],5,568446438),i=Jr(i,r,n,s,e[o+14],9,-1019803690),s=Jr(s,i,r,n,e[o+3],14,-187363961),n=Jr(n,s,i,r,e[o+8],20,1163531501),r=Jr(r,n,s,i,e[o+13],5,-1444681467),i=Jr(i,r,n,s,e[o+2],9,-51403784),s=Jr(s,i,r,n,e[o+7],14,1735328473),n=Jr(n,s,i,r,e[o+12],20,-1926607734),r=Qr(r,n,s,i,e[o+5],4,-378558),i=Qr(i,r,n,s,e[o+8],11,-2022574463),s=Qr(s,i,r,n,e[o+11],16,1839030562),n=Qr(n,s,i,r,e[o+14],23,-35309556),r=Qr(r,n,s,i,e[o+1],4,-1530992060),i=Qr(i,r,n,s,e[o+4],11,1272893353),s=Qr(s,i,r,n,e[o+7],16,-155497632),n=Qr(n,s,i,r,e[o+10],23,-1094730640),r=Qr(r,n,s,i,e[o+13],4,681279174),i=Qr(i,r,n,s,e[o],11,-358537222),s=Qr(s,i,r,n,e[o+3],16,-722521979),n=Qr(n,s,i,r,e[o+6],23,76029189),r=Qr(r,n,s,i,e[o+9],4,-640364487),i=Qr(i,r,n,s,e[o+12],11,-421815835),s=Qr(s,i,r,n,e[o+15],16,530742520),n=Qr(n,s,i,r,e[o+2],23,-995338651),r=en(r,n,s,i,e[o],6,-198630844),i=en(i,r,n,s,e[o+7],10,1126891415),s=en(s,i,r,n,e[o+14],15,-1416354905),n=en(n,s,i,r,e[o+5],21,-57434055),r=en(r,n,s,i,e[o+12],6,1700485571),i=en(i,r,n,s,e[o+3],10,-1894986606),s=en(s,i,r,n,e[o+10],15,-1051523),n=en(n,s,i,r,e[o+1],21,-2054922799),r=en(r,n,s,i,e[o+8],6,1873313359),i=en(i,r,n,s,e[o+15],10,-30611744),s=en(s,i,r,n,e[o+6],15,-1560198380),n=en(n,s,i,r,e[o+13],21,1309151649),r=en(r,n,s,i,e[o+4],6,-145523070),i=en(i,r,n,s,e[o+11],10,-1120210379),s=en(s,i,r,n,e[o+2],15,718787259),n=en(n,s,i,r,e[o+9],21,-343485551),r=Qi(r,a),n=Qi(n,f),s=Qi(s,u),i=Qi(i,l)}return[r,n,s,i]}function xS(e){if(e.length===0)return[];for(var t=e.length*8,r=new Uint32Array(gg(t)),n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function Qi(e,t){var r=(e&65535)+(t&65535),n=(e>>16)+(t>>16)+(r>>16);return n<<16|r&65535}function SS(e,t){return e<<t|e>>>32-t}function lf(e,t,r,n,s,i){return Qi(SS(Qi(Qi(t,e),Qi(n,i)),s),r)}function Xr(e,t,r,n,s,i,o){return lf(t&r|~t&n,e,t,s,i,o)}function Jr(e,t,r,n,s,i,o){return lf(t&n|r&~n,e,t,s,i,o)}function Qr(e,t,r,n,s,i,o){return lf(t^r^n,e,t,s,i,o)}function en(e,t,r,n,s,i,o){return lf(r^(t|~n),e,t,s,i,o)}var AS=pg("v3",48,vS),BS=AS;function IS(e,t,r){e=e||{};var n=e.random||(e.rng||lg)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return uf(n)}function TS(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Xl(e,t){return e<<t|e>>>32-t}function RS(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var n=unescape(encodeURIComponent(e));e=[];for(var s=0;s<n.length;++s)e.push(n.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,o=Math.ceil(i/16),a=new Array(o),f=0;f<o;++f){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[f*64+l*4]<<24|e[f*64+l*4+1]<<16|e[f*64+l*4+2]<<8|e[f*64+l*4+3];a[f]=u}a[o-1][14]=(e.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(e.length-1)*8&4294967295;for(var p=0;p<o;++p){for(var _=new Uint32Array(80),b=0;b<16;++b)_[b]=a[p][b];for(var T=16;T<80;++T)_[T]=Xl(_[T-3]^_[T-8]^_[T-14]^_[T-16],1);for(var P=r[0],$=r[1],j=r[2],F=r[3],k=r[4],C=0;C<80;++C){var X=Math.floor(C/20),Q=Xl(P,5)+TS(X,$,j,F)+k+t[X]+_[C]>>>0;k=F,F=j,j=Xl($,30)>>>0,$=P,P=Q}r[0]=r[0]+P>>>0,r[1]=r[1]+$>>>0,r[2]=r[2]+j>>>0,r[3]=r[3]+F>>>0,r[4]=r[4]+k>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var kS=pg("v5",80,RS),LS=kS,CS="00000000-0000-0000-0000-000000000000";function OS(e){if(!ff(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var $S=Object.freeze({__proto__:null,v1:yS,v3:BS,v4:IS,v5:LS,NIL:CS,version:OS,validate:ff,stringify:uf,parse:dg}),yg=ii($S);const MS=yg.v4;var NS=function(e,t,r,n){if(typeof e!="string")throw new TypeError(e+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:e};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof r>"u"){const o=typeof n.generator=="function"?n.generator:function(){return MS()};i.id=o(i,n)}else s===2&&r===null?n.notificationIdNull&&(i.id=null):i.id=r;return i};const PS=yg.v4,US=NS,Ta=function(e,t){if(!(this instanceof Ta))return new Ta(e,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return PS()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=e};var FS=Ta;Ta.prototype.request=function(e,t,r,n){const s=this;let i=null;const o=Array.isArray(e)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&e&&typeof e=="object"&&typeof t=="function")n=t,i=e;else{typeof r=="function"&&(n=r,r=void 0);const u=typeof n=="function";try{i=US(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(l){if(u)return n(l);throw l}if(!u)return i}let f;try{f=JSON.stringify(i,this.options.replacer)}catch(u){return n(u)}return this.callServer(f,function(u,l){s._parseResponse(u,l,n)}),i},Ta.prototype._parseResponse=function(e,t,r){if(e){r(e);return}if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return r(s)}if(r.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return r(null,n.filter(s),n.filter(i))}else return r(null,n.error,n.result);r(null,n)};var wg={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(f,u,l){this.fn=f,this.context=u,this.once=l||!1}function i(f,u,l,p,_){if(typeof l!="function")throw new TypeError("The listener must be a function");var b=new s(l,p||f,_),T=r?r+u:u;return f._events[T]?f._events[T].fn?f._events[T]=[f._events[T],b]:f._events[T].push(b):(f._events[T]=b,f._eventsCount++),f}function o(f,u){--f._eventsCount===0?f._events=new n:delete f._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,p;if(this._eventsCount===0)return u;for(p in l=this._events)t.call(l,p)&&u.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=r?r+u:u,p=this._events[l];if(!p)return[];if(p.fn)return[p.fn];for(var _=0,b=p.length,T=new Array(b);_<b;_++)T[_]=p[_].fn;return T},a.prototype.listenerCount=function(u){var l=r?r+u:u,p=this._events[l];return p?p.fn?1:p.length:0},a.prototype.emit=function(u,l,p,_,b,T){var P=r?r+u:u;if(!this._events[P])return!1;var $=this._events[P],j=arguments.length,F,k;if($.fn){switch($.once&&this.removeListener(u,$.fn,void 0,!0),j){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,l),!0;case 3:return $.fn.call($.context,l,p),!0;case 4:return $.fn.call($.context,l,p,_),!0;case 5:return $.fn.call($.context,l,p,_,b),!0;case 6:return $.fn.call($.context,l,p,_,b,T),!0}for(k=1,F=new Array(j-1);k<j;k++)F[k-1]=arguments[k];$.fn.apply($.context,F)}else{var C=$.length,X;for(k=0;k<C;k++)switch($[k].once&&this.removeListener(u,$[k].fn,void 0,!0),j){case 1:$[k].fn.call($[k].context);break;case 2:$[k].fn.call($[k].context,l);break;case 3:$[k].fn.call($[k].context,l,p);break;case 4:$[k].fn.call($[k].context,l,p,_);break;default:if(!F)for(X=1,F=new Array(j-1);X<j;X++)F[X-1]=arguments[X];$[k].fn.apply($[k].context,F)}}return!0},a.prototype.on=function(u,l,p){return i(this,u,l,p,!1)},a.prototype.once=function(u,l,p){return i(this,u,l,p,!0)},a.prototype.removeListener=function(u,l,p,_){var b=r?r+u:u;if(!this._events[b])return this;if(!l)return o(this,b),this;var T=this._events[b];if(T.fn)T.fn===l&&(!_||T.once)&&(!p||T.context===p)&&o(this,b);else{for(var P=0,$=[],j=T.length;P<j;P++)(T[P].fn!==l||_&&!T[P].once||p&&T[P].context!==p)&&$.push(T[P]);$.length?this._events[b]=$.length===1?$[0]:$:o(this,b)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=r?r+u:u,this._events[l]&&o(this,l)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(wg);var mg=wg.exports,HS=class extends mg{socket;constructor(e,t,r){super(),this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(e,t,r){const n=r||t;try{this.socket.send(e),n()}catch(s){n(s)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function jS(e,t){return new HS(e,t)}var DS=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},zS=class extends mg{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},a,f){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>++this.rpc_id),f?this.dataPack=f:this.dataPack=new DS,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return!n&&typeof r=="object"&&(n=r,r=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(e,t),a={jsonrpc:"2.0",method:e,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,f=>{if(f)return i(f);this.queue[o]={promise:[s,i]},r&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},r))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return n(i);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=se.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const n=[r.notification];if(r.params.constructor===Object)n.push(r.params);else for(let s=0;s<r.params.length;s++)n.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r?.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",r,n),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};const qS=[],VS=BigInt(0),Ra=BigInt(1),KS=BigInt(2),WS=BigInt(7),ZS=BigInt(256),GS=BigInt(113);for(let e=0,t=Ra,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5];let s=VS;for(let i=0;i<7;i++)t=(t<<Ra^(t>>WS)*GS)%ZS,t&KS&&(s^=Ra<<(Ra<<BigInt(i))-Ra);qS.push(s)}class bg extends yp{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,xE(t);const n=wl(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return zc(this),this.iHash.update(t),this}digestInto(t){zc(this),Dc(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const vg=(e,t,r)=>new bg(e,t).update(r).digest();vg.create=(e,t)=>new bg(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _g(e){e.lowS!==void 0&&Ai("lowS",e.lowS),e.prehash!==void 0&&Ai("prehash",e.prehash)}function YS(e){const t=Tl(e);vo(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:XS,hexToBytes:JS}=ix,Ti={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(e,t)=>{const{Err:r}=Ti;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");const n=t.length/2,s=yo(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?yo(s.length/2|128):"";return`${yo(e)}${i}${s}${t}`},decode(e,t){const{Err:r}=Ti;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const f=s&127;if(!f)throw new r("tlv.decode(long): indefinite length not supported");if(f>4)throw new r("tlv.decode(long): byte length is too big");const u=t.subarray(n,n+f);if(u.length!==f)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=f,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(e){const{Err:t}=Ti;if(e<Ri)throw new t("integer: negative integers are not allowed");let r=yo(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected assertion");return r},decode(e){const{Err:t}=Ti;if(e[0]&128)throw new t("Invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return XS(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=Ti,s=typeof e=="string"?JS(e):e;_a(s);const{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("Invalid signature: left bytes after parsing");const{v:a,l:f}=n.decode(2,i),{v:u,l}=n.decode(2,f);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){const{_tlv:t,_int:r}=Ti,n=`${t.encode(2,r.encode(e.r))}${t.encode(2,r.encode(e.s))}`;return t.encode(48,n)}},Ri=BigInt(0),$r=BigInt(1);BigInt(2);const Eg=BigInt(3);BigInt(4);function QS(e){const t=YS(e),{Fp:r}=t,n=Wc(t.n,t.nBitLength),s=t.toBytes||((P,$,j)=>{const F=$.toAffine();return Ns(Uint8Array.from([4]),r.toBytes(F.x),r.toBytes(F.y))}),i=t.fromBytes||(P=>{const $=P.subarray(1),j=r.fromBytes($.subarray(0,r.BYTES)),F=r.fromBytes($.subarray(r.BYTES,2*r.BYTES));return{x:j,y:F}});function o(P){const{a:$,b:j}=t,F=r.sqr(P),k=r.mul(F,P);return r.add(r.add(k,r.mul(P,$)),j)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(P){return Kc(P,$r,t.n)}function f(P){const{allowedPrivateKeyLengths:$,nByteLength:j,wrapPrivateKey:F,n:k}=t;if($&&typeof P!="bigint"){if(Os(P)&&(P=$s(P)),typeof P!="string"||!$.includes(P.length))throw new Error("Invalid key");P=P.padStart(j*2,"0")}let C;try{C=typeof P=="bigint"?P:Ms(Br("private key",P,j))}catch{throw new Error(`private key must be ${j} bytes, hex or bigint, not ${typeof P}`)}return F&&(C=nr(C,k)),$n("private key",C,$r,k),C}function u(P){if(!(P instanceof _))throw new Error("ProjectivePoint expected")}const l=xa((P,$)=>{const{px:j,py:F,pz:k}=P;if(r.eql(k,r.ONE))return{x:j,y:F};const C=P.is0();$==null&&($=C?r.ONE:r.inv(k));const X=r.mul(j,$),Q=r.mul(F,$),Z=r.mul(k,$);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(Z,r.ONE))throw new Error("invZ was invalid");return{x:X,y:Q}}),p=xa(P=>{if(P.is0()){if(t.allowInfinityPoint&&!r.is0(P.py))return;throw new Error("bad point: ZERO")}const{x:$,y:j}=P.toAffine();if(!r.isValid($)||!r.isValid(j))throw new Error("bad point: x or y not FE");const F=r.sqr(j),k=o($);if(!r.eql(F,k))throw new Error("bad point: equation left != right");if(!P.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class _{constructor($,j,F){if(this.px=$,this.py=j,this.pz=F,$==null||!r.isValid($))throw new Error("x required");if(j==null||!r.isValid(j))throw new Error("y required");if(F==null||!r.isValid(F))throw new Error("z required");Object.freeze(this)}static fromAffine($){const{x:j,y:F}=$||{};if(!$||!r.isValid(j)||!r.isValid(F))throw new Error("invalid affine point");if($ instanceof _)throw new Error("projective point not allowed");const k=C=>r.eql(C,r.ZERO);return k(j)&&k(F)?_.ZERO:new _(j,F,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ($){const j=r.invertBatch($.map(F=>F.pz));return $.map((F,k)=>F.toAffine(j[k])).map(_.fromAffine)}static fromHex($){const j=_.fromAffine(i(Br("pointHex",$)));return j.assertValidity(),j}static fromPrivateKey($){return _.BASE.multiply(f($))}static msm($,j){return Cp(_,n,$,j)}_setWindowSize($){T.setWindowSize(this,$)}assertValidity(){p(this)}hasEvenY(){const{y:$}=this.toAffine();if(r.isOdd)return!r.isOdd($);throw new Error("Field doesn't support isOdd")}equals($){u($);const{px:j,py:F,pz:k}=this,{px:C,py:X,pz:Q}=$,Z=r.eql(r.mul(j,Q),r.mul(C,k)),z=r.eql(r.mul(F,Q),r.mul(X,k));return Z&&z}negate(){return new _(this.px,r.neg(this.py),this.pz)}double(){const{a:$,b:j}=t,F=r.mul(j,Eg),{px:k,py:C,pz:X}=this;let Q=r.ZERO,Z=r.ZERO,z=r.ZERO,G=r.mul(k,k),D=r.mul(C,C),V=r.mul(X,X),m=r.mul(k,C);return m=r.add(m,m),z=r.mul(k,X),z=r.add(z,z),Q=r.mul($,z),Z=r.mul(F,V),Z=r.add(Q,Z),Q=r.sub(D,Z),Z=r.add(D,Z),Z=r.mul(Q,Z),Q=r.mul(m,Q),z=r.mul(F,z),V=r.mul($,V),m=r.sub(G,V),m=r.mul($,m),m=r.add(m,z),z=r.add(G,G),G=r.add(z,G),G=r.add(G,V),G=r.mul(G,m),Z=r.add(Z,G),V=r.mul(C,X),V=r.add(V,V),G=r.mul(V,m),Q=r.sub(Q,G),z=r.mul(V,D),z=r.add(z,z),z=r.add(z,z),new _(Q,Z,z)}add($){u($);const{px:j,py:F,pz:k}=this,{px:C,py:X,pz:Q}=$;let Z=r.ZERO,z=r.ZERO,G=r.ZERO;const D=t.a,V=r.mul(t.b,Eg);let m=r.mul(j,C),d=r.mul(F,X),c=r.mul(k,Q),h=r.add(j,F),y=r.add(C,X);h=r.mul(h,y),y=r.add(m,d),h=r.sub(h,y),y=r.add(j,k);let v=r.add(C,Q);return y=r.mul(y,v),v=r.add(m,c),y=r.sub(y,v),v=r.add(F,k),Z=r.add(X,Q),v=r.mul(v,Z),Z=r.add(d,c),v=r.sub(v,Z),G=r.mul(D,y),Z=r.mul(V,c),G=r.add(Z,G),Z=r.sub(d,G),G=r.add(d,G),z=r.mul(Z,G),d=r.add(m,m),d=r.add(d,m),c=r.mul(D,c),y=r.mul(V,y),d=r.add(d,c),c=r.sub(m,c),c=r.mul(D,c),y=r.add(y,c),m=r.mul(d,y),z=r.add(z,m),m=r.mul(v,y),Z=r.mul(h,Z),Z=r.sub(Z,m),m=r.mul(h,d),G=r.mul(v,G),G=r.add(G,m),new _(Z,z,G)}subtract($){return this.add($.negate())}is0(){return this.equals(_.ZERO)}wNAF($){return T.wNAFCached(this,$,_.normalizeZ)}multiplyUnsafe($){$n("scalar",$,Ri,t.n);const j=_.ZERO;if($===Ri)return j;if($===$r)return this;const{endo:F}=t;if(!F)return T.unsafeLadder(this,$);let{k1neg:k,k1:C,k2neg:X,k2:Q}=F.splitScalar($),Z=j,z=j,G=this;for(;C>Ri||Q>Ri;)C&$r&&(Z=Z.add(G)),Q&$r&&(z=z.add(G)),G=G.double(),C>>=$r,Q>>=$r;return k&&(Z=Z.negate()),X&&(z=z.negate()),z=new _(r.mul(z.px,F.beta),z.py,z.pz),Z.add(z)}multiply($){const{endo:j,n:F}=t;$n("scalar",$,$r,F);let k,C;if(j){const{k1neg:X,k1:Q,k2neg:Z,k2:z}=j.splitScalar($);let{p:G,f:D}=this.wNAF(Q),{p:V,f:m}=this.wNAF(z);G=T.constTimeNegate(X,G),V=T.constTimeNegate(Z,V),V=new _(r.mul(V.px,j.beta),V.py,V.pz),k=G.add(V),C=D.add(m)}else{const{p:X,f:Q}=this.wNAF($);k=X,C=Q}return _.normalizeZ([k,C])[0]}multiplyAndAddUnsafe($,j,F){const k=_.BASE,C=(Q,Z)=>Z===Ri||Z===$r||!Q.equals(k)?Q.multiplyUnsafe(Z):Q.multiply(Z),X=C(this,j).add(C($,F));return X.is0()?void 0:X}toAffine($){return l(this,$)}isTorsionFree(){const{h:$,isTorsionFree:j}=t;if($===$r)return!0;if(j)return j(_,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:$,clearCofactor:j}=t;return $===$r?this:j?j(_,this):this.multiplyUnsafe(t.h)}toRawBytes($=!0){return Ai("isCompressed",$),this.assertValidity(),s(_,this,$)}toHex($=!0){return Ai("isCompressed",$),$s(this.toRawBytes($))}}_.BASE=new _(t.Gx,t.Gy,r.ONE),_.ZERO=new _(r.ZERO,r.ONE,r.ZERO);const b=t.nBitLength,T=Lp(_,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:_,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:a}}function e3(e){const t=Tl(e);return vo(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function t3(e){const t=e3(e),{Fp:r,n}=t,s=r.BYTES+1,i=2*r.BYTES+1;function o(c){return nr(c,n)}function a(c){return Al(c,n)}const{ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:p}=QS({...t,toBytes(c,h,y){const v=h.toAffine(),S=r.toBytes(v.x),B=Ns;return Ai("isCompressed",y),y?B(Uint8Array.from([h.hasEvenY()?2:3]),S):B(Uint8Array.from([4]),S,r.toBytes(v.y))},fromBytes(c){const h=c.length,y=c[0],v=c.subarray(1);if(h===s&&(y===2||y===3)){const S=Ms(v);if(!Kc(S,$r,r.ORDER))throw new Error("Point is not on curve");const B=l(S);let L;try{L=r.sqrt(B)}catch(R){const Y=R instanceof Error?": "+R.message:"";throw new Error("Point is not on curve"+Y)}const I=(L&$r)===$r;return(y&1)===1!==I&&(L=r.neg(L)),{x:S,y:L}}else if(h===i&&y===4){const S=r.fromBytes(v.subarray(0,r.BYTES)),B=r.fromBytes(v.subarray(r.BYTES,2*r.BYTES));return{x:S,y:B}}else throw new Error(`Point of length ${h} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),_=c=>$s(bo(c,t.nByteLength));function b(c){const h=n>>$r;return c>h}function T(c){return b(c)?o(-c):c}const P=(c,h,y)=>Ms(c.slice(h,y));class ${constructor(h,y,v){this.r=h,this.s=y,this.recovery=v,this.assertValidity()}static fromCompact(h){const y=t.nByteLength;return h=Br("compactSignature",h,y*2),new $(P(h,0,y),P(h,y,2*y))}static fromDER(h){const{r:y,s:v}=Ti.toSig(Br("DER",h));return new $(y,v)}assertValidity(){$n("r",this.r,$r,n),$n("s",this.s,$r,n)}addRecoveryBit(h){return new $(this.r,this.s,h)}recoverPublicKey(h){const{r:y,s:v,recovery:S}=this,B=Q(Br("msgHash",h));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");const L=S===2||S===3?y+t.n:y;if(L>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const I=S&1?"03":"02",w=f.fromHex(I+_(L)),R=a(L),Y=o(-B*R),K=o(v*R),ne=f.BASE.multiplyAndAddUnsafe(w,Y,K);if(!ne)throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new $(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return wo(this.toDERHex())}toDERHex(){return Ti.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return wo(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}const j={isValidPrivateKey(c){try{return u(c),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const c=Rp(t.n);return px(t.randomBytes(c),t.n)},precompute(c=8,h=f.BASE){return h._setWindowSize(c),h.multiply(BigInt(3)),h}};function F(c,h=!0){return f.fromPrivateKey(c).toRawBytes(h)}function k(c){const h=Os(c),y=typeof c=="string",v=(h||y)&&c.length;return h?v===s||v===i:y?v===2*s||v===2*i:c instanceof f}function C(c,h,y=!0){if(k(c))throw new Error("first arg must be private key");if(!k(h))throw new Error("second arg must be public key");return f.fromHex(h).multiply(u(c)).toRawBytes(y)}const X=t.bits2int||function(c){const h=Ms(c),y=c.length*8-t.nBitLength;return y>0?h>>BigInt(y):h},Q=t.bits2int_modN||function(c){return o(X(c))},Z=El(t.nBitLength);function z(c){return $n(`num < 2^${t.nBitLength}`,c,Ri,Z),bo(c,t.nByteLength)}function G(c,h,y=D){if(["recovered","canonical"].some(ge=>ge in y))throw new Error("sign() legacy options not supported");const{hash:v,randomBytes:S}=t;let{lowS:B,prehash:L,extraEntropy:I}=y;B==null&&(B=!0),c=Br("msgHash",c),_g(y),L&&(c=Br("prehashed msgHash",v(c)));const w=Q(c),R=u(h),Y=[z(R),z(w)];if(I!=null&&I!==!1){const ge=I===!0?S(r.BYTES):I;Y.push(Br("extraEntropy",ge))}const K=Ns(...Y),ne=w;function Re(ge){const ye=X(ge);if(!p(ye))return;const Ye=a(ye),Me=f.BASE.multiply(ye).toAffine(),He=o(Me.x);if(He===Ri)return;const we=o(Ye*o(ne+He*R));if(we===Ri)return;let me=(Me.x===He?0:2)|Number(Me.y&$r),ke=we;return B&&b(we)&&(ke=T(we),me^=1),new $(He,ke,me)}return{seed:K,k2sig:Re}}const D={lowS:t.lowS,prehash:!1},V={lowS:t.lowS,prehash:!1};function m(c,h,y=D){const{seed:v,k2sig:S}=G(c,h,y),B=t;return Sp(B.hash.outputLen,B.nByteLength,B.hmac)(v,S)}f.BASE._setWindowSize(8);function d(c,h,y,v=V){const S=c;if(h=Br("msgHash",h),y=Br("publicKey",y),"strict"in v)throw new Error("options.strict was renamed to lowS");_g(v);const{lowS:B,prehash:L}=v;let I,w;try{if(typeof S=="string"||Os(S))try{I=$.fromDER(S)}catch(Me){if(!(Me instanceof Ti.Err))throw Me;I=$.fromCompact(S)}else if(typeof S=="object"&&typeof S.r=="bigint"&&typeof S.s=="bigint"){const{r:Me,s:He}=S;I=new $(Me,He)}else throw new Error("PARSE");w=f.fromHex(y)}catch(Me){if(Me.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(B&&I.hasHighS())return!1;L&&(h=t.hash(h));const{r:R,s:Y}=I,K=Q(h),ne=a(Y),Re=o(K*ne),ge=o(R*ne),ye=f.BASE.multiplyAndAddUnsafe(w,Re,ge)?.toAffine();return ye?o(ye.x)===R:!1}return{CURVE:t,getPublicKey:F,getSharedSecret:C,sign:m,verify:d,ProjectivePoint:f,Signature:$,utils:j}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function r3(e){return{hash:e,hmac:(t,...r)=>vg(e,t,BE(...r)),randomBytes:mp}}function n3(e,t){const r=n=>t3({...e,...r3(n)});return Object.freeze({...r(t),create:r})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xg=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Sg=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),i3=BigInt(1),Jl=BigInt(2),Ag=(e,t)=>(e+t/Jl)/t;function s3(e){const t=xg,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),f=BigInt(88),u=e*e*e%t,l=u*u*e%t,p=yr(l,r,t)*l%t,_=yr(p,r,t)*l%t,b=yr(_,Jl,t)*u%t,T=yr(b,s,t)*b%t,P=yr(T,i,t)*T%t,$=yr(P,a,t)*P%t,j=yr($,f,t)*$%t,F=yr(j,a,t)*P%t,k=yr(F,r,t)*l%t,C=yr(k,o,t)*T%t,X=yr(C,n,t)*u%t,Q=yr(X,Jl,t);if(!Ql.eql(Ql.sqr(Q),e))throw new Error("Cannot find square root");return Q}const Ql=Wc(xg,void 0,void 0,{sqrt:s3}),eh=n3({a:BigInt(0),b:BigInt(7),Fp:Ql,n:Sg,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Sg,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-i3*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=Ag(i*e,t),f=Ag(-n*e,t);let u=nr(e-a*r-f*s,t),l=nr(-a*n-f*i,t);const p=u>o,_=l>o;if(p&&(u=t-u),_&&(l=t-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:p,k1:u,k2neg:_,k2:l}}}},Ll);BigInt(0),eh.ProjectivePoint,Gc.utils.randomPrivateKey;function Bg(e){try{return Gc.ExtendedPoint.fromHex(e),!0}catch{return!1}}const Ig=(e,t)=>Gc.sign(e,t.slice(0,32)),o3=Gc.verify,Bo=e=>se.Buffer.isBuffer(e)?e:e instanceof Uint8Array?se.Buffer.from(e.buffer,e.byteOffset,e.byteLength):se.Buffer.from(e);class a3{constructor(t){Object.assign(this,t)}encode(){return se.Buffer.from(zp(hf,this))}static decode(t){return qp(hf,this,t)}static decodeUnchecked(t){return Up(hf,this,t)}}const hf=new Map;var Tg;const c3=32,es=32;function f3(e){return e._bn!==void 0}let Rg=1;class rt extends a3{constructor(t){if(super({}),this._bn=void 0,f3(t))this._bn=t._bn;else{if(typeof t=="string"){const r=Sr.decode(t);if(r.length!=es)throw new Error("Invalid public key input");this._bn=new Np(r)}else this._bn=new Np(t);if(this._bn.byteLength()>es)throw new Error("Invalid public key input")}}static unique(){const t=new rt(Rg);return Rg+=1,new rt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Sr.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(se.Buffer);if(t.length===es)return t;const r=se.Buffer.alloc(32);return t.copy(r,32-t.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,r,n){const s=se.Buffer.concat([t.toBuffer(),se.Buffer.from(r),n.toBuffer()]),i=Ll(s);return new rt(i)}static createProgramAddressSync(t,r){let n=se.Buffer.alloc(0);t.forEach(function(i){if(i.length>c3)throw new TypeError("Max seed length exceeded");n=se.Buffer.concat([n,Bo(i)])}),n=se.Buffer.concat([n,r.toBuffer(),se.Buffer.from("ProgramDerivedAddress")]);const s=Ll(n);if(Bg(s))throw new Error("Invalid seeds, address must fall off the curve");return new rt(s)}static async createProgramAddress(t,r){return this.createProgramAddressSync(t,r)}static findProgramAddressSync(t,r){let n=255,s;for(;n!=0;){try{const i=t.concat(se.Buffer.from([n]));s=this.createProgramAddressSync(i,r)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,r){return this.findProgramAddressSync(t,r)}static isOnCurve(t){const r=new rt(t);return Bg(r.toBytes())}}Tg=rt,rt.default=new Tg("11111111111111111111111111111111"),hf.set(rt,{kind:"struct",fields:[["_bn","u256"]]}),new rt("BPFLoader1111111111111111111111111111111111");const Io=1280-40-8,th=127,df=64;class kg extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(kg.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Lg extends Error{constructor(t,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Lg.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ka extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ka.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class pf{constructor(t,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=r}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const r of this.keySegments()){if(t<r.length)return r[t];t-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const xt=(e="publicKey")=>tr(32,e),u3=(e="signature")=>tr(64,e),To=(e="string")=>{const t=Ue([qe("length"),qe("lengthPadding"),tr(js(qe(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>r(i,o).chars.toString(),s.encode=(i,o,a)=>{const f={chars:se.Buffer.from(i,"utf8")};return n(f,o,a)},s.alloc=i=>qe().span+qe().span+se.Buffer.from(i,"utf8").length,s},l3=(e="authorized")=>Ue([xt("staker"),xt("withdrawer")],e),h3=(e="lockup")=>Ue([vn("unixTimestamp"),vn("epoch"),xt("custodian")],e),d3=(e="voteInit")=>Ue([xt("nodePubkey"),xt("authorizedVoter"),xt("authorizedWithdrawer"),Nt("commission")],e),p3=(e="voteAuthorizeWithSeedArgs")=>Ue([qe("voteAuthorizationType"),xt("currentAuthorityDerivedKeyOwnerPubkey"),To("currentAuthorityDerivedKeySeed"),xt("newAuthorized")],e);function _n(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(n&127)<<r*7,r+=1,!(n&128))break}return t}function En(e,t){let r=t;for(;;){let n=r&127;if(r>>=7,r==0){e.push(n);break}else n|=128,e.push(n)}}function ir(e,t){if(!e)throw new Error(t||"Assertion failed")}class gf{constructor(t,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=r}static compile(t,r){const n=new Map,s=o=>{const a=o.toBase58();let f=n.get(a);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,f)),f},i=s(r);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const a of o.keys){const f=s(a.pubkey);f.isSigner||=a.isSigner,f.isWritable||=a.isWritable}}return new gf(r,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ir(t.length<=256,"Max static account keys length exceeded");const r=t.filter(([,f])=>f.isSigner&&f.isWritable),n=t.filter(([,f])=>f.isSigner&&!f.isWritable),s=t.filter(([,f])=>!f.isSigner&&f.isWritable),i=t.filter(([,f])=>!f.isSigner&&!f.isWritable),o={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{ir(r.length>0,"Expected at least one writable signer key");const[f]=r[0];ir(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...r.map(([f])=>new rt(f)),...n.map(([f])=>new rt(f)),...s.map(([f])=>new rt(f)),...i.map(([f])=>new rt(f))];return[o,a]}extractTableLookup(t){const[r,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(r.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:r,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,r){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(r(o)){const a=new rt(i),f=t.findIndex(u=>u.equals(a));f>=0&&(ir(f<256,"Max lookup table index exceeded"),n.push(f),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const Cg="Reached end of buffer unexpectedly";function ki(e){if(e.length===0)throw new Error(Cg);return e.shift()}function xn(e,...t){const[r]=t;if(t.length===2?r+(t[1]??0)>e.length:r>=e.length)throw new Error(Cg);return e.splice(...t)}class Li{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(r=>new rt(r)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Sr.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new pf(this.staticAccountKeys)}static compile(t){const r=gf.compile(t.instructions,t.payerKey),[n,s]=r.getMessageComponents(),o=new pf(s).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Sr.encode(a.data)}));return new Li({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const r=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-r,i=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=r-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,r)=>!this.isProgramId(r))}serialize(){const t=this.accountKeys.length;let r=[];En(r,t);const n=this.instructions.map(p=>{const{accounts:_,programIdIndex:b}=p,T=Array.from(Sr.decode(p.data));let P=[];En(P,_.length);let $=[];return En($,T.length),{programIdIndex:b,keyIndicesCount:se.Buffer.from(P),keyIndices:_,dataLength:se.Buffer.from($),data:T}});let s=[];En(s,n.length);let i=se.Buffer.alloc(Io);se.Buffer.from(s).copy(i);let o=s.length;n.forEach(p=>{const b=Ue([Nt("programIdIndex"),tr(p.keyIndicesCount.length,"keyIndicesCount"),Yr(Nt("keyIndex"),p.keyIndices.length,"keyIndices"),tr(p.dataLength.length,"dataLength"),Yr(Nt("userdatum"),p.data.length,"data")]).encode(p,i,o);o+=b}),i=i.slice(0,o);const a=Ue([tr(1,"numRequiredSignatures"),tr(1,"numReadonlySignedAccounts"),tr(1,"numReadonlyUnsignedAccounts"),tr(r.length,"keyCount"),Yr(xt("key"),t,"keys"),xt("recentBlockhash")]),f={numRequiredSignatures:se.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:se.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:se.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:se.Buffer.from(r),keys:this.accountKeys.map(p=>Bo(p.toBytes())),recentBlockhash:Sr.decode(this.recentBlockhash)};let u=se.Buffer.alloc(2048);const l=a.encode(f,u);return i.copy(u,l),u.slice(0,l+i.length)}static from(t){let r=[...t];const n=ki(r);if(n!==(n&th))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=ki(r),i=ki(r),o=_n(r);let a=[];for(let _=0;_<o;_++){const b=xn(r,0,es);a.push(new rt(se.Buffer.from(b)))}const f=xn(r,0,es),u=_n(r);let l=[];for(let _=0;_<u;_++){const b=ki(r),T=_n(r),P=xn(r,0,T),$=_n(r),j=xn(r,0,$),F=Sr.encode(se.Buffer.from(j));l.push({programIdIndex:b,accounts:P,data:F})}const p={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Sr.encode(se.Buffer.from(f)),accountKeys:a,instructions:l};return new Li(p)}}class La{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const r of this.addressTableLookups)t+=r.readonlyIndexes.length+r.writableIndexes.length;return t}getAccountKeys(t){let r;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)r=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new pf(this.staticAccountKeys,r)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-r,o=n-r-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=r-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)r.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)r.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(t){const r=gf.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const l of i){const p=r.extractTableLookup(l);if(p!==void 0){const[_,{writable:b,readonly:T}]=p;n.push(_),s.writable.push(...b),s.readonly.push(...T)}}const[o,a]=r.getMessageComponents(),u=new pf(a,s).compileInstructions(t.instructions);return new La({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:u,addressTableLookups:n})}serialize(){const t=Array();En(t,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();En(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();En(i,this.addressTableLookups.length);const o=Ue([Nt("prefix"),Ue([Nt("numRequiredSignatures"),Nt("numReadonlySignedAccounts"),Nt("numReadonlyUnsignedAccounts")],"header"),tr(t.length,"staticAccountKeysLength"),Yr(xt(),this.staticAccountKeys.length,"staticAccountKeys"),xt("recentBlockhash"),tr(n.length,"instructionsLength"),tr(r.length,"serializedInstructions"),tr(i.length,"addressTableLookupsLength"),tr(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Io),f=128,u=o.encode({prefix:f,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(l=>l.toBytes()),recentBlockhash:Sr.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,u)}serializeInstructions(){let t=0;const r=new Uint8Array(Io);for(const n of this.compiledInstructions){const s=Array();En(s,n.accountKeyIndexes.length);const i=Array();En(i,n.data.length);const o=Ue([Nt("programIdIndex"),tr(s.length,"encodedAccountKeyIndexesLength"),Yr(Nt(),n.accountKeyIndexes.length,"accountKeyIndexes"),tr(i.length,"encodedDataLength"),tr(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},r,t)}return r.slice(0,t)}serializeAddressTableLookups(){let t=0;const r=new Uint8Array(Io);for(const n of this.addressTableLookups){const s=Array();En(s,n.writableIndexes.length);const i=Array();En(i,n.readonlyIndexes.length);const o=Ue([xt("accountKey"),tr(s.length,"encodedWritableIndexesLength"),Yr(Nt(),n.writableIndexes.length,"writableIndexes"),tr(i.length,"encodedReadonlyIndexesLength"),Yr(Nt(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},r,t)}return r.slice(0,t)}static deserialize(t){let r=[...t];const n=ki(r),s=n&th;ir(n!==s,"Expected versioned message but received legacy message");const i=s;ir(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:ki(r),numReadonlySignedAccounts:ki(r),numReadonlyUnsignedAccounts:ki(r)},a=[],f=_n(r);for(let T=0;T<f;T++)a.push(new rt(xn(r,0,es)));const u=Sr.encode(xn(r,0,es)),l=_n(r),p=[];for(let T=0;T<l;T++){const P=ki(r),$=_n(r),j=xn(r,0,$),F=_n(r),k=new Uint8Array(xn(r,0,F));p.push({programIdIndex:P,accountKeyIndexes:j,data:k})}const _=_n(r),b=[];for(let T=0;T<_;T++){const P=new rt(xn(r,0,es)),$=_n(r),j=xn(r,0,$),F=_n(r),k=xn(r,0,F);b.push({accountKey:P,writableIndexes:j,readonlyIndexes:k})}return new La({header:o,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:p,addressTableLookups:b})}}const Og={deserializeMessageVersion(e){const t=e[0],r=t&th;return r===t?"legacy":r},deserialize:e=>{const t=Og.deserializeMessageVersion(e);if(t==="legacy")return Li.from(e);if(t===0)return La.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let ts=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({});const g3=se.Buffer.alloc(df).fill(0);class $g{constructor(t){this.keys=void 0,this.programId=void 0,this.data=se.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:r,isWritable:n})=>({pubkey:t.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class rs{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:r,nonceInfo:n}=t;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:n}=t;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{const{recentBlockhash:r,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new $g(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,r;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(t=this.recentBlockhash,r=this.instructions),!t)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let P=0;P<r.length;P++)if(r[P].programId===void 0)throw new Error(`Transaction instruction index ${P} has undefined program id`);const s=[],i=[];r.forEach(P=>{P.keys.forEach(j=>{i.push({...j})});const $=P.programId.toString();s.includes($)||s.push($)}),s.forEach(P=>{i.push({pubkey:new rt(P),isSigner:!1,isWritable:!1})});const o=[];i.forEach(P=>{const $=P.pubkey.toString(),j=o.findIndex(F=>F.pubkey.toString()===$);j>-1?(o[j].isWritable=o[j].isWritable||P.isWritable,o[j].isSigner=o[j].isSigner||P.isSigner):o.push(P)}),o.sort(function(P,$){if(P.isSigner!==$.isSigner)return P.isSigner?-1:1;if(P.isWritable!==$.isWritable)return P.isWritable?-1:1;const j={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return P.pubkey.toBase58().localeCompare($.pubkey.toBase58(),"en",j)});const a=o.findIndex(P=>P.pubkey.equals(n));if(a>-1){const[P]=o.splice(a,1);P.isSigner=!0,P.isWritable=!0,o.unshift(P)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const P of this.signatures){const $=o.findIndex(j=>j.pubkey.equals(P.publicKey));if($>-1)o[$].isSigner||(o[$].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${P.publicKey.toString()}`)}let f=0,u=0,l=0;const p=[],_=[];o.forEach(({pubkey:P,isSigner:$,isWritable:j})=>{$?(p.push(P.toString()),f+=1,j||(u+=1)):(_.push(P.toString()),j||(l+=1))});const b=p.concat(_),T=r.map(P=>{const{data:$,programId:j}=P;return{programIdIndex:b.indexOf(j.toString()),accounts:P.keys.map(F=>b.indexOf(F.pubkey.toString())),data:Sr.encode($)}});return T.forEach(P=>{ir(P.programIdIndex>=0),P.accounts.forEach($=>ir($>=0))}),new Li({header:{numRequiredSignatures:f,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:l},accountKeys:b,recentBlockhash:t,instructions:T})}_compile(){const t=this.compileMessage(),r=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((s,i)=>r[i].equals(s.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const r=new Set;this.signatures=t.filter(n=>{const s=n.toString();return r.has(s)?!1:(r.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of t){const o=i.publicKey.toString();r.has(o)||(r.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of t){const o=i.publicKey.toString();r.has(o)||(r.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...r){const n=t.serialize();r.forEach(s=>{const i=Ig(n,s.secretKey);this._addSignature(s.publicKey,Bo(i))})}addSignature(t,r){this._compile(),this._addSignature(t,r)}_addSignature(t,r){ir(r.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=se.Buffer.from(r)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,r){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?r&&(n.missing||=[]).push(i):o3(s,t,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,r);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:r}=this,n=[];En(n,r.length);const s=n.length+r.length*64+t.length,i=se.Buffer.alloc(s);return ir(r.length<256),se.Buffer.from(n).copy(i,0),r.forEach(({signature:o},a)=>{o!==null&&(ir(o.length===64,"signature has invalid length"),se.Buffer.from(o).copy(i,n.length+a*64))}),t.copy(i,n.length+r.length*64),ir(i.length<=Io,`Transaction too large: ${i.length} > ${Io}`),i}get keys(){return ir(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ir(this.instructions.length===1),this.instructions[0].programId}get data(){return ir(this.instructions.length===1),this.instructions[0].data}static from(t){let r=[...t];const n=_n(r);let s=[];for(let i=0;i<n;i++){const o=xn(r,0,df);s.push(Sr.encode(se.Buffer.from(o)))}return rs.populate(Li.from(r),s)}static populate(t,r=[]){const n=new rs;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((s,i)=>{const o={signature:s==Sr.encode(g3)?null:Sr.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(f=>f.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new $g({keys:i,programId:t.accountKeys[s.programIdIndex],data:Sr.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}class Ca{get version(){return this.message.version}constructor(t,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)ir(r.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(df));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),r=Array();En(r,this.signatures.length);const n=Ue([tr(r.length,"encodedSignaturesLength"),Yr(u3(),this.signatures.length,"signatures"),tr(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let r=[...t];const n=[],s=_n(r);for(let o=0;o<s;o++)n.push(new Uint8Array(xn(r,0,df)));const i=Og.deserialize(new Uint8Array(r));return new Ca(i,n)}sign(t){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=n.findIndex(o=>o.equals(s.publicKey));ir(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Ig(r,s.secretKey)}}addSignature(t,r){ir(r.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));ir(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=r}}const y3=1e3/(160/64);new rt("SysvarC1ock11111111111111111111111111111111"),new rt("SysvarEpochSchedu1e111111111111111111111111"),new rt("Sysvar1nstructions1111111111111111111111111"),new rt("SysvarRecentB1ockHashes11111111111111111111"),new rt("SysvarRent111111111111111111111111111111111"),new rt("SysvarRewards111111111111111111111111111111"),new rt("SysvarS1otHashes111111111111111111111111111"),new rt("SysvarS1otHistory11111111111111111111111111"),new rt("SysvarStakeHistory1111111111111111111111111");class Mg extends Error{constructor({action:t,signature:r,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${r} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(f=>f)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=r,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((r,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,r(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class je extends Error{constructor({code:t,message:r,data:n},s){super(s!=null?`${s}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function Ro(e){return new Promise(t=>setTimeout(t,e))}const w3=zr("lamportsPerSignature"),Ng=Ue([qe("version"),qe("state"),xt("authorizedPubkey"),xt("nonce"),Ue([w3],"feeCalculator")]);Ng.span;class rh{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const r=Ng.decode(Bo(t),0);return new rh({authorizedPubkey:new rt(r.authorizedPubkey),nonce:new rt(r.nonce).toString(),feeCalculator:r.feeCalculator})}}const m3=e=>{const t=e.decode.bind(e),r=e.encode.bind(e);return{decode:t,encode:r}},ko=(e=>t=>{const r=tr(e,t),{encode:n,decode:s}=m3(r),i=r;return i.decode=(o,a)=>{const f=s(o,a);return tS(se.Buffer.from(f))},i.encode=(o,a,f)=>{const u=iS(o,e);return n(u,a,f)},i})(8);Object.freeze({Create:{index:0,layout:Ue([qe("instruction"),vn("lamports"),vn("space"),xt("programId")])},Assign:{index:1,layout:Ue([qe("instruction"),xt("programId")])},Transfer:{index:2,layout:Ue([qe("instruction"),ko("lamports")])},CreateWithSeed:{index:3,layout:Ue([qe("instruction"),xt("base"),To("seed"),vn("lamports"),vn("space"),xt("programId")])},AdvanceNonceAccount:{index:4,layout:Ue([qe("instruction")])},WithdrawNonceAccount:{index:5,layout:Ue([qe("instruction"),vn("lamports")])},InitializeNonceAccount:{index:6,layout:Ue([qe("instruction"),xt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Ue([qe("instruction"),xt("authorized")])},Allocate:{index:8,layout:Ue([qe("instruction"),vn("space")])},AllocateWithSeed:{index:9,layout:Ue([qe("instruction"),xt("base"),To("seed"),vn("space"),xt("programId")])},AssignWithSeed:{index:10,layout:Ue([qe("instruction"),xt("base"),To("seed"),xt("programId")])},TransferWithSeed:{index:11,layout:Ue([qe("instruction"),ko("lamports"),To("seed"),xt("programId")])},UpgradeNonceAccount:{index:12,layout:Ue([qe("instruction")])}}),new rt("11111111111111111111111111111111"),new rt("BPFLoader2111111111111111111111111111111111");function b3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nh,Pg;function v3(){if(Pg)return nh;Pg=1;var e=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function r(n,s){var i,o,a,f,u,l,p;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return r(n.toJSON(),s);if(p=e.call(n),p==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=r(n[i],!0)+",";return o>-1&&(a+=r(n[i],!0)),a+"]"}else if(p==="[object Object]"){for(f=t(n).sort(),o=f.length,a="",i=0;i<o;)u=f[i],l=r(n[u],!1),l!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return nh=function(n){var s=r(n,!1);if(s!==void 0)return""+s},nh}var _3=v3(),Ug=b3(_3);const Oa=32;function ih(e){let t=0;for(;e>1;)e/=2,t++;return t}function E3(e){return e===0?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e|=e>>32,e+1)}class x3{constructor(t,r,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const r=ih(E3(t+Oa+1))-ih(Oa)-1,n=this.getSlotsInEpoch(r),s=t-(n-Oa);return[r,s]}else{const r=t-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=r%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Oa:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+ih(Oa)):this.slotsPerEpoch}}var S3=globalThis.fetch;class A3 extends zS{constructor(t,r,n){const s=i=>{const o=jS(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,r,n),this.underlyingSocket=void 0}call(...t){const r=this.underlyingSocket?.readyState;return r===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...t){const r=this.underlyingSocket?.readyState;return r===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function B3(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}const Fg=56;class Hg{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const r=B3(I3,t),n=t.length-Fg;ir(n>=0,"lookup table is invalid"),ir(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=Ue([Yr(xt(),s,"addresses")]).decode(t.slice(Fg));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new rt(r.authority[0]):void 0,addresses:i.map(o=>new rt(o))}}}const I3={index:1,layout:Ue([qe("typeIndex"),ko("deactivationSlot"),zr("lastExtendedSlot"),Nt("lastExtendedStartIndex"),Nt(),Yr(xt(),js(Nt(),-1),"authority")])},T3=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function R3(e){const t=e.match(T3);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,n,s,i]=t,o=e.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),f=a==null?"":`:${a+1}`;return`${o}//${n}${f}${i}`}const hr=Ia(Vl(rt),Ee(),e=>new rt(e)),jg=Kl([Ee(),lr("base64")]),sh=Ia(Vl(se.Buffer),jg,e=>se.Buffer.from(e[0],"base64")),k3=30*1e3;function L3(e){if(/^https?:/.test(e)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}function Gt(e){let t,r;if(typeof e=="string")t=e;else if(e){const{commitment:n,...s}=e;t=n,r=s}return{commitment:t,config:r}}function Dg(e){return e.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function zg(e){return fn([pe({jsonrpc:lr("2.0"),id:Ee(),result:e}),pe({jsonrpc:lr("2.0"),id:Ee(),error:pe({code:Ao(),message:Ee(),data:We(hS())})})])}const C3=zg(Ao());function bt(e){return Ia(zg(e),C3,t=>"error"in t?t:{...t,result:Se(t.result,e)})}function wr(e){return bt(pe({context:pe({slot:re()}),value:e}))}function yf(e){return pe({context:pe({slot:re()}),value:e})}function oh(e,t){return e===0?new La({header:t.header,staticAccountKeys:t.accountKeys.map(r=>new rt(r)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:Sr.decode(r.data)})),addressTableLookups:t.addressTableLookups}):new Li(t)}const O3=pe({foundation:re(),foundationTerm:re(),initial:re(),taper:re(),terminal:re()}),$3=bt(Be(Ie(pe({epoch:re(),effectiveSlot:re(),amount:re(),postBalance:re(),commission:We(Ie(re()))})))),M3=Be(pe({slot:re(),prioritizationFee:re()})),N3=pe({total:re(),validator:re(),foundation:re(),epoch:re()}),P3=pe({epoch:re(),slotIndex:re(),slotsInEpoch:re(),absoluteSlot:re(),blockHeight:We(re()),transactionCount:We(re())}),U3=pe({slotsPerEpoch:re(),leaderScheduleSlotOffset:re(),warmup:ui(),firstNormalEpoch:re(),firstNormalSlot:re()}),F3=ug(Ee(),Be(re())),zs=Ie(fn([pe({}),Ee()])),H3=pe({err:zs}),j3=lr("receivedSignature"),D3=pe({"solana-core":Ee(),"feature-set":We(re())}),z3=pe({program:Ee(),programId:hr,parsed:Ao()}),q3=pe({programId:hr,accounts:Be(hr),data:Ee()}),qg=wr(pe({err:Ie(fn([pe({}),Ee()])),logs:Ie(Be(Ee())),accounts:We(Ie(Be(Ie(pe({executable:ui(),owner:Ee(),lamports:re(),data:Be(Ee()),rentEpoch:We(re())}))))),unitsConsumed:We(re()),returnData:We(Ie(pe({programId:Ee(),data:Kl([Ee(),lr("base64")])}))),innerInstructions:We(Ie(Be(pe({index:re(),instructions:Be(fn([z3,q3]))}))))})),V3=wr(pe({byIdentity:ug(Ee(),Be(re())),range:pe({firstSlot:re(),lastSlot:re()})}));function K3(e,t,r,n,s,i){const o=r||S3;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(l,p)=>{const _=await new Promise((b,T)=>{try{n(l,p,(P,$)=>b([P,$]))}catch(P){T(P)}});return await o(..._)}),new FS(async(l,p)=>{const _={method:"POST",body:l,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},WA)};try{let b=5,T,P=500;for(;f?T=await f(e,_):T=await o(e,_),!(T.status!==429||s===!0||(b-=1,b===0));)console.error(`Server responded with ${T.status} ${T.statusText}.  Retrying after ${P}ms delay...`),await Ro(P),P*=2;const $=await T.text();T.ok?p(null,$):p(new Error(`${T.status} ${T.statusText}: ${$}`))}catch(b){b instanceof Error&&p(b)}},{})}function W3(e){return(t,r)=>new Promise((n,s)=>{e.request(t,r,(i,o)=>{if(i){s(i);return}n(o)})})}function Z3(e){return t=>new Promise((r,n)=>{t.length===0&&r([]);const s=t.map(i=>e.request(i.methodName,i.args));e.request(s,(i,o)=>{if(i){n(i);return}r(o)})})}const G3=bt(O3),Y3=bt(N3),X3=bt(M3),J3=bt(P3),Q3=bt(U3),eA=bt(F3),tA=bt(re()),rA=wr(pe({total:re(),circulating:re(),nonCirculating:re(),nonCirculatingAccounts:Be(hr)})),ah=pe({amount:Ee(),uiAmount:Ie(re()),decimals:re(),uiAmountString:We(Ee())}),nA=wr(Be(pe({address:hr,amount:Ee(),uiAmount:Ie(re()),decimals:re(),uiAmountString:We(Ee())}))),iA=wr(Be(pe({pubkey:hr,account:pe({executable:ui(),owner:hr,lamports:re(),data:sh,rentEpoch:re()})}))),ch=pe({program:Ee(),parsed:Ao(),space:re()}),sA=wr(Be(pe({pubkey:hr,account:pe({executable:ui(),owner:hr,lamports:re(),data:ch,rentEpoch:re()})}))),oA=wr(Be(pe({lamports:re(),address:hr}))),$a=pe({executable:ui(),owner:hr,lamports:re(),data:sh,rentEpoch:re()}),aA=pe({pubkey:hr,account:$a}),cA=Ia(fn([Vl(se.Buffer),ch]),fn([jg,ch]),e=>Array.isArray(e)?Se(e,sh):e),fh=pe({executable:ui(),owner:hr,lamports:re(),data:cA,rentEpoch:re()}),fA=pe({pubkey:hr,account:fh}),uA=pe({state:fn([lr("active"),lr("inactive"),lr("activating"),lr("deactivating")]),active:re(),inactive:re()}),lA=bt(Be(pe({signature:Ee(),slot:re(),err:zs,memo:Ie(Ee()),blockTime:We(Ie(re()))}))),hA=bt(Be(pe({signature:Ee(),slot:re(),err:zs,memo:Ie(Ee()),blockTime:We(Ie(re()))}))),dA=pe({subscription:re(),result:yf($a)}),pA=pe({pubkey:hr,account:$a}),gA=pe({subscription:re(),result:yf(pA)}),yA=pe({parent:re(),slot:re(),root:re()}),wA=pe({subscription:re(),result:yA}),mA=fn([pe({type:fn([lr("firstShredReceived"),lr("completed"),lr("optimisticConfirmation"),lr("root")]),slot:re(),timestamp:re()}),pe({type:lr("createdBank"),parent:re(),slot:re(),timestamp:re()}),pe({type:lr("frozen"),slot:re(),timestamp:re(),stats:pe({numTransactionEntries:re(),numSuccessfulTransactions:re(),numFailedTransactions:re(),maxTransactionsPerEntry:re()})}),pe({type:lr("dead"),slot:re(),timestamp:re(),err:Ee()})]),bA=pe({subscription:re(),result:mA}),vA=pe({subscription:re(),result:yf(fn([H3,j3]))}),_A=pe({subscription:re(),result:re()}),EA=pe({pubkey:Ee(),gossip:Ie(Ee()),tpu:Ie(Ee()),rpc:Ie(Ee()),version:Ie(Ee())}),Vg=pe({votePubkey:Ee(),nodePubkey:Ee(),activatedStake:re(),epochVoteAccount:ui(),epochCredits:Be(Kl([re(),re(),re()])),commission:re(),lastVote:re(),rootSlot:Ie(re())}),xA=bt(pe({current:Be(Vg),delinquent:Be(Vg)})),SA=fn([lr("processed"),lr("confirmed"),lr("finalized")]),AA=pe({slot:re(),confirmations:Ie(re()),err:zs,confirmationStatus:We(SA)}),BA=wr(Be(Ie(AA))),IA=bt(re()),Kg=pe({accountKey:hr,writableIndexes:Be(re()),readonlyIndexes:Be(re())}),uh=pe({signatures:Be(Ee()),message:pe({accountKeys:Be(Ee()),header:pe({numRequiredSignatures:re(),numReadonlySignedAccounts:re(),numReadonlyUnsignedAccounts:re()}),instructions:Be(pe({accounts:Be(re()),data:Ee(),programIdIndex:re()})),recentBlockhash:Ee(),addressTableLookups:We(Be(Kg))})}),Wg=pe({pubkey:hr,signer:ui(),writable:ui(),source:We(fn([lr("transaction"),lr("lookupTable")]))}),Zg=pe({accountKeys:Be(Wg),signatures:Be(Ee())}),Gg=pe({parsed:Ao(),program:Ee(),programId:hr}),Yg=pe({accounts:Be(hr),data:Ee(),programId:hr}),TA=fn([Yg,Gg]),RA=fn([pe({parsed:Ao(),program:Ee(),programId:Ee()}),pe({accounts:Be(Ee()),data:Ee(),programId:Ee()})]),Xg=Ia(TA,RA,e=>"accounts"in e?Se(e,Yg):Se(e,Gg)),Jg=pe({signatures:Be(Ee()),message:pe({accountKeys:Be(Wg),instructions:Be(Xg),recentBlockhash:Ee(),addressTableLookups:We(Ie(Be(Kg)))})}),wf=pe({accountIndex:re(),mint:Ee(),owner:We(Ee()),uiTokenAmount:ah}),Qg=pe({writable:Be(hr),readonly:Be(hr)}),mf=pe({err:zs,fee:re(),innerInstructions:We(Ie(Be(pe({index:re(),instructions:Be(pe({accounts:Be(re()),data:Ee(),programIdIndex:re()}))})))),preBalances:Be(re()),postBalances:Be(re()),logMessages:We(Ie(Be(Ee()))),preTokenBalances:We(Ie(Be(wf))),postTokenBalances:We(Ie(Be(wf))),loadedAddresses:We(Qg),computeUnitsConsumed:We(re())}),lh=pe({err:zs,fee:re(),innerInstructions:We(Ie(Be(pe({index:re(),instructions:Be(Xg)})))),preBalances:Be(re()),postBalances:Be(re()),logMessages:We(Ie(Be(Ee()))),preTokenBalances:We(Ie(Be(wf))),postTokenBalances:We(Ie(Be(wf))),loadedAddresses:We(Qg),computeUnitsConsumed:We(re())}),Lo=fn([lr(0),lr("legacy")]),qs=pe({pubkey:Ee(),lamports:re(),postBalance:Ie(re()),rewardType:Ie(Ee()),commission:We(Ie(re()))}),kA=bt(Ie(pe({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:re(),transactions:Be(pe({transaction:uh,meta:Ie(mf),version:We(Lo)})),rewards:We(Be(qs)),blockTime:Ie(re()),blockHeight:Ie(re())}))),LA=bt(Ie(pe({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:re(),rewards:We(Be(qs)),blockTime:Ie(re()),blockHeight:Ie(re())}))),CA=bt(Ie(pe({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:re(),transactions:Be(pe({transaction:Zg,meta:Ie(mf),version:We(Lo)})),rewards:We(Be(qs)),blockTime:Ie(re()),blockHeight:Ie(re())}))),OA=bt(Ie(pe({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:re(),transactions:Be(pe({transaction:Jg,meta:Ie(lh),version:We(Lo)})),rewards:We(Be(qs)),blockTime:Ie(re()),blockHeight:Ie(re())}))),$A=bt(Ie(pe({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:re(),transactions:Be(pe({transaction:Zg,meta:Ie(lh),version:We(Lo)})),rewards:We(Be(qs)),blockTime:Ie(re()),blockHeight:Ie(re())}))),MA=bt(Ie(pe({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:re(),rewards:We(Be(qs)),blockTime:Ie(re()),blockHeight:Ie(re())}))),NA=bt(Ie(pe({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:re(),transactions:Be(pe({transaction:uh,meta:Ie(mf)})),rewards:We(Be(qs)),blockTime:Ie(re())}))),e1=bt(Ie(pe({blockhash:Ee(),previousBlockhash:Ee(),parentSlot:re(),signatures:Be(Ee()),blockTime:Ie(re())}))),hh=bt(Ie(pe({slot:re(),meta:Ie(mf),blockTime:We(Ie(re())),transaction:uh,version:We(Lo)}))),bf=bt(Ie(pe({slot:re(),transaction:Jg,meta:Ie(lh),blockTime:We(Ie(re())),version:We(Lo)}))),PA=wr(pe({blockhash:Ee(),feeCalculator:pe({lamportsPerSignature:re()})})),UA=wr(pe({blockhash:Ee(),lastValidBlockHeight:re()})),FA=wr(ui()),HA=pe({slot:re(),numTransactions:re(),numSlots:re(),samplePeriodSecs:re()}),jA=bt(Be(HA)),DA=wr(Ie(pe({feeCalculator:pe({lamportsPerSignature:re()})}))),zA=bt(Ee()),qA=bt(Ee()),VA=pe({err:zs,logs:Be(Ee()),signature:Ee()}),KA=pe({result:yf(VA),subscription:re()}),WA={"solana-client":"js/1.0.0-maintenance"};class ZA{constructor(t,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async l=>{const{commitment:p,config:_}=Gt(l),b=this._buildArgs([],p,void 0,_),T=Ug(b);return u[T]=u[T]??(async()=>{try{const P=await this._rpcRequest("getBlockHeight",b),$=Se(P,bt(re()));if("error"in $)throw new je($.error,"failed to get block height information");return $.result}finally{delete u[T]}})(),await u[T]}})();let n,s,i,o,a,f;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,s=r.httpHeaders,i=r.fetch,o=r.fetchMiddleware,a=r.disableRetryOnRateLimit,f=r.httpAgent),this._rpcEndpoint=L3(t),this._rpcWsEndpoint=n||R3(t),this._rpcClient=K3(t,s,i,o,a,f),this._rpcRequest=W3(this._rpcClient),this._rpcBatchRequest=Z3(this._rpcClient),this._rpcWebSocket=new A3(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,r){const{commitment:n,config:s}=Gt(r),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=Se(o,wr(re()));if("error"in a)throw new je(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,r){return await this.getBalanceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const r=await this._rpcRequest("getBlockTime",[t]),n=Se(r,bt(Ie(re())));if("error"in n)throw new je(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),r=Se(t,bt(re()));if("error"in r)throw new je(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),r=Se(t,tA);if("error"in r)throw new je(r.error,"failed to get first available block");return r.result}async getSupply(t){let r={};typeof t=="string"?r={commitment:t}:t?r={...t,commitment:t&&t.commitment||this.commitment}:r={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[r]),s=Se(n,rA);if("error"in s)throw new je(s.error,"failed to get supply");return s.result}async getTokenSupply(t,r){const n=this._buildArgs([t.toBase58()],r),s=await this._rpcRequest("getTokenSupply",n),i=Se(s,wr(ah));if("error"in i)throw new je(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,r){const n=this._buildArgs([t.toBase58()],r),s=await this._rpcRequest("getTokenAccountBalance",n),i=Se(s,wr(ah));if("error"in i)throw new je(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,r,n){const{commitment:s,config:i}=Gt(n);let o=[t.toBase58()];"mint"in r?o.push({mint:r.mint.toBase58()}):o.push({programId:r.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),f=await this._rpcRequest("getTokenAccountsByOwner",a),u=Se(f,iA);if("error"in u)throw new je(u.error,`failed to get token accounts owned by account ${t.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(t,r,n){let s=[t.toBase58()];"mint"in r?s.push({mint:r.mint.toBase58()}):s.push({programId:r.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Se(o,sA);if("error"in a)throw new je(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const r={...t,commitment:t&&t.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],s=await this._rpcRequest("getLargestAccounts",n),i=Se(s,oA);if("error"in i)throw new je(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,r){const n=this._buildArgs([t.toBase58()],r),s=await this._rpcRequest("getTokenLargestAccounts",n),i=Se(s,nA);if("error"in i)throw new je(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,r){const{commitment:n,config:s}=Gt(r),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Se(o,wr(Ie($a)));if("error"in a)throw new je(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,r){const{commitment:n,config:s}=Gt(r),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Se(o,wr(Ie(fh)));if("error"in a)throw new je(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,r){try{return(await this.getAccountInfoAndContext(t,r)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,r){const{commitment:n,config:s}=Gt(r),i=t.map(u=>u.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),f=Se(a,wr(Be(Ie(fh))));if("error"in f)throw new je(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfoAndContext(t,r){const{commitment:n,config:s}=Gt(r),i=t.map(u=>u.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),f=Se(a,wr(Be(Ie($a))));if("error"in f)throw new je(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfo(t,r){return(await this.getMultipleAccountsInfoAndContext(t,r)).value}async getStakeActivation(t,r,n){const{commitment:s,config:i}=Gt(r),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??i?.epoch}),a=await this._rpcRequest("getStakeActivation",o),f=Se(a,bt(uA));if("error"in f)throw new je(f.error,`failed to get Stake Activation ${t.toBase58()}`);return f.result}async getProgramAccounts(t,r){const{commitment:n,config:s}=Gt(r),{encoding:i,...o}=s||{},a=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Dg(o.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",a),u=Be(aA),l=o.withContext===!0?Se(f,wr(u)):Se(f,bt(u));if("error"in l)throw new je(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async getParsedProgramAccounts(t,r){const{commitment:n,config:s}=Gt(r),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Se(o,bt(Be(fA)));if("error"in a)throw new je(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,r){let n;if(typeof t=="string")n=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let s;try{s=Sr.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return ir(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((r,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:r}){let n,s,i=!1;const o=new Promise((f,u)=>{try{n=this.onSignature(r,(p,_)=>{n=void 0;const b={context:_,value:p};f({__type:ts.PROCESSED,response:b})},t);const l=new Promise(p=>{n==null?p():s=this._onSubscriptionStateChange(n,_=>{_==="subscribed"&&p()})});(async()=>{if(await l,i)return;const p=await this.getSignatureStatus(r);if(i||p==null)return;const{context:_,value:b}=p;if(b!=null)if(b?.err)u(b.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(b.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(b.confirmationStatus==="processed"||b.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,f({__type:ts.PROCESSED,response:{context:_,value:b}})}})()}catch(l){u(l)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(p=>{const _=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let b=await _();if(!i){for(;b<=n;)if(await Ro(1e3),i||(b=await _(),i))return;p({__type:ts.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),u=this.getCancellationPromise(r);let l;try{const p=await Promise.race([u,f,o]);if(p.__type===ts.PROCESSED)l=p.response;else throw new kg(s)}finally{i=!0,a()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const f=new Promise(b=>{let T=i,P=null;const $=async()=>{try{const{context:j,value:F}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return P=j.slot,F?.nonce}catch{return T}};(async()=>{if(T=await $(),!a)for(;;){if(i!==T){b({__type:ts.NONCE_INVALID,slotInWhichNonceDidAdvance:P});return}if(await Ro(2e3),a||(T=await $(),a))return}})()}),{abortConfirmation:u,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),p=this.getCancellationPromise(r);let _;try{const b=await Promise.race([p,l,f]);if(b.__type===ts.PROCESSED)_=b.response;else{let T;for(;;){const P=await this.getSignatureStatus(o);if(P==null)break;if(P.context.slot<(b.slotInWhichNonceDidAdvance??n)){await Ro(400);continue}T=P;break}if(T?.value){const P=t||"finalized",{confirmationStatus:$}=T.value;switch(P){case"processed":case"recent":if($!=="processed"&&$!=="confirmed"&&$!=="finalized")throw new ka(o);break;case"confirmed":case"single":case"singleGossip":if($!=="confirmed"&&$!=="finalized")throw new ka(o);break;case"finalized":case"max":case"root":if($!=="finalized")throw new ka(o);break;default:(j=>{})(P)}_={context:T.context,value:{err:T.value.err}}}else throw new ka(o)}}finally{a=!0,u()}return _}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:r}){let n;const s=new Promise(f=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:ts.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:r});let a;try{const f=await Promise.race([o,s]);if(f.__type===ts.PROCESSED)a=f.response;else throw new Lg(r,f.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),r=Se(t,bt(Be(EA)));if("error"in r)throw new je(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(t){const r=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",r),s=Se(n,xA);if("error"in s)throw new je(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:r,config:n}=Gt(t),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getSlot",s),o=Se(i,bt(re()));if("error"in o)throw new je(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:r,config:n}=Gt(t),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=Se(i,bt(Ee()));if("error"in o)throw new je(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,r){const n=[t,r],s=await this._rpcRequest("getSlotLeaders",n),i=Se(s,bt(Be(hr)));if("error"in i)throw new je(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,r){const{context:n,value:s}=await this.getSignatureStatuses([t],r);ir(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,r){const n=[t];r&&n.push(r);const s=await this._rpcRequest("getSignatureStatuses",n),i=Se(s,BA);if("error"in i)throw new je(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:r,config:n}=Gt(t),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=Se(i,bt(re()));if("error"in o)throw new je(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const r=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",r),s=Se(n,G3);if("error"in s)throw new je(s.error,"failed to get inflation");return s.result}async getInflationReward(t,r,n){const{commitment:s,config:i}=Gt(n),o=this._buildArgs([t.map(u=>u.toBase58())],s,void 0,{...i,epoch:r??i?.epoch}),a=await this._rpcRequest("getInflationReward",o),f=Se(a,$3);if("error"in f)throw new je(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),r=Se(t,Y3);if("error"in r)throw new je(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(t){const{commitment:r,config:n}=Gt(t),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=Se(i,J3);if("error"in o)throw new je(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),r=Se(t,Q3);if("error"in r)throw new je(r.error,"failed to get epoch schedule");const n=r.result;return new x3(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),r=Se(t,eA);if("error"in r)throw new je(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(t,r){const n=this._buildArgs([t],r),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=Se(s,IA);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const r=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",r),s=Se(n,PA);if("error"in s)throw new je(s.error,"failed to get recent blockhash");return s.result}async getRecentPerformanceSamples(t){const r=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=Se(r,jA);if("error"in n)throw new je(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,r){const n=this._buildArgs([t],r),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=Se(s,DA);if("error"in i)throw new je(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,r){const n=Bo(t.serialize()).toString("base64"),s=this._buildArgs([n],r),i=await this._rpcRequest("getFeeForMessage",s),o=Se(i,wr(Ie(re())));if("error"in o)throw new je(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const r=t?.lockedWritableAccounts?.map(o=>o.toBase58()),n=r?.length?[r]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=Se(s,X3);if("error"in i)throw new je(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(t){const{commitment:r,config:n}=Gt(t),s=this._buildArgs([],r,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=Se(i,UA);if("error"in o)throw new je(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,r){const{commitment:n,config:s}=Gt(r),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Se(o,FA);if("error"in a)throw new je(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),r=Se(t,bt(D3));if("error"in r)throw new je(r.error,"failed to get version");return r.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),r=Se(t,bt(Ee()));if("error"in r)throw new je(r.error,"failed to get genesis hash");return r.result}async getBlock(t,r){const{commitment:n,config:s}=Gt(r),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=Se(o,CA);if("error"in a)throw a.error;return a.result}case"none":{const a=Se(o,LA);if("error"in a)throw a.error;return a.result}default:{const a=Se(o,kA);if("error"in a)throw a.error;const{result:f}=a;return f?{...f,transactions:f.transactions.map(({transaction:u,meta:l,version:p})=>({meta:l,transaction:{...u,message:oh(p,u.message)},version:p}))}:null}}}catch(a){throw new je(a,"failed to get confirmed block")}}async getParsedBlock(t,r){const{commitment:n,config:s}=Gt(r),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=Se(o,$A);if("error"in a)throw a.error;return a.result}case"none":{const a=Se(o,MA);if("error"in a)throw a.error;return a.result}default:{const a=Se(o,OA);if("error"in a)throw a.error;return a.result}}}catch(a){throw new je(a,"failed to get block")}}async getBlockProduction(t){let r,n;if(typeof t=="string")n=t;else if(t){const{commitment:a,...f}=t;n=a,r=f}const s=this._buildArgs([],n,"base64",r),i=await this._rpcRequest("getBlockProduction",s),o=Se(i,V3);if("error"in o)throw new je(o.error,"failed to get block production information");return o.result}async getTransaction(t,r){const{commitment:n,config:s}=Gt(r),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Se(o,hh);if("error"in a)throw new je(a.error,"failed to get transaction");const f=a.result;return f&&{...f,transaction:{...f.transaction,message:oh(f.version,f.transaction.message)}}}async getParsedTransaction(t,r){const{commitment:n,config:s}=Gt(r),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Se(o,bf);if("error"in a)throw new je(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,r){const{commitment:n,config:s}=Gt(r),i=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(f=>{const u=Se(f,bf);if("error"in u)throw new je(u.error,"failed to get transactions");return u.result})}async getTransactions(t,r){const{commitment:n,config:s}=Gt(r),i=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(f=>{const u=Se(f,hh);if("error"in u)throw new je(u.error,"failed to get transactions");const l=u.result;return l&&{...l,transaction:{...l.transaction,message:oh(l.version,l.transaction.message)}}})}async getConfirmedBlock(t,r){const n=this._buildArgsAtLeastConfirmed([t],r),s=await this._rpcRequest("getConfirmedBlock",n),i=Se(s,NA);if("error"in i)throw new je(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:f,meta:u})=>{const l=new Li(f.message);return{meta:u,transaction:{...f,message:l}}})};return{...a,transactions:a.transactions.map(({transaction:f,meta:u})=>({meta:u,transaction:rs.populate(f.message,f.signatures)}))}}async getBlocks(t,r,n){const s=this._buildArgsAtLeastConfirmed(r!==void 0?[t,r]:[t],n),i=await this._rpcRequest("getBlocks",s),o=Se(i,bt(Be(re())));if("error"in o)throw new je(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,r){const n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Se(s,e1);if("error"in i)throw new je(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,r){const n=this._buildArgsAtLeastConfirmed([t],r,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getConfirmedBlock",n),i=Se(s,e1);if("error"in i)throw new je(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,r){const n=this._buildArgsAtLeastConfirmed([t],r),s=await this._rpcRequest("getConfirmedTransaction",n),i=Se(s,hh);if("error"in i)throw new je(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Li(o.transaction.message),f=o.transaction.signatures;return{...o,transaction:rs.populate(a,f)}}async getParsedConfirmedTransaction(t,r){const n=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed"),s=await this._rpcRequest("getConfirmedTransaction",n),i=Se(s,bf);if("error"in i)throw new je(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,r){const n=t.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=Se(o,bf);if("error"in a)throw new je(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,r,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(r--,!(r<=0||r<i));)try{const f=await this.getConfirmedBlockSignatures(r,"finalized");f.signatures.length>0&&(s.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(s.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(t,r,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Se(i,lA);if("error"in o)throw new je(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,r,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,r),i=await this._rpcRequest("getSignaturesForAddress",s),o=Se(i,hA);if("error"in o)throw new je(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,r){const{context:n,value:s}=await this.getAccountInfoAndContext(t,r);let i=null;return s!==null&&(i=new Hg({key:t,state:Hg.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,r){const{context:n,value:s}=await this.getAccountInfoAndContext(t,r);let i=null;return s!==null&&(i=rh.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,r){return await this.getNonceAndContext(t,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,r){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),r]),s=Se(n,zA);if("error"in s)throw new je(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Ro(100);const n=Date.now()-this._blockhashInfo.lastFetch>=k3;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Ro(y3/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:r,config:n}=Gt(t),s=this._buildArgs([],r,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Se(i,wr(re()));if("error"in o)throw new je(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,r,n){if("message"in t){const P=t.serialize(),$=se.Buffer.from(P).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");const j=r||{};j.encoding="base64","commitment"in j||(j.commitment=this.commitment),r&&typeof r=="object"&&"innerInstructions"in r&&(j.innerInstructions=r.innerInstructions);const F=[$,j],k=await this._rpcRequest("simulateTransaction",F),C=Se(k,qg);if("error"in C)throw new Error("failed to simulate transaction: "+C.error.message);return C.result}let s;if(t instanceof rs){let T=t;s=new rs,s.feePayer=T.feePayer,s.instructions=t.instructions,s.nonceInfo=T.nonceInfo,s.signatures=T.signatures}else s=rs.populate(t),s._message=s._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");const i=r;if(s.nonceInfo&&i)s.sign(...i);else{let T=this._disableBlockhashCaching;for(;;){const P=await this._blockhashWithExpiryBlockHeight(T);if(s.lastValidBlockHeight=P.lastValidBlockHeight,s.recentBlockhash=P.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const $=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes($)&&!this._blockhashInfo.transactionSignatures.includes($)){this._blockhashInfo.simulatedSignatures.push($);break}else T=!0}}const o=s._compile(),a=o.serialize(),u=s._serialize(a).toString("base64"),l={encoding:"base64",commitment:this.commitment};if(n){const T=(Array.isArray(n)?n:o.nonProgramIds()).map(P=>P.toBase58());l.accounts={encoding:"base64",addresses:T}}i&&(l.sigVerify=!0),r&&typeof r=="object"&&"innerInstructions"in r&&(l.innerInstructions=r.innerInstructions);const p=[u,l],_=await this._rpcRequest("simulateTransaction",p),b=Se(_,qg);if("error"in b){let T;if("data"in b.error&&(T=b.error.data.logs,T&&Array.isArray(T))){const P=`
    `,$=P+T.join(P);console.error(b.error.message,$)}throw new Mg({action:"simulate",signature:"",transactionMessage:b.error.message,logs:T})}return b.result}async sendTransaction(t,r,n){if("version"in t){if(r&&Array.isArray(r))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");const s=r;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const f=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))o=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,r){const n=Bo(t).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(t,r){const n={encoding:"base64"},s=r&&r.skipPreflight,i=s===!0?"processed":r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],a=await this._rpcRequest("sendTransaction",o),f=Se(a,qA);if("error"in f){let u;throw"data"in f.error&&(u=f.error.data.logs),new Mg({action:s?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:u})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(t,r){const n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=r,n!==r.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(r.state)}catch{}})}}_onSubscriptionStateChange(t,r){const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(r),()=>{s.delete(r),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,r=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!r())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!r())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,r){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...r)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:r,subscription:n}=Se(t,dA);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(t,r){const n=this._nextClientSubscriptionId++,s=Ug([t.method,r]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:r,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];ir(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,r,n){const{commitment:s,config:i}=Gt(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:r,subscription:n}=Se(t,gA);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(t,r,n,s){const{commitment:i,config:o}=Gt(n),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Dg(s)}:void 0));return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,r,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:r,subscription:n}=Se(t,KA);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(t){const{result:r,subscription:n}=Se(t,wA);this._handleServerNotification(n,[r])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:r,subscription:n}=Se(t,bA);this._handleServerNotification(n,[r])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,r){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${r}' events could not be found.`)}_buildArgs(t,r,n,s){const i=r||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,r,n,s){const i=r||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,r,n,s)}_wsOnSignatureNotification(t){const{result:r,subscription:n}=Se(t,vA);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(t,r,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){r(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,r,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),a=this._makeSubscription({callback:(f,u)=>{r(f,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:r,subscription:n}=Se(t,_A);this._handleServerNotification(n,[r])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Ue([qe("instruction"),ko("recentSlot"),Nt("bumpSeed")])},FreezeLookupTable:{index:1,layout:Ue([qe("instruction")])},ExtendLookupTable:{index:2,layout:Ue([qe("instruction"),ko(),Yr(xt(),js(qe(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Ue([qe("instruction")])},CloseLookupTable:{index:4,layout:Ue([qe("instruction")])}}),new rt("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:Ue([Nt("instruction"),qe("units"),qe("additionalFee")])},RequestHeapFrame:{index:1,layout:Ue([Nt("instruction"),qe("bytes")])},SetComputeUnitLimit:{index:2,layout:Ue([Nt("instruction"),qe("units")])},SetComputeUnitPrice:{index:3,layout:Ue([Nt("instruction"),ko("microLamports")])}}),new rt("ComputeBudget111111111111111111111111111111"),Ue([Nt("numSignatures"),Nt("padding"),Nn("signatureOffset"),Nn("signatureInstructionIndex"),Nn("publicKeyOffset"),Nn("publicKeyInstructionIndex"),Nn("messageDataOffset"),Nn("messageDataSize"),Nn("messageInstructionIndex")]),new rt("Ed25519SigVerify111111111111111111111111111"),eh.utils.isValidPrivateKey,eh.getPublicKey,Ue([Nt("numSignatures"),Nn("signatureOffset"),Nt("signatureInstructionIndex"),Nn("ethAddressOffset"),Nt("ethAddressInstructionIndex"),Nn("messageDataOffset"),Nn("messageDataSize"),Nt("messageInstructionIndex"),tr(20,"ethAddress"),tr(64,"signature"),Nt("recoveryId")]),new rt("KeccakSecp256k11111111111111111111111111111");var t1;new rt("StakeConfig11111111111111111111111111111111");class r1{constructor(t,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=r,this.custodian=n}}t1=r1,r1.default=new t1(0,0,rt.default),Object.freeze({Initialize:{index:0,layout:Ue([qe("instruction"),l3(),h3()])},Authorize:{index:1,layout:Ue([qe("instruction"),xt("newAuthorized"),qe("stakeAuthorizationType")])},Delegate:{index:2,layout:Ue([qe("instruction")])},Split:{index:3,layout:Ue([qe("instruction"),vn("lamports")])},Withdraw:{index:4,layout:Ue([qe("instruction"),vn("lamports")])},Deactivate:{index:5,layout:Ue([qe("instruction")])},Merge:{index:7,layout:Ue([qe("instruction")])},AuthorizeWithSeed:{index:8,layout:Ue([qe("instruction"),xt("newAuthorized"),qe("stakeAuthorizationType"),To("authoritySeed"),xt("authorityOwner")])}}),Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),new rt("Stake11111111111111111111111111111111111111"),Object.freeze({InitializeAccount:{index:0,layout:Ue([qe("instruction"),d3()])},Authorize:{index:1,layout:Ue([qe("instruction"),xt("newAuthorized"),qe("voteAuthorizationType")])},Withdraw:{index:3,layout:Ue([qe("instruction"),vn("lamports")])},UpdateValidatorIdentity:{index:4,layout:Ue([qe("instruction")])},AuthorizeWithSeed:{index:10,layout:Ue([qe("instruction"),p3()])}}),Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),new rt("Vote111111111111111111111111111111111111111"),new rt("Va1idator1nfo111111111111111111111111111111"),pe({name:Ee(),website:We(Ee()),details:We(Ee()),iconUrl:We(Ee()),keybaseUsername:We(Ee())}),new rt("Vote111111111111111111111111111111111111111"),Ue([xt("nodePubkey"),xt("authorizedWithdrawer"),Nt("commission"),zr(),Yr(Ue([zr("slot"),qe("confirmationCount")]),js(qe(),-8),"votes"),Nt("rootSlotValid"),zr("rootSlot"),zr(),Yr(Ue([zr("epoch"),xt("authorizedVoter")]),js(qe(),-8),"authorizedVoters"),Ue([Yr(Ue([xt("authorizedPubkey"),zr("epochOfLastAuthorizedSwitch"),zr("targetEpoch")]),32,"buf"),zr("idx"),Nt("isEmpty")],"priorVoters"),zr(),Yr(Ue([zr("epoch"),zr("credits"),zr("prevCredits")]),js(qe(),-8),"epochCredits"),Ue([zr("slot"),zr("timestamp")],"lastTimestamp")]);const n1="solana:signAndSendTransaction",GA="solana:signIn",i1="solana:signMessage",s1="solana:signTransaction",YA="standard:connect",XA="standard:disconnect",JA="standard:events";var o1=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},QA=(e,t,r)=>(o1(e,t,"read from private field"),r?r.call(e):t.get(e)),eB=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},tB=(e,t,r,n)=>(o1(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),vf;function rB(e){const t=({register:r})=>r(e);try{window.dispatchEvent(new nB(t))}catch(r){console.error(`wallet-standard:register-wallet event could not be dispatched
`,r)}try{window.addEventListener("wallet-standard:app-ready",({detail:r})=>t(r))}catch(r){console.error(`wallet-standard:app-ready event listener could not be added
`,r)}}class nB extends Event{constructor(t){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),eB(this,vf,void 0),tB(this,vf,t)}get detail(){return QA(this,vf)}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}vf=new WeakMap;function iB(e){rB(e.getInstanceWithAdapter())}const sB="solana:mainnet",dh=[sB];function ph(e){return dh.includes(e)}function _f(e){return"version"in e}var a1=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Co=(e,t,r)=>(a1(e,t,"read from private field"),r?r.call(e):t.get(e)),Oo=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},$o=(e,t,r,n)=>(a1(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ef,xf,Sf,Af,Bf,If;const oB=dh,aB=[n1,s1,i1],c1=class{constructor({address:e,publicKey:t,label:r,icon:n}){Oo(this,Ef,void 0),Oo(this,xf,void 0),Oo(this,Sf,void 0),Oo(this,Af,void 0),Oo(this,Bf,void 0),Oo(this,If,void 0),new.target===c1&&Object.freeze(this),$o(this,Ef,e),$o(this,xf,t),$o(this,Sf,oB),$o(this,Af,aB),$o(this,Bf,r),$o(this,If,n)}get address(){return Co(this,Ef)}get publicKey(){return Co(this,xf).slice()}get chains(){return Co(this,Sf).slice()}get features(){return Co(this,Af).slice()}get label(){return Co(this,Bf)}get icon(){return Co(this,If)}};let cB=c1;Ef=new WeakMap,xf=new WeakMap,Sf=new WeakMap,Af=new WeakMap,Bf=new WeakMap,If=new WeakMap;const fB="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTgiIGhlaWdodD0iNjUiIHZpZXdCb3g9IjAgMCA1OCA2NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgOS4zODk0OUwyOC44OTA3IDBWNjUuMDA0MkM4LjI1NDUgNTYuMzM2OSAwIDM5LjcyNDggMCAzMC4zMzUzVjkuMzg5NDlaIiBmaWxsPSIjMDUwMEZGIi8+CjxwYXRoIGQ9Ik01Ny43ODIyIDkuMzg5NDlMMjguODkxNSAwVjY1LjAwNDJDNDkuNTI3NyA1Ni4zMzY5IDU3Ljc4MjIgMzkuNzI0OCA1Ny43ODIyIDMwLjMzNTNWOS4zODk0OVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8yMjAxXzY5NDIpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIwMV82OTQyIiB4MT0iNTEuMzYxNSIgeTE9Ii00LjE1MjkzIiB4Mj0iMjkuNTM4NCIgeTI9IjY0LjUxNDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjAyMTEyIiBzdG9wLWNvbG9yPSIjMDAwMEZGIi8+CjxzdG9wIG9mZnNldD0iMC4wNzYyNDIzIiBzdG9wLWNvbG9yPSIjMDA5NEZGIi8+CjxzdG9wIG9mZnNldD0iMC4xNjMwODkiIHN0b3AtY29sb3I9IiM0OEZGOTEiLz4KPHN0b3Agb2Zmc2V0PSIwLjQyMDA0OSIgc3RvcC1jb2xvcj0iIzAwOTRGRiIvPgo8c3RvcCBvZmZzZXQ9IjAuNjgyODg2IiBzdG9wLWNvbG9yPSIjMDAzOEZGIi8+CjxzdG9wIG9mZnNldD0iMC45MDI0NjUiIHN0b3AtY29sb3I9IiMwNTAwRkYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K";function uB(e,t){return lB(e,t)}function lB(e,t){if(e===t)return!0;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}var gh=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},it=(e,t,r)=>(gh(e,t,"read from private field"),r?r.call(e):t.get(e)),Mr=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},yh=(e,t,r,n)=>(gh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),wh=(e,t,r)=>(gh(e,t,"access private method"),r),Vs,mh,bh,vh,tn,un,_h,Tf,Eh,xh,f1,Mo,Rf,Sh,Ah,Bh,kf,Ih,Lf,Th;const hB="trust:",u1=class{constructor(e){Mr(this,Tf),Mr(this,xh),Mr(this,Vs,{}),Mr(this,mh,"1.0.0"),Mr(this,bh,"Trust"),Mr(this,vh,fB),Mr(this,tn,null),Mr(this,un,void 0),Mr(this,_h,(t,r)=>{var n;return(n=it(this,Vs)[t])!=null&&n.push(r)||(it(this,Vs)[t]=[r]),()=>wh(this,xh,f1).call(this,t,r)}),Mr(this,Mo,()=>{var t;const r=(t=it(this,un).publicKey)==null?void 0:t.toBase58();if(r){const n=it(this,un).publicKey.toBytes(),s=it(this,tn);(!s||s.address!==r||!uB(s.publicKey,n))&&(yh(this,tn,new cB({address:r,publicKey:n})),wh(this,Tf,Eh).call(this,"change",{accounts:this.accounts}))}}),Mr(this,Rf,()=>{it(this,tn)&&(yh(this,tn,null),wh(this,Tf,Eh).call(this,"change",{accounts:this.accounts}))}),Mr(this,Sh,()=>{it(this,un).publicKey?it(this,Mo).call(this):it(this,Rf).call(this)}),Mr(this,Ah,async({silent:t}={})=>(it(this,tn)||await it(this,un).connect(t?{onlyIfTrusted:!0}:void 0),it(this,Mo).call(this),{accounts:this.accounts})),Mr(this,Bh,async()=>{await it(this,un).disconnect()}),Mr(this,kf,async(...t)=>{if(!it(this,tn))throw new Error("not connected");const r=[];if(t.length===1){const{transaction:n,account:s,chain:i,options:o}=t[0],{minContextSlot:a,preflightCommitment:f,skipPreflight:u,maxRetries:l}=o||{};if(s!==it(this,tn))throw new Error("invalid account");if(!ph(i))throw new Error("invalid chain");const{signature:p}=await it(this,un).signAndSendTransaction(Ca.deserialize(n),{preflightCommitment:f,minContextSlot:a,maxRetries:l,skipPreflight:u});r.push({signature:new Uint8Array(Sr.decode(p))})}else if(t.length>1)for(const n of t)r.push(...await it(this,kf).call(this,n));return r}),Mr(this,Ih,async(...t)=>{if(!it(this,tn))throw new Error("not connected");const r=[];if(t.length===1){const{transaction:n,account:s,chain:i}=t[0];if(s!==it(this,tn))throw new Error("invalid account");if(i&&!ph(i))throw new Error("invalid chain");const o=await it(this,un).signTransaction(Ca.deserialize(n)),a=_f(o)?o.serialize():new Uint8Array(o.serialize({requireAllSignatures:!1,verifySignatures:!1}));r.push({signedTransaction:a})}else if(t.length>1){let n;for(const o of t){if(o.account!==it(this,tn))throw new Error("invalid account");if(o.chain){if(!ph(o.chain))throw new Error("invalid chain");if(n){if(o.chain!==n)throw new Error("conflicting chain")}else n=o.chain}}const s=t.map(({transaction:o})=>Ca.deserialize(o)),i=await it(this,un).signAllTransactions(s);r.push(...i.map(o=>({signedTransaction:_f(o)?o.serialize():new Uint8Array(o.serialize({requireAllSignatures:!1,verifySignatures:!1}))})))}return r}),Mr(this,Lf,async(...t)=>{if(!it(this,tn))throw new Error("not connected");const r=[];if(t.length===1){const{message:n,account:s}=t[0];if(s!==it(this,tn))throw new Error("invalid account");const{signature:i}=await it(this,un).signMessage(n);r.push({signedMessage:n,signature:i})}else if(t.length>1)for(const n of t)r.push(...await it(this,Lf).call(this,n));return r}),Mr(this,Th,async(...t)=>{const r=[];if(t.length>1)for(const n of t)r.push(await it(this,un).signIn(n));else return[await it(this,un).signIn(t[0])];return r}),new.target===u1&&Object.freeze(this),yh(this,un,e),e.on("connect",it(this,Mo),this),e.on("disconnect",it(this,Rf),this),e.on("accountChanged",it(this,Sh),this),it(this,Mo).call(this)}get version(){return it(this,mh)}get name(){return it(this,bh)}get icon(){return it(this,vh)}get chains(){return dh.slice()}get features(){return{[YA]:{version:"1.0.0",connect:it(this,Ah)},[XA]:{version:"1.0.0",disconnect:it(this,Bh)},[JA]:{version:"1.0.0",on:it(this,_h)},[n1]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:it(this,kf)},[s1]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:it(this,Ih)},[i1]:{version:"1.0.0",signMessage:it(this,Lf)},[GA]:{version:"1.0.0",signIn:it(this,Th)},[hB]:{trust:it(this,un)}}}get accounts(){return it(this,tn)?[it(this,tn)]:[]}};let dB=u1;Vs=new WeakMap,mh=new WeakMap,bh=new WeakMap,vh=new WeakMap,tn=new WeakMap,un=new WeakMap,_h=new WeakMap,Tf=new WeakSet,Eh=function(e,...t){var r;(r=it(this,Vs)[e])==null||r.forEach(n=>n.apply(null,t))},xh=new WeakSet,f1=function(e,t){var r;it(this,Vs)[e]=(r=it(this,Vs)[e])==null?void 0:r.filter(n=>t!==n)},Mo=new WeakMap,Rf=new WeakMap,Sh=new WeakMap,Ah=new WeakMap,Bh=new WeakMap,kf=new WeakMap,Ih=new WeakMap,Lf=new WeakMap,Th=new WeakMap;class pB{constructor(t,r=!1){this.useLegacySign=!1,this.provider=t,this.useLegacySign=r}async connect(t){const r=await this.provider.internalRequest({method:"requestAccounts",params:{options:t}});return this.provider.emit("connect"),{publicKey:new rt(r[0])}}async signTransaction(t){if(this.useLegacySign)return await this.legacySign(t);const r=JSON.stringify(t);let n="legacy",s;_f(t)?(n=t.version,s=se.Buffer.from(t.message.serialize()).toString("base64")):s=se.Buffer.from(t.serializeMessage()).toString("base64");const i=se.Buffer.from(t.serialize({requireAllSignatures:!1,verifySignatures:!1})).toString("base64"),o=await this.provider.internalRequest({method:"signRawTransaction",params:{data:r,raw:i,rawMessage:s,version:n}});return this.provider.mapSignedTransaction(t,o)}async legacySign(t){const r=JSON.stringify(t),n=typeof t.version!="number"?"legacy":t.version,s=Sr.encode(n==="legacy"?t.serializeMessage():n===0?t.message.serialize():t.serialize());try{const i=await this.provider.internalRequest({method:"signRawTransaction",params:{data:r,raw:s,version:n}});return this.provider.mapSignedTransaction(t,i)}catch(i){console.log(`<== Error: ${i}`)}}async request(t,r){var n;switch(t.method){case"signTransaction":return this.signTransaction(t.params);case"connect":return this.connect((n=t?.params)==null?void 0:n.options)}return r()}}var Rh=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},kh=(e,t,r)=>(Rh(e,t,"read from private field"),r?r.call(e):t.get(e)),Cf=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Lh=(e,t,r,n)=>(Rh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Of=(e,t,r)=>(Rh(e,t,"access private method"),r),$f,Mf,Nf,No,Ma;const Pf=class extends jc{constructor(e){super(),Cf(this,No),Cf(this,$f,!1),Cf(this,Mf,!0),this.isTrust=!0,this.isTrustWallet=!0,Cf(this,Nf,!1),e&&(typeof e.enableAdapter<"u"&&Lh(this,Mf,e.enableAdapter),typeof e.cluster<"u"&&(this.connection=new ZA(e.cluster,"confirmed")),typeof e.disableMobileAdapter<"u"&&Lh(this,$f,e.disableMobileAdapter),typeof e.useLegacySign<"u"&&Lh(this,Nf,e.useLegacySign),typeof e.isTrust<"u"&&(this.isTrust=e.isTrust,this.isTrustWallet=e.isTrust)),kh(this,Mf)&&iB(this),kh(this,$f)||(this.mobileAdapter=new pB(this,kh(this,Nf)))}static bufferToHex(e){return"0x"+se.Buffer.from(e).toString("hex")}static messageToBuffer(e){let t=se.Buffer.from([]);try{typeof e=="string"?t=se.Buffer.from(e.replace("0x",""),"hex"):t=se.Buffer.from(e)}catch(r){console.log(`messageToBuffer error: ${r}`)}return t}getInstanceWithAdapter(){return new dB(this)}async connect(e){const t=await Of(this,No,Ma).call(this,{method:"connect",params:{options:e}});return this.publicKey=t.publicKey,t}disconnect(){return new Promise(e=>{this.publicKey=null,this.emit("disconnect"),e()})}async signAndSendTransaction(e,t){const r=await this.signTransaction(e);return{signature:await this.connection.sendRawTransaction(r.serialize(),t)}}signTransaction(e){return Of(this,No,Ma).call(this,{method:"signTransaction",params:e})}signAllTransactions(e){return Promise.all(e.map(t=>this.signTransaction(t)))}async signRawTransactionMulti(e){return(await Of(this,No,Ma).call(this,{method:"signRawTransactionMulti",params:{transactions:e.map(t=>{const r=JSON.stringify(t);let n="legacy",s;_f(t)?(n=t.version,s=se.Buffer.from(t.message.serialize()).toString("base64")):s=se.Buffer.from(t.serializeMessage()).toString("base64");const i=se.Buffer.from(t.serialize({requireAllSignatures:!1,verifySignatures:!1})).toString("base64");return{data:r,raw:i,rawMessage:s,version:n}})}})).map((t,r)=>this.mapSignedTransaction(e[r],t))}async signMessage(e){var t;const r=Pf.bufferToHex(e),n=await Of(this,No,Ma).call(this,{method:"signMessage",params:{data:r}});return{signature:new Uint8Array(se.Buffer.from(Pf.messageToBuffer(n).buffer)),publicKey:(t=this.publicKey)==null?void 0:t.toBase58()}}signIn(e){throw new Error("Method not implemented.")}getNetwork(){return Pf.NETWORK}mapSignedTransaction(e,t){return e.addSignature(this.publicKey,Sr.decode(t)),e}request(e){throw new Error("Not implemented")}internalRequest(e){return super.request(e)}};let l1=Pf;$f=new WeakMap,Mf=new WeakMap,Nf=new WeakMap,No=new WeakSet,Ma=function(e){const t=()=>this.internalRequest(e);return this.mobileAdapter?this.mobileAdapter.request(e,t):t()},l1.NETWORK="solana";var Po={},ns={},Uf={},Ff={},Hf={},h1={},Uo={},jf={},Nr={};Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.output=Nr.exists=Nr.hash=Nr.bytes=Nr.bool=Nr.number=void 0;function Df(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}Nr.number=Df;function d1(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}Nr.bool=d1;function gB(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Ch(e,...t){if(!gB(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}Nr.bytes=Ch;function p1(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Df(e.outputLen),Df(e.blockLen)}Nr.hash=p1;function g1(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Nr.exists=g1;function y1(e,t){Ch(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Nr.output=y1;const yB={number:Df,bool:d1,bytes:Ch,hash:p1,exists:g1,output:y1};Nr.default=yB;var Ci={},zf={};Object.defineProperty(zf,"__esModule",{value:!0}),zf.crypto=void 0,zf.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=zf,r=z=>new Uint8Array(z.buffer,z.byteOffset,z.byteLength);e.u8=r;const n=z=>new Uint32Array(z.buffer,z.byteOffset,Math.floor(z.byteLength/4));e.u32=n;function s(z){return z instanceof Uint8Array||z!=null&&typeof z=="object"&&z.constructor.name==="Uint8Array"}const i=z=>new DataView(z.buffer,z.byteOffset,z.byteLength);e.createView=i;const o=(z,G)=>z<<32-G|z>>>G;if(e.rotr=o,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const a=Array.from({length:256},(z,G)=>G.toString(16).padStart(2,"0"));function f(z){if(!s(z))throw new Error("Uint8Array expected");let G="";for(let D=0;D<z.length;D++)G+=a[z[D]];return G}e.bytesToHex=f;const u={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function l(z){if(z>=u._0&&z<=u._9)return z-u._0;if(z>=u._A&&z<=u._F)return z-(u._A-10);if(z>=u._a&&z<=u._f)return z-(u._a-10)}function p(z){if(typeof z!="string")throw new Error("hex string expected, got "+typeof z);const G=z.length,D=G/2;if(G%2)throw new Error("padded hex string expected, got unpadded hex of length "+G);const V=new Uint8Array(D);for(let m=0,d=0;m<D;m++,d+=2){const c=l(z.charCodeAt(d)),h=l(z.charCodeAt(d+1));if(c===void 0||h===void 0){const y=z[d]+z[d+1];throw new Error('hex string expected, got non-hex character "'+y+'" at index '+d)}V[m]=c*16+h}return V}e.hexToBytes=p;const _=async()=>{};e.nextTick=_;async function b(z,G,D){let V=Date.now();for(let m=0;m<z;m++){D(m);const d=Date.now()-V;d>=0&&d<G||(await(0,e.nextTick)(),V+=d)}}e.asyncLoop=b;function T(z){if(typeof z!="string")throw new Error(`utf8ToBytes expected string, got ${typeof z}`);return new Uint8Array(new TextEncoder().encode(z))}e.utf8ToBytes=T;function P(z){if(typeof z=="string"&&(z=T(z)),!s(z))throw new Error(`expected Uint8Array, got ${typeof z}`);return z}e.toBytes=P;function $(...z){let G=0;for(let V=0;V<z.length;V++){const m=z[V];if(!s(m))throw new Error("Uint8Array expected");G+=m.length}const D=new Uint8Array(G);for(let V=0,m=0;V<z.length;V++){const d=z[V];D.set(d,m),m+=d.length}return D}e.concatBytes=$;class j{clone(){return this._cloneInto()}}e.Hash=j;const F={}.toString;function k(z,G){if(G!==void 0&&F.call(G)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(z,G)}e.checkOpts=k;function C(z){const G=V=>z().update(P(V)).digest(),D=z();return G.outputLen=D.outputLen,G.blockLen=D.blockLen,G.create=()=>z(),G}e.wrapConstructor=C;function X(z){const G=(V,m)=>z(m).update(P(V)).digest(),D=z({});return G.outputLen=D.outputLen,G.blockLen=D.blockLen,G.create=V=>z(V),G}e.wrapConstructorWithOpts=X;function Q(z){const G=(V,m)=>z(m).update(P(V)).digest(),D=z({});return G.outputLen=D.outputLen,G.blockLen=D.blockLen,G.create=V=>z(V),G}e.wrapXOFConstructorWithOpts=Q;function Z(z=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(z));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=Z}(Ci),Object.defineProperty(jf,"__esModule",{value:!0}),jf.SHA2=void 0;const Oh=Nr,Na=Ci;function wB(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),f=n?4:0,u=n?0:4;e.setUint32(t+f,o,n),e.setUint32(t+u,a,n)}class mB extends Na.Hash{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,Na.createView)(this.buffer)}update(t){(0,Oh.exists)(this);const{view:r,buffer:n,blockLen:s}=this;t=(0,Na.toBytes)(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const f=(0,Na.createView)(t);for(;s<=i-o;o+=s)this.process(f,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,Oh.exists)(this),(0,Oh.output)(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let p=o;p<s;p++)r[p]=0;wB(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=(0,Na.createView)(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=f/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<u;p++)a.setUint32(4*p,l[p],i)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%r&&t.buffer.set(n),t}}jf.SHA2=mB,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.sha224=Uo.sha256=void 0;const bB=jf,Pn=Ci,vB=(e,t,r)=>e&t^~e&r,_B=(e,t,r)=>e&t^e&r^t&r,EB=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),is=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ss=new Uint32Array(64);class w1 extends bB.SHA2{constructor(){super(64,32,8,!1),this.A=is[0]|0,this.B=is[1]|0,this.C=is[2]|0,this.D=is[3]|0,this.E=is[4]|0,this.F=is[5]|0,this.G=is[6]|0,this.H=is[7]|0}get(){const{A:t,B:r,C:n,D:s,E:i,F:o,G:a,H:f}=this;return[t,r,n,s,i,o,a,f]}set(t,r,n,s,i,o,a,f){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=f|0}process(t,r){for(let p=0;p<16;p++,r+=4)ss[p]=t.getUint32(r,!1);for(let p=16;p<64;p++){const _=ss[p-15],b=ss[p-2],T=(0,Pn.rotr)(_,7)^(0,Pn.rotr)(_,18)^_>>>3,P=(0,Pn.rotr)(b,17)^(0,Pn.rotr)(b,19)^b>>>10;ss[p]=P+ss[p-7]+T+ss[p-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:f,G:u,H:l}=this;for(let p=0;p<64;p++){const _=(0,Pn.rotr)(a,6)^(0,Pn.rotr)(a,11)^(0,Pn.rotr)(a,25),b=l+_+vB(a,f,u)+EB[p]+ss[p]|0,P=((0,Pn.rotr)(n,2)^(0,Pn.rotr)(n,13)^(0,Pn.rotr)(n,22))+_B(n,s,i)|0;l=u,u=f,f=a,a=o+b|0,o=i,i=s,s=n,n=b+P|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,f=f+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,f,u,l)}roundClean(){ss.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class xB extends w1{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}Uo.sha256=(0,Pn.wrapConstructor)(()=>new w1),Uo.sha224=(0,Pn.wrapConstructor)(()=>new xB);var ht={},ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.validateObject=ot.createHmacDrbg=ot.bitMask=ot.bitSet=ot.bitGet=ot.bitLen=ot.utf8ToBytes=ot.equalBytes=ot.concatBytes=ot.ensureBytes=ot.numberToVarBytesBE=ot.numberToBytesLE=ot.numberToBytesBE=ot.bytesToNumberLE=ot.bytesToNumberBE=ot.hexToBytes=ot.hexToNumber=ot.numberToHexUnpadded=ot.bytesToHex=ot.isBytes=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const m1=BigInt(0),qf=BigInt(1),SB=BigInt(2);function Fo(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}ot.isBytes=Fo;const AB=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $h(e){if(!Fo(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=AB[e[r]];return t}ot.bytesToHex=$h;function b1(e){const t=e.toString(16);return t.length&1?`0${t}`:t}ot.numberToHexUnpadded=b1;function Mh(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}ot.hexToNumber=Mh;const Oi={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function v1(e){if(e>=Oi._0&&e<=Oi._9)return e-Oi._0;if(e>=Oi._A&&e<=Oi._F)return e-(Oi._A-10);if(e>=Oi._a&&e<=Oi._f)return e-(Oi._a-10)}function Vf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=v1(e.charCodeAt(i)),a=v1(e.charCodeAt(i+1));if(o===void 0||a===void 0){const f=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}n[s]=o*16+a}return n}ot.hexToBytes=Vf;function BB(e){return Mh($h(e))}ot.bytesToNumberBE=BB;function IB(e){if(!Fo(e))throw new Error("Uint8Array expected");return Mh($h(Uint8Array.from(e).reverse()))}ot.bytesToNumberLE=IB;function _1(e,t){return Vf(e.toString(16).padStart(t*2,"0"))}ot.numberToBytesBE=_1;function TB(e,t){return _1(e,t).reverse()}ot.numberToBytesLE=TB;function RB(e){return Vf(b1(e))}ot.numberToVarBytesBE=RB;function kB(e,t,r){let n;if(typeof t=="string")try{n=Vf(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Fo(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${e} expected ${r} bytes, got ${s}`);return n}ot.ensureBytes=kB;function E1(...e){let t=0;for(let s=0;s<e.length;s++){const i=e[s];if(!Fo(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t),n=0;for(let s=0;s<e.length;s++){const i=e[s];r.set(i,n),n+=i.length}return r}ot.concatBytes=E1;function LB(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}ot.equalBytes=LB;function CB(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}ot.utf8ToBytes=CB;function OB(e){let t;for(t=0;e>m1;e>>=qf,t+=1);return t}ot.bitLen=OB;function $B(e,t){return e>>BigInt(t)&qf}ot.bitGet=$B;const MB=(e,t,r)=>e|(r?qf:m1)<<BigInt(t);ot.bitSet=MB;const NB=e=>(SB<<BigInt(e-1))-qf;ot.bitMask=NB;const Nh=e=>new Uint8Array(e),x1=e=>Uint8Array.from(e);function PB(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Nh(e),s=Nh(e),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...p)=>r(s,n,...p),f=(p=Nh())=>{s=a(x1([0]),p),n=a(),p.length!==0&&(s=a(x1([1]),p),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const _=[];for(;p<t;){n=a();const b=n.slice();_.push(b),p+=n.length}return E1(..._)};return(p,_)=>{o(),f(p);let b;for(;!(b=_(u()));)f();return o(),b}}ot.createHmacDrbg=PB;const UB={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Fo(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function FB(e,t,r={}){const n=(s,i,o)=>{const a=UB[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const f=e[s];if(!(o&&f===void 0)&&!a(f,e))throw new Error(`Invalid param ${String(s)}=${f} (${typeof f}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return e}ot.validateObject=FB,Object.defineProperty(ht,"__esModule",{value:!0}),ht.mapHashToField=ht.getMinHashLength=ht.getFieldBytesLength=ht.hashToPrivateScalar=ht.FpSqrtEven=ht.FpSqrtOdd=ht.Field=ht.nLength=ht.FpIsSquare=ht.FpDiv=ht.FpInvertBatch=ht.FpPow=ht.validateField=ht.isNegativeLE=ht.FpSqrt=ht.tonelliShanks=ht.invert=ht.pow2=ht.pow=ht.mod=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sn=ot,Pr=BigInt(0),Yt=BigInt(1),os=BigInt(2),HB=BigInt(3),Ph=BigInt(4),S1=BigInt(5),A1=BigInt(8);BigInt(9),BigInt(16);function An(e,t){const r=e%t;return r>=Pr?r:t+r}ht.mod=An;function B1(e,t,r){if(r<=Pr||t<Pr)throw new Error("Expected power/modulo > 0");if(r===Yt)return Pr;let n=Yt;for(;t>Pr;)t&Yt&&(n=n*e%r),e=e*e%r,t>>=Yt;return n}ht.pow=B1;function jB(e,t,r){let n=e;for(;t-- >Pr;)n*=n,n%=r;return n}ht.pow2=jB;function Kf(e,t){if(e===Pr||t<=Pr)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=An(e,t),n=t,s=Pr,i=Yt;for(;r!==Pr;){const a=n/r,f=n%r,u=s-i*a;n=r,r=f,s=i,i=u}if(n!==Yt)throw new Error("invert: does not exist");return An(s,t)}ht.invert=Kf;function I1(e){const t=(e-Yt)/os;let r,n,s;for(r=e-Yt,n=0;r%os===Pr;r/=os,n++);for(s=os;s<e&&B1(s,t,e)!==e-Yt;s++);if(n===1){const o=(e+Yt)/Ph;return function(f,u){const l=f.pow(u,o);if(!f.eql(f.sqr(l),u))throw new Error("Cannot find square root");return l}}const i=(r+Yt)/os;return function(a,f){if(a.pow(f,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,l=a.pow(a.mul(a.ONE,s),r),p=a.pow(f,i),_=a.pow(f,r);for(;!a.eql(_,a.ONE);){if(a.eql(_,a.ZERO))return a.ZERO;let b=1;for(let P=a.sqr(_);b<u&&!a.eql(P,a.ONE);b++)P=a.sqr(P);const T=a.pow(l,Yt<<BigInt(u-b-1));l=a.sqr(T),p=a.mul(p,T),_=a.mul(_,l),u=b}return p}}ht.tonelliShanks=I1;function T1(e){if(e%Ph===HB){const t=(e+Yt)/Ph;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(e%A1===S1){const t=(e-S1)/A1;return function(n,s){const i=n.mul(s,os),o=n.pow(i,t),a=n.mul(s,o),f=n.mul(n.mul(a,os),o),u=n.mul(a,n.sub(f,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return I1(e)}ht.FpSqrt=T1;const DB=(e,t)=>(An(e,t)&Yt)===Yt;ht.isNegativeLE=DB;const zB=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qB(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=zB.reduce((n,s)=>(n[s]="function",n),t);return(0,Sn.validateObject)(e,r)}ht.validateField=qB;function R1(e,t,r){if(r<Pr)throw new Error("Expected power > 0");if(r===Pr)return e.ONE;if(r===Yt)return t;let n=e.ONE,s=t;for(;r>Pr;)r&Yt&&(n=e.mul(n,s)),s=e.sqr(s),r>>=Yt;return n}ht.FpPow=R1;function k1(e,t){const r=new Array(t.length),n=t.reduce((i,o,a)=>e.is0(o)?i:(r[a]=i,e.mul(i,o)),e.ONE),s=e.inv(n);return t.reduceRight((i,o,a)=>e.is0(o)?i:(r[a]=e.mul(i,r[a]),e.mul(i,o)),s),r}ht.FpInvertBatch=k1;function VB(e,t,r){return e.mul(t,typeof r=="bigint"?Kf(r,e.ORDER):e.inv(r))}ht.FpDiv=VB;function KB(e){const t=(e.ORDER-Yt)/os;return r=>{const n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}}ht.FpIsSquare=KB;function Uh(e,t){const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}ht.nLength=Uh;function WB(e,t,r=!1,n={}){if(e<=Pr)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:i}=Uh(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=T1(e),a=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:(0,Sn.bitMask)(s),ZERO:Pr,ONE:Yt,create:f=>An(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return Pr<=f&&f<e},is0:f=>f===Pr,isOdd:f=>(f&Yt)===Yt,neg:f=>An(-f,e),eql:(f,u)=>f===u,sqr:f=>An(f*f,e),add:(f,u)=>An(f+u,e),sub:(f,u)=>An(f-u,e),mul:(f,u)=>An(f*u,e),pow:(f,u)=>R1(a,f,u),div:(f,u)=>An(f*Kf(u,e),e),sqrN:f=>f*f,addN:(f,u)=>f+u,subN:(f,u)=>f-u,mulN:(f,u)=>f*u,inv:f=>Kf(f,e),sqrt:n.sqrt||(f=>o(a,f)),invertBatch:f=>k1(a,f),cmov:(f,u,l)=>l?u:f,toBytes:f=>r?(0,Sn.numberToBytesLE)(f,i):(0,Sn.numberToBytesBE)(f,i),fromBytes:f=>{if(f.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${f.length}`);return r?(0,Sn.bytesToNumberLE)(f):(0,Sn.bytesToNumberBE)(f)}});return Object.freeze(a)}ht.Field=WB;function ZB(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)}ht.FpSqrtOdd=ZB;function GB(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r}ht.FpSqrtEven=GB;function YB(e,t,r=!1){e=(0,Sn.ensureBytes)("privateHash",e);const n=e.length,s=Uh(t).nByteLength+8;if(s<24||n<s||n>1024)throw new Error(`hashToPrivateScalar: expected ${s}-1024 bytes of input, got ${n}`);const i=r?(0,Sn.bytesToNumberLE)(e):(0,Sn.bytesToNumberBE)(e);return An(i,t-Yt)+Yt}ht.hashToPrivateScalar=YB;function Fh(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}ht.getFieldBytesLength=Fh;function L1(e){const t=Fh(e);return t+Math.ceil(t/2)}ht.getMinHashLength=L1;function XB(e,t,r=!1){const n=e.length,s=Fh(t),i=L1(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=r?(0,Sn.bytesToNumberBE)(e):(0,Sn.bytesToNumberLE)(e),a=An(o,t-Yt)+Yt;return r?(0,Sn.numberToBytesLE)(a,s):(0,Sn.numberToBytesBE)(a,s)}ht.mapHashToField=XB;var Hh={},Ho={};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.validateBasic=Ho.wNAF=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const C1=ht,JB=ot,QB=BigInt(0),jh=BigInt(1);function e6(e,t){const r=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=e.ZERO,a=s;for(;i>QB;)i&jh&&(o=o.add(a)),a=a.double(),i>>=jh;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),f=[];let u=s,l=u;for(let p=0;p<o;p++){l=u,f.push(l);for(let _=1;_<a;_++)l=l.add(u),f.push(l);u=l.double()}return f},wNAF(s,i,o){const{windows:a,windowSize:f}=n(s);let u=e.ZERO,l=e.BASE;const p=BigInt(2**s-1),_=2**s,b=BigInt(s);for(let T=0;T<a;T++){const P=T*f;let $=Number(o&p);o>>=b,$>f&&($-=_,o+=jh);const j=P,F=P+Math.abs($)-1,k=T%2!==0,C=$<0;$===0?l=l.add(r(k,i[j])):u=u.add(r(C,i[F]))}return{p:u,f:l}},wNAFCached(s,i,o,a){const f=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,f),f!==1&&i.set(s,a(u))),this.wNAF(f,u,o)}}}Ho.wNAF=e6;function t6(e){return(0,C1.validateField)(e.Fp),(0,JB.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,C1.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}Ho.validateBasic=t6,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mapToCurveSimpleSWU=e.SWUFpSqrtRatio=e.weierstrass=e.weierstrassPoints=e.DER=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=ht,r=ot,n=ot,s=Ho;function i(F){const k=(0,s.validateBasic)(F);r.validateObject(k,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:C,Fp:X,a:Q}=k;if(C){if(!X.eql(Q,X.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof C!="object"||typeof C.beta!="bigint"||typeof C.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...k})}const{bytesToNumberBE:o,hexToBytes:a}=r;e.DER={Err:class extends Error{constructor(k=""){super(k)}},_parseInt(F){const{Err:k}=e.DER;if(F.length<2||F[0]!==2)throw new k("Invalid signature integer tag");const C=F[1],X=F.subarray(2,C+2);if(!C||X.length!==C)throw new k("Invalid signature integer: wrong length");if(X[0]&128)throw new k("Invalid signature integer: negative");if(X[0]===0&&!(X[1]&128))throw new k("Invalid signature integer: unnecessary leading zero");return{d:o(X),l:F.subarray(C+2)}},toSig(F){const{Err:k}=e.DER,C=typeof F=="string"?a(F):F;if(!r.isBytes(C))throw new Error("ui8a expected");let X=C.length;if(X<2||C[0]!=48)throw new k("Invalid signature tag");if(C[1]!==X-2)throw new k("Invalid signature: incorrect length");const{d:Q,l:Z}=e.DER._parseInt(C.subarray(2)),{d:z,l:G}=e.DER._parseInt(Z);if(G.length)throw new k("Invalid signature: left bytes after parsing");return{r:Q,s:z}},hexFromSig(F){const k=V=>Number.parseInt(V[0],16)&8?"00"+V:V,C=V=>{const m=V.toString(16);return m.length&1?`0${m}`:m},X=k(C(F.s)),Q=k(C(F.r)),Z=X.length/2,z=Q.length/2,G=C(Z),D=C(z);return`30${C(z+Z+4)}02${D}${Q}02${G}${X}`}};const f=BigInt(0),u=BigInt(1),l=BigInt(2),p=BigInt(3),_=BigInt(4);function b(F){const k=i(F),{Fp:C}=k,X=k.toBytes||((y,v,S)=>{const B=v.toAffine();return r.concatBytes(Uint8Array.from([4]),C.toBytes(B.x),C.toBytes(B.y))}),Q=k.fromBytes||(y=>{const v=y.subarray(1),S=C.fromBytes(v.subarray(0,C.BYTES)),B=C.fromBytes(v.subarray(C.BYTES,2*C.BYTES));return{x:S,y:B}});function Z(y){const{a:v,b:S}=k,B=C.sqr(y),L=C.mul(B,y);return C.add(C.add(L,C.mul(y,v)),S)}if(!C.eql(C.sqr(k.Gy),Z(k.Gx)))throw new Error("bad generator point: equation left != right");function z(y){return typeof y=="bigint"&&f<y&&y<k.n}function G(y){if(!z(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function D(y){const{allowedPrivateKeyLengths:v,nByteLength:S,wrapPrivateKey:B,n:L}=k;if(v&&typeof y!="bigint"){if(r.isBytes(y)&&(y=r.bytesToHex(y)),typeof y!="string"||!v.includes(y.length))throw new Error("Invalid key");y=y.padStart(S*2,"0")}let I;try{I=typeof y=="bigint"?y:r.bytesToNumberBE((0,n.ensureBytes)("private key",y,S))}catch{throw new Error(`private key must be ${S} bytes, hex or bigint, not ${typeof y}`)}return B&&(I=t.mod(I,L)),G(I),I}const V=new Map;function m(y){if(!(y instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(v,S,B){if(this.px=v,this.py=S,this.pz=B,v==null||!C.isValid(v))throw new Error("x required");if(S==null||!C.isValid(S))throw new Error("y required");if(B==null||!C.isValid(B))throw new Error("z required")}static fromAffine(v){const{x:S,y:B}=v||{};if(!v||!C.isValid(S)||!C.isValid(B))throw new Error("invalid affine point");if(v instanceof d)throw new Error("projective point not allowed");const L=I=>C.eql(I,C.ZERO);return L(S)&&L(B)?d.ZERO:new d(S,B,C.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const S=C.invertBatch(v.map(B=>B.pz));return v.map((B,L)=>B.toAffine(S[L])).map(d.fromAffine)}static fromHex(v){const S=d.fromAffine(Q((0,n.ensureBytes)("pointHex",v)));return S.assertValidity(),S}static fromPrivateKey(v){return d.BASE.multiply(D(v))}_setWindowSize(v){this._WINDOW_SIZE=v,V.delete(this)}assertValidity(){if(this.is0()){if(k.allowInfinityPoint&&!C.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:S}=this.toAffine();if(!C.isValid(v)||!C.isValid(S))throw new Error("bad point: x or y not FE");const B=C.sqr(S),L=Z(v);if(!C.eql(B,L))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(C.isOdd)return!C.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){m(v);const{px:S,py:B,pz:L}=this,{px:I,py:w,pz:R}=v,Y=C.eql(C.mul(S,R),C.mul(I,L)),K=C.eql(C.mul(B,R),C.mul(w,L));return Y&&K}negate(){return new d(this.px,C.neg(this.py),this.pz)}double(){const{a:v,b:S}=k,B=C.mul(S,p),{px:L,py:I,pz:w}=this;let R=C.ZERO,Y=C.ZERO,K=C.ZERO,ne=C.mul(L,L),Re=C.mul(I,I),ge=C.mul(w,w),ye=C.mul(L,I);return ye=C.add(ye,ye),K=C.mul(L,w),K=C.add(K,K),R=C.mul(v,K),Y=C.mul(B,ge),Y=C.add(R,Y),R=C.sub(Re,Y),Y=C.add(Re,Y),Y=C.mul(R,Y),R=C.mul(ye,R),K=C.mul(B,K),ge=C.mul(v,ge),ye=C.sub(ne,ge),ye=C.mul(v,ye),ye=C.add(ye,K),K=C.add(ne,ne),ne=C.add(K,ne),ne=C.add(ne,ge),ne=C.mul(ne,ye),Y=C.add(Y,ne),ge=C.mul(I,w),ge=C.add(ge,ge),ne=C.mul(ge,ye),R=C.sub(R,ne),K=C.mul(ge,Re),K=C.add(K,K),K=C.add(K,K),new d(R,Y,K)}add(v){m(v);const{px:S,py:B,pz:L}=this,{px:I,py:w,pz:R}=v;let Y=C.ZERO,K=C.ZERO,ne=C.ZERO;const Re=k.a,ge=C.mul(k.b,p);let ye=C.mul(S,I),Ye=C.mul(B,w),Me=C.mul(L,R),He=C.add(S,B),we=C.add(I,w);He=C.mul(He,we),we=C.add(ye,Ye),He=C.sub(He,we),we=C.add(S,L);let me=C.add(I,R);return we=C.mul(we,me),me=C.add(ye,Me),we=C.sub(we,me),me=C.add(B,L),Y=C.add(w,R),me=C.mul(me,Y),Y=C.add(Ye,Me),me=C.sub(me,Y),ne=C.mul(Re,we),Y=C.mul(ge,Me),ne=C.add(Y,ne),Y=C.sub(Ye,ne),ne=C.add(Ye,ne),K=C.mul(Y,ne),Ye=C.add(ye,ye),Ye=C.add(Ye,ye),Me=C.mul(Re,Me),we=C.mul(ge,we),Ye=C.add(Ye,Me),Me=C.sub(ye,Me),Me=C.mul(Re,Me),we=C.add(we,Me),ye=C.mul(Ye,we),K=C.add(K,ye),ye=C.mul(me,we),Y=C.mul(He,Y),Y=C.sub(Y,ye),ye=C.mul(He,Ye),ne=C.mul(me,ne),ne=C.add(ne,ye),new d(Y,K,ne)}subtract(v){return this.add(v.negate())}is0(){return this.equals(d.ZERO)}wNAF(v){return h.wNAFCached(this,V,v,S=>{const B=C.invertBatch(S.map(L=>L.pz));return S.map((L,I)=>L.toAffine(B[I])).map(d.fromAffine)})}multiplyUnsafe(v){const S=d.ZERO;if(v===f)return S;if(G(v),v===u)return this;const{endo:B}=k;if(!B)return h.unsafeLadder(this,v);let{k1neg:L,k1:I,k2neg:w,k2:R}=B.splitScalar(v),Y=S,K=S,ne=this;for(;I>f||R>f;)I&u&&(Y=Y.add(ne)),R&u&&(K=K.add(ne)),ne=ne.double(),I>>=u,R>>=u;return L&&(Y=Y.negate()),w&&(K=K.negate()),K=new d(C.mul(K.px,B.beta),K.py,K.pz),Y.add(K)}multiply(v){G(v);let S=v,B,L;const{endo:I}=k;if(I){const{k1neg:w,k1:R,k2neg:Y,k2:K}=I.splitScalar(S);let{p:ne,f:Re}=this.wNAF(R),{p:ge,f:ye}=this.wNAF(K);ne=h.constTimeNegate(w,ne),ge=h.constTimeNegate(Y,ge),ge=new d(C.mul(ge.px,I.beta),ge.py,ge.pz),B=ne.add(ge),L=Re.add(ye)}else{const{p:w,f:R}=this.wNAF(S);B=w,L=R}return d.normalizeZ([B,L])[0]}multiplyAndAddUnsafe(v,S,B){const L=d.BASE,I=(R,Y)=>Y===f||Y===u||!R.equals(L)?R.multiplyUnsafe(Y):R.multiply(Y),w=I(this,S).add(I(v,B));return w.is0()?void 0:w}toAffine(v){const{px:S,py:B,pz:L}=this,I=this.is0();v==null&&(v=I?C.ONE:C.inv(L));const w=C.mul(S,v),R=C.mul(B,v),Y=C.mul(L,v);if(I)return{x:C.ZERO,y:C.ZERO};if(!C.eql(Y,C.ONE))throw new Error("invZ was invalid");return{x:w,y:R}}isTorsionFree(){const{h:v,isTorsionFree:S}=k;if(v===u)return!0;if(S)return S(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:S}=k;return v===u?this:S?S(d,this):this.multiplyUnsafe(k.h)}toRawBytes(v=!0){return this.assertValidity(),X(d,this,v)}toHex(v=!0){return r.bytesToHex(this.toRawBytes(v))}}d.BASE=new d(k.Gx,k.Gy,C.ONE),d.ZERO=new d(C.ZERO,C.ONE,C.ZERO);const c=k.nBitLength,h=(0,s.wNAF)(d,k.endo?Math.ceil(c/2):c);return{CURVE:k,ProjectivePoint:d,normPrivateKeyToScalar:D,weierstrassEquation:Z,isWithinCurveOrder:z}}e.weierstrassPoints=b;function T(F){const k=(0,s.validateBasic)(F);return r.validateObject(k,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...k})}function P(F){const k=T(F),{Fp:C,n:X}=k,Q=C.BYTES+1,Z=2*C.BYTES+1;function z(we){return f<we&&we<C.ORDER}function G(we){return t.mod(we,X)}function D(we){return t.invert(we,X)}const{ProjectivePoint:V,normPrivateKeyToScalar:m,weierstrassEquation:d,isWithinCurveOrder:c}=b({...k,toBytes(we,me,ke){const Bt=me.toAffine(),De=C.toBytes(Bt.x),st=r.concatBytes;return ke?st(Uint8Array.from([me.hasEvenY()?2:3]),De):st(Uint8Array.from([4]),De,C.toBytes(Bt.y))},fromBytes(we){const me=we.length,ke=we[0],Bt=we.subarray(1);if(me===Q&&(ke===2||ke===3)){const De=r.bytesToNumberBE(Bt);if(!z(De))throw new Error("Point is not on curve");const st=d(De);let Ut=C.sqrt(st);const ft=(Ut&u)===u;return(ke&1)===1!==ft&&(Ut=C.neg(Ut)),{x:De,y:Ut}}else if(me===Z&&ke===4){const De=C.fromBytes(Bt.subarray(0,C.BYTES)),st=C.fromBytes(Bt.subarray(C.BYTES,2*C.BYTES));return{x:De,y:st}}else throw new Error(`Point of length ${me} was invalid. Expected ${Q} compressed bytes or ${Z} uncompressed bytes`)}}),h=we=>r.bytesToHex(r.numberToBytesBE(we,k.nByteLength));function y(we){const me=X>>u;return we>me}function v(we){return y(we)?G(-we):we}const S=(we,me,ke)=>r.bytesToNumberBE(we.slice(me,ke));class B{constructor(me,ke,Bt){this.r=me,this.s=ke,this.recovery=Bt,this.assertValidity()}static fromCompact(me){const ke=k.nByteLength;return me=(0,n.ensureBytes)("compactSignature",me,ke*2),new B(S(me,0,ke),S(me,ke,2*ke))}static fromDER(me){const{r:ke,s:Bt}=e.DER.toSig((0,n.ensureBytes)("DER",me));return new B(ke,Bt)}assertValidity(){if(!c(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!c(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(me){return new B(this.r,this.s,me)}recoverPublicKey(me){const{r:ke,s:Bt,recovery:De}=this,st=K((0,n.ensureBytes)("msgHash",me));if(De==null||![0,1,2,3].includes(De))throw new Error("recovery id invalid");const Ut=De===2||De===3?ke+k.n:ke;if(Ut>=C.ORDER)throw new Error("recovery id 2 or 3 invalid");const ft=De&1?"03":"02",pt=V.fromHex(ft+h(Ut)),Ft=D(Ut),Et=G(-st*Ft),It=G(Bt*Ft),Zt=V.BASE.multiplyAndAddUnsafe(pt,Et,It);if(!Zt)throw new Error("point at infinify");return Zt.assertValidity(),Zt}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new B(this.r,G(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const L={isValidPrivateKey(we){try{return m(we),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const we=t.getMinHashLength(k.n);return t.mapHashToField(k.randomBytes(we),k.n)},precompute(we=8,me=V.BASE){return me._setWindowSize(we),me.multiply(BigInt(3)),me}};function I(we,me=!0){return V.fromPrivateKey(we).toRawBytes(me)}function w(we){const me=r.isBytes(we),ke=typeof we=="string",Bt=(me||ke)&&we.length;return me?Bt===Q||Bt===Z:ke?Bt===2*Q||Bt===2*Z:we instanceof V}function R(we,me,ke=!0){if(w(we))throw new Error("first arg must be private key");if(!w(me))throw new Error("second arg must be public key");return V.fromHex(me).multiply(m(we)).toRawBytes(ke)}const Y=k.bits2int||function(we){const me=r.bytesToNumberBE(we),ke=we.length*8-k.nBitLength;return ke>0?me>>BigInt(ke):me},K=k.bits2int_modN||function(we){return G(Y(we))},ne=r.bitMask(k.nBitLength);function Re(we){if(typeof we!="bigint")throw new Error("bigint expected");if(!(f<=we&&we<ne))throw new Error(`bigint expected < 2^${k.nBitLength}`);return r.numberToBytesBE(we,k.nByteLength)}function ge(we,me,ke=ye){if(["recovered","canonical"].some(O=>O in ke))throw new Error("sign() legacy options not supported");const{hash:Bt,randomBytes:De}=k;let{lowS:st,prehash:Ut,extraEntropy:ft}=ke;st==null&&(st=!0),we=(0,n.ensureBytes)("msgHash",we),Ut&&(we=(0,n.ensureBytes)("prehashed msgHash",Bt(we)));const pt=K(we),Ft=m(me),Et=[Re(Ft),Re(pt)];if(ft!=null){const O=ft===!0?De(C.BYTES):ft;Et.push((0,n.ensureBytes)("extraEntropy",O))}const It=r.concatBytes(...Et),Zt=pt;function Tt(O){const E=Y(O);if(!c(E))return;const x=D(E),H=V.BASE.multiply(E).toAffine(),W=G(H.x);if(W===f)return;const te=G(x*G(Zt+W*Ft));if(te===f)return;let oe=(H.x===W?0:2)|Number(H.y&u),Xe=te;return st&&y(te)&&(Xe=v(te),oe^=1),new B(W,Xe,oe)}return{seed:It,k2sig:Tt}}const ye={lowS:k.lowS,prehash:!1},Ye={lowS:k.lowS,prehash:!1};function Me(we,me,ke=ye){const{seed:Bt,k2sig:De}=ge(we,me,ke),st=k;return r.createHmacDrbg(st.hash.outputLen,st.nByteLength,st.hmac)(Bt,De)}V.BASE._setWindowSize(8);function He(we,me,ke,Bt=Ye){const De=we;if(me=(0,n.ensureBytes)("msgHash",me),ke=(0,n.ensureBytes)("publicKey",ke),"strict"in Bt)throw new Error("options.strict was renamed to lowS");const{lowS:st,prehash:Ut}=Bt;let ft,pt;try{if(typeof De=="string"||r.isBytes(De))try{ft=B.fromDER(De)}catch(H){if(!(H instanceof e.DER.Err))throw H;ft=B.fromCompact(De)}else if(typeof De=="object"&&typeof De.r=="bigint"&&typeof De.s=="bigint"){const{r:H,s:W}=De;ft=new B(H,W)}else throw new Error("PARSE");pt=V.fromHex(ke)}catch(H){if(H.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(st&&ft.hasHighS())return!1;Ut&&(me=k.hash(me));const{r:Ft,s:Et}=ft,It=K(me),Zt=D(Et),Tt=G(It*Zt),O=G(Ft*Zt),E=V.BASE.multiplyAndAddUnsafe(pt,Tt,O)?.toAffine();return E?G(E.x)===Ft:!1}return{CURVE:k,getPublicKey:I,getSharedSecret:R,sign:Me,verify:He,ProjectivePoint:V,Signature:B,utils:L}}e.weierstrass=P;function $(F,k){const C=F.ORDER;let X=f;for(let y=C-u;y%l===f;y/=l)X+=u;const Q=X,Z=l<<Q-u-u,z=Z*l,G=(C-u)/z,D=(G-u)/l,V=z-u,m=Z,d=F.pow(k,G),c=F.pow(k,(G+u)/l);let h=(y,v)=>{let S=d,B=F.pow(v,V),L=F.sqr(B);L=F.mul(L,v);let I=F.mul(y,L);I=F.pow(I,D),I=F.mul(I,B),B=F.mul(I,v),L=F.mul(I,y);let w=F.mul(L,B);I=F.pow(w,m);let R=F.eql(I,F.ONE);B=F.mul(L,c),I=F.mul(w,S),L=F.cmov(B,L,R),w=F.cmov(I,w,R);for(let Y=Q;Y>u;Y--){let K=Y-l;K=l<<K-u;let ne=F.pow(w,K);const Re=F.eql(ne,F.ONE);B=F.mul(L,S),S=F.mul(S,S),ne=F.mul(w,S),L=F.cmov(B,L,Re),w=F.cmov(ne,w,Re)}return{isValid:R,value:L}};if(F.ORDER%_===p){const y=(F.ORDER-p)/_,v=F.sqrt(F.neg(k));h=(S,B)=>{let L=F.sqr(B);const I=F.mul(S,B);L=F.mul(L,I);let w=F.pow(L,y);w=F.mul(w,I);const R=F.mul(w,v),Y=F.mul(F.sqr(w),B),K=F.eql(Y,S);let ne=F.cmov(R,w,K);return{isValid:K,value:ne}}}return h}e.SWUFpSqrtRatio=$;function j(F,k){if(t.validateField(F),!F.isValid(k.A)||!F.isValid(k.B)||!F.isValid(k.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const C=$(F,k.Z);if(!F.isOdd)throw new Error("Fp.isOdd is not implemented!");return X=>{let Q,Z,z,G,D,V,m,d;Q=F.sqr(X),Q=F.mul(Q,k.Z),Z=F.sqr(Q),Z=F.add(Z,Q),z=F.add(Z,F.ONE),z=F.mul(z,k.B),G=F.cmov(k.Z,F.neg(Z),!F.eql(Z,F.ZERO)),G=F.mul(G,k.A),Z=F.sqr(z),V=F.sqr(G),D=F.mul(V,k.A),Z=F.add(Z,D),Z=F.mul(Z,z),V=F.mul(V,G),D=F.mul(V,k.B),Z=F.add(Z,D),m=F.mul(Q,z);const{isValid:c,value:h}=C(Z,V);d=F.mul(Q,X),d=F.mul(d,h),m=F.cmov(m,z,c),d=F.cmov(d,h,c);const y=F.isOdd(X)===F.isOdd(d);return d=F.cmov(F.neg(d),d,y),m=F.div(m,G),{x:m,y:d}}}e.mapToCurveSimpleSWU=j}(Hh);var Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.createHasher=Un.isogenyMap=Un.hash_to_field=Un.expand_message_xof=Un.expand_message_xmd=void 0;const r6=ht,Bn=ot;function n6(e){if((0,Bn.isBytes)(e))return e;if(typeof e=="string")return(0,Bn.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}const i6=Bn.bytesToNumberBE;function as(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=e&255,e>>>=8;return new Uint8Array(r)}function s6(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function Pa(e){if(!(0,Bn.isBytes)(e))throw new Error("Uint8Array expected")}function Dh(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function O1(e,t,r,n){Pa(e),Pa(t),Dh(r),t.length>255&&(t=n((0,Bn.concatBytes)((0,Bn.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:s,blockLen:i}=n,o=Math.ceil(r/s);if(o>255)throw new Error("Invalid xmd length");const a=(0,Bn.concatBytes)(t,as(t.length,1)),f=as(0,i),u=as(r,2),l=new Array(o),p=n((0,Bn.concatBytes)(f,e,u,as(0,1),a));l[0]=n((0,Bn.concatBytes)(p,as(1,1),a));for(let b=1;b<=o;b++){const T=[s6(p,l[b-1]),as(b+1,1),a];l[b]=n((0,Bn.concatBytes)(...T))}return(0,Bn.concatBytes)(...l).slice(0,r)}Un.expand_message_xmd=O1;function $1(e,t,r,n,s){if(Pa(e),Pa(t),Dh(r),t.length>255){const i=Math.ceil(2*n/8);t=s.create({dkLen:i}).update((0,Bn.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:r}).update(e).update(as(r,2)).update(t).update(as(t.length,1)).digest()}Un.expand_message_xof=$1;function zh(e,t,r){(0,Bn.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:s,m:i,hash:o,expand:a,DST:f}=r;Pa(e),Dh(t);const u=n6(f),l=n.toString(2).length,p=Math.ceil((l+s)/8),_=t*i*p;let b;if(a==="xmd")b=O1(e,u,_,o);else if(a==="xof")b=$1(e,u,_,s,o);else if(a==="_internal_pass")b=e;else throw new Error('expand must be "xmd" or "xof"');const T=new Array(t);for(let P=0;P<t;P++){const $=new Array(i);for(let j=0;j<i;j++){const F=p*(j+P*i),k=b.subarray(F,F+p);$[j]=(0,r6.mod)(i6(k),n)}T[P]=$}return T}Un.hash_to_field=zh;function o6(e,t){const r=t.map(n=>Array.from(n).reverse());return(n,s)=>{const[i,o,a,f]=r.map(u=>u.reduce((l,p)=>e.add(e.mul(l,n),p)));return n=e.div(i,o),s=e.mul(s,e.div(a,f)),{x:n,y:s}}}Un.isogenyMap=o6;function a6(e,t,r){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,s){const i=zh(n,2,{...r,DST:r.DST,...s}),o=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),f=o.add(a).clearCofactor();return f.assertValidity(),f},encodeToCurve(n,s){const i=zh(n,1,{...r,DST:r.encodeDST,...s}),o=e.fromAffine(t(i[0])).clearCofactor();return o.assertValidity(),o}}}Un.createHasher=a6;var jo={},M1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;const t=Nr,r=Ci;class n extends r.Hash{constructor(o,a){super(),this.finished=!1,this.destroyed=!1,(0,t.hash)(o);const f=(0,r.toBytes)(a);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,l=new Uint8Array(u);l.set(f.length>u?o.create().update(f).digest():f);for(let p=0;p<l.length;p++)l[p]^=54;this.iHash.update(l),this.oHash=o.create();for(let p=0;p<l.length;p++)l[p]^=106;this.oHash.update(l),l.fill(0)}update(o){return(0,t.exists)(this),this.iHash.update(o),this}digestInto(o){(0,t.exists)(this),(0,t.bytes)(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:f,finished:u,destroyed:l,blockLen:p,outputLen:_}=this;return o=o,o.finished=u,o.destroyed=l,o.blockLen=p,o.outputLen=_,o.oHash=a._cloneInto(o.oHash),o.iHash=f._cloneInto(o.iHash),o}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=n;const s=(i,o,a)=>new n(i,o).update(a).digest();e.hmac=s,e.hmac.create=(i,o)=>new n(i,o)})(M1),Object.defineProperty(jo,"__esModule",{value:!0}),jo.createCurve=jo.getHash=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const c6=M1,N1=Ci,f6=Hh;function P1(e){return{hash:e,hmac:(t,...r)=>(0,c6.hmac)(e,t,(0,N1.concatBytes)(...r)),randomBytes:N1.randomBytes}}jo.getHash=P1;function u6(e,t){const r=n=>(0,f6.weierstrass)({...e,...P1(n)});return Object.freeze({...r(t),create:r})}jo.createCurve=u6,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=Uo,r=Ci,n=ht,s=Hh,i=ot,o=Un,a=jo,f=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),l=BigInt(1),p=BigInt(2),_=(B,L)=>(B+L/p)/L;function b(B){const L=f,I=BigInt(3),w=BigInt(6),R=BigInt(11),Y=BigInt(22),K=BigInt(23),ne=BigInt(44),Re=BigInt(88),ge=B*B*B%L,ye=ge*ge*B%L,Ye=(0,n.pow2)(ye,I,L)*ye%L,Me=(0,n.pow2)(Ye,I,L)*ye%L,He=(0,n.pow2)(Me,p,L)*ge%L,we=(0,n.pow2)(He,R,L)*He%L,me=(0,n.pow2)(we,Y,L)*we%L,ke=(0,n.pow2)(me,ne,L)*me%L,Bt=(0,n.pow2)(ke,Re,L)*ke%L,De=(0,n.pow2)(Bt,ne,L)*me%L,st=(0,n.pow2)(De,I,L)*ye%L,Ut=(0,n.pow2)(st,K,L)*we%L,ft=(0,n.pow2)(Ut,w,L)*ge%L,pt=(0,n.pow2)(ft,p,L);if(!T.eql(T.sqr(pt),B))throw new Error("Cannot find square root");return pt}const T=(0,n.Field)(f,void 0,void 0,{sqrt:b});e.secp256k1=(0,a.createCurve)({a:BigInt(0),b:BigInt(7),Fp:T,n:u,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:B=>{const L=u,I=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),w=-l*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),R=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),Y=I,K=BigInt("0x100000000000000000000000000000000"),ne=_(Y*B,L),Re=_(-w*B,L);let ge=(0,n.mod)(B-ne*I-Re*R,L),ye=(0,n.mod)(-ne*w-Re*Y,L);const Ye=ge>K,Me=ye>K;if(Ye&&(ge=L-ge),Me&&(ye=L-ye),ge>K||ye>K)throw new Error("splitScalar: Endomorphism failed, k="+B);return{k1neg:Ye,k1:ge,k2neg:Me,k2:ye}}}},t.sha256);const P=BigInt(0),$=B=>typeof B=="bigint"&&P<B&&B<f,j=B=>typeof B=="bigint"&&P<B&&B<u,F={};function k(B,...L){let I=F[B];if(I===void 0){const w=(0,t.sha256)(Uint8Array.from(B,R=>R.charCodeAt(0)));I=(0,i.concatBytes)(w,w),F[B]=I}return(0,t.sha256)((0,i.concatBytes)(I,...L))}const C=B=>B.toRawBytes(!0).slice(1),X=B=>(0,i.numberToBytesBE)(B,32),Q=B=>(0,n.mod)(B,f),Z=B=>(0,n.mod)(B,u),z=e.secp256k1.ProjectivePoint,G=(B,L,I)=>z.BASE.multiplyAndAddUnsafe(B,L,I);function D(B){let L=e.secp256k1.utils.normPrivateKeyToScalar(B),I=z.fromPrivateKey(L);return{scalar:I.hasEvenY()?L:Z(-L),bytes:C(I)}}function V(B){if(!$(B))throw new Error("bad x: need 0 < x < p");const L=Q(B*B),I=Q(L*B+BigInt(7));let w=b(I);w%p!==P&&(w=Q(-w));const R=new z(B,w,l);return R.assertValidity(),R}function m(...B){return Z((0,i.bytesToNumberBE)(k("BIP0340/challenge",...B)))}function d(B){return D(B).bytes}function c(B,L,I=(0,r.randomBytes)(32)){const w=(0,i.ensureBytes)("message",B),{bytes:R,scalar:Y}=D(L),K=(0,i.ensureBytes)("auxRand",I,32),ne=X(Y^(0,i.bytesToNumberBE)(k("BIP0340/aux",K))),Re=k("BIP0340/nonce",ne,R,w),ge=Z((0,i.bytesToNumberBE)(Re));if(ge===P)throw new Error("sign failed: k is zero");const{bytes:ye,scalar:Ye}=D(ge),Me=m(ye,R,w),He=new Uint8Array(64);if(He.set(ye,0),He.set(X(Z(Ye+Me*Y)),32),!h(He,w,R))throw new Error("sign: Invalid signature produced");return He}function h(B,L,I){const w=(0,i.ensureBytes)("signature",B,64),R=(0,i.ensureBytes)("message",L),Y=(0,i.ensureBytes)("publicKey",I,32);try{const K=V((0,i.bytesToNumberBE)(Y)),ne=(0,i.bytesToNumberBE)(w.subarray(0,32));if(!$(ne))return!1;const Re=(0,i.bytesToNumberBE)(w.subarray(32,64));if(!j(Re))return!1;const ge=m(X(ne),C(K),R),ye=G(K,Re,Z(-ge));return!(!ye||!ye.hasEvenY()||ye.toAffine().x!==ne)}catch{return!1}}e.schnorr=(()=>({getPublicKey:d,sign:c,verify:h,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:V,pointToBytes:C,numberToBytesBE:i.numberToBytesBE,bytesToNumberBE:i.bytesToNumberBE,taggedHash:k,mod:n.mod}}))();const y=(()=>(0,o.isogenyMap)(T,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(B=>B.map(L=>BigInt(L)))))(),v=(()=>(0,s.mapToCurveSimpleSWU)(T,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:T.create(BigInt("-11"))}))(),S=(()=>(0,o.createHasher)(e.secp256k1.ProjectivePoint,B=>{const{x:L,y:I}=v(T.create(B[0]));return y(L,I)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:T.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256}))();e.hashToCurve=(()=>S.hashToCurve)(),e.encodeToCurve=(()=>S.encodeToCurve)()}(h1),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.secp256k1=void 0;var t=h1;Object.defineProperty(e,"secp256k1",{enumerable:!0,get:function(){return t.secp256k1}})}(Hf),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_WITHDRAWALS_PER_PAYLOAD=e.RLP_EMPTY_STRING=e.KECCAK256_RLP=e.KECCAK256_RLP_S=e.KECCAK256_RLP_ARRAY=e.KECCAK256_RLP_ARRAY_S=e.KECCAK256_NULL=e.KECCAK256_NULL_S=e.TWO_POW256=e.SECP256K1_ORDER_DIV_2=e.SECP256K1_ORDER=e.MAX_INTEGER_BIGINT=e.MAX_INTEGER=e.MAX_UINT64=void 0;const t=se,r=Hf;e.MAX_UINT64=BigInt("0xffffffffffffffff"),e.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),e.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),e.SECP256K1_ORDER=r.secp256k1.CURVE.n,e.SECP256K1_ORDER_DIV_2=r.secp256k1.CURVE.n/BigInt(2),e.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),e.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",e.KECCAK256_NULL=t.Buffer.from(e.KECCAK256_NULL_S,"hex"),e.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",e.KECCAK256_RLP_ARRAY=t.Buffer.from(e.KECCAK256_RLP_ARRAY_S,"hex"),e.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",e.KECCAK256_RLP=t.Buffer.from(e.KECCAK256_RLP_S,"hex"),e.RLP_EMPTY_STRING=t.Buffer.from([128]),e.MAX_WITHDRAWALS_PER_PAYLOAD=16}(Ff);var Wf={};Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.GWEI_TO_WEI=void 0,Wf.GWEI_TO_WEI=BigInt(1e9);var qh={},li={};Object.defineProperty(li,"__esModule",{value:!0}),li.RLP=li.utils=li.decode=li.encode=void 0;function Vh(e){if(Array.isArray(e)){const r=[];let n=0;for(let s=0;s<e.length;s++){const i=Vh(e[s]);r.push(i),n+=i.length}return Wh(F1(n,192),...r)}const t=V1(e);return t.length===1&&t[0]<128?t:Wh(F1(t.length,128),t)}li.encode=Vh;function Do(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function U1(e){if(e[0]===0)throw new Error("invalid RLP: extra zeros");return D1(j1(e))}function F1(e,t){if(e<56)return Uint8Array.from([e+t]);const r=Zh(e),n=r.length/2,s=Zh(t+55+n);return Uint8Array.from(Zf(s+r))}function H1(e,t=!1){if(typeof e>"u"||e===null||e.length===0)return Uint8Array.from([]);const r=V1(e),n=Kh(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return n.data}li.decode=H1;function Kh(e){let t,r,n,s,i;const o=[],a=e[0];if(a<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(a<=183){if(t=a-127,a===128?n=Uint8Array.from([]):n=Do(e,1,t),t===2&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:e.slice(t)}}else if(a<=191){if(r=a-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=U1(Do(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=Do(e,r,t+r),{data:n,remainder:e.slice(t+r)}}else if(a<=247){for(t=a-191,s=Do(e,1,t);s.length;)i=Kh(s),o.push(i.data),s=i.remainder;return{data:o,remainder:e.slice(t)}}else{if(r=a-246,t=U1(Do(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const f=r+t;if(f>e.length)throw new Error("invalid RLP: total length is larger than the data");for(s=Do(e,r,f);s.length;)i=Kh(s),o.push(i.data),s=i.remainder;return{data:o,remainder:e.slice(f)}}}const l6=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function j1(e){let t="";for(let r=0;r<e.length;r++)t+=l6[e[r]];return t}function D1(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function Zf(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=r*2;t[r]=D1(e.slice(n,n+2))}return t}function Wh(...e){if(e.length===1)return e[0];const t=e.reduce((n,s)=>n+s.length,0),r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){const i=e[n];r.set(i,s),s+=i.length}return r}function z1(e){return new TextEncoder().encode(e)}function Zh(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function h6(e){return e.length%2?`0${e}`:e}function q1(e){return e.length>=2&&e[0]==="0"&&e[1]==="x"}function d6(e){return typeof e!="string"?e:q1(e)?e.slice(2):e}function V1(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return q1(e)?Zf(h6(d6(e))):z1(e);if(typeof e=="number"||typeof e=="bigint")return e?Zf(Zh(e)):Uint8Array.from([]);if(e==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}li.utils={bytesToHex:j1,concatBytes:Wh,hexToBytes:Zf,utf8ToBytes:z1},li.RLP={encode:Vh,decode:H1};var Zn={},Xt={},at={};Object.defineProperty(at,"__esModule",{value:!0}),at.add5L=at.add5H=at.add4H=at.add4L=at.add3H=at.add3L=at.add=at.rotlBL=at.rotlBH=at.rotlSL=at.rotlSH=at.rotr32L=at.rotr32H=at.rotrBL=at.rotrBH=at.rotrSL=at.rotrSH=at.shrSL=at.shrSH=at.toBig=at.split=at.fromBig=void 0;const Gf=BigInt(2**32-1),Gh=BigInt(32);function Yh(e,t=!1){return t?{h:Number(e&Gf),l:Number(e>>Gh&Gf)}:{h:Number(e>>Gh&Gf)|0,l:Number(e&Gf)|0}}at.fromBig=Yh;function K1(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=Yh(e[s],t);[r[s],n[s]]=[i,o]}return[r,n]}at.split=K1;const W1=(e,t)=>BigInt(e>>>0)<<Gh|BigInt(t>>>0);at.toBig=W1;const Z1=(e,t,r)=>e>>>r;at.shrSH=Z1;const G1=(e,t,r)=>e<<32-r|t>>>r;at.shrSL=G1;const Y1=(e,t,r)=>e>>>r|t<<32-r;at.rotrSH=Y1;const X1=(e,t,r)=>e<<32-r|t>>>r;at.rotrSL=X1;const J1=(e,t,r)=>e<<64-r|t>>>r-32;at.rotrBH=J1;const Q1=(e,t,r)=>e>>>r-32|t<<64-r;at.rotrBL=Q1;const ey=(e,t)=>t;at.rotr32H=ey;const ty=(e,t)=>e;at.rotr32L=ty;const ry=(e,t,r)=>e<<r|t>>>32-r;at.rotlSH=ry;const ny=(e,t,r)=>t<<r|e>>>32-r;at.rotlSL=ny;const iy=(e,t,r)=>t<<r-32|e>>>64-r;at.rotlBH=iy;const sy=(e,t,r)=>e<<r-32|t>>>64-r;at.rotlBL=sy;function oy(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:s|0}}at.add=oy;const ay=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);at.add3L=ay;const cy=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;at.add3H=cy;const fy=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);at.add4L=fy;const uy=(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0;at.add4H=uy;const ly=(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0);at.add5L=ly;const hy=(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0;at.add5H=hy;const p6={fromBig:Yh,split:K1,toBig:W1,shrSH:Z1,shrSL:G1,rotrSH:Y1,rotrSL:X1,rotrBH:J1,rotrBL:Q1,rotr32H:ey,rotr32L:ty,rotlSH:ry,rotlSL:ny,rotlBH:iy,rotlBL:sy,add:oy,add3L:ay,add3H:cy,add4L:fy,add4H:uy,add5H:hy,add5L:ly};at.default=p6,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.shake256=Xt.shake128=Xt.keccak_512=Xt.keccak_384=Xt.keccak_256=Xt.keccak_224=Xt.sha3_512=Xt.sha3_384=Xt.sha3_256=Xt.sha3_224=Xt.Keccak=Xt.keccakP=void 0;const zo=Nr,Ua=at,Fa=Ci,[dy,py,gy]=[[],[],[]],g6=BigInt(0),Ha=BigInt(1),y6=BigInt(2),w6=BigInt(7),m6=BigInt(256),b6=BigInt(113);for(let e=0,t=Ha,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],dy.push(2*(5*n+r)),py.push((e+1)*(e+2)/2%64);let s=g6;for(let i=0;i<7;i++)t=(t<<Ha^(t>>w6)*b6)%m6,t&y6&&(s^=Ha<<(Ha<<BigInt(i))-Ha);gy.push(s)}const[v6,_6]=(0,Ua.split)(gy,!0),yy=(e,t,r)=>r>32?(0,Ua.rotlBH)(e,t,r):(0,Ua.rotlSH)(e,t,r),wy=(e,t,r)=>r>32?(0,Ua.rotlBL)(e,t,r):(0,Ua.rotlSL)(e,t,r);function my(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)r[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,f=(o+2)%10,u=r[f],l=r[f+1],p=yy(u,l,1)^r[a],_=wy(u,l,1)^r[a+1];for(let b=0;b<50;b+=10)e[o+b]^=p,e[o+b+1]^=_}let s=e[2],i=e[3];for(let o=0;o<24;o++){const a=py[o],f=yy(s,i,a),u=wy(s,i,a),l=dy[o];s=e[l],i=e[l+1],e[l]=f,e[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=v6[n],e[1]^=_6[n]}r.fill(0)}Xt.keccakP=my;class ja extends Fa.Hash{constructor(t,r,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,zo.number)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Fa.u32)(this.state)}keccak(){my(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){(0,zo.exists)(this);const{blockLen:r,state:n}=this;t=(0,Fa.toBytes)(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:r,pos:n,blockLen:s}=this;t[n]^=r,r&128&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){(0,zo.exists)(this,!1),(0,zo.bytes)(t),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);t.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,zo.number)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,zo.output)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new ja(r,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}Xt.Keccak=ja;const cs=(e,t,r)=>(0,Fa.wrapConstructor)(()=>new ja(t,e,r));Xt.sha3_224=cs(6,144,224/8),Xt.sha3_256=cs(6,136,256/8),Xt.sha3_384=cs(6,104,384/8),Xt.sha3_512=cs(6,72,512/8),Xt.keccak_224=cs(1,144,224/8),Xt.keccak_256=cs(1,136,256/8),Xt.keccak_384=cs(1,104,384/8),Xt.keccak_512=cs(1,72,512/8);const by=(e,t,r)=>(0,Fa.wrapXOFConstructorWithOpts)((n={})=>new ja(t,e,n.dkLen===void 0?r:n.dkLen,!0));Xt.shake128=by(31,168,128/8),Xt.shake256=by(31,136,256/8);function Da(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yf={exports:{}};(function(e,t){var r=Pe&&Pe.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.wrapHash=t.equalsBytes=t.hexToBytes=t.bytesToUtf8=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0;const n=r(Nr),s=Ci,i=n.default.bool;t.assertBool=i;const o=n.default.bytes;t.assertBytes=o;var a=Ci;Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return a.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return a.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return a.utf8ToBytes}});function f(_){if(!(_ instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof _}`);return new TextDecoder().decode(_)}t.bytesToUtf8=f;function u(_){const b=_.startsWith("0x")?_.substring(2):_;return(0,s.hexToBytes)(b)}t.hexToBytes=u;function l(_,b){if(_.length!==b.length)return!1;for(let T=0;T<_.length;T++)if(_[T]!==b[T])return!1;return!0}t.equalsBytes=l;function p(_){return b=>(n.default.bytes(b),_(b))}t.wrapHash=p,t.crypto=(()=>{const _=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,b=typeof Da=="function"&&Da.bind(e);return{node:b&&!_?b("crypto"):void 0,web:_}})()})(Yf,Yf.exports),Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.keccak512=Zn.keccak384=Zn.keccak256=Zn.keccak224=void 0;const za=Xt,Xf=Yf.exports;Zn.keccak224=(0,Xf.wrapHash)(za.keccak_224),Zn.keccak256=(()=>{const e=(0,Xf.wrapHash)(za.keccak_256);return e.create=za.keccak_256.create,e})(),Zn.keccak384=(0,Xf.wrapHash)(za.keccak_384),Zn.keccak512=(0,Xf.wrapHash)(za.keccak_512);var Ks={},Fn={},Jt={};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.isHexString=Jt.getKeys=Jt.fromAscii=Jt.fromUtf8=Jt.toAscii=Jt.arrayContainsArray=Jt.getBinarySize=Jt.padToEven=Jt.stripHexPrefix=Jt.isHexPrefixed=void 0;function vy(e){if(typeof e!="string")throw new Error(`[isHexPrefixed] input must be type 'string', received type ${typeof e}`);return e[0]==="0"&&e[1]==="x"}Jt.isHexPrefixed=vy;const E6=e=>{if(typeof e!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof e}`);return vy(e)?e.slice(2):e};Jt.stripHexPrefix=E6;function _y(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}Jt.padToEven=_y;function x6(e){if(typeof e!="string")throw new Error(`[getBinarySize] method requires input type 'string', received ${typeof e}`);return se.Buffer.byteLength(e,"utf8")}Jt.getBinarySize=x6;function S6(e,t,r){if(Array.isArray(e)!==!0)throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(Array.isArray(t)!==!0)throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[r===!0?"some":"every"](n=>e.indexOf(n)>=0)}Jt.arrayContainsArray=S6;function A6(e){let t="",r=0;const n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){const s=parseInt(e.substr(r,2),16);t+=String.fromCharCode(s)}return t}Jt.toAscii=A6;function B6(e){const t=se.Buffer.from(e,"utf8");return`0x${_y(t.toString("hex")).replace(/^0+|0+$/g,"")}`}Jt.fromUtf8=B6;function I6(e){let t="";for(let r=0;r<e.length;r++){const s=e.charCodeAt(r).toString(16);t+=s.length<2?`0${s}`:s}return`0x${t}`}Jt.fromAscii=I6;function T6(e,t,r){if(!Array.isArray(e))throw new Error(`[getKeys] method expects input 'params' to be an array, got ${typeof e}`);if(typeof t!="string")throw new Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof e}`);const n=[];for(let s=0;s<e.length;s++){let i=e[s][t];if(r===!0&&!i)i="";else if(typeof i!="string")throw new Error(`invalid abi - expected type 'string', received ${typeof i}`);n.push(i)}return n}Jt.getKeys=T6;function R6(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||typeof t<"u"&&t>0&&e.length!==2+2*t)}Jt.isHexString=R6,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.assertIsString=Fn.assertIsArray=Fn.assertIsBuffer=Fn.assertIsHexString=void 0;const k6=Jt,L6=function(e){if(!(0,k6.isHexString)(e)){const t=`This method only supports 0x-prefixed hex strings but input was: ${e}`;throw new Error(t)}};Fn.assertIsHexString=L6;const C6=function(e){if(!se.Buffer.isBuffer(e)){const t=`This method only supports Buffer but input was: ${e}`;throw new Error(t)}};Fn.assertIsBuffer=C6;const O6=function(e){if(!Array.isArray(e)){const t=`This method only supports number arrays but input was: ${e}`;throw new Error(t)}};Fn.assertIsArray=O6;const $6=function(e){if(typeof e!="string"){const t=`This method only supports strings but input was: ${e}`;throw new Error(t)}};Fn.assertIsString=$6,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.intToUnpaddedBuffer=e.bigIntToUnpaddedBuffer=e.bigIntToHex=e.bufArrToArr=e.arrToBufArr=e.validateNoLeadingZeroes=e.baToJSON=e.toUtf8=e.short=e.addHexPrefix=e.toUnsigned=e.fromSigned=e.bufferToInt=e.bigIntToBuffer=e.bufferToBigInt=e.bufferToHex=e.toBuffer=e.unpadHexString=e.unpadArray=e.unpadBuffer=e.setLengthRight=e.setLengthLeft=e.zeros=e.intToBuffer=e.intToHex=void 0;const t=Fn,r=Jt,n=function(c){if(!Number.isSafeInteger(c)||c<0)throw new Error(`Received an invalid integer type: ${c}`);return`0x${c.toString(16)}`};e.intToHex=n;const s=function(c){const h=(0,e.intToHex)(c);return se.Buffer.from((0,r.padToEven)(h.slice(2)),"hex")};e.intToBuffer=s;const i=function(c){return se.Buffer.allocUnsafe(c).fill(0)};e.zeros=i;const o=function(c,h,y){const v=(0,e.zeros)(h);return y?c.length<h?(c.copy(v),v):c.slice(0,h):c.length<h?(c.copy(v,h-c.length),v):c.slice(-h)},a=function(c,h){return(0,t.assertIsBuffer)(c),o(c,h,!1)};e.setLengthLeft=a;const f=function(c,h){return(0,t.assertIsBuffer)(c),o(c,h,!0)};e.setLengthRight=f;const u=function(c){let h=c[0];for(;c.length>0&&h.toString()==="0";)c=c.slice(1),h=c[0];return c},l=function(c){return(0,t.assertIsBuffer)(c),u(c)};e.unpadBuffer=l;const p=function(c){return(0,t.assertIsArray)(c),u(c)};e.unpadArray=p;const _=function(c){return(0,t.assertIsHexString)(c),c=(0,r.stripHexPrefix)(c),"0x"+u(c)};e.unpadHexString=_;const b=function(c){if(c==null)return se.Buffer.allocUnsafe(0);if(se.Buffer.isBuffer(c)||Array.isArray(c)||c instanceof Uint8Array)return se.Buffer.from(c);if(typeof c=="string"){if(!(0,r.isHexString)(c))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${c}`);return se.Buffer.from((0,r.padToEven)((0,r.stripHexPrefix)(c)),"hex")}if(typeof c=="number")return(0,e.intToBuffer)(c);if(typeof c=="bigint"){if(c<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${c}`);let h=c.toString(16);return h.length%2&&(h="0"+h),se.Buffer.from(h,"hex")}if(c.toArray)return se.Buffer.from(c.toArray());if(c.toBuffer)return se.Buffer.from(c.toBuffer());throw new Error("invalid type")};e.toBuffer=b;const T=function(c){return c=(0,e.toBuffer)(c),"0x"+c.toString("hex")};e.bufferToHex=T;function P(c){const h=(0,e.bufferToHex)(c);return BigInt(h==="0x"?0:h)}e.bufferToBigInt=P;function $(c){return(0,e.toBuffer)("0x"+c.toString(16))}e.bigIntToBuffer=$;const j=function(c){const h=Number(P(c));if(!Number.isSafeInteger(h))throw new Error("Number exceeds 53 bits");return h};e.bufferToInt=j;const F=function(c){return BigInt.asIntN(256,P(c))};e.fromSigned=F;const k=function(c){return $(BigInt.asUintN(256,c))};e.toUnsigned=k;const C=function(c){return typeof c!="string"||(0,r.isHexPrefixed)(c)?c:"0x"+c};e.addHexPrefix=C;function X(c,h=50){const y=se.Buffer.isBuffer(c)?c.toString("hex"):c;return y.length<=h?y:y.slice(0,h)+"\u2026"}e.short=X;const Q=function(c){const h=/^(00)+|(00)+$/g;if(c=(0,r.stripHexPrefix)(c),c.length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return se.Buffer.from(c.replace(h,""),"hex").toString("utf8")};e.toUtf8=Q;const Z=function(c){if(se.Buffer.isBuffer(c))return`0x${c.toString("hex")}`;if(c instanceof Array){const h=[];for(let y=0;y<c.length;y++)h.push((0,e.baToJSON)(c[y]));return h}};e.baToJSON=Z;const z=function(c){for(const[h,y]of Object.entries(c))if(y!==void 0&&y.length>0&&y[0]===0)throw new Error(`${h} cannot have leading zeroes, received: ${y.toString("hex")}`)};e.validateNoLeadingZeroes=z;function G(c){return Array.isArray(c)?c.map(h=>G(h)):se.Buffer.from(c)}e.arrToBufArr=G;function D(c){return Array.isArray(c)?c.map(h=>D(h)):Uint8Array.from(c??[])}e.bufArrToArr=D;const V=c=>"0x"+c.toString(16);e.bigIntToHex=V;function m(c){return(0,e.unpadBuffer)($(c))}e.bigIntToUnpaddedBuffer=m;function d(c){return(0,e.unpadBuffer)((0,e.intToBuffer)(c))}e.intToUnpaddedBuffer=d}(Ks),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.accountBodyToRLP=e.accountBodyToSlim=e.accountBodyFromSlim=e.isZeroAddress=e.zeroAddress=e.importPublic=e.privateToAddress=e.privateToPublic=e.publicToAddress=e.pubToAddress=e.isValidPublic=e.isValidPrivate=e.generateAddress2=e.generateAddress=e.isValidChecksumAddress=e.toChecksumAddress=e.isValidAddress=e.Account=void 0;const t=li,r=Zn,n=Hf,s=Yf.exports,i=Ks,o=Ff,a=Fn,f=Jt,u=BigInt(0);class l{constructor(d=u,c=u,h=o.KECCAK256_RLP,y=o.KECCAK256_NULL){this.nonce=d,this.balance=c,this.storageRoot=h,this.codeHash=y,this._validate()}static fromAccountData(d){const{nonce:c,balance:h,storageRoot:y,codeHash:v}=d;return new l(c!==void 0?(0,i.bufferToBigInt)((0,i.toBuffer)(c)):void 0,h!==void 0?(0,i.bufferToBigInt)((0,i.toBuffer)(h)):void 0,y!==void 0?(0,i.toBuffer)(y):void 0,v!==void 0?(0,i.toBuffer)(v):void 0)}static fromRlpSerializedAccount(d){const c=(0,i.arrToBufArr)(t.RLP.decode(Uint8Array.from(d)));if(!Array.isArray(c))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(c)}static fromValuesArray(d){const[c,h,y,v]=d;return new l((0,i.bufferToBigInt)(c),(0,i.bufferToBigInt)(h),y,v)}_validate(){if(this.nonce<u)throw new Error("nonce must be greater than zero");if(this.balance<u)throw new Error("balance must be greater than zero");if(this.storageRoot.length!==32)throw new Error("storageRoot must have a length of 32");if(this.codeHash.length!==32)throw new Error("codeHash must have a length of 32")}raw(){return[(0,i.bigIntToUnpaddedBuffer)(this.nonce),(0,i.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return se.Buffer.from(t.RLP.encode((0,i.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(o.KECCAK256_NULL)}isEmpty(){return this.balance===u&&this.nonce===u&&this.codeHash.equals(o.KECCAK256_NULL)}}e.Account=l;const p=function(m){try{(0,a.assertIsString)(m)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(m)};e.isValidAddress=p;const _=function(m,d){(0,a.assertIsHexString)(m);const c=(0,f.stripHexPrefix)(m).toLowerCase();let h="";d!==void 0&&(h=(0,i.bufferToBigInt)((0,i.toBuffer)(d)).toString()+"0x");const y=se.Buffer.from(h+c,"utf8"),v=(0,s.bytesToHex)((0,r.keccak256)(y));let S="0x";for(let B=0;B<c.length;B++)parseInt(v[B],16)>=8?S+=c[B].toUpperCase():S+=c[B];return S};e.toChecksumAddress=_;const b=function(m,d){return(0,e.isValidAddress)(m)&&(0,e.toChecksumAddress)(m,d)===m};e.isValidChecksumAddress=b;const T=function(m,d){return(0,a.assertIsBuffer)(m),(0,a.assertIsBuffer)(d),(0,i.bufferToBigInt)(d)===BigInt(0)?se.Buffer.from((0,r.keccak256)(t.RLP.encode((0,i.bufArrToArr)([m,null])))).slice(-20):se.Buffer.from((0,r.keccak256)(t.RLP.encode((0,i.bufArrToArr)([m,d])))).slice(-20)};e.generateAddress=T;const P=function(m,d,c){if((0,a.assertIsBuffer)(m),(0,a.assertIsBuffer)(d),(0,a.assertIsBuffer)(c),m.length!==20)throw new Error("Expected from to be of length 20");if(d.length!==32)throw new Error("Expected salt to be of length 32");const h=(0,r.keccak256)(se.Buffer.concat([se.Buffer.from("ff","hex"),m,d,(0,r.keccak256)(c)]));return(0,i.toBuffer)(h).slice(-20)};e.generateAddress2=P;const $=function(m){return n.secp256k1.utils.isValidPrivateKey(m)};e.isValidPrivate=$;const j=function(m,d=!1){if((0,a.assertIsBuffer)(m),m.length===64)try{return n.secp256k1.ProjectivePoint.fromHex(se.Buffer.concat([se.Buffer.from([4]),m])),!0}catch{return!1}if(!d)return!1;try{return n.secp256k1.ProjectivePoint.fromHex(m),!0}catch{return!1}};e.isValidPublic=j;const F=function(m,d=!1){if((0,a.assertIsBuffer)(m),d&&m.length!==64&&(m=se.Buffer.from(n.secp256k1.ProjectivePoint.fromHex(m).toRawBytes(!1).slice(1))),m.length!==64)throw new Error("Expected pubKey to be of length 64");return se.Buffer.from((0,r.keccak256)(m)).slice(-20)};e.pubToAddress=F,e.publicToAddress=e.pubToAddress;const k=function(m){return(0,a.assertIsBuffer)(m),se.Buffer.from(n.secp256k1.ProjectivePoint.fromPrivateKey(m).toRawBytes(!1).slice(1))};e.privateToPublic=k;const C=function(m){return(0,e.publicToAddress)((0,e.privateToPublic)(m))};e.privateToAddress=C;const X=function(m){return(0,a.assertIsBuffer)(m),m.length!==64&&(m=se.Buffer.from(n.secp256k1.ProjectivePoint.fromHex(m).toRawBytes(!1).slice(1))),m};e.importPublic=X;const Q=function(){const d=(0,i.zeros)(20);return(0,i.bufferToHex)(d)};e.zeroAddress=Q;const Z=function(m){try{(0,a.assertIsString)(m)}catch{return!1}return(0,e.zeroAddress)()===m};e.isZeroAddress=Z;function z(m){const[d,c,h,y]=m;return[d,c,(0,i.arrToBufArr)(h).length===0?o.KECCAK256_RLP:h,(0,i.arrToBufArr)(y).length===0?o.KECCAK256_NULL:y]}e.accountBodyFromSlim=z;const G=new Uint8Array(0);function D(m){const[d,c,h,y]=m;return[d,c,(0,i.arrToBufArr)(h).equals(o.KECCAK256_RLP)?G:h,(0,i.arrToBufArr)(y).equals(o.KECCAK256_NULL)?G:y]}e.accountBodyToSlim=D;function V(m,d=!0){const c=d?z(m):m;return(0,i.arrToBufArr)(t.RLP.encode(c))}e.accountBodyToRLP=V}(qh);var qa={};Object.defineProperty(qa,"__esModule",{value:!0}),qa.Address=void 0;const Va=qh,Jf=Ks;class $i{constructor(t){if(t.length!==20)throw new Error("Invalid address length");this.buf=t}static zero(){return new $i((0,Jf.zeros)(20))}static fromString(t){if(!(0,Va.isValidAddress)(t))throw new Error("Invalid address");return new $i((0,Jf.toBuffer)(t))}static fromPublicKey(t){if(!se.Buffer.isBuffer(t))throw new Error("Public key should be Buffer");const r=(0,Va.pubToAddress)(t);return new $i(r)}static fromPrivateKey(t){if(!se.Buffer.isBuffer(t))throw new Error("Private key should be Buffer");const r=(0,Va.privateToAddress)(t);return new $i(r)}static generate(t,r){if(typeof r!="bigint")throw new Error("Expected nonce to be a bigint");return new $i((0,Va.generateAddress)(t.buf,(0,Jf.bigIntToBuffer)(r)))}static generate2(t,r,n){if(!se.Buffer.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!se.Buffer.isBuffer(n))throw new Error("Expected initCode to be a Buffer");return new $i((0,Va.generateAddress2)(t.buf,r,n))}equals(t){return this.buf.equals(t.buf)}isZero(){return this.equals($i.zero())}isPrecompileOrSystemAddress(){const t=(0,Jf.bufferToBigInt)(this.buf),r=BigInt(0),n=BigInt("0xffff");return t>=r&&t<=n}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return se.Buffer.from(this.buf)}}qa.Address=$i;var Qf={},Xh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toType=e.TypeOutput=void 0;const t=Ks,r=Jt;var n;(function(i){i[i.Number=0]="Number",i[i.BigInt=1]="BigInt",i[i.Buffer=2]="Buffer",i[i.PrefixedHexString=3]="PrefixedHexString"})(n=e.TypeOutput||(e.TypeOutput={}));function s(i,o){if(i===null)return null;if(i===void 0)return;if(typeof i=="string"&&!(0,r.isHexString)(i))throw new Error(`A string must be provided with a 0x-prefix, given: ${i}`);if(typeof i=="number"&&!Number.isSafeInteger(i))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const a=(0,t.toBuffer)(i);switch(o){case n.Buffer:return a;case n.BigInt:return(0,t.bufferToBigInt)(a);case n.Number:{const f=(0,t.bufferToBigInt)(a);if(f>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(f)}case n.PrefixedHexString:return(0,t.bufferToHex)(a);default:throw new Error("unknown outputType")}}e.toType=s})(Xh),Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.Withdrawal=void 0;const Ey=qa,Jh=Ks,mr=Xh;class Ka{constructor(t,r,n,s){this.index=t,this.validatorIndex=r,this.address=n,this.amount=s}static fromWithdrawalData(t){const{index:r,validatorIndex:n,address:s,amount:i}=t,o=(0,mr.toType)(r,mr.TypeOutput.BigInt),a=(0,mr.toType)(n,mr.TypeOutput.BigInt),f=new Ey.Address((0,mr.toType)(s,mr.TypeOutput.Buffer)),u=(0,mr.toType)(i,mr.TypeOutput.BigInt);return new Ka(o,a,f,u)}static fromValuesArray(t){if(t.length!==4)throw Error(`Invalid withdrawalArray length expected=4 actual=${t.length}`);const[r,n,s,i]=t;return Ka.fromWithdrawalData({index:r,validatorIndex:n,address:s,amount:i})}static toBufferArray(t){const{index:r,validatorIndex:n,address:s,amount:i}=t,o=(0,mr.toType)(r,mr.TypeOutput.BigInt)===BigInt(0)?se.Buffer.alloc(0):(0,mr.toType)(r,mr.TypeOutput.Buffer),a=(0,mr.toType)(n,mr.TypeOutput.BigInt)===BigInt(0)?se.Buffer.alloc(0):(0,mr.toType)(n,mr.TypeOutput.Buffer);let f;s instanceof Ey.Address?f=s.buf:f=(0,mr.toType)(s,mr.TypeOutput.Buffer);const u=(0,mr.toType)(i,mr.TypeOutput.BigInt)===BigInt(0)?se.Buffer.alloc(0):(0,mr.toType)(i,mr.TypeOutput.Buffer);return[o,a,f,u]}raw(){return Ka.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,Jh.bigIntToHex)(this.index),validatorIndex:(0,Jh.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,Jh.bigIntToHex)(this.amount)}}}Qf.Withdrawal=Ka;var rn={};Object.defineProperty(rn,"__esModule",{value:!0}),rn.hashPersonalMessage=rn.isValidSignature=rn.fromRpcSig=rn.toCompactSig=rn.toRpcSig=rn.ecrecover=rn.ecsign=void 0;const M6=Zn,xy=Hf,gn=Ks,Qh=Ff,N6=Fn;function P6(e,t,r){const n=xy.secp256k1.sign(e,t),s=n.toCompactRawBytes(),i=se.Buffer.from(s.slice(0,32)),o=se.Buffer.from(s.slice(32,64)),a=r===void 0?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*BigInt(2);return{r:i,s:o,v:a}}rn.ecsign=P6;function eu(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===void 0?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function tu(e){return e===BigInt(0)||e===BigInt(1)}const U6=function(e,t,r,n,s){const i=se.Buffer.concat([(0,gn.setLengthLeft)(r,32),(0,gn.setLengthLeft)(n,32)],64),o=eu(t,s);if(!tu(o))throw new Error("Invalid signature v value");const f=xy.secp256k1.Signature.fromCompact(i).addRecoveryBit(Number(o)).recoverPublicKey(e);return se.Buffer.from(f.toRawBytes(!1).slice(1))};rn.ecrecover=U6;const F6=function(e,t,r,n){const s=eu(e,n);if(!tu(s))throw new Error("Invalid signature v value");return(0,gn.bufferToHex)(se.Buffer.concat([(0,gn.setLengthLeft)(t,32),(0,gn.setLengthLeft)(r,32),(0,gn.toBuffer)(e)]))};rn.toRpcSig=F6;const H6=function(e,t,r,n){const s=eu(e,n);if(!tu(s))throw new Error("Invalid signature v value");let i=r;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(i=se.Buffer.from(r),i[0]|=128),(0,gn.bufferToHex)(se.Buffer.concat([(0,gn.setLengthLeft)(t,32),(0,gn.setLengthLeft)(i,32)]))};rn.toCompactSig=H6;const j6=function(e){const t=(0,gn.toBuffer)(e);let r,n,s;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),s=(0,gn.bufferToBigInt)(t.slice(64));else if(t.length===64)r=t.slice(0,32),n=t.slice(32,64),s=BigInt((0,gn.bufferToInt)(t.slice(32,33))>>7),n[0]&=127;else throw new Error("Invalid signature length");return s<27&&(s=s+BigInt(27)),{v:s,r,s:n}};rn.fromRpcSig=j6;const D6=function(e,t,r,n=!0,s){if(t.length!==32||r.length!==32||!tu(eu(e,s)))return!1;const i=(0,gn.bufferToBigInt)(t),o=(0,gn.bufferToBigInt)(r);return!(i===BigInt(0)||i>=Qh.SECP256K1_ORDER||o===BigInt(0)||o>=Qh.SECP256K1_ORDER||n&&o>=Qh.SECP256K1_ORDER_DIV_2)};rn.isValidSignature=D6;const z6=function(e){(0,N6.assertIsBuffer)(e);const t=se.Buffer.from(`Ethereum Signed Message:
${e.length}`,"utf-8");return se.Buffer.from((0,M6.keccak256)(se.Buffer.concat([t,e])))};rn.hashPersonalMessage=z6;var Sy={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compactBytesToNibbles=e.bytesToNibbles=e.nibblesToCompactBytes=e.nibblesToBytes=e.hasTerminator=void 0;const t=o=>o.length>0&&o[o.length-1]===16;e.hasTerminator=t;const r=(o,a)=>{for(let f=0,u=0;u<o.length;f+=1,u+=2)a[f]=o[u]<<4|o[u+1]};e.nibblesToBytes=r;const n=o=>{let a=0;(0,e.hasTerminator)(o)&&(a=1,o=o.subarray(0,o.length-1));const f=new Uint8Array(o.length/2+1);return f[0]=a<<5,(o.length&1)===1&&(f[0]|=16,f[0]|=o[0],o=o.subarray(1)),(0,e.nibblesToBytes)(o,f.subarray(1)),f};e.nibblesToCompactBytes=n;const s=o=>{const a=o.length*2+1,f=new Uint8Array(a);for(let u=0;u<o.length;u++){const l=o[u];f[u*2]=l/16,f[u*2+1]=l%16}return f[a-1]=16,f};e.bytesToNibbles=s;const i=o=>{if(o.length===0)return o;let a=(0,e.bytesToNibbles)(o);a[0]<2&&(a=a.subarray(0,a.length-1));const f=2-(a[0]&1);return a.subarray(f)};e.compactBytesToNibbles=i})(Sy);var ru={};Object.defineProperty(ru,"__esModule",{value:!0}),ru.AsyncEventEmitter=void 0;const q6=On.exports;async function V6(e,t,r){let n;for await(const s of t)try{s.length<2?s.call(e,r):await new Promise((i,o)=>{s.call(e,r,a=>{a?o(a):i()})})}catch(i){n=i}if(n)throw n}class K6 extends q6.EventEmitter{emit(t,...r){let[n,s]=r;const i=this;let o=i._events[t]??[];return s===void 0&&typeof n=="function"&&(s=n,n=void 0),(t==="newListener"||t==="removeListener")&&(n={event:n,fn:s},s=void 0),o=Array.isArray(o)?o:[o],V6(i,o.slice(),n).then(s).catch(s),i.listenerCount(t)>0}once(t,r){const n=this;let s;if(typeof r!="function")throw new TypeError("listener must be a function");return r.length>=2?s=function(i,o){n.removeListener(t,s),r(i,o)}:s=function(i){n.removeListener(t,s),r(i,s)},n.on(t,s),n}first(t,r){let n=this._events[t]??[];if(typeof r!="function")throw new TypeError("listener must be a function");return Array.isArray(n)||(this._events[t]=n=[n]),n.unshift(r),this}before(t,r,n){return this.beforeOrAfter(t,r,n)}after(t,r,n){return this.beforeOrAfter(t,r,n,"after")}beforeOrAfter(t,r,n,s){let i=this._events[t]??[],o,a;const f=s==="after"?1:0;if(typeof n!="function")throw new TypeError("listener must be a function");if(typeof r!="function")throw new TypeError("target must be a function");for(Array.isArray(i)||(this._events[t]=i=[i]),a=i.length,o=i.length;o--;)if(i[o]===r){a=o+f;break}return i.splice(a,0,n),this}on(t,r){return super.on(t,r)}addListener(t,r){return super.addListener(t,r)}prependListener(t,r){return super.prependListener(t,r)}prependOnceListener(t,r){return super.prependOnceListener(t,r)}removeAllListeners(t){return super.removeAllListeners(t)}removeListener(t,r){return super.removeListener(t,r)}eventNames(){return super.eventNames()}listeners(t){return super.listeners(t)}listenerCount(t){return super.listenerCount(t)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(t){return super.setMaxListeners(t)}}ru.AsyncEventEmitter=K6;var nu={};Object.defineProperty(nu,"__esModule",{value:!0}),nu.Lock=void 0;class W6{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise(t=>this.promiseResolverQueue.push(t))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(this.permits===1&&this.promiseResolverQueue.length>0){this.permits-=1;const t=this.promiseResolverQueue.shift();t&&t(!0)}}}nu.Lock=W6;var qo={},Ws={},dr=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},hi=[],Hn=[],Z6=typeof Uint8Array<"u"?Uint8Array:Array,ed=!1;function Ay(){ed=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)hi[t]=e[t],Hn[e.charCodeAt(t)]=t;Hn["-".charCodeAt(0)]=62,Hn["_".charCodeAt(0)]=63}function G6(e){ed||Ay();var t,r,n,s,i,o,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i=e[a-2]==="="?2:e[a-1]==="="?1:0,o=new Z6(a*3/4-i),n=i>0?a-4:a;var f=0;for(t=0,r=0;t<n;t+=4,r+=3)s=Hn[e.charCodeAt(t)]<<18|Hn[e.charCodeAt(t+1)]<<12|Hn[e.charCodeAt(t+2)]<<6|Hn[e.charCodeAt(t+3)],o[f++]=s>>16&255,o[f++]=s>>8&255,o[f++]=s&255;return i===2?(s=Hn[e.charCodeAt(t)]<<2|Hn[e.charCodeAt(t+1)]>>4,o[f++]=s&255):i===1&&(s=Hn[e.charCodeAt(t)]<<10|Hn[e.charCodeAt(t+1)]<<4|Hn[e.charCodeAt(t+2)]>>2,o[f++]=s>>8&255,o[f++]=s&255),o}function Y6(e){return hi[e>>18&63]+hi[e>>12&63]+hi[e>>6&63]+hi[e&63]}function X6(e,t,r){for(var n,s=[],i=t;i<r;i+=3)n=(e[i]<<16)+(e[i+1]<<8)+e[i+2],s.push(Y6(n));return s.join("")}function By(e){ed||Ay();for(var t,r=e.length,n=r%3,s="",i=[],o=16383,a=0,f=r-n;a<f;a+=o)i.push(X6(e,a,a+o>f?f:a+o));return n===1?(t=e[r-1],s+=hi[t>>2],s+=hi[t<<4&63],s+="=="):n===2&&(t=(e[r-2]<<8)+e[r-1],s+=hi[t>>10],s+=hi[t>>4&63],s+=hi[t<<2&63],s+="="),i.push(s),i.join("")}function iu(e,t,r,n,s){var i,o,a=s*8-n-1,f=(1<<a)-1,u=f>>1,l=-7,p=r?s-1:0,_=r?-1:1,b=e[t+p];for(p+=_,i=b&(1<<-l)-1,b>>=-l,l+=a;l>0;i=i*256+e[t+p],p+=_,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+e[t+p],p+=_,l-=8);if(i===0)i=1-u;else{if(i===f)return o?NaN:(b?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-u}return(b?-1:1)*o*Math.pow(2,i-n)}function Iy(e,t,r,n,s,i){var o,a,f,u=i*8-s-1,l=(1<<u)-1,p=l>>1,_=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:i-1,T=n?1:-1,P=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+p>=1?t+=_/f:t+=_*Math.pow(2,1-p),t*f>=2&&(o++,f/=2),o+p>=l?(a=0,o=l):o+p>=1?(a=(t*f-1)*Math.pow(2,s),o=o+p):(a=t*Math.pow(2,p-1)*Math.pow(2,s),o=0));s>=8;e[r+b]=a&255,b+=T,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;e[r+b]=o&255,b+=T,o/=256,u-=8);e[r+b-T]|=P*128}var J6={}.toString,Ty=Array.isArray||function(e){return J6.call(e)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var Q6=50;ue.TYPED_ARRAY_SUPPORT=dr.TYPED_ARRAY_SUPPORT!==void 0?dr.TYPED_ARRAY_SUPPORT:!0,su();function su(){return ue.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Mi(e,t){if(su()<t)throw new RangeError("Invalid typed array length");return ue.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=ue.prototype):(e===null&&(e=new ue(t)),e.length=t),e}function ue(e,t,r){if(!ue.TYPED_ARRAY_SUPPORT&&!(this instanceof ue))return new ue(e,t,r);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return td(this,e)}return Ry(this,e,t,r)}ue.poolSize=8192,ue._augment=function(e){return e.__proto__=ue.prototype,e};function Ry(e,t,r,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?rI(e,t,r,n):typeof t=="string"?tI(e,t,r):nI(e,t)}ue.from=function(e,t,r){return Ry(null,e,t,r)},ue.TYPED_ARRAY_SUPPORT&&(ue.prototype.__proto__=Uint8Array.prototype,ue.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&ue[Symbol.species]);function ky(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function eI(e,t,r,n){return ky(t),t<=0?Mi(e,t):r!==void 0?typeof n=="string"?Mi(e,t).fill(r,n):Mi(e,t).fill(r):Mi(e,t)}ue.alloc=function(e,t,r){return eI(null,e,t,r)};function td(e,t){if(ky(t),e=Mi(e,t<0?0:nd(t)|0),!ue.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}ue.allocUnsafe=function(e){return td(null,e)},ue.allocUnsafeSlow=function(e){return td(null,e)};function tI(e,t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!ue.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=Ly(t,r)|0;e=Mi(e,n);var s=e.write(t,r);return s!==n&&(e=e.slice(0,s)),e}function rd(e,t){var r=t.length<0?0:nd(t.length)|0;e=Mi(e,r);for(var n=0;n<r;n+=1)e[n]=t[n]&255;return e}function rI(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return r===void 0&&n===void 0?t=new Uint8Array(t):n===void 0?t=new Uint8Array(t,r):t=new Uint8Array(t,r,n),ue.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=ue.prototype):e=rd(e,t),e}function nI(e,t){if(di(t)){var r=nd(t.length)|0;return e=Mi(e,r),e.length===0||t.copy(e,0,0,r),e}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||EI(t.length)?Mi(e,0):rd(e,t);if(t.type==="Buffer"&&Ty(t.data))return rd(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function nd(e){if(e>=su())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+su().toString(16)+" bytes");return e|0}ue.isBuffer=xI;function di(e){return!!(e!=null&&e._isBuffer)}ue.compare=function(t,r){if(!di(t)||!di(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,s=r.length,i=0,o=Math.min(n,s);i<o;++i)if(t[i]!==r[i]){n=t[i],s=r[i];break}return n<s?-1:s<n?1:0},ue.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ue.concat=function(t,r){if(!Ty(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ue.alloc(0);var n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var s=ue.allocUnsafe(r),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!di(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(s,i),i+=o.length}return s};function Ly(e,t){if(di(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return cu(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Hy(e).length;default:if(n)return cu(e).length;t=(""+t).toLowerCase(),n=!0}}ue.byteLength=Ly;function iI(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return pI(this,t,r);case"utf8":case"utf-8":return My(this,t,r);case"ascii":return hI(this,t,r);case"latin1":case"binary":return dI(this,t,r);case"base64":return uI(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gI(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}ue.prototype._isBuffer=!0;function Zs(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}ue.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)Zs(this,r,r+1);return this},ue.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)Zs(this,r,r+3),Zs(this,r+1,r+2);return this},ue.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)Zs(this,r,r+7),Zs(this,r+1,r+6),Zs(this,r+2,r+5),Zs(this,r+3,r+4);return this},ue.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?My(this,0,t):iI.apply(this,arguments)},ue.prototype.equals=function(t){if(!di(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:ue.compare(this,t)===0},ue.prototype.inspect=function(){var t="",r=Q6;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},ue.prototype.compare=function(t,r,n,s,i){if(!di(t))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),r<0||n>t.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&r>=n)return 0;if(s>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,i>>>=0,this===t)return 0;for(var o=i-s,a=n-r,f=Math.min(o,a),u=this.slice(s,i),l=t.slice(r,n),p=0;p<f;++p)if(u[p]!==l[p]){o=u[p],a=l[p];break}return o<a?-1:a<o?1:0};function Cy(e,t,r,n,s){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof t=="string"&&(t=ue.from(t,n)),di(t))return t.length===0?-1:Oy(e,t,r,n,s);if(typeof t=="number")return t=t&255,ue.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Oy(e,[t],r,n,s);throw new TypeError("val must be string, number or Buffer")}function Oy(e,t,r,n,s){var i=1,o=e.length,a=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;i=2,o/=2,a/=2,r/=2}function f(b,T){return i===1?b[T]:b.readUInt16BE(T*i)}var u;if(s){var l=-1;for(u=r;u<o;u++)if(f(e,u)===f(t,l===-1?0:u-l)){if(l===-1&&(l=u),u-l+1===a)return l*i}else l!==-1&&(u-=u-l),l=-1}else for(r+a>o&&(r=o-a),u=r;u>=0;u--){for(var p=!0,_=0;_<a;_++)if(f(e,u+_)!==f(t,_)){p=!1;break}if(p)return u}return-1}ue.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1},ue.prototype.indexOf=function(t,r,n){return Cy(this,t,r,n,!0)},ue.prototype.lastIndexOf=function(t,r,n){return Cy(this,t,r,n,!1)};function sI(e,t,r,n){r=Number(r)||0;var s=e.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(o*2,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function oI(e,t,r,n){return fu(cu(t,e.length-r),e,r,n)}function $y(e,t,r,n){return fu(vI(t),e,r,n)}function aI(e,t,r,n){return $y(e,t,r,n)}function cI(e,t,r,n){return fu(Hy(t),e,r,n)}function fI(e,t,r,n){return fu(_I(t,e.length-r),e,r,n)}ue.prototype.write=function(t,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(n)?(n=n|0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i=this.length-r;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var o=!1;;)switch(s){case"hex":return sI(this,t,r,n);case"utf8":case"utf-8":return oI(this,t,r,n);case"ascii":return $y(this,t,r,n);case"latin1":case"binary":return aI(this,t,r,n);case"base64":return cI(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fI(this,t,r,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}},ue.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function uI(e,t,r){return t===0&&r===e.length?By(e):By(e.slice(t,r))}function My(e,t,r){r=Math.min(e.length,r);for(var n=[],s=t;s<r;){var i=e[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=r){var f,u,l,p;switch(a){case 1:i<128&&(o=i);break;case 2:f=e[s+1],(f&192)===128&&(p=(i&31)<<6|f&63,p>127&&(o=p));break;case 3:f=e[s+1],u=e[s+2],(f&192)===128&&(u&192)===128&&(p=(i&15)<<12|(f&63)<<6|u&63,p>2047&&(p<55296||p>57343)&&(o=p));break;case 4:f=e[s+1],u=e[s+2],l=e[s+3],(f&192)===128&&(u&192)===128&&(l&192)===128&&(p=(i&15)<<18|(f&63)<<12|(u&63)<<6|l&63,p>65535&&p<1114112&&(o=p))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=a}return lI(n)}var Ny=4096;function lI(e){var t=e.length;if(t<=Ny)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Ny));return r}function hI(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(e[s]&127);return n}function dI(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(e[s]);return n}function pI(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var s="",i=t;i<r;++i)s+=bI(e[i]);return s}function gI(e,t,r){for(var n=e.slice(t,r),s="",i=0;i<n.length;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}ue.prototype.slice=function(t,r){var n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var s;if(ue.TYPED_ARRAY_SUPPORT)s=this.subarray(t,r),s.__proto__=ue.prototype;else{var i=r-t;s=new ue(i,void 0);for(var o=0;o<i;++o)s[o]=this[o+t]}return s};function Ur(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}ue.prototype.readUIntLE=function(t,r,n){t=t|0,r=r|0,n||Ur(t,r,this.length);for(var s=this[t],i=1,o=0;++o<r&&(i*=256);)s+=this[t+o]*i;return s},ue.prototype.readUIntBE=function(t,r,n){t=t|0,r=r|0,n||Ur(t,r,this.length);for(var s=this[t+--r],i=1;r>0&&(i*=256);)s+=this[t+--r]*i;return s},ue.prototype.readUInt8=function(t,r){return r||Ur(t,1,this.length),this[t]},ue.prototype.readUInt16LE=function(t,r){return r||Ur(t,2,this.length),this[t]|this[t+1]<<8},ue.prototype.readUInt16BE=function(t,r){return r||Ur(t,2,this.length),this[t]<<8|this[t+1]},ue.prototype.readUInt32LE=function(t,r){return r||Ur(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},ue.prototype.readUInt32BE=function(t,r){return r||Ur(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ue.prototype.readIntLE=function(t,r,n){t=t|0,r=r|0,n||Ur(t,r,this.length);for(var s=this[t],i=1,o=0;++o<r&&(i*=256);)s+=this[t+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s},ue.prototype.readIntBE=function(t,r,n){t=t|0,r=r|0,n||Ur(t,r,this.length);for(var s=r,i=1,o=this[t+--s];s>0&&(i*=256);)o+=this[t+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o},ue.prototype.readInt8=function(t,r){return r||Ur(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},ue.prototype.readInt16LE=function(t,r){r||Ur(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n},ue.prototype.readInt16BE=function(t,r){r||Ur(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n},ue.prototype.readInt32LE=function(t,r){return r||Ur(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ue.prototype.readInt32BE=function(t,r){return r||Ur(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ue.prototype.readFloatLE=function(t,r){return r||Ur(t,4,this.length),iu(this,t,!0,23,4)},ue.prototype.readFloatBE=function(t,r){return r||Ur(t,4,this.length),iu(this,t,!1,23,4)},ue.prototype.readDoubleLE=function(t,r){return r||Ur(t,8,this.length),iu(this,t,!0,52,8)},ue.prototype.readDoubleBE=function(t,r){return r||Ur(t,8,this.length),iu(this,t,!1,52,8)};function yn(e,t,r,n,s,i){if(!di(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}ue.prototype.writeUIntLE=function(t,r,n,s){if(t=+t,r=r|0,n=n|0,!s){var i=Math.pow(2,8*n)-1;yn(this,t,r,n,i,0)}var o=1,a=0;for(this[r]=t&255;++a<n&&(o*=256);)this[r+a]=t/o&255;return r+n},ue.prototype.writeUIntBE=function(t,r,n,s){if(t=+t,r=r|0,n=n|0,!s){var i=Math.pow(2,8*n)-1;yn(this,t,r,n,i,0)}var o=n-1,a=1;for(this[r+o]=t&255;--o>=0&&(a*=256);)this[r+o]=t/a&255;return r+n},ue.prototype.writeUInt8=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,1,255,0),ue.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t&255,r+1};function ou(e,t,r,n){t<0&&(t=65535+t+1);for(var s=0,i=Math.min(e.length-r,2);s<i;++s)e[r+s]=(t&255<<8*(n?s:1-s))>>>(n?s:1-s)*8}ue.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,2,65535,0),ue.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):ou(this,t,r,!0),r+2},ue.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,2,65535,0),ue.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):ou(this,t,r,!1),r+2};function au(e,t,r,n){t<0&&(t=4294967295+t+1);for(var s=0,i=Math.min(e.length-r,4);s<i;++s)e[r+s]=t>>>(n?s:3-s)*8&255}ue.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,4,4294967295,0),ue.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255):au(this,t,r,!0),r+4},ue.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,4,4294967295,0),ue.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):au(this,t,r,!1),r+4},ue.prototype.writeIntLE=function(t,r,n,s){if(t=+t,r=r|0,!s){var i=Math.pow(2,8*n-1);yn(this,t,r,n,i-1,-i)}var o=0,a=1,f=0;for(this[r]=t&255;++o<n&&(a*=256);)t<0&&f===0&&this[r+o-1]!==0&&(f=1),this[r+o]=(t/a>>0)-f&255;return r+n},ue.prototype.writeIntBE=function(t,r,n,s){if(t=+t,r=r|0,!s){var i=Math.pow(2,8*n-1);yn(this,t,r,n,i-1,-i)}var o=n-1,a=1,f=0;for(this[r+o]=t&255;--o>=0&&(a*=256);)t<0&&f===0&&this[r+o+1]!==0&&(f=1),this[r+o]=(t/a>>0)-f&255;return r+n},ue.prototype.writeInt8=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,1,127,-128),ue.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t&255,r+1},ue.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,2,32767,-32768),ue.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):ou(this,t,r,!0),r+2},ue.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,2,32767,-32768),ue.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):ou(this,t,r,!1),r+2},ue.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,4,2147483647,-2147483648),ue.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):au(this,t,r,!0),r+4},ue.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r|0,n||yn(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ue.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):au(this,t,r,!1),r+4};function Py(e,t,r,n,s,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Uy(e,t,r,n,s){return s||Py(e,t,r,4),Iy(e,t,r,n,23,4),r+4}ue.prototype.writeFloatLE=function(t,r,n){return Uy(this,t,r,!0,n)},ue.prototype.writeFloatBE=function(t,r,n){return Uy(this,t,r,!1,n)};function Fy(e,t,r,n,s){return s||Py(e,t,r,8),Iy(e,t,r,n,52,8),r+8}ue.prototype.writeDoubleLE=function(t,r,n){return Fy(this,t,r,!0,n)},ue.prototype.writeDoubleBE=function(t,r,n){return Fy(this,t,r,!1,n)},ue.prototype.copy=function(t,r,n,s){if(n||(n=0),!s&&s!==0&&(s=this.length),r>=t.length&&(r=t.length),r||(r=0),s>0&&s<n&&(s=n),s===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-r<s-n&&(s=t.length-r+n);var i=s-n,o;if(this===t&&n<r&&r<s)for(o=i-1;o>=0;--o)t[o+r]=this[o+n];else if(i<1e3||!ue.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+r]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),r);return i},ue.prototype.fill=function(t,r,n,s){if(typeof t=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),t.length===1){var i=t.charCodeAt(0);i<256&&(t=i)}if(s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!ue.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);var o;if(typeof t=="number")for(o=r;o<n;++o)this[o]=t;else{var a=di(t)?t:cu(new ue(t,s).toString()),f=a.length;for(o=0;o<n-r;++o)this[o+r]=a[o%f]}return this};var yI=/[^+\/0-9A-Za-z-_]/g;function wI(e){if(e=mI(e).replace(yI,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function mI(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function bI(e){return e<16?"0"+e.toString(16):e.toString(16)}function cu(e,t){t=t||1/0;for(var r,n=e.length,s=null,i=[],o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function vI(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function _I(e,t){for(var r,n,s,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,s=r%256,i.push(s),i.push(n);return i}function Hy(e){return G6(wI(e))}function fu(e,t,r,n){for(var s=0;s<n&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function EI(e){return e!==e}function xI(e){return e!=null&&(!!e._isBuffer||jy(e)||SI(e))}function jy(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function SI(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&jy(e.slice(0,0))}function Dy(){throw new Error("setTimeout has not been defined")}function zy(){throw new Error("clearTimeout has not been defined")}var fs=Dy,us=zy;typeof dr.setTimeout=="function"&&(fs=setTimeout),typeof dr.clearTimeout=="function"&&(us=clearTimeout);function qy(e){if(fs===setTimeout)return setTimeout(e,0);if((fs===Dy||!fs)&&setTimeout)return fs=setTimeout,setTimeout(e,0);try{return fs(e,0)}catch{try{return fs.call(null,e,0)}catch{return fs.call(this,e,0)}}}function AI(e){if(us===clearTimeout)return clearTimeout(e);if((us===zy||!us)&&clearTimeout)return us=clearTimeout,clearTimeout(e);try{return us(e)}catch{try{return us.call(null,e)}catch{return us.call(this,e)}}}var Ni=[],Vo=!1,Gs,uu=-1;function BI(){!Vo||!Gs||(Vo=!1,Gs.length?Ni=Gs.concat(Ni):uu=-1,Ni.length&&Vy())}function Vy(){if(!Vo){var e=qy(BI);Vo=!0;for(var t=Ni.length;t;){for(Gs=Ni,Ni=[];++uu<t;)Gs&&Gs[uu].run();uu=-1,t=Ni.length}Gs=null,Vo=!1,AI(e)}}function In(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Ni.push(new Ky(e,t)),Ni.length===1&&!Vo&&qy(Vy)}function Ky(e,t){this.fun=e,this.array=t}Ky.prototype.run=function(){this.fun.apply(null,this.array)};var II="browser",TI="browser",RI=!0,kI={},LI=[],CI="",OI={},$I={},MI={};function Ys(){}var NI=Ys,PI=Ys,UI=Ys,FI=Ys,HI=Ys,jI=Ys,DI=Ys;function zI(e){throw new Error("process.binding is not supported")}function qI(){return"/"}function VI(e){throw new Error("process.chdir is not supported")}function KI(){return 0}var Ko=dr.performance||{},WI=Ko.now||Ko.mozNow||Ko.msNow||Ko.oNow||Ko.webkitNow||function(){return new Date().getTime()};function ZI(e){var t=WI.call(Ko)*.001,r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r=r-e[0],n=n-e[1],n<0&&(r--,n+=1e9)),[r,n]}var GI=new Date;function YI(){var e=new Date,t=e-GI;return t/1e3}var wn={nextTick:In,title:II,browser:RI,env:kI,argv:LI,version:CI,versions:OI,on:NI,addListener:PI,once:UI,off:FI,removeListener:HI,removeAllListeners:jI,emit:DI,binding:zI,cwd:qI,chdir:VI,umask:KI,hrtime:ZI,platform:TI,release:$I,config:MI,uptime:YI},id=Za(dr.fetch)&&Za(dr.ReadableStream),Wa;function XI(){if(typeof Wa<"u")return Wa;try{new dr.Blob([new ArrayBuffer(1)]),Wa=!0}catch{Wa=!1}return Wa}var Xs;function sd(e){Xs||(Xs=new dr.XMLHttpRequest,Xs.open("GET",dr.location.host?"/":"https://example.com"));try{return Xs.responseType=e,Xs.responseType===e}catch{return!1}}var od=typeof dr.ArrayBuffer<"u",JI=od&&Za(dr.ArrayBuffer.prototype.slice),QI=od&&sd("arraybuffer"),e8=!id&&JI&&sd("ms-stream"),t8=!id&&od&&sd("moz-chunked-arraybuffer"),Wy=Za(Xs.overrideMimeType),r8=Za(dr.VBArray);function Za(e){return typeof e=="function"}Xs=null;var ad;typeof Object.create=="function"?ad=function(t,r){t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:ad=function(t,r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t};var Fr=ad,Zy=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),n={},s=0;s<r.length;s++)n[r[s]]=Object.getOwnPropertyDescriptor(t,r[s]);return n},n8=/%[sdj%]/g;function lu(e){if(!ls(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(pi(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,s=n.length,i=String(e).replace(n8,function(a){if(a==="%%")return"%";if(r>=s)return a;switch(a){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}default:return a}}),o=n[r];r<s;o=n[++r])Pi(o)||!Ui(o)?i+=" "+o:i+=" "+pi(o);return i}function hu(e,t){if(gi(dr.process))return function(){return hu(e,t).apply(this,arguments)};if(wn.noDeprecation===!0)return e;var r=!1;function n(){if(!r){if(wn.throwDeprecation)throw new Error(t);wn.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return n}var du={},cd;function fd(e){if(gi(cd)&&(cd=wn.env.NODE_DEBUG||""),e=e.toUpperCase(),!du[e])if(new RegExp("\\b"+e+"\\b","i").test(cd)){var t=0;du[e]=function(){var r=lu.apply(null,arguments);console.error("%s %d: %s",e,t,r)}}else du[e]=function(){};return du[e]}function pi(e,t){var r={seen:[],stylize:s8};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),gu(t)?r.showHidden=t:t&&wd(r,t),gi(r.showHidden)&&(r.showHidden=!1),gi(r.depth)&&(r.depth=2),gi(r.colors)&&(r.colors=!1),gi(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i8),pu(r,e,r.depth)}pi.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},pi.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function i8(e,t){var r=pi.styles[t];return r?"\x1B["+pi.colors[r][0]+"m"+e+"\x1B["+pi.colors[r][1]+"m":e}function s8(e,t){return e}function o8(e){var t={};return e.forEach(function(r,n){t[r]=!0}),t}function pu(e,t,r){if(e.customInspect&&t&&Xa(t.inspect)&&t.inspect!==pi&&!(t.constructor&&t.constructor.prototype===t)){var n=t.inspect(r,e);return ls(n)||(n=pu(e,n,r)),n}var s=a8(e,t);if(s)return s;var i=Object.keys(t),o=o8(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),Ya(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return ud(t);if(i.length===0){if(Xa(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(Ga(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(yu(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Ya(t))return ud(t)}var f="",u=!1,l=["{","}"];if(hd(t)&&(u=!0,l=["[","]"]),Xa(t)){var p=t.name?": "+t.name:"";f=" [Function"+p+"]"}if(Ga(t)&&(f=" "+RegExp.prototype.toString.call(t)),yu(t)&&(f=" "+Date.prototype.toUTCString.call(t)),Ya(t)&&(f=" "+ud(t)),i.length===0&&(!u||t.length==0))return l[0]+f+l[1];if(r<0)return Ga(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var _;return u?_=c8(e,t,r,o,i):_=i.map(function(b){return ld(e,t,r,o,b,u)}),e.seen.pop(),f8(_,f,l)}function a8(e,t){if(gi(t))return e.stylize("undefined","undefined");if(ls(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(pd(t))return e.stylize(""+t,"number");if(gu(t))return e.stylize(""+t,"boolean");if(Pi(t))return e.stylize("null","null")}function ud(e){return"["+Error.prototype.toString.call(e)+"]"}function c8(e,t,r,n,s){for(var i=[],o=0,a=t.length;o<a;++o)Qy(t,String(o))?i.push(ld(e,t,r,n,String(o),!0)):i.push("");return s.forEach(function(f){f.match(/^\d+$/)||i.push(ld(e,t,r,n,f,!0))}),i}function ld(e,t,r,n,s,i){var o,a,f;if(f=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},f.get?f.set?a=e.stylize("[Getter/Setter]","special"):a=e.stylize("[Getter]","special"):f.set&&(a=e.stylize("[Setter]","special")),Qy(n,s)||(o="["+s+"]"),a||(e.seen.indexOf(f.value)<0?(Pi(r)?a=pu(e,f.value,null):a=pu(e,f.value,r-1),a.indexOf(`
`)>-1&&(i?a=a.split(`
`).map(function(u){return"  "+u}).join(`
`).substr(2):a=`
`+a.split(`
`).map(function(u){return"   "+u}).join(`
`))):a=e.stylize("[Circular]","special")),gi(o)){if(i&&s.match(/^\d+$/))return a;o=JSON.stringify(""+s),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function f8(e,t,r){var n=e.reduce(function(s,i){return i.indexOf(`
`)>=0,s+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function hd(e){return Array.isArray(e)}function gu(e){return typeof e=="boolean"}function Pi(e){return e===null}function dd(e){return e==null}function pd(e){return typeof e=="number"}function ls(e){return typeof e=="string"}function Gy(e){return typeof e=="symbol"}function gi(e){return e===void 0}function Ga(e){return Ui(e)&&gd(e)==="[object RegExp]"}function Ui(e){return typeof e=="object"&&e!==null}function yu(e){return Ui(e)&&gd(e)==="[object Date]"}function Ya(e){return Ui(e)&&(gd(e)==="[object Error]"||e instanceof Error)}function Xa(e){return typeof e=="function"}function Yy(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}function Xy(e){return ue.isBuffer(e)}function gd(e){return Object.prototype.toString.call(e)}function yd(e){return e<10?"0"+e.toString(10):e.toString(10)}var u8=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function l8(){var e=new Date,t=[yd(e.getHours()),yd(e.getMinutes()),yd(e.getSeconds())].join(":");return[e.getDate(),u8[e.getMonth()],t].join(" ")}function Jy(){console.log("%s - %s",l8(),lu.apply(null,arguments))}function wd(e,t){if(!t||!Ui(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Qy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Js=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function md(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(Js&&e[Js]){var t=e[Js];if(typeof t!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,Js,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var r,n,s=new Promise(function(a,f){r=a,n=f}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(a,f){a?n(a):r(f)});try{e.apply(this,i)}catch(a){n(a)}return s}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Js&&Object.defineProperty(t,Js,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,Zy(e))}md.custom=Js;function h8(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function ew(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var s=r.pop();if(typeof s!="function")throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return s.apply(i,arguments)};e.apply(this,r).then(function(a){wn.nextTick(o.bind(null,null,a))},function(a){wn.nextTick(h8.bind(null,a,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,Zy(e)),t}var d8={inherits:Fr,_extend:wd,log:Jy,isBuffer:Xy,isPrimitive:Yy,isFunction:Xa,isError:Ya,isDate:yu,isObject:Ui,isRegExp:Ga,isUndefined:gi,isSymbol:Gy,isString:ls,isNumber:pd,isNullOrUndefined:dd,isNull:Pi,isBoolean:gu,isArray:hd,inspect:pi,deprecate:hu,format:lu,debuglog:fd,promisify:md,callbackify:ew},p8=Object.freeze({__proto__:null,format:lu,deprecate:hu,debuglog:fd,inspect:pi,isArray:hd,isBoolean:gu,isNull:Pi,isNullOrUndefined:dd,isNumber:pd,isString:ls,isSymbol:Gy,isUndefined:gi,isRegExp:Ga,isObject:Ui,isDate:yu,isError:Ya,isFunction:Xa,isPrimitive:Yy,isBuffer:Xy,log:Jy,inherits:Fr,_extend:wd,promisify:md,callbackify:ew,default:d8});function Qs(){this.head=null,this.tail=null,this.length=0}Qs.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},Qs.prototype.unshift=function(e){var t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length},Qs.prototype.shift=function(){if(this.length!==0){var e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},Qs.prototype.clear=function(){this.head=this.tail=null,this.length=0},Qs.prototype.join=function(e){if(this.length===0)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},Qs.prototype.concat=function(e){if(this.length===0)return se.Buffer.alloc(0);if(this.length===1)return this.head.data;for(var t=se.Buffer.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var bd=Yc.exports.Buffer,tw=bd.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function g8(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function y8(e){var t=g8(e);if(typeof t!="string"&&(bd.isEncoding===tw||!tw(e)))throw new Error("Unknown encoding: "+e);return t||e}var rw=Ja;function Ja(e){this.encoding=y8(e);var t;switch(this.encoding){case"utf16le":this.text=E8,this.end=x8,t=4;break;case"utf8":this.fillLast=b8,t=4;break;case"base64":this.text=S8,this.end=A8,t=3;break;default:this.write=B8,this.end=I8;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=bd.allocUnsafe(t)}Ja.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},Ja.prototype.end=_8,Ja.prototype.text=v8,Ja.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function vd(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function w8(e,t,r){var n=t.length-1;if(n<r)return 0;var s=vd(t[n]);return s>=0?(s>0&&(e.lastNeed=s-1),s):--n<r||s===-2?0:(s=vd(t[n]),s>=0?(s>0&&(e.lastNeed=s-2),s):--n<r||s===-2?0:(s=vd(t[n]),s>=0?(s>0&&(s===2?s=0:e.lastNeed=s-3),s):0))}function m8(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function b8(e){var t=this.lastTotal-this.lastNeed,r=m8(this,e);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function v8(e,t){var r=w8(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function _8(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function E8(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function x8(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function S8(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function A8(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function B8(e){return e.toString(this.encoding)}function I8(e){return e&&e.length?this.write(e):""}sr.ReadableState=nw;var zt=fd("stream");Fr(sr,On.exports);function T8(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function R8(e,t){return e.listeners(t).length}function nw(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof jn&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new Qs,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new rw(e.encoding),this.encoding=e.encoding)}function sr(e){if(!(this instanceof sr))return new sr(e);this._readableState=new nw(e,this),this.readable=!0,e&&typeof e.read=="function"&&(this._read=e.read),On.exports.call(this)}sr.prototype.push=function(e,t){var r=this._readableState;return!r.objectMode&&typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=ue.from(e,t),t="")),iw(this,r,e,t,!1)},sr.prototype.unshift=function(e){var t=this._readableState;return iw(this,t,e,"",!0)},sr.prototype.isPaused=function(){return this._readableState.flowing===!1};function iw(e,t,r,n,s){var i=C8(t,r);if(i)e.emit("error",i);else if(r===null)t.reading=!1,O8(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!s){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&s){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var f;t.decoder&&!s&&!n&&(r=t.decoder.write(r),f=!t.objectMode&&r.length===0),s||(t.reading=!1),f||(t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,s?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&wu(e))),$8(e,t)}else s||(t.reading=!1);return k8(t)}function k8(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}sr.prototype.setEncoding=function(e){return this._readableState.decoder=new rw(e),this._readableState.encoding=e,this};var sw=8388608;function L8(e){return e>=sw?e=sw:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function ow(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=L8(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}sr.prototype.read=function(e){zt("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return zt("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Ed(this):wu(this),null;if(e=ow(e,t),e===0&&t.ended)return t.length===0&&Ed(this),null;var n=t.needReadable;zt("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,zt("length less than watermark",n)),t.ended||t.reading?(n=!1,zt("reading or ended",n)):n&&(zt("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=ow(r,t)));var s;return e>0?s=cw(e,t):s=null,s===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Ed(this)),s!==null&&this.emit("data",s),s};function C8(e,t){var r=null;return!ue.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function O8(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,wu(e)}}function wu(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(zt("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?In(aw,e):aw(e))}function aw(e){zt("emit readable"),e.emit("readable"),_d(e)}function $8(e,t){t.readingMore||(t.readingMore=!0,In(M8,e,t))}function M8(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(zt("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}sr.prototype._read=function(e){this.emit("error",new Error("not implemented"))},sr.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,zt("pipe count=%d opts=%j",n.pipesCount,t);var s=!t||t.end!==!1,i=s?a:l;n.endEmitted?In(i):r.once("end",i),e.on("unpipe",o);function o(j){zt("onunpipe"),j===r&&l()}function a(){zt("onend"),e.end()}var f=N8(r);e.on("drain",f);var u=!1;function l(){zt("cleanup"),e.removeListener("close",T),e.removeListener("finish",P),e.removeListener("drain",f),e.removeListener("error",b),e.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",l),r.removeListener("data",_),u=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f()}var p=!1;r.on("data",_);function _(j){zt("ondata"),p=!1;var F=e.write(j);F===!1&&!p&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&fw(n.pipes,e)!==-1)&&!u&&(zt("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function b(j){zt("onerror",j),$(),e.removeListener("error",b),R8(e,"error")===0&&e.emit("error",j)}T8(e,"error",b);function T(){e.removeListener("finish",P),$()}e.once("close",T);function P(){zt("onfinish"),e.removeListener("close",T),$()}e.once("finish",P);function $(){zt("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(zt("pipe resume"),r.resume()),e};function N8(e){return function(){var t=e._readableState;zt("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&e.listeners("data").length&&(t.flowing=!0,_d(e))}}sr.prototype.unpipe=function(e){var t=this._readableState;if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this);return this}var i=fw(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},sr.prototype.on=function(e,t){var r=On.exports.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&wu(this):In(P8,this))}return r},sr.prototype.addListener=sr.prototype.on;function P8(e){zt("readable nexttick read 0"),e.read(0)}sr.prototype.resume=function(){var e=this._readableState;return e.flowing||(zt("resume"),e.flowing=!0,U8(this,e)),this};function U8(e,t){t.resumeScheduled||(t.resumeScheduled=!0,In(F8,e,t))}function F8(e,t){t.reading||(zt("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),_d(e),t.flowing&&!t.reading&&e.read(0)}sr.prototype.pause=function(){return zt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(zt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function _d(e){var t=e._readableState;for(zt("flow",t.flowing);t.flowing&&e.read()!==null;);}sr.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(zt("wrapped end"),t.decoder&&!t.ended){var o=t.decoder.end();o&&o.length&&n.push(o)}n.push(null)}),e.on("data",function(o){if(zt("wrapped data"),t.decoder&&(o=t.decoder.write(o)),!(t.objectMode&&o==null)&&!(!t.objectMode&&(!o||!o.length))){var a=n.push(o);a||(r=!0,e.pause())}});for(var s in e)this[s]===void 0&&typeof e[s]=="function"&&(this[s]=function(o){return function(){return e[o].apply(e,arguments)}}(s));var i=["error","close","destroy","pause","resume"];return q8(i,function(o){e.on(o,n.emit.bind(n,o))}),n._read=function(o){zt("wrapped _read",o),r&&(r=!1,e.resume())},n},sr._fromList=cw;function cw(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=H8(e,t.buffer,t.decoder),r}function H8(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?j8(e,t):D8(e,t),n}function j8(e,t){var r=t.head,n=1,s=r.data;for(e-=s.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(o===i.length?s+=i:s+=i.slice(0,e),e-=o,e===0){o===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(o));break}++n}return t.length-=n,s}function D8(e,t){var r=ue.allocUnsafe(e),n=t.head,s=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,o),e-=o,e===0){o===i.length?(++s,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(o));break}++s}return t.length-=s,r}function Ed(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,In(z8,t,e))}function z8(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function q8(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function fw(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}Ir.WritableState=xd,Fr(Ir,On.exports.EventEmitter);function V8(){}function K8(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function xd(e,t){Object.defineProperty(this,"buffer",{get:hu(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof jn&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){Q8(t,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new gw(this)}xd.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};function Ir(e){if(!(this instanceof Ir)&&!(this instanceof jn))return new Ir(e);this._writableState=new xd(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev)),On.exports.EventEmitter.call(this)}Ir.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function W8(e,t){var r=new Error("write after end");e.emit("error",r),In(t,r)}function Z8(e,t,r,n){var s=!0,i=!1;return r===null?i=new TypeError("May not write null values to stream"):!se.Buffer.isBuffer(r)&&typeof r!="string"&&r!==void 0&&!t.objectMode&&(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),In(n,i),s=!1),s}Ir.prototype.write=function(e,t,r){var n=this._writableState,s=!1;return typeof t=="function"&&(r=t,t=null),se.Buffer.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=V8),n.ended?W8(this,r):Z8(this,n,e,r)&&(n.pendingcb++,s=Y8(this,n,e,t,r)),s},Ir.prototype.cork=function(){var e=this._writableState;e.corked++},Ir.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&lw(this,e))},Ir.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function G8(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=se.Buffer.from(t,r)),t}function Y8(e,t,r,n,s){r=G8(t,r,n),se.Buffer.isBuffer(r)&&(n="buffer");var i=t.objectMode?1:r.length;t.length+=i;var o=t.length<t.highWaterMark;if(o||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new K8(r,n,s),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Sd(e,t,!1,i,r,n,s);return o}function Sd(e,t,r,n,s,i,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(s,t.onwrite):e._write(s,i,t.onwrite),t.sync=!1}function X8(e,t,r,n,s){--t.pendingcb,r?In(s,n):s(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function J8(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Q8(e,t){var r=e._writableState,n=r.sync,s=r.writecb;if(J8(r),t)X8(e,r,n,t,s);else{var i=hw(r);!i&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&lw(e,r),n?In(uw,e,r,i,s):uw(e,r,i,s)}}function uw(e,t,r,n){r||eT(e,t),t.pendingcb--,n(),pw(e,t)}function eT(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function lw(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,s=new Array(n),i=t.corkedRequestsFree;i.entry=r;for(var o=0;r;)s[o]=r,r=r.next,o+=1;Sd(e,t,!0,t.length,s,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new gw(t)}else{for(;r;){var a=r.chunk,f=r.encoding,u=r.callback,l=t.objectMode?1:a.length;if(Sd(e,t,!1,l,a,f,u),r=r.next,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}Ir.prototype._write=function(e,t,r){r(new Error("not implemented"))},Ir.prototype._writev=null,Ir.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&tT(this,n,r)};function hw(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function dw(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function pw(e,t){var r=hw(t);return r&&(t.pendingcb===0?(dw(e,t),t.finished=!0,e.emit("finish")):dw(e,t)),r}function tT(e,t,r){t.ending=!0,pw(e,t),r&&(t.finished?In(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function gw(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var s=n.callback;e.pendingcb--,s(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}Fr(jn,sr);for(var yw=Object.keys(Ir.prototype),Ad=0;Ad<yw.length;Ad++){var Bd=yw[Ad];jn.prototype[Bd]||(jn.prototype[Bd]=Ir.prototype[Bd])}function jn(e){if(!(this instanceof jn))return new jn(e);sr.call(this,e),Ir.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",rT)}function rT(){this.allowHalfOpen||this._writableState.ended||In(nT,this)}function nT(e){e.end()}Fr(Dn,jn);function iT(e){this.afterTransform=function(t,r){return sT(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function sT(e,t,r){var n=e._transformState;n.transforming=!1;var s=n.writecb;if(!s)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,r!=null&&e.push(r),s(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function Dn(e){if(!(this instanceof Dn))return new Dn(e);jn.call(this,e),this._transformState=new iT(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r){ww(t,r)}):ww(t)})}Dn.prototype.push=function(e,t){return this._transformState.needTransform=!1,jn.prototype.push.call(this,e,t)},Dn.prototype._transform=function(e,t,r){throw new Error("Not implemented")},Dn.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},Dn.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};function ww(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}Fr(Qa,Dn);function Qa(e){if(!(this instanceof Qa))return new Qa(e);Dn.call(this,e)}Qa.prototype._transform=function(e,t,r){r(null,e)},Fr(Fi,On.exports),Fi.Readable=sr,Fi.Writable=Ir,Fi.Duplex=jn,Fi.Transform=Dn,Fi.PassThrough=Qa,Fi.Stream=Fi;function Fi(){On.exports.call(this)}Fi.prototype.pipe=function(e,t){var r=this;function n(l){e.writable&&e.write(l)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}e.on("drain",s),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",o),r.on("close",a));var i=!1;function o(){i||(i=!0,e.end())}function a(){i||(i=!0,typeof e.destroy=="function"&&e.destroy())}function f(l){if(u(),On.exports.listenerCount(this,"error")===0)throw l}r.on("error",f),e.on("error",f);function u(){r.removeListener("data",n),e.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",f),e.removeListener("error",f),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e};var eo={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};function mu(e,t,r){var n=this;sr.call(n),n._mode=r,n.headers={},n.rawHeaders=[],n.trailers={},n.rawTrailers=[],n.on("end",function(){wn.nextTick(function(){n.emit("close")})});var s;if(r==="fetch"){n._fetchResponse=t,n.url=t.url,n.statusCode=t.status,n.statusMessage=t.statusText;for(var i,o,a=t.headers[Symbol.iterator]();i=(o=a.next()).value,!o.done;)n.headers[i[0].toLowerCase()]=i[1],n.rawHeaders.push(i[0],i[1]);var f=t.body.getReader();s=function(){f.read().then(function(_){if(!n._destroyed){if(_.done){n.push(null);return}n.push(new ue(_.value)),s()}})},s()}else{n._xhr=e,n._pos=0,n.url=e.responseURL,n.statusCode=e.status,n.statusMessage=e.statusText;var u=e.getAllResponseHeaders().split(/\r?\n/);if(u.forEach(function(_){var b=_.match(/^([^:]+):\s*(.*)/);if(b){var T=b[1].toLowerCase();T==="set-cookie"?(n.headers[T]===void 0&&(n.headers[T]=[]),n.headers[T].push(b[2])):n.headers[T]!==void 0?n.headers[T]+=", "+b[2]:n.headers[T]=b[2],n.rawHeaders.push(b[1],b[2])}}),n._charset="x-user-defined",!Wy){var l=n.rawHeaders["mime-type"];if(l){var p=l.match(/;\s*charset=([^;])(;|$)/);p&&(n._charset=p[1].toLowerCase())}n._charset||(n._charset="utf-8")}}}Fr(mu,sr),mu.prototype._read=function(){},mu.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==eo.DONE)break;try{r=new dr.VBArray(t.responseBody).toArray()}catch{}if(r!==null){e.push(new ue(r));break}case"text":try{r=t.responseText}catch{e._mode="text:vbarray";break}if(r.length>e._pos){var n=r.substr(e._pos);if(e._charset==="x-user-defined"){for(var s=new ue(n.length),i=0;i<n.length;i++)s[i]=n.charCodeAt(i)&255;e.push(s)}else e.push(n,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==eo.DONE||!t.response)break;r=t.response,e.push(new ue(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==eo.LOADING||!r)break;e.push(new ue(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==eo.LOADING)break;var o=new dr.MSStreamReader;o.onprogress=function(){o.result.byteLength>e._pos&&(e.push(new ue(new Uint8Array(o.result.slice(e._pos)))),e._pos=o.result.byteLength)},o.onload=function(){e.push(null)},o.readAsArrayBuffer(r);break}e._xhr.readyState===eo.DONE&&e._mode!=="ms-stream"&&e.push(null)};function oT(e){if(e instanceof Uint8Array){if(e.byteOffset===0&&e.byteLength===e.buffer.byteLength)return e.buffer;if(typeof e.buffer.slice=="function")return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(se.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}else throw new Error("Argument must be a Buffer")}function aT(e,t){return id&&t?"fetch":t8?"moz-chunked-arraybuffer":e8?"ms-stream":QI&&e?"arraybuffer":r8&&e?"text:vbarray":"text"}function Vr(e){var t=this;Ir.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new ue(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(s){t.setHeader(s,e.headers[s])});var r,n=!0;if(e.mode==="disable-fetch")n=!1,r=!0;else if(e.mode==="prefer-streaming")r=!1;else if(e.mode==="allow-wrong-content-type")r=!Wy;else if(!e.mode||e.mode==="default"||e.mode==="prefer-fast")r=!0;else throw new Error("Invalid value for opts.mode");t._mode=aT(r,n),t.on("finish",function(){t._onFinish()})}Fr(Vr,Ir);var cT=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];Vr.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();cT.indexOf(n)===-1&&(r._headers[n]={name:e,value:t})},Vr.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value},Vr.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},Vr.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,r=e._headers,n;if((t.method==="POST"||t.method==="PUT"||t.method==="PATCH")&&(XI()?n=new dr.Blob(e._body.map(function(o){return oT(o)}),{type:(r["content-type"]||{}).value||""}):n=ue.concat(e._body).toString()),e._mode==="fetch"){var s=Object.keys(r).map(function(o){return[r[o].name,r[o].value]});dr.fetch(e._opts.url,{method:e._opts.method,headers:s,body:n,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(o){e._fetchResponse=o,e._connect()},function(o){e.emit("error",o)})}else{var i=e._xhr=new dr.XMLHttpRequest;try{i.open(e._opts.method,e._opts.url,!0)}catch(o){wn.nextTick(function(){e.emit("error",o)});return}"responseType"in i&&(i.responseType=e._mode.split(":")[0]),"withCredentials"in i&&(i.withCredentials=!!t.withCredentials),e._mode==="text"&&"overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(r).forEach(function(o){i.setRequestHeader(r[o].name,r[o].value)}),e._response=null,i.onreadystatechange=function(){switch(i.readyState){case eo.LOADING:case eo.DONE:e._onXHRProgress();break}},e._mode==="moz-chunked-arraybuffer"&&(i.onprogress=function(){e._onXHRProgress()}),i.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{i.send(n)}catch(o){wn.nextTick(function(){e.emit("error",o)});return}}}};function fT(e){try{var t=e.status;return t!==null&&t!==0}catch{return!1}}Vr.prototype._onXHRProgress=function(){var e=this;!fT(e._xhr)||e._destroyed||(e._response||e._connect(),e._response._onXHRProgress())},Vr.prototype._connect=function(){var e=this;e._destroyed||(e._response=new mu(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},Vr.prototype._write=function(e,t,r){var n=this;n._body.push(e),r()},Vr.prototype.abort=Vr.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},Vr.prototype.end=function(e,t,r){var n=this;typeof e=="function"&&(r=e,e=void 0),Ir.prototype.end.call(n,e,t,r)},Vr.prototype.flushHeaders=function(){},Vr.prototype.setTimeout=function(){},Vr.prototype.setNoDelay=function(){},Vr.prototype.setSocketKeepAlive=function(){};const Id=2147483647,ec=36,mw=1,Td=26,uT=38,lT=700,hT=72,dT=128,pT="-",gT=/[^\0-\x7F]/,yT=/[\x2E\u3002\uFF0E\uFF61]/g,wT={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Rd=ec-mw,Wo=Math.floor,kd=String.fromCharCode;function bw(e){throw new RangeError(wT[e])}function mT(e,t){const r=[];let n=e.length;for(;n--;)r[n]=t(e[n]);return r}function bT(e,t){const r=e.split("@");let n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(yT,".");const s=e.split("."),i=mT(s,t).join(".");return n+i}function vT(e){const t=[];let r=0;const n=e.length;for(;r<n;){const s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){const i=e.charCodeAt(r++);(i&64512)==56320?t.push(((s&1023)<<10)+(i&1023)+65536):(t.push(s),r--)}else t.push(s)}return t}const vw=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},_T=function(e,t,r){let n=0;for(e=r?Wo(e/lT):e>>1,e+=Wo(e/t);e>Rd*Td>>1;n+=ec)e=Wo(e/Rd);return Wo(n+(Rd+1)*e/(e+uT))},ET=function(e){const t=[];e=vT(e);const r=e.length;let n=dT,s=0,i=hT;for(const f of e)f<128&&t.push(kd(f));const o=t.length;let a=o;for(o&&t.push(pT);a<r;){let f=Id;for(const l of e)l>=n&&l<f&&(f=l);const u=a+1;f-n>Wo((Id-s)/u)&&bw("overflow"),s+=(f-n)*u,n=f;for(const l of e)if(l<n&&++s>Id&&bw("overflow"),l===n){let p=s;for(let _=ec;;_+=ec){const b=_<=i?mw:_>=i+Td?Td:_-i;if(p<b)break;const T=p-b,P=ec-b;t.push(kd(vw(b+T%P,0))),p=Wo(T/P)}t.push(kd(vw(p,0))),i=_T(s,u,a===o),s=0,++a}++s,++n}return t.join("")},xT=function(e){return bT(e,function(t){return gT.test(t)?"xn--"+ET(t):t})};function ST(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var _w=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function tc(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function AT(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Ew(BT(e),function(s){var i=encodeURIComponent(tc(s))+r;return _w(e[s])?Ew(e[s],function(o){return i+encodeURIComponent(tc(o))}).join(t):i+encodeURIComponent(tc(e[s]))}).join(t):n?encodeURIComponent(tc(n))+r+encodeURIComponent(tc(e)):""}function Ew(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var BT=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function xw(e,t,r,n){t=t||"&",r=r||"=";var s={};if(typeof e!="string"||e.length===0)return s;var i=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var f=0;f<a;++f){var u=e[f].replace(i,"%20"),l=u.indexOf(r),p,_,b,T;l>=0?(p=u.substr(0,l),_=u.substr(l+1)):(p=u,_=""),b=decodeURIComponent(p),T=decodeURIComponent(_),ST(s,b)?_w(s[b])?s[b].push(T):s[b]=[s[b],T]:s[b]=T}return s}const Sw=dr.URL,Aw=dr.URLSearchParams;var IT={parse:to,resolve:Cw,resolveObject:Ow,fileURLToPath:kw,format:Lw,Url:Tn,URL:Sw,URLSearchParams:Aw};function Tn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var TT=/^([a-z0-9.+-]+:)/i,RT=/:[0-9]*$/,kT=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,LT=["<",">",'"',"`"," ","\r",`
`,"	"],CT=["{","}","|","\\","^","`"].concat(LT),Ld=["'"].concat(CT),Bw=["%","/","?",";","#"].concat(Ld),Iw=["/","?","#"],OT=255,Tw=/^[+a-z0-9A-Z_-]{0,63}$/,$T=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,MT={javascript:!0,"javascript:":!0},Cd={javascript:!0,"javascript:":!0},Zo={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function to(e,t,r){if(e&&Ui(e)&&e instanceof Tn)return e;var n=new Tn;return n.parse(e,t,r),n}Tn.prototype.parse=function(e,t,r){return Rw(this,e,t,r)};function Rw(e,t,r,n){if(!ls(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),i=s!==-1&&s<t.indexOf("#")?"?":"#",o=t.split(i),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(i);var f=t;if(f=f.trim(),!n&&t.split("#").length===1){var u=kT.exec(f);if(u)return e.path=f,e.href=f,e.pathname=u[1],u[2]?(e.search=u[2],r?e.query=xw(e.search.substr(1)):e.query=e.search.substr(1)):r&&(e.search="",e.query={}),e}var l=TT.exec(f);if(l){l=l[0];var p=l.toLowerCase();e.protocol=p,f=f.substr(l.length)}if(n||l||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var _=f.substr(0,2)==="//";_&&!(l&&Cd[l])&&(f=f.substr(2),e.slashes=!0)}var b,T,P,$;if(!Cd[l]&&(_||l&&!Zo[l])){var j=-1;for(b=0;b<Iw.length;b++)T=f.indexOf(Iw[b]),T!==-1&&(j===-1||T<j)&&(j=T);var F,k;for(j===-1?k=f.lastIndexOf("@"):k=f.lastIndexOf("@",j),k!==-1&&(F=f.slice(0,k),f=f.slice(k+1),e.auth=decodeURIComponent(F)),j=-1,b=0;b<Bw.length;b++)T=f.indexOf(Bw[b]),T!==-1&&(j===-1||T<j)&&(j=T);j===-1&&(j=f.length),e.host=f.slice(0,j),f=f.slice(j),$w(e),e.hostname=e.hostname||"";var C=e.hostname[0]==="["&&e.hostname[e.hostname.length-1]==="]";if(!C){var X=e.hostname.split(/\./);for(b=0,P=X.length;b<P;b++){var Q=X[b];if(Q&&!Q.match(Tw)){for(var Z="",z=0,G=Q.length;z<G;z++)Q.charCodeAt(z)>127?Z+="x":Z+=Q[z];if(!Z.match(Tw)){var D=X.slice(0,b),V=X.slice(b+1),m=Q.match($T);m&&(D.push(m[1]),V.unshift(m[2])),V.length&&(f="/"+V.join(".")+f),e.hostname=D.join(".");break}}}}e.hostname.length>OT?e.hostname="":e.hostname=e.hostname.toLowerCase(),C||(e.hostname=xT(e.hostname)),$=e.port?":"+e.port:"";var d=e.hostname||"";e.host=d+$,e.href+=e.host,C&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),f[0]!=="/"&&(f="/"+f))}if(!MT[p])for(b=0,P=Ld.length;b<P;b++){var c=Ld[b];if(f.indexOf(c)!==-1){var h=encodeURIComponent(c);h===c&&(h=escape(c)),f=f.split(c).join(h)}}var y=f.indexOf("#");y!==-1&&(e.hash=f.substr(y),f=f.slice(0,y));var v=f.indexOf("?");if(v!==-1?(e.search=f.substr(v),e.query=f.substr(v+1),r&&(e.query=xw(e.query)),f=f.slice(0,v)):r&&(e.search="",e.query={}),f&&(e.pathname=f),Zo[p]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){$=e.pathname||"";var S=e.search||"";e.path=$+S}return e.href=Od(e),e}function kw(e){if(typeof e=="string")e=new Tn().parse(e);else if(!(e instanceof Tn))throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+String(e));if(e.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return NT(e)}function NT(e){const t=e.pathname;for(let r=0;r<t.length;r++)if(t[r]==="%"){const n=t.codePointAt(r+2)|32;if(t[r+1]==="2"&&n===102)throw new TypeError("must not include encoded / characters")}return decodeURIComponent(t)}function Lw(e){return ls(e)&&(e=Rw({},e)),Od(e)}function Od(e){var t=e.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",s=e.hash||"",i=!1,o="";e.host?i=t+e.host:e.hostname&&(i=t+(e.hostname.indexOf(":")===-1?e.hostname:"["+this.hostname+"]"),e.port&&(i+=":"+e.port)),e.query&&Ui(e.query)&&Object.keys(e.query).length&&(o=AT(e.query));var a=e.search||o&&"?"+o||"";return r&&r.substr(-1)!==":"&&(r+=":"),e.slashes||(!r||Zo[r])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),s&&s.charAt(0)!=="#"&&(s="#"+s),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(f){return encodeURIComponent(f)}),a=a.replace("#","%23"),r+i+n+a+s}Tn.prototype.format=function(){return Od(this)};function Cw(e,t){return to(e,!1,!0).resolve(t)}Tn.prototype.resolve=function(e){return this.resolveObject(to(e,!1,!0)).format()};function Ow(e,t){return e?to(e,!1,!0).resolveObject(t):t}Tn.prototype.resolveObject=function(e){if(ls(e)){var t=new Tn;t.parse(e,!1,!0),e=t}for(var r=new Tn,n=Object.keys(this),s=0;s<n.length;s++){var i=n[s];r[i]=this[i]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var f=o[a];f!=="protocol"&&(r[f]=e[f])}return Zo[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}var u;if(e.protocol&&e.protocol!==r.protocol){if(!Zo[e.protocol]){for(var l=Object.keys(e),p=0;p<l.length;p++){var _=l[p];r[_]=e[_]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!Cd[e.protocol]){for(u=(e.pathname||"").split("/");u.length&&!(e.host=u.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),u[0]!==""&&u.unshift(""),u.length<2&&u.unshift(""),r.pathname=u.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var b=r.pathname||"",T=r.search||"";r.path=b+T}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var P=r.pathname&&r.pathname.charAt(0)==="/",$=e.host||e.pathname&&e.pathname.charAt(0)==="/",j=$||P||r.host&&e.pathname,F=j,k=r.pathname&&r.pathname.split("/")||[],C=r.protocol&&!Zo[r.protocol];u=e.pathname&&e.pathname.split("/")||[],C&&(r.hostname="",r.port=null,r.host&&(k[0]===""?k[0]=r.host:k.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(u[0]===""?u[0]=e.host:u.unshift(e.host)),e.host=null),j=j&&(u[0]===""||k[0]===""));var X;if($)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,k=u;else if(u.length)k||(k=[]),k.pop(),k=k.concat(u),r.search=e.search,r.query=e.query;else if(!dd(e.search))return C&&(r.hostname=r.host=k.shift(),X=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,X&&(r.auth=X.shift(),r.host=r.hostname=X.shift())),r.search=e.search,r.query=e.query,(!Pi(r.pathname)||!Pi(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var Q=k.slice(-1)[0],Z=(r.host||e.host||k.length>1)&&(Q==="."||Q==="..")||Q==="",z=0,G=k.length;G>=0;G--)Q=k[G],Q==="."?k.splice(G,1):Q===".."?(k.splice(G,1),z++):z&&(k.splice(G,1),z--);if(!j&&!F)for(;z--;z)k.unshift("..");j&&k[0]!==""&&(!k[0]||k[0].charAt(0)!=="/")&&k.unshift(""),Z&&k.join("/").substr(-1)!=="/"&&k.push("");var D=k[0]===""||k[0]&&k[0].charAt(0)==="/";return C&&(r.hostname=r.host=D?"":k.length?k.shift():"",X=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1,X&&(r.auth=X.shift(),r.host=r.hostname=X.shift())),j=j||r.host&&k.length,j&&!D&&k.unshift(""),k.length?r.pathname=k.join("/"):(r.pathname=null,r.path=null),(!Pi(r.pathname)||!Pi(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},Tn.prototype.parseHost=function(){return $w(this)};function $w(e){var t=e.host,r=RT.exec(t);r&&(r=r[0],r!==":"&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}var PT=Object.freeze({__proto__:null,parse:to,resolve:Cw,resolveObject:Ow,fileURLToPath:kw,format:Lw,URL:Sw,URLSearchParams:Aw,default:IT,Url:Tn});function $d(e,t){typeof e=="string"&&(e=to(e));var r=dr.location.protocol.search(/^https?:$/)===-1?"http:":"",n=e.protocol||r,s=e.hostname||e.host,i=e.port,o=e.path||"/";s&&s.indexOf(":")!==-1&&(s="["+s+"]"),e.url=(s?n+"//"+s:"")+(i?":"+i:"")+o,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new Vr(e);return t&&a.on("response",t),a}function Mw(e,t){var r=$d(e,t);return r.end(),r}function Md(){}Md.defaultMaxSockets=4;var Nw=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],Pw={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},UT={request:$d,get:Mw,Agent:Md,METHODS:Nw,STATUS_CODES:Pw},FT=Object.freeze({__proto__:null,request:$d,get:Mw,Agent:Md,METHODS:Nw,STATUS_CODES:Pw,default:UT}),HT=ii(FT);function Nd(e,t){typeof e=="string"&&(e=to(e));var r=dr.location.protocol.search(/^https?:$/)===-1?"http:":"",n=e.protocol||r,s=e.hostname||e.host,i=e.port,o=e.path||"/";s&&s.indexOf(":")!==-1&&(s="["+s+"]"),e.url=(s?n+"//"+s:"")+(i?":"+i:"")+o,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new Vr(e);return t&&a.on("response",t),a}function Uw(e,t){var r=Nd(e,t);return r.end(),r}function Pd(){}Pd.defaultMaxSockets=4;var Fw=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],Hw={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},jT={request:Nd,get:Uw,Agent:Pd,METHODS:Fw,STATUS_CODES:Hw},DT=Object.freeze({__proto__:null,request:Nd,get:Uw,Agent:Pd,METHODS:Fw,STATUS_CODES:Hw,default:jT}),zT=ii(DT),jw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function qT(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Hi(e,t,r,n,s){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+n),s);return}for(var i=0;i<n;i++)e[s+i]=t[r+i]}var bu=Uint8Array,zn=Uint16Array,vu=Int32Array,VT=4,Dw=0,zw=1,KT=2;function Go(e){for(var t=e.length;--t>=0;)e[t]=0}var WT=0,qw=1,ZT=2,GT=3,YT=258,Ud=29,rc=256,nc=rc+1+Ud,Yo=30,Fd=19,Vw=2*nc+1,ro=15,Hd=16,XT=7,jd=256,Kw=16,Ww=17,Zw=18,Dd=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],_u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],JT=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Gw=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],QT=512,ji=new Array((nc+2)*2);Go(ji);var ic=new Array(Yo*2);Go(ic);var sc=new Array(QT);Go(sc);var oc=new Array(YT-GT+1);Go(oc);var zd=new Array(Ud);Go(zd);var Eu=new Array(Yo);Go(Eu);function qd(e,t,r,n,s){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=s,this.has_stree=e&&e.length}var Yw,Xw,Jw;function Vd(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Qw(e){return e<256?sc[e]:sc[256+(e>>>7)]}function ac(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function mn(e,t,r){e.bi_valid>Hd-r?(e.bi_buf|=t<<e.bi_valid&65535,ac(e,e.bi_buf),e.bi_buf=t>>Hd-e.bi_valid,e.bi_valid+=r-Hd):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function yi(e,t,r){mn(e,r[t*2],r[t*2+1])}function em(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function eR(e){e.bi_valid===16?(ac(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function tR(e,t){var r=t.dyn_tree,n=t.max_code,s=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,f=t.stat_desc.max_length,u,l,p,_,b,T,P=0;for(_=0;_<=ro;_++)e.bl_count[_]=0;for(r[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<Vw;u++)l=e.heap[u],_=r[r[l*2+1]*2+1]+1,_>f&&(_=f,P++),r[l*2+1]=_,!(l>n)&&(e.bl_count[_]++,b=0,l>=a&&(b=o[l-a]),T=r[l*2],e.opt_len+=T*(_+b),i&&(e.static_len+=T*(s[l*2+1]+b)));if(P!==0){do{for(_=f-1;e.bl_count[_]===0;)_--;e.bl_count[_]--,e.bl_count[_+1]+=2,e.bl_count[f]--,P-=2}while(P>0);for(_=f;_!==0;_--)for(l=e.bl_count[_];l!==0;)p=e.heap[--u],!(p>n)&&(r[p*2+1]!==_&&(e.opt_len+=(_-r[p*2+1])*r[p*2],r[p*2+1]=_),l--)}}function tm(e,t,r){var n=new Array(ro+1),s=0,i,o;for(i=1;i<=ro;i++)n[i]=s=s+r[i-1]<<1;for(o=0;o<=t;o++){var a=e[o*2+1];a!==0&&(e[o*2]=em(n[a]++,a))}}function rR(){var e,t,r,n,s,i=new Array(ro+1);for(r=0,n=0;n<Ud-1;n++)for(zd[n]=r,e=0;e<1<<Dd[n];e++)oc[r++]=n;for(oc[r-1]=n,s=0,n=0;n<16;n++)for(Eu[n]=s,e=0;e<1<<_u[n];e++)sc[s++]=n;for(s>>=7;n<Yo;n++)for(Eu[n]=s<<7,e=0;e<1<<_u[n]-7;e++)sc[256+s++]=n;for(t=0;t<=ro;t++)i[t]=0;for(e=0;e<=143;)ji[e*2+1]=8,e++,i[8]++;for(;e<=255;)ji[e*2+1]=9,e++,i[9]++;for(;e<=279;)ji[e*2+1]=7,e++,i[7]++;for(;e<=287;)ji[e*2+1]=8,e++,i[8]++;for(tm(ji,nc+1,i),e=0;e<Yo;e++)ic[e*2+1]=5,ic[e*2]=em(e,5);Yw=new qd(ji,Dd,rc+1,nc,ro),Xw=new qd(ic,_u,0,Yo,ro),Jw=new qd(new Array(0),JT,0,Fd,XT)}function rm(e){var t;for(t=0;t<nc;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Yo;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Fd;t++)e.bl_tree[t*2]=0;e.dyn_ltree[jd*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function nm(e){e.bi_valid>8?ac(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function nR(e,t,r,n){nm(e),n&&(ac(e,r),ac(e,~r)),Hi(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function im(e,t,r,n){var s=t*2,i=r*2;return e[s]<e[i]||e[s]===e[i]&&n[t]<=n[r]}function Kd(e,t,r){for(var n=e.heap[r],s=r<<1;s<=e.heap_len&&(s<e.heap_len&&im(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!im(t,n,e.heap[s],e.depth));)e.heap[r]=e.heap[s],r=s,s<<=1;e.heap[r]=n}function sm(e,t,r){var n,s,i=0,o,a;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+i*2]<<8|e.pending_buf[e.d_buf+i*2+1],s=e.pending_buf[e.l_buf+i],i++,n===0?yi(e,s,t):(o=oc[s],yi(e,o+rc+1,t),a=Dd[o],a!==0&&(s-=zd[o],mn(e,s,a)),n--,o=Qw(n),yi(e,o,r),a=_u[o],a!==0&&(n-=Eu[o],mn(e,n,a)));while(i<e.last_lit);yi(e,jd,t)}function Wd(e,t){var r=t.dyn_tree,n=t.stat_desc.static_tree,s=t.stat_desc.has_stree,i=t.stat_desc.elems,o,a,f=-1,u;for(e.heap_len=0,e.heap_max=Vw,o=0;o<i;o++)r[o*2]!==0?(e.heap[++e.heap_len]=f=o,e.depth[o]=0):r[o*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=f<2?++f:0,r[u*2]=1,e.depth[u]=0,e.opt_len--,s&&(e.static_len-=n[u*2+1]);for(t.max_code=f,o=e.heap_len>>1;o>=1;o--)Kd(e,r,o);u=i;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Kd(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,r[u*2]=r[o*2]+r[a*2],e.depth[u]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,r[o*2+1]=r[a*2+1]=u,e.heap[1]=u++,Kd(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],tR(e,t),tm(r,f,e.bl_count)}function om(e,t,r){var n,s=-1,i,o=t[0*2+1],a=0,f=7,u=4;for(o===0&&(f=138,u=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)i=o,o=t[(n+1)*2+1],!(++a<f&&i===o)&&(a<u?e.bl_tree[i*2]+=a:i!==0?(i!==s&&e.bl_tree[i*2]++,e.bl_tree[Kw*2]++):a<=10?e.bl_tree[Ww*2]++:e.bl_tree[Zw*2]++,a=0,s=i,o===0?(f=138,u=3):i===o?(f=6,u=3):(f=7,u=4))}function am(e,t,r){var n,s=-1,i,o=t[0*2+1],a=0,f=7,u=4;for(o===0&&(f=138,u=3),n=0;n<=r;n++)if(i=o,o=t[(n+1)*2+1],!(++a<f&&i===o)){if(a<u)do yi(e,i,e.bl_tree);while(--a!==0);else i!==0?(i!==s&&(yi(e,i,e.bl_tree),a--),yi(e,Kw,e.bl_tree),mn(e,a-3,2)):a<=10?(yi(e,Ww,e.bl_tree),mn(e,a-3,3)):(yi(e,Zw,e.bl_tree),mn(e,a-11,7));a=0,s=i,o===0?(f=138,u=3):i===o?(f=6,u=3):(f=7,u=4)}}function iR(e){var t;for(om(e,e.dyn_ltree,e.l_desc.max_code),om(e,e.dyn_dtree,e.d_desc.max_code),Wd(e,e.bl_desc),t=Fd-1;t>=3&&e.bl_tree[Gw[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function sR(e,t,r,n){var s;for(mn(e,t-257,5),mn(e,r-1,5),mn(e,n-4,4),s=0;s<n;s++)mn(e,e.bl_tree[Gw[s]*2+1],3);am(e,e.dyn_ltree,t-1),am(e,e.dyn_dtree,r-1)}function oR(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return Dw;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return zw;for(r=32;r<rc;r++)if(e.dyn_ltree[r*2]!==0)return zw;return Dw}var cm=!1;function aR(e){cm||(rR(),cm=!0),e.l_desc=new Vd(e.dyn_ltree,Yw),e.d_desc=new Vd(e.dyn_dtree,Xw),e.bl_desc=new Vd(e.bl_tree,Jw),e.bi_buf=0,e.bi_valid=0,rm(e)}function fm(e,t,r,n){mn(e,(WT<<1)+(n?1:0),3),nR(e,t,r,!0)}function cR(e){mn(e,qw<<1,3),yi(e,jd,ji),eR(e)}function fR(e,t,r,n){var s,i,o=0;e.level>0?(e.strm.data_type===KT&&(e.strm.data_type=oR(e)),Wd(e,e.l_desc),Wd(e,e.d_desc),o=iR(e),s=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=s&&(s=i)):s=i=r+5,r+4<=s&&t!==-1?fm(e,t,r,n):e.strategy===VT||i===s?(mn(e,(qw<<1)+(n?1:0),3),sm(e,ji,ic)):(mn(e,(ZT<<1)+(n?1:0),3),sR(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),sm(e,e.dyn_ltree,e.dyn_dtree)),rm(e),n&&nm(e)}function hs(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(oc[r]+rc+1)*2]++,e.dyn_dtree[Qw(t)*2]++),e.last_lit===e.lit_bufsize-1}function Zd(e,t,r,n){for(var s=e&65535|0,i=e>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+t[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0}function uR(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var lR=uR();function Hr(e,t,r,n){var s=lR,i=n+r;e^=-1;for(var o=n;o<i;o++)e=e>>>8^s[(e^t[o])&255];return e^-1}var no=0,hR=1,dR=3,ds=4,um=5,ps=0,lm=1,gs=-2,pR=-3,Gd=-5,gR=-1,yR=1,xu=2,wR=3,mR=4,bR=2,Yd=8,vR=9,_R=29,ER=256,Xd=ER+1+_R,xR=30,SR=19,AR=2*Xd+1,BR=15,Pt=3,ys=258,Gn=ys+Pt+1,IR=32,Jd=42,Qd=69,Su=73,Au=91,Bu=103,io=113,cc=666,Tr=1,fc=2,so=3,Xo=4,TR=3;function ws(e,t){return e.msg=jw[t],t}function hm(e){return(e<<1)-(e>4?9:0)}function oo(e){for(var t=e.length;--t>=0;)e[t]=0}function ms(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(Hi(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function Kr(e,t){fR(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ms(e.strm)}function Mt(e,t){e.pending_buf[e.pending++]=t}function uc(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function RR(e,t,r,n){var s=e.avail_in;return s>n&&(s=n),s===0?0:(e.avail_in-=s,Hi(t,e.input,e.next_in,s,r),e.state.wrap===1?e.adler=Zd(e.adler,t,s,r):e.state.wrap===2&&(e.adler=Hr(e.adler,t,s,r)),e.next_in+=s,e.total_in+=s,s)}function dm(e,t){var r=e.max_chain_length,n=e.strstart,s,i,o=e.prev_length,a=e.nice_match,f=e.strstart>e.w_size-Gn?e.strstart-(e.w_size-Gn):0,u=e.window,l=e.w_mask,p=e.prev,_=e.strstart+ys,b=u[n+o-1],T=u[n+o];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do if(s=t,!(u[s+o]!==T||u[s+o-1]!==b||u[s]!==u[n]||u[++s]!==u[n+1])){n+=2,s++;do;while(u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&u[++n]===u[++s]&&n<_);if(i=ys-(_-n),n=_-ys,i>o){if(e.match_start=t,o=i,i>=a)break;b=u[n+o-1],T=u[n+o]}}while((t=p[t&l])>f&&--r!==0);return o<=e.lookahead?o:e.lookahead}function lc(e){var t=e.w_size,r,n,s,i,o;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Gn)){Hi(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do s=e.head[--r],e.head[r]=s>=t?s-t:0;while(--n);n=t,r=n;do s=e.prev[--r],e.prev[r]=s>=t?s-t:0;while(--n);i+=t}if(e.strm.avail_in===0)break;if(n=RR(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=Pt)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+Pt-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<Pt)););}while(e.lookahead<Gn&&e.strm.avail_in!==0)}function kR(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(lc(e),e.lookahead===0&&t===no)return Tr;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Kr(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Gn&&(Kr(e,!1),e.strm.avail_out===0))return Tr}return e.insert=0,t===ds?(Kr(e,!0),e.strm.avail_out===0?so:Xo):(e.strstart>e.block_start&&(Kr(e,!1),e.strm.avail_out===0),Tr)}function e0(e,t){for(var r,n;;){if(e.lookahead<Gn){if(lc(e),e.lookahead<Gn&&t===no)return Tr;if(e.lookahead===0)break}if(r=0,e.lookahead>=Pt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Pt-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Gn&&(e.match_length=dm(e,r)),e.match_length>=Pt)if(n=hs(e,e.strstart-e.match_start,e.match_length-Pt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Pt){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Pt-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=hs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Kr(e,!1),e.strm.avail_out===0))return Tr}return e.insert=e.strstart<Pt-1?e.strstart:Pt-1,t===ds?(Kr(e,!0),e.strm.avail_out===0?so:Xo):e.last_lit&&(Kr(e,!1),e.strm.avail_out===0)?Tr:fc}function Jo(e,t){for(var r,n,s;;){if(e.lookahead<Gn){if(lc(e),e.lookahead<Gn&&t===no)return Tr;if(e.lookahead===0)break}if(r=0,e.lookahead>=Pt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Pt-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Pt-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Gn&&(e.match_length=dm(e,r),e.match_length<=5&&(e.strategy===yR||e.match_length===Pt&&e.strstart-e.match_start>4096)&&(e.match_length=Pt-1)),e.prev_length>=Pt&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-Pt,n=hs(e,e.strstart-1-e.prev_match,e.prev_length-Pt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Pt-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Pt-1,e.strstart++,n&&(Kr(e,!1),e.strm.avail_out===0))return Tr}else if(e.match_available){if(n=hs(e,0,e.window[e.strstart-1]),n&&Kr(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Tr}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=hs(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Pt-1?e.strstart:Pt-1,t===ds?(Kr(e,!0),e.strm.avail_out===0?so:Xo):e.last_lit&&(Kr(e,!1),e.strm.avail_out===0)?Tr:fc}function LR(e,t){for(var r,n,s,i,o=e.window;;){if(e.lookahead<=ys){if(lc(e),e.lookahead<=ys&&t===no)return Tr;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Pt&&e.strstart>0&&(s=e.strstart-1,n=o[s],n===o[++s]&&n===o[++s]&&n===o[++s])){i=e.strstart+ys;do;while(n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&n===o[++s]&&s<i);e.match_length=ys-(i-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Pt?(r=hs(e,1,e.match_length-Pt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=hs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Kr(e,!1),e.strm.avail_out===0))return Tr}return e.insert=0,t===ds?(Kr(e,!0),e.strm.avail_out===0?so:Xo):e.last_lit&&(Kr(e,!1),e.strm.avail_out===0)?Tr:fc}function CR(e,t){for(var r;;){if(e.lookahead===0&&(lc(e),e.lookahead===0)){if(t===no)return Tr;break}if(e.match_length=0,r=hs(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Kr(e,!1),e.strm.avail_out===0))return Tr}return e.insert=0,t===ds?(Kr(e,!0),e.strm.avail_out===0?so:Xo):e.last_lit&&(Kr(e,!1),e.strm.avail_out===0)?Tr:fc}function wi(e,t,r,n,s){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=s}var Qo;Qo=[new wi(0,0,0,0,kR),new wi(4,4,8,4,e0),new wi(4,5,16,8,e0),new wi(4,6,32,32,e0),new wi(4,4,16,16,Jo),new wi(8,16,32,32,Jo),new wi(8,16,128,128,Jo),new wi(8,32,128,256,Jo),new wi(32,128,258,1024,Jo),new wi(32,258,258,4096,Jo)];function OR(e){e.window_size=2*e.w_size,oo(e.head),e.max_lazy_match=Qo[e.level].max_lazy,e.good_match=Qo[e.level].good_length,e.nice_match=Qo[e.level].nice_length,e.max_chain_length=Qo[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Pt-1,e.match_available=0,e.ins_h=0}function $R(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Yd,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new zn(AR*2),this.dyn_dtree=new zn((2*xR+1)*2),this.bl_tree=new zn((2*SR+1)*2),oo(this.dyn_ltree),oo(this.dyn_dtree),oo(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new zn(BR+1),this.heap=new zn(2*Xd+1),oo(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new zn(2*Xd+1),oo(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function MR(e){var t;return!e||!e.state?ws(e,gs):(e.total_in=e.total_out=0,e.data_type=bR,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Jd:io,e.adler=t.wrap===2?0:1,t.last_flush=no,aR(t),ps)}function pm(e){var t=MR(e);return t===ps&&OR(e.state),t}function NR(e,t,r,n,s,i){if(!e)return gs;var o=1;if(t===gR&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),s<1||s>vR||r!==Yd||n<8||n>15||t<0||t>9||i<0||i>mR)return ws(e,gs);n===8&&(n=9);var a=new $R;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Pt-1)/Pt),a.window=new bu(a.w_size*2),a.head=new zn(a.hash_size),a.prev=new zn(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new bu(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=t,a.strategy=i,a.method=r,pm(e)}function PR(e,t){var r,n,s,i;if(!e||!e.state||t>um||t<0)return e?ws(e,gs):gs;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===cc&&t!==ds)return ws(e,e.avail_out===0?Gd:gs);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===Jd)if(n.wrap===2)e.adler=0,Mt(n,31),Mt(n,139),Mt(n,8),n.gzhead?(Mt(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Mt(n,n.gzhead.time&255),Mt(n,n.gzhead.time>>8&255),Mt(n,n.gzhead.time>>16&255),Mt(n,n.gzhead.time>>24&255),Mt(n,n.level===9?2:n.strategy>=xu||n.level<2?4:0),Mt(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Mt(n,n.gzhead.extra.length&255),Mt(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Hr(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Qd):(Mt(n,0),Mt(n,0),Mt(n,0),Mt(n,0),Mt(n,0),Mt(n,n.level===9?2:n.strategy>=xu||n.level<2?4:0),Mt(n,TR),n.status=io);else{var o=Yd+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=xu||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,o|=a<<6,n.strstart!==0&&(o|=IR),o+=31-o%31,n.status=io,uc(n,o),n.strstart!==0&&(uc(n,e.adler>>>16),uc(n,e.adler&65535)),e.adler=1}if(n.status===Qd)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=Hr(e.adler,n.pending_buf,n.pending-s,s)),ms(e),s=n.pending,n.pending===n.pending_buf_size));)Mt(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(e.adler=Hr(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=Su)}else n.status=Su;if(n.status===Su)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=Hr(e.adler,n.pending_buf,n.pending-s,s)),ms(e),s=n.pending,n.pending===n.pending_buf_size)){i=1;break}n.gzindex<n.gzhead.name.length?i=n.gzhead.name.charCodeAt(n.gzindex++)&255:i=0,Mt(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>s&&(e.adler=Hr(e.adler,n.pending_buf,n.pending-s,s)),i===0&&(n.gzindex=0,n.status=Au)}else n.status=Au;if(n.status===Au)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=Hr(e.adler,n.pending_buf,n.pending-s,s)),ms(e),s=n.pending,n.pending===n.pending_buf_size)){i=1;break}n.gzindex<n.gzhead.comment.length?i=n.gzhead.comment.charCodeAt(n.gzindex++)&255:i=0,Mt(n,i)}while(i!==0);n.gzhead.hcrc&&n.pending>s&&(e.adler=Hr(e.adler,n.pending_buf,n.pending-s,s)),i===0&&(n.status=Bu)}else n.status=Bu;if(n.status===Bu&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&ms(e),n.pending+2<=n.pending_buf_size&&(Mt(n,e.adler&255),Mt(n,e.adler>>8&255),e.adler=0,n.status=io)):n.status=io),n.pending!==0){if(ms(e),e.avail_out===0)return n.last_flush=-1,ps}else if(e.avail_in===0&&hm(t)<=hm(r)&&t!==ds)return ws(e,Gd);if(n.status===cc&&e.avail_in!==0)return ws(e,Gd);if(e.avail_in!==0||n.lookahead!==0||t!==no&&n.status!==cc){var f=n.strategy===xu?CR(n,t):n.strategy===wR?LR(n,t):Qo[n.level].func(n,t);if((f===so||f===Xo)&&(n.status=cc),f===Tr||f===so)return e.avail_out===0&&(n.last_flush=-1),ps;if(f===fc&&(t===hR?cR(n):t!==um&&(fm(n,0,0,!1),t===dR&&(oo(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),ms(e),e.avail_out===0))return n.last_flush=-1,ps}return t!==ds?ps:n.wrap<=0?lm:(n.wrap===2?(Mt(n,e.adler&255),Mt(n,e.adler>>8&255),Mt(n,e.adler>>16&255),Mt(n,e.adler>>24&255),Mt(n,e.total_in&255),Mt(n,e.total_in>>8&255),Mt(n,e.total_in>>16&255),Mt(n,e.total_in>>24&255)):(uc(n,e.adler>>>16),uc(n,e.adler&65535)),ms(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?ps:lm)}function UR(e){var t;return!e||!e.state?gs:(t=e.state.status,t!==Jd&&t!==Qd&&t!==Su&&t!==Au&&t!==Bu&&t!==io&&t!==cc?ws(e,gs):(e.state=null,t===io?ws(e,pR):ps))}var Iu=30,FR=12;function HR(e,t){var r,n,s,i,o,a,f,u,l,p,_,b,T,P,$,j,F,k,C,X,Q,Z,z,G,D;r=e.state,n=e.next_in,G=e.input,s=n+(e.avail_in-5),i=e.next_out,D=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),f=r.dmax,u=r.wsize,l=r.whave,p=r.wnext,_=r.window,b=r.hold,T=r.bits,P=r.lencode,$=r.distcode,j=(1<<r.lenbits)-1,F=(1<<r.distbits)-1;e:do{T<15&&(b+=G[n++]<<T,T+=8,b+=G[n++]<<T,T+=8),k=P[b&j];t:for(;;){if(C=k>>>24,b>>>=C,T-=C,C=k>>>16&255,C===0)D[i++]=k&65535;else if(C&16){X=k&65535,C&=15,C&&(T<C&&(b+=G[n++]<<T,T+=8),X+=b&(1<<C)-1,b>>>=C,T-=C),T<15&&(b+=G[n++]<<T,T+=8,b+=G[n++]<<T,T+=8),k=$[b&F];r:for(;;){if(C=k>>>24,b>>>=C,T-=C,C=k>>>16&255,C&16){if(Q=k&65535,C&=15,T<C&&(b+=G[n++]<<T,T+=8,T<C&&(b+=G[n++]<<T,T+=8)),Q+=b&(1<<C)-1,Q>f){e.msg="invalid distance too far back",r.mode=Iu;break e}if(b>>>=C,T-=C,C=i-o,Q>C){if(C=Q-C,C>l&&r.sane){e.msg="invalid distance too far back",r.mode=Iu;break e}if(Z=0,z=_,p===0){if(Z+=u-C,C<X){X-=C;do D[i++]=_[Z++];while(--C);Z=i-Q,z=D}}else if(p<C){if(Z+=u+p-C,C-=p,C<X){X-=C;do D[i++]=_[Z++];while(--C);if(Z=0,p<X){C=p,X-=C;do D[i++]=_[Z++];while(--C);Z=i-Q,z=D}}}else if(Z+=p-C,C<X){X-=C;do D[i++]=_[Z++];while(--C);Z=i-Q,z=D}for(;X>2;)D[i++]=z[Z++],D[i++]=z[Z++],D[i++]=z[Z++],X-=3;X&&(D[i++]=z[Z++],X>1&&(D[i++]=z[Z++]))}else{Z=i-Q;do D[i++]=D[Z++],D[i++]=D[Z++],D[i++]=D[Z++],X-=3;while(X>2);X&&(D[i++]=D[Z++],X>1&&(D[i++]=D[Z++]))}}else if(C&64){e.msg="invalid distance code",r.mode=Iu;break e}else{k=$[(k&65535)+(b&(1<<C)-1)];continue r}break}}else if(C&64)if(C&32){r.mode=FR;break e}else{e.msg="invalid literal/length code",r.mode=Iu;break e}else{k=P[(k&65535)+(b&(1<<C)-1)];continue t}break}}while(n<s&&i<a);X=T>>3,n-=X,T-=X<<3,b&=(1<<T)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<a?257+(a-i):257-(i-a),r.hold=b,r.bits=T}var ea=15,gm=852,ym=592,wm=0,t0=1,mm=2,jR=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],DR=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],zR=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],qR=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function hc(e,t,r,n,s,i,o,a){var f=a.bits,u=0,l=0,p=0,_=0,b=0,T=0,P=0,$=0,j=0,F=0,k,C,X,Q,Z,z=null,G=0,D,V=new zn(ea+1),m=new zn(ea+1),d=null,c=0,h,y,v;for(u=0;u<=ea;u++)V[u]=0;for(l=0;l<n;l++)V[t[r+l]]++;for(b=f,_=ea;_>=1&&V[_]===0;_--);if(b>_&&(b=_),_===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<_&&V[p]===0;p++);for(b<p&&(b=p),$=1,u=1;u<=ea;u++)if($<<=1,$-=V[u],$<0)return-1;if($>0&&(e===wm||_!==1))return-1;for(m[1]=0,u=1;u<ea;u++)m[u+1]=m[u]+V[u];for(l=0;l<n;l++)t[r+l]!==0&&(o[m[t[r+l]]++]=l);if(e===wm?(z=d=o,D=19):e===t0?(z=jR,G-=257,d=DR,c-=257,D=256):(z=zR,d=qR,D=-1),F=0,l=0,u=p,Z=i,T=b,P=0,X=-1,j=1<<b,Q=j-1,e===t0&&j>gm||e===mm&&j>ym)return 1;for(;;){h=u-P,o[l]<D?(y=0,v=o[l]):o[l]>D?(y=d[c+o[l]],v=z[G+o[l]]):(y=32+64,v=0),k=1<<u-P,C=1<<T,p=C;do C-=k,s[Z+(F>>P)+C]=h<<24|y<<16|v|0;while(C!==0);for(k=1<<u-1;F&k;)k>>=1;if(k!==0?(F&=k-1,F+=k):F=0,l++,--V[u]===0){if(u===_)break;u=t[r+o[l]]}if(u>b&&(F&Q)!==X){for(P===0&&(P=b),Z+=p,T=u-P,$=1<<T;T+P<_&&($-=V[T+P],!($<=0));)T++,$<<=1;if(j+=1<<T,e===t0&&j>gm||e===mm&&j>ym)return 1;X=F&Q,s[X]=b<<24|T<<16|Z-i|0}}return F!==0&&(s[Z+F]=u-P<<24|64<<16|0),a.bits=b,0}var VR=0,bm=1,vm=2,_m=4,KR=5,Tu=6,dc=0,WR=1,ZR=2,bs=-2,GR=-3,YR=-4,XR=-5,Em=8,xm=1,Sm=2,Am=3,Bm=4,Im=5,Tm=6,Rm=7,km=8,Lm=9,Cm=10,Om=11,Di=12,r0=13,$m=14,n0=15,Mm=16,Nm=17,Pm=18,Um=19,Ru=20,ku=21,Fm=22,Hm=23,jm=24,Dm=25,zm=26,i0=27,qm=28,Vm=29,or=30,JR=31,QR=32,e4=852,t4=592;function Km(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function r4(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new zn(320),this.work=new zn(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function n4(e){var t;return!e||!e.state?bs:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=xm,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new vu(e4),t.distcode=t.distdyn=new vu(t4),t.sane=1,t.back=-1,dc)}function Wm(e){var t;return!e||!e.state?bs:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,n4(e))}function i4(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?bs:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Wm(e))}function s4(e,t){var r,n;return e?(n=new r4,e.state=n,n.window=null,r=i4(e,t),r!==dc&&(e.state=null),r):bs}var Zm=!0,s0,o0;function o4(e){if(Zm){var t;for(s0=new vu(512),o0=new vu(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(hc(bm,e.lens,0,288,s0,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;hc(vm,e.lens,0,32,o0,0,e.work,{bits:5}),Zm=!1}e.lencode=s0,e.lenbits=9,e.distcode=o0,e.distbits=5}function a4(e,t,r,n){var s,i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new bu(i.wsize)),n>=i.wsize?(Hi(i.window,t,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),Hi(i.window,t,r-n,s,i.wnext),n-=s,n?(Hi(i.window,t,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0}function c4(e,t){var r,n,s,i,o,a,f,u,l,p,_,b,T,P,$=0,j,F,k,C,X,Q,Z,z,G=new bu(4),D,V,m=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return bs;r=e.state,r.mode===Di&&(r.mode=r0),o=e.next_out,s=e.output,f=e.avail_out,i=e.next_in,n=e.input,a=e.avail_in,u=r.hold,l=r.bits,p=a,_=f,z=dc;e:for(;;)switch(r.mode){case xm:if(r.wrap===0){r.mode=r0;break}for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(r.wrap&2&&u===35615){r.check=0,G[0]=u&255,G[1]=u>>>8&255,r.check=Hr(r.check,G,2,0),u=0,l=0,r.mode=Sm;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=or;break}if((u&15)!==Em){e.msg="unknown compression method",r.mode=or;break}if(u>>>=4,l-=4,Z=(u&15)+8,r.wbits===0)r.wbits=Z;else if(Z>r.wbits){e.msg="invalid window size",r.mode=or;break}r.dmax=1<<Z,e.adler=r.check=1,r.mode=u&512?Cm:Di,u=0,l=0;break;case Sm:for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(r.flags=u,(r.flags&255)!==Em){e.msg="unknown compression method",r.mode=or;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=or;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&(G[0]=u&255,G[1]=u>>>8&255,r.check=Hr(r.check,G,2,0)),u=0,l=0,r.mode=Am;case Am:for(;l<32;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.head&&(r.head.time=u),r.flags&512&&(G[0]=u&255,G[1]=u>>>8&255,G[2]=u>>>16&255,G[3]=u>>>24&255,r.check=Hr(r.check,G,4,0)),u=0,l=0,r.mode=Bm;case Bm:for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&(G[0]=u&255,G[1]=u>>>8&255,r.check=Hr(r.check,G,2,0)),u=0,l=0,r.mode=Im;case Im:if(r.flags&1024){for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&(G[0]=u&255,G[1]=u>>>8&255,r.check=Hr(r.check,G,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=Tm;case Tm:if(r.flags&1024&&(b=r.length,b>a&&(b=a),b&&(r.head&&(Z=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Hi(r.head.extra,n,i,b,Z)),r.flags&512&&(r.check=Hr(r.check,n,b,i)),a-=b,i+=b,r.length-=b),r.length))break e;r.length=0,r.mode=Rm;case Rm:if(r.flags&2048){if(a===0)break e;b=0;do Z=n[i+b++],r.head&&Z&&r.length<65536&&(r.head.name+=String.fromCharCode(Z));while(Z&&b<a);if(r.flags&512&&(r.check=Hr(r.check,n,b,i)),a-=b,i+=b,Z)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=km;case km:if(r.flags&4096){if(a===0)break e;b=0;do Z=n[i+b++],r.head&&Z&&r.length<65536&&(r.head.comment+=String.fromCharCode(Z));while(Z&&b<a);if(r.flags&512&&(r.check=Hr(r.check,n,b,i)),a-=b,i+=b,Z)break e}else r.head&&(r.head.comment=null);r.mode=Lm;case Lm:if(r.flags&512){for(;l<16;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=or;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Di;break;case Cm:for(;l<32;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}e.adler=r.check=Km(u),u=0,l=0,r.mode=Om;case Om:if(r.havedict===0)return e.next_out=o,e.avail_out=f,e.next_in=i,e.avail_in=a,r.hold=u,r.bits=l,ZR;e.adler=r.check=1,r.mode=Di;case Di:if(t===KR||t===Tu)break e;case r0:if(r.last){u>>>=l&7,l-=l&7,r.mode=i0;break}for(;l<3;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}switch(r.last=u&1,u>>>=1,l-=1,u&3){case 0:r.mode=$m;break;case 1:if(o4(r),r.mode=Ru,t===Tu){u>>>=2,l-=2;break e}break;case 2:r.mode=Nm;break;case 3:e.msg="invalid block type",r.mode=or}u>>>=2,l-=2;break;case $m:for(u>>>=l&7,l-=l&7;l<32;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=or;break}if(r.length=u&65535,u=0,l=0,r.mode=n0,t===Tu)break e;case n0:r.mode=Mm;case Mm:if(b=r.length,b){if(b>a&&(b=a),b>f&&(b=f),b===0)break e;Hi(s,n,i,b,o),a-=b,i+=b,f-=b,o+=b,r.length-=b;break}r.mode=Di;break;case Nm:for(;l<14;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(r.nlen=(u&31)+257,u>>>=5,l-=5,r.ndist=(u&31)+1,u>>>=5,l-=5,r.ncode=(u&15)+4,u>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=or;break}r.have=0,r.mode=Pm;case Pm:for(;r.have<r.ncode;){for(;l<3;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.lens[m[r.have++]]=u&7,u>>>=3,l-=3}for(;r.have<19;)r.lens[m[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},z=hc(VR,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,z){e.msg="invalid code lengths set",r.mode=or;break}r.have=0,r.mode=Um;case Um:for(;r.have<r.nlen+r.ndist;){for(;$=r.lencode[u&(1<<r.lenbits)-1],j=$>>>24,F=$>>>16&255,k=$&65535,!(j<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(k<16)u>>>=j,l-=j,r.lens[r.have++]=k;else{if(k===16){for(V=j+2;l<V;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(u>>>=j,l-=j,r.have===0){e.msg="invalid bit length repeat",r.mode=or;break}Z=r.lens[r.have-1],b=3+(u&3),u>>>=2,l-=2}else if(k===17){for(V=j+3;l<V;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}u>>>=j,l-=j,Z=0,b=3+(u&7),u>>>=3,l-=3}else{for(V=j+7;l<V;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}u>>>=j,l-=j,Z=0,b=11+(u&127),u>>>=7,l-=7}if(r.have+b>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=or;break}for(;b--;)r.lens[r.have++]=Z}}if(r.mode===or)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=or;break}if(r.lenbits=9,D={bits:r.lenbits},z=hc(bm,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,z){e.msg="invalid literal/lengths set",r.mode=or;break}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},z=hc(vm,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,z){e.msg="invalid distances set",r.mode=or;break}if(r.mode=Ru,t===Tu)break e;case Ru:r.mode=ku;case ku:if(a>=6&&f>=258){e.next_out=o,e.avail_out=f,e.next_in=i,e.avail_in=a,r.hold=u,r.bits=l,HR(e,_),o=e.next_out,s=e.output,f=e.avail_out,i=e.next_in,n=e.input,a=e.avail_in,u=r.hold,l=r.bits,r.mode===Di&&(r.back=-1);break}for(r.back=0;$=r.lencode[u&(1<<r.lenbits)-1],j=$>>>24,F=$>>>16&255,k=$&65535,!(j<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(F&&!(F&240)){for(C=j,X=F,Q=k;$=r.lencode[Q+((u&(1<<C+X)-1)>>C)],j=$>>>24,F=$>>>16&255,k=$&65535,!(C+j<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}u>>>=C,l-=C,r.back+=C}if(u>>>=j,l-=j,r.back+=j,r.length=k,F===0){r.mode=zm;break}if(F&32){r.back=-1,r.mode=Di;break}if(F&64){e.msg="invalid literal/length code",r.mode=or;break}r.extra=F&15,r.mode=Fm;case Fm:if(r.extra){for(V=r.extra;l<V;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Hm;case Hm:for(;$=r.distcode[u&(1<<r.distbits)-1],j=$>>>24,F=$>>>16&255,k=$&65535,!(j<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(!(F&240)){for(C=j,X=F,Q=k;$=r.distcode[Q+((u&(1<<C+X)-1)>>C)],j=$>>>24,F=$>>>16&255,k=$&65535,!(C+j<=l);){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}u>>>=C,l-=C,r.back+=C}if(u>>>=j,l-=j,r.back+=j,F&64){e.msg="invalid distance code",r.mode=or;break}r.offset=k,r.extra=F&15,r.mode=jm;case jm:if(r.extra){for(V=r.extra;l<V;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=or;break}r.mode=Dm;case Dm:if(f===0)break e;if(b=_-f,r.offset>b){if(b=r.offset-b,b>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=or;break}b>r.wnext?(b-=r.wnext,T=r.wsize-b):T=r.wnext-b,b>r.length&&(b=r.length),P=r.window}else P=s,T=o-r.offset,b=r.length;b>f&&(b=f),f-=b,r.length-=b;do s[o++]=P[T++];while(--b);r.length===0&&(r.mode=ku);break;case zm:if(f===0)break e;s[o++]=r.length,f--,r.mode=ku;break;case i0:if(r.wrap){for(;l<32;){if(a===0)break e;a--,u|=n[i++]<<l,l+=8}if(_-=f,e.total_out+=_,r.total+=_,_&&(e.adler=r.check=r.flags?Hr(r.check,s,_,o-_):Zd(r.check,s,_,o-_)),_=f,(r.flags?u:Km(u))!==r.check){e.msg="incorrect data check",r.mode=or;break}u=0,l=0}r.mode=qm;case qm:if(r.wrap&&r.flags){for(;l<32;){if(a===0)break e;a--,u+=n[i++]<<l,l+=8}if(u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=or;break}u=0,l=0}r.mode=Vm;case Vm:z=WR;break e;case or:z=GR;break e;case JR:return YR;case QR:default:return bs}return e.next_out=o,e.avail_out=f,e.next_in=i,e.avail_in=a,r.hold=u,r.bits=l,(r.wsize||_!==e.avail_out&&r.mode<or&&(r.mode<i0||t!==_m))&&a4(e,e.output,e.next_out,_-e.avail_out),p-=e.avail_in,_-=e.avail_out,e.total_in+=p,e.total_out+=_,r.total+=_,r.wrap&&_&&(e.adler=r.check=r.flags?Hr(r.check,s,_,e.next_out-_):Zd(r.check,s,_,e.next_out-_)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Di?128:0)+(r.mode===Ru||r.mode===n0?256:0),(p===0&&_===0||t===_m)&&z===dc&&(z=XR),z}function f4(e){if(!e||!e.state)return bs;var t=e.state;return t.window&&(t.window=null),e.state=null,dc}var a0=0,ta=1,Lu=2,pc=3,Cu=4,ra=5,gc=6,yc=7,Gm=0,Ym=1,Xm=2,Jm=3,c0=4,Qm=5,u4=6,Ou=0,eb=1,tb=2,l4=-1,h4=-2,d4=-3,rb=-5,p4=0,g4=1,y4=9,w4=-1,m4=1,b4=2,v4=3,_4=4,E4=0,x4=0,S4=1,A4=2,nb=8;function Yn(e){if(e<ta||e>yc)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}Yn.prototype.init=function(e,t,r,n,s){this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=n,(this.mode===pc||this.mode===Cu)&&(this.windowBits+=16),this.mode===yc&&(this.windowBits+=32),(this.mode===ra||this.mode===gc)&&(this.windowBits=-this.windowBits),this.strm=new qT;var i;switch(this.mode){case ta:case pc:case ra:i=NR(this.strm,this.level,nb,this.windowBits,this.memLevel,this.strategy);break;case Lu:case Cu:case gc:case yc:i=s4(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(i!==Ou){this._error(i);return}this.write_in_progress=!1,this.init_done=!0},Yn.prototype.params=function(){throw new Error("deflateParams Not supported")},Yn.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===a0)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},Yn.prototype.write=function(e,t,r,n,s,i,o){this._writeCheck(),this.write_in_progress=!0;var a=this;return wn.nextTick(function(){a.write_in_progress=!1;var f=a._write(e,t,r,n,s,i,o);a.callback(f[0],f[1]),a.pending_close&&a.close()}),this};function B4(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}Yn.prototype.writeSync=function(e,t,r,n,s,i,o){return this._writeCheck(),this._write(e,t,r,n,s,i,o)},Yn.prototype._write=function(e,t,r,n,s,i,o){if(this.write_in_progress=!0,e!==Gm&&e!==Ym&&e!==Xm&&e!==Jm&&e!==c0&&e!==Qm)throw new Error("Invalid flush value");t==null&&(t=new ue(0),n=0,r=0),s._set?s.set=s._set:s.set=B4;var a=this.strm;a.avail_in=n,a.input=t,a.next_in=r,a.avail_out=o,a.output=s,a.next_out=i;var f;switch(this.mode){case ta:case pc:case ra:f=PR(a,e);break;case yc:case Lu:case Cu:case gc:f=c4(a,e);break;default:throw new Error("Unknown mode "+this.mode)}return this._checkError(f,a,e)||this._error(f),this.write_in_progress=!1,[a.avail_in,a.avail_out]},Yn.prototype._checkError=function(e,t,r){switch(e){case Ou:case rb:if(t.avail_out!==0&&r===c0)return!1;break;case eb:break;case tb:return!1;default:return!1}return!0},Yn.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,this.mode===ta||this.mode===pc||this.mode===ra?UR(this.strm):f4(this.strm),this.mode=a0};var $u;Yn.prototype.reset=function(){switch(this.mode){case ta:case ra:$u=pm(this.strm);break;case Lu:case gc:$u=Wm(this.strm);break}$u!==Ou&&this._error($u)},Yn.prototype._error=function(e){this.onerror(jw[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var ib=Object.freeze({__proto__:null,NONE:a0,DEFLATE:ta,INFLATE:Lu,GZIP:pc,GUNZIP:Cu,DEFLATERAW:ra,INFLATERAW:gc,UNZIP:yc,Z_NO_FLUSH:Gm,Z_PARTIAL_FLUSH:Ym,Z_SYNC_FLUSH:Xm,Z_FULL_FLUSH:Jm,Z_FINISH:c0,Z_BLOCK:Qm,Z_TREES:u4,Z_OK:Ou,Z_STREAM_END:eb,Z_NEED_DICT:tb,Z_ERRNO:l4,Z_STREAM_ERROR:h4,Z_DATA_ERROR:d4,Z_BUF_ERROR:rb,Z_NO_COMPRESSION:p4,Z_BEST_SPEED:g4,Z_BEST_COMPRESSION:y4,Z_DEFAULT_COMPRESSION:w4,Z_FILTERED:m4,Z_HUFFMAN_ONLY:b4,Z_RLE:v4,Z_FIXED:_4,Z_DEFAULT_STRATEGY:E4,Z_BINARY:x4,Z_TEXT:S4,Z_UNKNOWN:A4,Z_DEFLATED:nb,Zlib:Yn});function I4(e,t){if(!e)throw new Error(t)}var Oe={};Object.keys(ib).forEach(function(e){Oe[e]=ib[e]}),Oe.Z_MIN_WINDOWBITS=8,Oe.Z_MAX_WINDOWBITS=15,Oe.Z_DEFAULT_WINDOWBITS=15,Oe.Z_MIN_CHUNK=64,Oe.Z_MAX_CHUNK=1/0,Oe.Z_DEFAULT_CHUNK=16*1024,Oe.Z_MIN_MEMLEVEL=1,Oe.Z_MAX_MEMLEVEL=9,Oe.Z_DEFAULT_MEMLEVEL=8,Oe.Z_MIN_LEVEL=-1,Oe.Z_MAX_LEVEL=9,Oe.Z_DEFAULT_LEVEL=Oe.Z_DEFAULT_COMPRESSION;var na={Z_OK:Oe.Z_OK,Z_STREAM_END:Oe.Z_STREAM_END,Z_NEED_DICT:Oe.Z_NEED_DICT,Z_ERRNO:Oe.Z_ERRNO,Z_STREAM_ERROR:Oe.Z_STREAM_ERROR,Z_DATA_ERROR:Oe.Z_DATA_ERROR,Z_MEM_ERROR:Oe.Z_MEM_ERROR,Z_BUF_ERROR:Oe.Z_BUF_ERROR,Z_VERSION_ERROR:Oe.Z_VERSION_ERROR};Object.keys(na).forEach(function(e){na[na[e]]=e});function sb(e){return new vs(e)}function ob(e){return new _s(e)}function ab(e){return new Ss(e)}function cb(e){return new As(e)}function fb(e){return new Es(e)}function ub(e){return new xs(e)}function lb(e){return new Bs(e)}function hb(e,t,r){return typeof t=="function"&&(r=t,t={}),ao(new vs(t),e,r)}function db(e,t){return co(new vs(t),e)}function pb(e,t,r){return typeof t=="function"&&(r=t,t={}),ao(new Es(t),e,r)}function gb(e,t){return co(new Es(t),e)}function yb(e,t,r){return typeof t=="function"&&(r=t,t={}),ao(new Ss(t),e,r)}function wb(e,t){return co(new Ss(t),e)}function mb(e,t,r){return typeof t=="function"&&(r=t,t={}),ao(new Bs(t),e,r)}function bb(e,t){return co(new Bs(t),e)}function vb(e,t,r){return typeof t=="function"&&(r=t,t={}),ao(new _s(t),e,r)}function _b(e,t){return co(new _s(t),e)}function Eb(e,t,r){return typeof t=="function"&&(r=t,t={}),ao(new xs(t),e,r)}function xb(e,t){return co(new xs(t),e)}function Sb(e,t,r){return typeof t=="function"&&(r=t,t={}),ao(new As(t),e,r)}function Ab(e,t){return co(new As(t),e)}function ao(e,t,r){var n=[],s=0;e.on("error",o),e.on("end",a),e.end(t),i();function i(){for(var f;(f=e.read())!==null;)n.push(f),s+=f.length;e.once("readable",i)}function o(f){e.removeListener("end",a),e.removeListener("readable",i),r(f)}function a(){var f=ue.concat(n,s);n=[],r(null,f),e.close()}}function co(e,t){if(typeof t=="string"&&(t=new ue(t)),!ue.isBuffer(t))throw new TypeError("Not a string or buffer");var r=Oe.Z_FINISH;return e._processChunk(t,r)}function vs(e){if(!(this instanceof vs))return new vs(e);ar.call(this,e,Oe.DEFLATE)}function _s(e){if(!(this instanceof _s))return new _s(e);ar.call(this,e,Oe.INFLATE)}function Es(e){if(!(this instanceof Es))return new Es(e);ar.call(this,e,Oe.GZIP)}function xs(e){if(!(this instanceof xs))return new xs(e);ar.call(this,e,Oe.GUNZIP)}function Ss(e){if(!(this instanceof Ss))return new Ss(e);ar.call(this,e,Oe.DEFLATERAW)}function As(e){if(!(this instanceof As))return new As(e);ar.call(this,e,Oe.INFLATERAW)}function Bs(e){if(!(this instanceof Bs))return new Bs(e);ar.call(this,e,Oe.UNZIP)}function ar(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||Oe.Z_DEFAULT_CHUNK,Dn.call(this,e),e.flush&&e.flush!==Oe.Z_NO_FLUSH&&e.flush!==Oe.Z_PARTIAL_FLUSH&&e.flush!==Oe.Z_SYNC_FLUSH&&e.flush!==Oe.Z_FULL_FLUSH&&e.flush!==Oe.Z_FINISH&&e.flush!==Oe.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||Oe.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<Oe.Z_MIN_CHUNK||e.chunkSize>Oe.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<Oe.Z_MIN_WINDOWBITS||e.windowBits>Oe.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<Oe.Z_MIN_LEVEL||e.level>Oe.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<Oe.Z_MIN_MEMLEVEL||e.memLevel>Oe.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=Oe.Z_FILTERED&&e.strategy!=Oe.Z_HUFFMAN_ONLY&&e.strategy!=Oe.Z_RLE&&e.strategy!=Oe.Z_FIXED&&e.strategy!=Oe.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!ue.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new Oe.Zlib(t);var r=this;this._hadError=!1,this._binding.onerror=function(i,o){r._binding=null,r._hadError=!0;var a=new Error(i);a.errno=o,a.code=na[o],r.emit("error",a)};var n=Oe.Z_DEFAULT_COMPRESSION;typeof e.level=="number"&&(n=e.level);var s=Oe.Z_DEFAULT_STRATEGY;typeof e.strategy=="number"&&(s=e.strategy),this._binding.init(e.windowBits||Oe.Z_DEFAULT_WINDOWBITS,n,e.memLevel||Oe.Z_DEFAULT_MEMLEVEL,s,e.dictionary),this._buffer=new ue(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=s,this.once("end",this.close)}Fr(ar,Dn),ar.prototype.params=function(e,t,r){if(e<Oe.Z_MIN_LEVEL||e>Oe.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=Oe.Z_FILTERED&&t!=Oe.Z_HUFFMAN_ONLY&&t!=Oe.Z_RLE&&t!=Oe.Z_FIXED&&t!=Oe.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(Oe.Z_SYNC_FLUSH,function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,r&&r())})}else wn.nextTick(r)},ar.prototype.reset=function(){return this._binding.reset()},ar.prototype._flush=function(e){this._transform(new ue(0),"",e)},ar.prototype.flush=function(e,t){var r=this._writableState;if((typeof e=="function"||e===void 0&&!t)&&(t=e,e=Oe.Z_FULL_FLUSH),r.ended)t&&wn.nextTick(t);else if(r.ending)t&&this.once("end",t);else if(r.needDrain){var n=this;this.once("drain",function(){n.flush(t)})}else this._flushFlag=e,this.write(new ue(0),"",t)},ar.prototype.close=function(e){if(e&&wn.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;wn.nextTick(function(){t.emit("close")})}},ar.prototype._transform=function(e,t,r){var n,s=this._writableState,i=s.ending||s.ended,o=i&&(!e||s.length===e.length);if(!e===null&&!ue.isBuffer(e))return r(new Error("invalid input"));o?n=Oe.Z_FINISH:(n=this._flushFlag,e.length>=s.length&&(this._flushFlag=this._opts.flush||Oe.Z_NO_FLUSH)),this._processChunk(e,n,r)},ar.prototype._processChunk=function(e,t,r){var n=e&&e.length,s=this._chunkSize-this._offset,i=0,o=this,a=typeof r=="function";if(!a){var f=[],u=0,l;this.on("error",function(P){l=P});do var p=this._binding.writeSync(t,e,i,n,this._buffer,this._offset,s);while(!this._hadError&&T(p[0],p[1]));if(this._hadError)throw l;var _=ue.concat(f,u);return this.close(),_}var b=this._binding.write(t,e,i,n,this._buffer,this._offset,s);b.buffer=e,b.callback=T;function T(P,$){if(!o._hadError){var j=s-$;if(I4(j>=0,"have should not go down"),j>0){var F=o._buffer.slice(o._offset,o._offset+j);o._offset+=j,a?o.push(F):(f.push(F),u+=F.length)}if(($===0||o._offset>=o._chunkSize)&&(s=o._chunkSize,o._offset=0,o._buffer=new ue(o._chunkSize)),$===0){if(i+=n-P,n=P,!a)return!0;var k=o._binding.write(t,e,i,n,o._buffer,o._offset,o._chunkSize);k.callback=T,k.buffer=e;return}if(!a)return!1;r()}}},Fr(vs,ar),Fr(_s,ar),Fr(Es,ar),Fr(xs,ar),Fr(Ss,ar),Fr(As,ar),Fr(Bs,ar);var T4={codes:na,createDeflate:sb,createInflate:ob,createDeflateRaw:ab,createInflateRaw:cb,createGzip:fb,createGunzip:ub,createUnzip:lb,deflate:hb,deflateSync:db,gzip:pb,gzipSync:gb,deflateRaw:yb,deflateRawSync:wb,unzip:mb,unzipSync:bb,inflate:vb,inflateSync:_b,gunzip:Eb,gunzipSync:xb,inflateRaw:Sb,inflateRawSync:Ab,Deflate:vs,Inflate:_s,Gzip:Es,Gunzip:xs,DeflateRaw:Ss,InflateRaw:As,Unzip:Bs,Zlib:ar},R4=Object.freeze({__proto__:null,codes:na,createDeflate:sb,createInflate:ob,createDeflateRaw:ab,createInflateRaw:cb,createGzip:fb,createGunzip:ub,createUnzip:lb,deflate:hb,deflateSync:db,gzip:pb,gzipSync:gb,deflateRaw:yb,deflateRawSync:wb,unzip:mb,unzipSync:bb,inflate:vb,inflateSync:_b,gunzip:Eb,gunzipSync:xb,inflateRaw:Sb,inflateRawSync:Ab,Deflate:vs,Inflate:_s,Gzip:Es,Gunzip:xs,DeflateRaw:Ss,InflateRaw:As,Unzip:Bs,Zlib:ar,default:T4}),k4=ii(R4),L4=ii(p8),C4=ii(PT);Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.InvalidStatusCodeError=Ws.InvalidCertError=void 0;const Bb=Object.freeze({redirect:!0,expectStatusCode:200,headers:{},full:!1,keepAlive:!0,cors:!1,referrer:!1,sslAllowSelfSigned:!1,_redirectCount:0});class f0 extends Error{constructor(t,r){super(t),this.fingerprint256=r}}Ws.InvalidCertError=f0;class u0 extends Error{constructor(t){super(`Request Failed. Status Code: ${t}`),this.statusCode=t}}Ws.InvalidStatusCodeError=u0;function Ib(e,t){if(!t||t==="text"||t==="json")try{let r=new TextDecoder("utf8",{fatal:!0}).decode(e);if(t==="text")return r;try{return JSON.parse(r)}catch(n){if(t==="json")throw n;return r}}catch(r){if(t==="text"||t==="json")throw r}return e}let Tb={};function l0(e,t){let r={...Bb,...t};const n=HT,s=zT,i=k4,{promisify:o}=L4,{resolve:a}=C4,f=!!/^https/.test(e);let u={method:r.method||"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}};const l=_=>_.replace(/:| /g,"").toLowerCase();if(r.keepAlive){const _={keepAlive:!0,keepAliveMsecs:3e4,maxFreeSockets:1024,maxCachedSessions:1024},b=[f,f&&r.sslPinnedCertificates?.map(T=>l(T)).sort()].join();u.agent=Tb[b]||(Tb[b]=new(f?s:n).Agent(_))}r.type==="json"&&(u.headers["Content-Type"]="application/json"),r.data&&(r.method||(u.method="POST"),u.body=r.type==="json"?JSON.stringify(r.data):r.data),u.headers={...u.headers,...r.headers},r.sslAllowSelfSigned&&(u.rejectUnauthorized=!1);const p=async _=>{const b=_.statusCode;if(r.redirect&&300<=b&&b<400&&_.headers.location){if(r._redirectCount==10)throw new Error("Request failed. Too much redirects.");return r._redirectCount+=1,await l0(a(e,_.headers.location),r)}if(r.expectStatusCode&&b!==r.expectStatusCode)throw _.resume(),new u0(b);let T=[];for await(const F of _)T.push(F);let P=se.Buffer.concat(T);const $=_.headers["content-encoding"];$==="br"&&(P=await o(i.brotliDecompress)(P)),($==="gzip"||$==="deflate")&&(P=await o(i.unzip)(P));const j=Ib(P,r.type);return r.full?{headers:_.headers,status:b,body:j}:j};return new Promise((_,b)=>{const T=async F=>{if(F&&F.code==="DEPTH_ZERO_SELF_SIGNED_CERT")try{await l0(e,{...r,sslAllowSelfSigned:!0,sslPinnedCertificates:[]})}catch(k){k&&k.fingerprint256&&(F=new f0(`Self-signed SSL certificate: ${k.fingerprint256}`,k.fingerprint256))}b(F)},P=(f?s:n).request(e,u,F=>{F.on("error",T),(async()=>{try{_(await p(F))}catch(k){b(k)}})()});P.on("error",T);const $=r.sslPinnedCertificates?.map(F=>l(F)),j=F=>{const k=l(F.getPeerCertificate()?.fingerprint256||"");if(!(!k&&F.isSessionReused())&&!$.includes(k))return P.emit("error",new f0(`Invalid SSL certificate: ${k} Expected: ${$}`,k)),P.abort()};r.sslPinnedCertificates&&P.on("socket",F=>{F.listeners("secureConnect").map(C=>(C.name||"").replace("bound ","")).includes("mfetchSecureConnect")||F.on("secureConnect",j.bind(null,F))}),r.keepAlive&&P.setNoDelay(!0),u.body&&P.write(u.body),P.end()})}const O4=new Set(["Accept","Accept-Language","Content-Language","Content-Type"].map(e=>e.toLowerCase())),$4=new Set(["Accept-Charset","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","Connection","Content-Length","Cookie","Cookie2","Date","DNT","Expect","Host","Keep-Alive","Origin","Referer","TE","Trailer","Transfer-Encoding","Upgrade","Via"].map(e=>e.toLowerCase()));async function M4(e,t){let r={...Bb,...t};const n=new Headers;r.type==="json"&&n.set("Content-Type","application/json");let s=new URL(e);if(s.username){const f=btoa(`${s.username}:${s.password}`);n.set("Authorization",`Basic ${f}`),s.username="",s.password=""}e=""+s;for(let f in r.headers){const u=f.toLowerCase();(O4.has(u)||r.cors&&!$4.has(u))&&n.set(f,r.headers[f])}let i={headers:n,redirect:r.redirect?"follow":"manual"};r.referrer||(i.referrerPolicy="no-referrer"),r.cors&&(i.mode="cors"),r.data&&(r.method||(i.method="POST"),i.body=r.type==="json"?JSON.stringify(r.data):r.data);const o=await fetch(e,i);if(r.expectStatusCode&&o.status!==r.expectStatusCode)throw new u0(o.status);const a=Ib(new Uint8Array(await o.arrayBuffer()),r.type);return r.full?{headers:Object.fromEntries(o.headers.entries()),status:o.status,body:a}:a}const N4=!!(typeof process=="object"&&process.versions&&process.versions.node&&process.versions.v8);function P4(e,t){return(N4?l0:M4)(e,t)}Ws.default=P4,Object.defineProperty(qo,"__esModule",{value:!0}),qo.getProvider=qo.fetchFromProvider=void 0;const U4=Ws,F4=async(e,t)=>(await(0,U4.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;qo.fetchFromProvider=F4;const H4=e=>{if(typeof e=="string")return e;if(e?.connection?.url!==void 0)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")};qo.getProvider=H4,function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(s,i,o,a){a===void 0&&(a=o);var f=Object.getOwnPropertyDescriptor(i,o);(!f||("get"in f?!i.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(s,a,f)}:function(s,i,o,a){a===void 0&&(a=o),s[a]=i[o]}),r=Pe&&Pe.__exportStar||function(s,i){for(var o in s)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,s,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.toAscii=e.stripHexPrefix=e.padToEven=e.isHexString=e.isHexPrefixed=e.getKeys=e.getBinarySize=e.fromUtf8=e.fromAscii=e.arrayContainsArray=void 0,r(Ff,e),r(Wf,e),r(qh,e),r(qa,e),r(Qf,e),r(rn,e),r(Ks,e),r(Xh,e),r(Sy,e),r(ru,e);var n=Jt;Object.defineProperty(e,"arrayContainsArray",{enumerable:!0,get:function(){return n.arrayContainsArray}}),Object.defineProperty(e,"fromAscii",{enumerable:!0,get:function(){return n.fromAscii}}),Object.defineProperty(e,"fromUtf8",{enumerable:!0,get:function(){return n.fromUtf8}}),Object.defineProperty(e,"getBinarySize",{enumerable:!0,get:function(){return n.getBinarySize}}),Object.defineProperty(e,"getKeys",{enumerable:!0,get:function(){return n.getKeys}}),Object.defineProperty(e,"isHexPrefixed",{enumerable:!0,get:function(){return n.isHexPrefixed}}),Object.defineProperty(e,"isHexString",{enumerable:!0,get:function(){return n.isHexString}}),Object.defineProperty(e,"padToEven",{enumerable:!0,get:function(){return n.padToEven}}),Object.defineProperty(e,"stripHexPrefix",{enumerable:!0,get:function(){return n.stripHexPrefix}}),Object.defineProperty(e,"toAscii",{enumerable:!0,get:function(){return n.toAscii}}),r(nu,e),r(qo,e)}(Uf);var Wr={},Zr={},Gr={},Xn={},wc={};Object.defineProperty(wc,"__esModule",{value:!0}),wc.StructError=void 0;class j4 extends TypeError{constructor(t,r){let n;const{message:s,explanation:i,...o}=t,{path:a}=t,f=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??f),i!=null&&(this.cause=f),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...r()])}}wc.StructError=j4;var jr={},Rr={};Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.run=Rr.toFailures=Rr.toFailure=Rr.shiftIterator=Rr.print=Rr.isPlainObject=Rr.isObject=void 0;function D4(e){return mc(e)&&typeof e[Symbol.iterator]=="function"}function mc(e){return typeof e=="object"&&e!==null}Rr.isObject=mc;function z4(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}Rr.isPlainObject=z4;function Rb(e){return typeof e=="symbol"?e.toString():typeof e=="string"?JSON.stringify(e):`${e}`}Rr.print=Rb;function q4(e){const{done:t,value:r}=e.next();return t?void 0:r}Rr.shiftIterator=q4;function kb(e,t,r,n){if(e===!0)return;e===!1?e={}:typeof e=="string"&&(e={message:e});const{path:s,branch:i}=t,{type:o}=r,{refinement:a,message:f=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${Rb(n)}\``}=e;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...e,message:f}}Rr.toFailure=kb;function*V4(e,t,r,n){D4(e)||(e=[e]);for(const s of e){const i=kb(s,t,r,n);i&&(yield i)}}Rr.toFailures=V4;function*Lb(e,t,r={}){const{path:n=[],branch:s=[e],coerce:i=!1,mask:o=!1}=r,a={path:n,branch:s};if(i&&(e=t.coercer(e,a),o&&t.type!=="type"&&mc(t.schema)&&mc(e)&&!Array.isArray(e)))for(const u in e)t.schema[u]===void 0&&delete e[u];let f="valid";for(const u of t.validator(e,a))u.explanation=r.message,f="not_valid",yield[u,void 0];for(let[u,l,p]of t.entries(e,a)){const _=Lb(l,p,{path:u===void 0?n:[...n,u],branch:u===void 0?s:[...s,l],coerce:i,mask:o,message:r.message});for(const b of _)b[0]?(f=b[0].refinement===null||b[0].refinement===void 0?"not_valid":"not_refined",yield[b[0],void 0]):i&&(l=b[1],u===void 0?e=l:e instanceof Map?e.set(u,l):e instanceof Set?e.add(l):mc(e)&&(l!==void 0||u in e)&&(e[u]=l))}if(f!=="not_valid")for(const u of t.refiner(e,a))u.explanation=r.message,f="not_refined",yield[u,void 0];f==="valid"&&(yield[void 0,e])}Rr.run=Lb,Object.defineProperty(jr,"__esModule",{value:!0}),jr.validate=jr.is=jr.mask=jr.create=jr.assert=jr.Struct=void 0;const K4=wc,Mu=Rr;class W4{constructor(t){const{type:r,schema:n,validator:s,refiner:i,coercer:o=f=>f,entries:a=function*(){}}=t;this.type=r,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(f,u)=>{const l=s(f,u);return(0,Mu.toFailures)(l,u,this,f)}:this.validator=()=>[],i?this.refiner=(f,u)=>{const l=i(f,u);return(0,Mu.toFailures)(l,u,this,f)}:this.refiner=()=>[]}assert(t,r){return Cb(t,this,r)}create(t,r){return Ob(t,this,r)}is(t){return Mb(t,this)}mask(t,r){return $b(t,this,r)}validate(t,r={}){return ia(t,this,r)}}jr.Struct=W4;function Cb(e,t,r){const n=ia(e,t,{message:r});if(n[0])throw n[0]}jr.assert=Cb;function Ob(e,t,r){const n=ia(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}jr.create=Ob;function $b(e,t,r){const n=ia(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}jr.mask=$b;function Mb(e,t){return!ia(e,t)[0]}jr.is=Mb;function ia(e,t,r={}){const n=(0,Mu.run)(e,t,r),s=(0,Mu.shiftIterator)(n);return s[0]?[new K4.StructError(s[0],function*(){for(const a of n)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}jr.validate=ia;var Is={},Ve={},kr={},Nb;function Pb(){if(Nb)return kr;Nb=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.pick=kr.partial=kr.omit=kr.lazy=kr.dynamic=kr.deprecated=kr.define=kr.assign=void 0;const e=jr,t=h0();function r(...l){const p=l[0]?.type==="type",_=l.map(({schema:T})=>T),b=Object.assign({},..._);return p?(0,t.type)(b):(0,t.object)(b)}kr.assign=r;function n(l,p){return new e.Struct({type:l,schema:null,validator:p})}kr.define=n;function s(l,p){return new e.Struct({...l,refiner:(_,b)=>_===void 0||l.refiner(_,b),validator(_,b){return _===void 0?!0:(p(_,b),l.validator(_,b))}})}kr.deprecated=s;function i(l){return new e.Struct({type:"dynamic",schema:null,*entries(p,_){yield*l(p,_).entries(p,_)},validator(p,_){return l(p,_).validator(p,_)},coercer(p,_){return l(p,_).coercer(p,_)},refiner(p,_){return l(p,_).refiner(p,_)}})}kr.dynamic=i;function o(l){let p;return new e.Struct({type:"lazy",schema:null,*entries(_,b){p??(p=l()),yield*p.entries(_,b)},validator(_,b){return p??(p=l()),p.validator(_,b)},coercer(_,b){return p??(p=l()),p.coercer(_,b)},refiner(_,b){return p??(p=l()),p.refiner(_,b)}})}kr.lazy=o;function a(l,p){const{schema:_}=l,b={..._};for(const T of p)delete b[T];switch(l.type){case"type":return(0,t.type)(b);default:return(0,t.object)(b)}}kr.omit=a;function f(l){const p=l instanceof e.Struct,_=p?{...l.schema}:{...l};for(const b in _)_[b]=(0,t.optional)(_[b]);return p&&l.type==="type"?(0,t.type)(_):(0,t.object)(_)}kr.partial=f;function u(l,p){const{schema:_}=l,b={};for(const T of p)b[T]=_[T];switch(l.type){case"type":return(0,t.type)(b);default:return(0,t.object)(b)}}return kr.pick=u,kr}var Ub;function h0(){if(Ub)return Ve;Ub=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.unknown=Ve.union=Ve.type=Ve.tuple=Ve.string=Ve.set=Ve.regexp=Ve.record=Ve.optional=Ve.object=Ve.number=Ve.nullable=Ve.never=Ve.map=Ve.literal=Ve.intersection=Ve.integer=Ve.instance=Ve.func=Ve.enums=Ve.date=Ve.boolean=Ve.bigint=Ve.array=Ve.any=void 0;const e=jr,t=Rr,r=Pb();function n(){return(0,r.define)("any",()=>!0)}Ve.any=n;function s(m){return new e.Struct({type:"array",schema:m,*entries(d){if(m&&Array.isArray(d))for(const[c,h]of d.entries())yield[c,h,m]},coercer(d){return Array.isArray(d)?d.slice():d},validator(d){return Array.isArray(d)||`Expected an array value, but received: ${(0,t.print)(d)}`}})}Ve.array=s;function i(){return(0,r.define)("bigint",m=>typeof m=="bigint")}Ve.bigint=i;function o(){return(0,r.define)("boolean",m=>typeof m=="boolean")}Ve.boolean=o;function a(){return(0,r.define)("date",m=>m instanceof Date&&!isNaN(m.getTime())||`Expected a valid \`Date\` object, but received: ${(0,t.print)(m)}`)}Ve.date=a;function f(m){const d={},c=m.map(h=>(0,t.print)(h)).join();for(const h of m)d[h]=h;return new e.Struct({type:"enums",schema:d,validator(h){return m.includes(h)||`Expected one of \`${c}\`, but received: ${(0,t.print)(h)}`}})}Ve.enums=f;function u(){return(0,r.define)("func",m=>typeof m=="function"||`Expected a function, but received: ${(0,t.print)(m)}`)}Ve.func=u;function l(m){return(0,r.define)("instance",d=>d instanceof m||`Expected a \`${m.name}\` instance, but received: ${(0,t.print)(d)}`)}Ve.instance=l;function p(){return(0,r.define)("integer",m=>typeof m=="number"&&!isNaN(m)&&Number.isInteger(m)||`Expected an integer, but received: ${(0,t.print)(m)}`)}Ve.integer=p;function _(m){return new e.Struct({type:"intersection",schema:null,*entries(d,c){for(const{entries:h}of m)yield*h(d,c)},*validator(d,c){for(const{validator:h}of m)yield*h(d,c)},*refiner(d,c){for(const{refiner:h}of m)yield*h(d,c)}})}Ve.intersection=_;function b(m){const d=(0,t.print)(m),c=typeof m;return new e.Struct({type:"literal",schema:c==="string"||c==="number"||c==="boolean"?m:null,validator(h){return h===m||`Expected the literal \`${d}\`, but received: ${(0,t.print)(h)}`}})}Ve.literal=b;function T(m,d){return new e.Struct({type:"map",schema:null,*entries(c){if(m&&d&&c instanceof Map)for(const[h,y]of c.entries())yield[h,h,m],yield[h,y,d]},coercer(c){return c instanceof Map?new Map(c):c},validator(c){return c instanceof Map||`Expected a \`Map\` object, but received: ${(0,t.print)(c)}`}})}Ve.map=T;function P(){return(0,r.define)("never",()=>!1)}Ve.never=P;function $(m){return new e.Struct({...m,validator:(d,c)=>d===null||m.validator(d,c),refiner:(d,c)=>d===null||m.refiner(d,c)})}Ve.nullable=$;function j(){return(0,r.define)("number",m=>typeof m=="number"&&!isNaN(m)||`Expected a number, but received: ${(0,t.print)(m)}`)}Ve.number=j;function F(m){const d=m?Object.keys(m):[],c=P();return new e.Struct({type:"object",schema:m??null,*entries(h){if(m&&(0,t.isObject)(h)){const y=new Set(Object.keys(h));for(const v of d)y.delete(v),yield[v,h[v],m[v]];for(const v of y)yield[v,h[v],c]}},validator(h){return(0,t.isObject)(h)||`Expected an object, but received: ${(0,t.print)(h)}`},coercer(h){return(0,t.isObject)(h)?{...h}:h}})}Ve.object=F;function k(m){return new e.Struct({...m,validator:(d,c)=>d===void 0||m.validator(d,c),refiner:(d,c)=>d===void 0||m.refiner(d,c)})}Ve.optional=k;function C(m,d){return new e.Struct({type:"record",schema:null,*entries(c){if((0,t.isObject)(c))for(const h in c){const y=c[h];yield[h,h,m],yield[h,y,d]}},validator(c){return(0,t.isObject)(c)||`Expected an object, but received: ${(0,t.print)(c)}`}})}Ve.record=C;function X(){return(0,r.define)("regexp",m=>m instanceof RegExp)}Ve.regexp=X;function Q(m){return new e.Struct({type:"set",schema:null,*entries(d){if(m&&d instanceof Set)for(const c of d)yield[c,c,m]},coercer(d){return d instanceof Set?new Set(d):d},validator(d){return d instanceof Set||`Expected a \`Set\` object, but received: ${(0,t.print)(d)}`}})}Ve.set=Q;function Z(){return(0,r.define)("string",m=>typeof m=="string"||`Expected a string, but received: ${(0,t.print)(m)}`)}Ve.string=Z;function z(m){const d=P();return new e.Struct({type:"tuple",schema:null,*entries(c){if(Array.isArray(c)){const h=Math.max(m.length,c.length);for(let y=0;y<h;y++)yield[y,c[y],m[y]||d]}},validator(c){return Array.isArray(c)||`Expected an array, but received: ${(0,t.print)(c)}`}})}Ve.tuple=z;function G(m){const d=Object.keys(m);return new e.Struct({type:"type",schema:m,*entries(c){if((0,t.isObject)(c))for(const h of d)yield[h,c[h],m[h]]},validator(c){return(0,t.isObject)(c)||`Expected an object, but received: ${(0,t.print)(c)}`},coercer(c){return(0,t.isObject)(c)?{...c}:c}})}Ve.type=G;function D(m){const d=m.map(c=>c.type).join(" | ");return new e.Struct({type:"union",schema:null,coercer(c){for(const h of m){const[y,v]=h.validate(c,{coerce:!0});if(!y)return v}return c},validator(c,h){const y=[];for(const v of m){const[...S]=(0,t.run)(c,v,h),[B]=S;if(!B?.[0])return[];for(const[L]of S)L&&y.push(L)}return[`Expected the value to satisfy a union of \`${d}\`, but received: ${(0,t.print)(c)}`,...y]}})}Ve.union=D;function V(){return(0,r.define)("unknown",()=>!0)}return Ve.unknown=V,Ve}Object.defineProperty(Is,"__esModule",{value:!0}),Is.trimmed=Is.defaulted=Is.coerce=void 0;const Fb=jr,Hb=Rr,jb=h0();function d0(e,t,r){return new Fb.Struct({...e,coercer:(n,s)=>(0,Fb.is)(n,t)?e.coercer(r(n,s),s):e.coercer(n,s)})}Is.coerce=d0;function Z4(e,t,r={}){return d0(e,(0,jb.unknown)(),n=>{const s=typeof t=="function"?t():t;if(n===void 0)return s;if(!r.strict&&(0,Hb.isPlainObject)(n)&&(0,Hb.isPlainObject)(s)){const i={...n};let o=!1;for(const a in s)i[a]===void 0&&(i[a]=s[a],o=!0);if(o)return i}return n})}Is.defaulted=Z4;function G4(e){return d0(e,(0,jb.string)(),t=>t.trim())}Is.trimmed=G4;var nn={};Object.defineProperty(nn,"__esModule",{value:!0}),nn.refine=nn.size=nn.pattern=nn.nonempty=nn.min=nn.max=nn.empty=void 0;const Y4=jr,X4=Rr;function J4(e){return fo(e,"empty",t=>{const r=Db(t);return r===0||`Expected an empty ${e.type} but received one with a size of \`${r}\``})}nn.empty=J4;function Db(e){return e instanceof Map||e instanceof Set?e.size:e.length}function Q4(e,t,r={}){const{exclusive:n}=r;return fo(e,"max",s=>n?s<t:s<=t||`Expected a ${e.type} less than ${n?"":"or equal to "}${t} but received \`${s}\``)}nn.max=Q4;function e5(e,t,r={}){const{exclusive:n}=r;return fo(e,"min",s=>n?s>t:s>=t||`Expected a ${e.type} greater than ${n?"":"or equal to "}${t} but received \`${s}\``)}nn.min=e5;function t5(e){return fo(e,"nonempty",t=>Db(t)>0||`Expected a nonempty ${e.type} but received an empty one`)}nn.nonempty=t5;function r5(e,t){return fo(e,"pattern",r=>t.test(r)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${r}"`)}nn.pattern=r5;function n5(e,t,r=t){const n=`Expected a ${e.type}`,s=t===r?`of \`${t}\``:`between \`${t}\` and \`${r}\``;return fo(e,"size",i=>{if(typeof i=="number"||i instanceof Date)return t<=i&&i<=r||`${n} ${s} but received \`${i}\``;if(i instanceof Map||i instanceof Set){const{size:a}=i;return t<=a&&a<=r||`${n} with a size ${s} but received one with a size of \`${a}\``}const{length:o}=i;return t<=o&&o<=r||`${n} with a length ${s} but received one with a length of \`${o}\``})}nn.size=n5;function fo(e,t,r){return new Y4.Struct({...e,*refiner(n,s){yield*e.refiner(n,s);const i=r(n,s),o=(0,X4.toFailures)(i,s,e,n);for(const a of o)yield{...a,refinement:t}}})}nn.refine=fo,function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Pe&&Pe.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(wc,e),r(jr,e),r(Is,e),r(nn,e),r(h0(),e),r(Pb(),e)}(Xn);var Rn={};class p0 extends Error{constructor(t,{cause:r}={}){super(t),this.name=p0.name,r&&(this.cause=r),this.message=t}}var i5=Object.freeze({__proto__:null,ErrorWithCause:p0}),s5=ii(i5);const o5=(e,t)=>{if(!e||!t||!(e instanceof Error)||!(t.prototype instanceof Error)&&t!==Error)return;const r=new Set;let n=e;for(;n&&!r.has(n);){if(r.add(n),n instanceof t)return n;n=Nu(n)}},Nu=e=>{if(!(!e||typeof e!="object"||!("cause"in e)))if(typeof e.cause=="function"){const t=e.cause();return t instanceof Error?t:void 0}else return e.cause instanceof Error?e.cause:void 0},zb=(e,t)=>{if(!(e instanceof Error))return"";const r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;const n=Nu(e);return n?(t.add(e),r+`
caused by: `+zb(n,t)):r},a5=e=>zb(e,new Set),qb=(e,t,r)=>{if(!(e instanceof Error))return"";const n=r?"":e.message||"";if(t.has(e))return n+": ...";const s=Nu(e);if(s){t.add(e);const i="cause"in e&&typeof e.cause=="function";return n+(i?"":": ")+qb(s,t,i)}else return n};var c5=Object.freeze({__proto__:null,findCauseByReference:o5,getErrorCause:Nu,stackWithCauses:a5,messageWithCauses:e=>qb(e,new Set)}),f5=ii(c5);const{ErrorWithCause:u5}=s5,{findCauseByReference:l5,getErrorCause:h5,messageWithCauses:d5,stackWithCauses:p5}=f5;var g5={ErrorWithCause:u5,findCauseByReference:l5,getErrorCause:h5,stackWithCauses:p5,messageWithCauses:d5},Pu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateNumberSize=e.calculateStringSize=e.isASCII=e.isPlainObject=e.ESCAPE_CHARACTERS_REGEXP=e.JsonSize=e.getKnownPropertyNames=e.hasProperty=e.isObject=e.isNullOrUndefined=e.isNonEmptyArray=void 0;function t(l){return Array.isArray(l)&&l.length>0}e.isNonEmptyArray=t;function r(l){return l==null}e.isNullOrUndefined=r;function n(l){return!!l&&typeof l=="object"&&!Array.isArray(l)}e.isObject=n;const s=(l,p)=>Object.hasOwnProperty.call(l,p);e.hasProperty=s;function i(l){return Object.getOwnPropertyNames(l)}e.getKnownPropertyNames=i,function(l){l[l.Null=4]="Null",l[l.Comma=1]="Comma",l[l.Wrapper=1]="Wrapper",l[l.True=4]="True",l[l.False=5]="False",l[l.Quote=1]="Quote",l[l.Colon=1]="Colon",l[l.Date=24]="Date"}(e.JsonSize||(e.JsonSize={})),e.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function o(l){if(typeof l!="object"||l===null)return!1;try{let p=l;for(;Object.getPrototypeOf(p)!==null;)p=Object.getPrototypeOf(p);return Object.getPrototypeOf(l)===p}catch{return!1}}e.isPlainObject=o;function a(l){return l.charCodeAt(0)<=127}e.isASCII=a;function f(l){return l.split("").reduce((_,b)=>a(b)?_+1:_+2,0)+(l.match(e.ESCAPE_CHARACTERS_REGEXP)??[]).length}e.calculateStringSize=f;function u(l){return l.toString().length}e.calculateNumberSize=u})(Pu),Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.wrapError=Rn.getErrorMessage=Rn.isErrorWithStack=Rn.isErrorWithMessage=Rn.isErrorWithCode=void 0;const y5=g5,Vb=Pu;function w5(e){return e instanceof Error||(0,Vb.isObject)(e)&&e.constructor.name==="Error"}function Kb(e){return typeof e=="object"&&e!==null&&"code"in e}Rn.isErrorWithCode=Kb;function Wb(e){return typeof e=="object"&&e!==null&&"message"in e}Rn.isErrorWithMessage=Wb;function m5(e){return typeof e=="object"&&e!==null&&"stack"in e}Rn.isErrorWithStack=m5;function b5(e){return Wb(e)&&typeof e.message=="string"?e.message:(0,Vb.isNullOrUndefined)(e)?"":String(e)}Rn.getErrorMessage=b5;function v5(e,t){if(w5(e)){let r;return Error.length===2?r=new Error(t,{cause:e}):r=new y5.ErrorWithCause(t,{cause:e}),Kb(e)&&(r.code=e.code),r}return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}Rn.wrapError=v5,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.assertExhaustive=Gr.assertStruct=Gr.assert=Gr.AssertionError=void 0;const _5=Xn,E5=Rn;function x5(e){return typeof e?.prototype?.constructor?.name=="string"}function S5(e){return(0,E5.getErrorMessage)(e).replace(/\.$/u,"")}function Zb(e,t){return x5(e)?new e({message:t}):e({message:t})}class g0 extends Error{constructor(t){super(t.message),this.code="ERR_ASSERTION"}}Gr.AssertionError=g0;function A5(e,t="Assertion failed.",r=g0){if(!e)throw t instanceof Error?t:Zb(r,t)}Gr.assert=A5;function B5(e,t,r="Assertion failed",n=g0){try{(0,_5.assert)(e,t)}catch(s){throw Zb(n,`${r}: ${S5(s)}.`)}}Gr.assertStruct=B5;function I5(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}Gr.assertExhaustive=I5;var bc={};Object.defineProperty(bc,"__esModule",{value:!0}),bc.base64=void 0;const T5=Xn,R5=Gr,k5=(e,t={})=>{const r=t.paddingRequired??!1,n=t.characterSet??"base64";let s;n==="base64"?s=String.raw`[A-Za-z0-9+\/]`:((0,R5.assert)(n==="base64url"),s=String.raw`[-_A-Za-z0-9]`);let i;return r?i=new RegExp(`^(?:${s}{4})*(?:${s}{3}=|${s}{2}==)?$`,"u"):i=new RegExp(`^(?:${s}{4})*(?:${s}{2,3}|${s}{3}=|${s}{2}==)?$`,"u"),(0,T5.pattern)(e,i)};bc.base64=k5;var St={},y0={};(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.createBase58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64urlnopad=e.base64url=e.base64nopad=e.base64=e.base32crockford=e.base32hexnopad=e.base32hex=e.base32nopad=e.base32=e.base16=e.utils=void 0,e.assertNumber=t;function t(m){if(!Number.isSafeInteger(m))throw new Error(`Wrong integer: ${m}`)}function r(m){return m instanceof Uint8Array||m!=null&&typeof m=="object"&&m.constructor.name==="Uint8Array"}function n(...m){const d=v=>v,c=(v,S)=>B=>v(S(B)),h=m.map(v=>v.encode).reduceRight(c,d),y=m.map(v=>v.decode).reduce(c,d);return{encode:h,decode:y}}function s(m){return{encode:d=>{if(!Array.isArray(d)||d.length&&typeof d[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return d.map(c=>{if(t(c),c<0||c>=m.length)throw new Error(`Digit index outside alphabet: ${c} (alphabet: ${m.length})`);return m[c]})},decode:d=>{if(!Array.isArray(d)||d.length&&typeof d[0]!="string")throw new Error("alphabet.decode input should be array of strings");return d.map(c=>{if(typeof c!="string")throw new Error(`alphabet.decode: not string element=${c}`);const h=m.indexOf(c);if(h===-1)throw new Error(`Unknown letter: "${c}". Allowed: ${m}`);return h})}}}function i(m=""){if(typeof m!="string")throw new Error("join separator should be string");return{encode:d=>{if(!Array.isArray(d)||d.length&&typeof d[0]!="string")throw new Error("join.encode input should be array of strings");for(let c of d)if(typeof c!="string")throw new Error(`join.encode: non-string input=${c}`);return d.join(m)},decode:d=>{if(typeof d!="string")throw new Error("join.decode input should be string");return d.split(m)}}}function o(m,d="="){if(t(m),typeof d!="string")throw new Error("padding chr should be string");return{encode(c){if(!Array.isArray(c)||c.length&&typeof c[0]!="string")throw new Error("padding.encode input should be array of strings");for(let h of c)if(typeof h!="string")throw new Error(`padding.encode: non-string input=${h}`);for(;c.length*m%8;)c.push(d);return c},decode(c){if(!Array.isArray(c)||c.length&&typeof c[0]!="string")throw new Error("padding.encode input should be array of strings");for(let y of c)if(typeof y!="string")throw new Error(`padding.decode: non-string input=${y}`);let h=c.length;if(h*m%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;h>0&&c[h-1]===d;h--)if(!((h-1)*m%8))throw new Error("Invalid padding: string has too much padding");return c.slice(0,h)}}}function a(m){if(typeof m!="function")throw new Error("normalize fn should be function");return{encode:d=>d,decode:d=>m(d)}}function f(m,d,c){if(d<2)throw new Error(`convertRadix: wrong from=${d}, base cannot be less than 2`);if(c<2)throw new Error(`convertRadix: wrong to=${c}, base cannot be less than 2`);if(!Array.isArray(m))throw new Error("convertRadix: data should be array");if(!m.length)return[];let h=0;const y=[],v=Array.from(m);for(v.forEach(S=>{if(t(S),S<0||S>=d)throw new Error(`Wrong integer: ${S}`)});;){let S=0,B=!0;for(let L=h;L<v.length;L++){const I=v[L],w=d*S+I;if(!Number.isSafeInteger(w)||d*S/d!==S||w-I!==d*S)throw new Error("convertRadix: carry overflow");S=w%c;const R=Math.floor(w/c);if(v[L]=R,!Number.isSafeInteger(R)||R*c+S!==w)throw new Error("convertRadix: carry overflow");if(B)R?B=!1:h=L;else continue}if(y.push(S),B)break}for(let S=0;S<m.length-1&&m[S]===0;S++)y.push(0);return y.reverse()}const u=(m,d)=>d?u(d,m%d):m,l=(m,d)=>m+(d-u(m,d));function p(m,d,c,h){if(!Array.isArray(m))throw new Error("convertRadix2: data should be array");if(d<=0||d>32)throw new Error(`convertRadix2: wrong from=${d}`);if(c<=0||c>32)throw new Error(`convertRadix2: wrong to=${c}`);if(l(d,c)>32)throw new Error(`convertRadix2: carry overflow from=${d} to=${c} carryBits=${l(d,c)}`);let y=0,v=0;const S=2**c-1,B=[];for(const L of m){if(t(L),L>=2**d)throw new Error(`convertRadix2: invalid data word=${L} from=${d}`);if(y=y<<d|L,v+d>32)throw new Error(`convertRadix2: carry overflow pos=${v} from=${d}`);for(v+=d;v>=c;v-=c)B.push((y>>v-c&S)>>>0);y&=2**v-1}if(y=y<<c-v&S,!h&&v>=d)throw new Error("Excess padding");if(!h&&y)throw new Error(`Non-zero padding: ${y}`);return h&&v>0&&B.push(y>>>0),B}function _(m){return t(m),{encode:d=>{if(!r(d))throw new Error("radix.encode input should be Uint8Array");return f(Array.from(d),2**8,m)},decode:d=>{if(!Array.isArray(d)||d.length&&typeof d[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(f(d,m,2**8))}}}function b(m,d=!1){if(t(m),m<=0||m>32)throw new Error("radix2: bits should be in (0..32]");if(l(8,m)>32||l(m,8)>32)throw new Error("radix2: carry overflow");return{encode:c=>{if(!r(c))throw new Error("radix2.encode input should be Uint8Array");return p(Array.from(c),8,m,!d)},decode:c=>{if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(p(c,m,8,d))}}}function T(m){if(typeof m!="function")throw new Error("unsafeWrapper fn should be function");return function(...d){try{return m.apply(null,d)}catch{}}}function P(m,d){if(t(m),typeof d!="function")throw new Error("checksum fn should be function");return{encode(c){if(!r(c))throw new Error("checksum.encode: input should be Uint8Array");const h=d(c).slice(0,m),y=new Uint8Array(c.length+m);return y.set(c),y.set(h,c.length),y},decode(c){if(!r(c))throw new Error("checksum.decode: input should be Uint8Array");const h=c.slice(0,-m),y=d(h).slice(0,m),v=c.slice(-m);for(let S=0;S<m;S++)if(y[S]!==v[S])throw new Error("Invalid checksum");return h}}}e.utils={alphabet:s,chain:n,checksum:P,convertRadix:f,convertRadix2:p,radix:_,radix2:b,join:i,padding:o},e.base16=n(b(4),s("0123456789ABCDEF"),i("")),e.base32=n(b(5),s("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o(5),i("")),e.base32nopad=n(b(5),s("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),i("")),e.base32hex=n(b(5),s("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o(5),i("")),e.base32hexnopad=n(b(5),s("0123456789ABCDEFGHIJKLMNOPQRSTUV"),i("")),e.base32crockford=n(b(5),s("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),a(m=>m.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(b(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o(6),i("")),e.base64nopad=n(b(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i("")),e.base64url=n(b(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(6),i("")),e.base64urlnopad=n(b(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(""));const $=m=>n(_(58),s(m),i(""));e.base58=$("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=$("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=$("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const j=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(m){let d="";for(let c=0;c<m.length;c+=8){const h=m.subarray(c,c+8);d+=e.base58.encode(h).padStart(j[h.length],"1")}return d},decode(m){let d=[];for(let c=0;c<m.length;c+=11){const h=m.slice(c,c+11),y=j.indexOf(h.length),v=e.base58.decode(h);for(let S=0;S<v.length-y;S++)if(v[S]!==0)throw new Error("base58xmr: wrong padding");d=d.concat(Array.from(v.slice(v.length-y)))}return Uint8Array.from(d)}};const F=m=>n(P(4,d=>m(m(d))),e.base58);e.createBase58check=F,e.base58check=e.createBase58check;const k=n(s("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),C=[996825010,642813549,513874426,1027748829,705979059];function X(m){const d=m>>25;let c=(m&33554431)<<5;for(let h=0;h<C.length;h++)(d>>h&1)===1&&(c^=C[h]);return c}function Q(m,d,c=1){const h=m.length;let y=1;for(let v=0;v<h;v++){const S=m.charCodeAt(v);if(S<33||S>126)throw new Error(`Invalid prefix (${m})`);y=X(y)^S>>5}y=X(y);for(let v=0;v<h;v++)y=X(y)^m.charCodeAt(v)&31;for(let v of d)y=X(y)^v;for(let v=0;v<6;v++)y=X(y);return y^=c,k.encode(p([y%2**30],30,5,!1))}function Z(m){const d=m==="bech32"?1:734539939,c=b(5),h=c.decode,y=c.encode,v=T(h);function S(R,Y,K=90){if(typeof R!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof R}`);if(Y instanceof Uint8Array&&(Y=Array.from(Y)),!Array.isArray(Y)||Y.length&&typeof Y[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof Y}`);if(R.length===0)throw new TypeError(`Invalid prefix length ${R.length}`);const ne=R.length+7+Y.length;if(K!==!1&&ne>K)throw new TypeError(`Length ${ne} exceeds limit ${K}`);const Re=R.toLowerCase(),ge=Q(Re,Y,d);return`${Re}1${k.encode(Y)}${ge}`}function B(R,Y=90){if(typeof R!="string")throw new Error(`bech32.decode input should be string, not ${typeof R}`);if(R.length<8||Y!==!1&&R.length>Y)throw new TypeError(`Wrong string length: ${R.length} (${R}). Expected (8..${Y})`);const K=R.toLowerCase();if(R!==K&&R!==R.toUpperCase())throw new Error("String must be lowercase or uppercase");const ne=K.lastIndexOf("1");if(ne===0||ne===-1)throw new Error('Letter "1" must be present between prefix and data only');const Re=K.slice(0,ne),ge=K.slice(ne+1);if(ge.length<6)throw new Error("Data must be at least 6 characters long");const ye=k.decode(ge).slice(0,-6),Ye=Q(Re,ye,d);if(!ge.endsWith(Ye))throw new Error(`Invalid checksum in ${R}: expected "${Ye}"`);return{prefix:Re,words:ye}}const L=T(B);function I(R){const{prefix:Y,words:K}=B(R,!1);return{prefix:Y,words:K,bytes:h(K)}}function w(R,Y){return S(R,y(Y))}return{encode:S,decode:B,encodeFromBytes:w,decodeToBytes:I,decodeUnsafe:L,fromWords:h,fromWordsUnsafe:v,toWords:y}}e.bech32=Z("bech32"),e.bech32m=Z("bech32m"),e.utf8={encode:m=>new TextDecoder().decode(m),decode:m=>new TextEncoder().encode(m)},e.hex=n(b(4),s("0123456789abcdef"),i(""),a(m=>{if(typeof m!="string"||m.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof m} with length ${m.length}`);return m.toLowerCase()}));const z={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},G="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",D=(m,d)=>{if(typeof m!="string"||!z.hasOwnProperty(m))throw new TypeError(G);if(!r(d))throw new TypeError("bytesToString() expects Uint8Array");return z[m].encode(d)};e.bytesToString=D,e.str=e.bytesToString;const V=(m,d)=>{if(!z.hasOwnProperty(m))throw new TypeError(G);if(typeof d!="string")throw new TypeError("stringToBytes() expects string");return z[m].decode(d)};e.stringToBytes=V,e.bytes=e.stringToBytes})(y0);var w0={},rr={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.isBytes=Yb,Jn.number=Uu,Jn.bool=Gb,Jn.bytes=m0,Jn.hash=Xb,Jn.exists=Jb,Jn.output=Qb;function Uu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Gb(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function Yb(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function m0(e,...t){if(!Yb(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Xb(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Uu(e.outputLen),Uu(e.blockLen)}function Jb(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Qb(e,t){m0(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const L5={number:Uu,bool:Gb,bytes:m0,hash:Xb,exists:Jb,output:Qb};Jn.default=L5;var dt={};Object.defineProperty(dt,"__esModule",{value:!0}),dt.add5L=dt.add5H=dt.add4H=dt.add4L=dt.add3H=dt.add3L=dt.rotlBL=dt.rotlBH=dt.rotlSL=dt.rotlSH=dt.rotr32L=dt.rotr32H=dt.rotrBL=dt.rotrBH=dt.rotrSL=dt.rotrSH=dt.shrSL=dt.shrSH=dt.toBig=void 0,dt.fromBig=v0,dt.split=ev,dt.add=pv;const Fu=BigInt(2**32-1),b0=BigInt(32);function v0(e,t=!1){return t?{h:Number(e&Fu),l:Number(e>>b0&Fu)}:{h:Number(e>>b0&Fu)|0,l:Number(e&Fu)|0}}function ev(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=v0(e[s],t);[r[s],n[s]]=[i,o]}return[r,n]}const tv=(e,t)=>BigInt(e>>>0)<<b0|BigInt(t>>>0);dt.toBig=tv;const rv=(e,t,r)=>e>>>r;dt.shrSH=rv;const nv=(e,t,r)=>e<<32-r|t>>>r;dt.shrSL=nv;const iv=(e,t,r)=>e>>>r|t<<32-r;dt.rotrSH=iv;const sv=(e,t,r)=>e<<32-r|t>>>r;dt.rotrSL=sv;const ov=(e,t,r)=>e<<64-r|t>>>r-32;dt.rotrBH=ov;const av=(e,t,r)=>e>>>r-32|t<<64-r;dt.rotrBL=av;const cv=(e,t)=>t;dt.rotr32H=cv;const fv=(e,t)=>e;dt.rotr32L=fv;const uv=(e,t,r)=>e<<r|t>>>32-r;dt.rotlSH=uv;const lv=(e,t,r)=>t<<r|e>>>32-r;dt.rotlSL=lv;const hv=(e,t,r)=>t<<r-32|e>>>64-r;dt.rotlBH=hv;const dv=(e,t,r)=>e<<r-32|t>>>64-r;dt.rotlBL=dv;function pv(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:s|0}}const gv=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);dt.add3L=gv;const yv=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;dt.add3H=yv;const wv=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);dt.add4L=wv;const mv=(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0;dt.add4H=mv;const bv=(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0);dt.add5L=bv;const vv=(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0;dt.add5H=vv;const C5={fromBig:v0,split:ev,toBig:tv,shrSH:rv,shrSL:nv,rotrSH:iv,rotrSL:sv,rotrBH:ov,rotrBL:av,rotr32H:cv,rotr32L:fv,rotlSH:uv,rotlSL:lv,rotlBH:hv,rotlBL:dv,add:pv,add3L:gv,add3H:yv,add4L:wv,add4H:mv,add5H:vv,add5L:bv};dt.default=C5;var _v={},Hu={};Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.crypto=void 0,Hu.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=n,e.byteSwap32=l,e.bytesToHex=_,e.hexToBytes=P,e.asyncLoop=j,e.utf8ToBytes=F,e.toBytes=k,e.concatBytes=C,e.checkOpts=Z,e.wrapConstructor=z,e.wrapConstructorWithOpts=G,e.wrapXOFConstructorWithOpts=D,e.randomBytes=V;const t=Hu,r=Jn;function n(m){return m instanceof Uint8Array||m!=null&&typeof m=="object"&&m.constructor.name==="Uint8Array"}const s=m=>new Uint8Array(m.buffer,m.byteOffset,m.byteLength);e.u8=s;const i=m=>new Uint32Array(m.buffer,m.byteOffset,Math.floor(m.byteLength/4));e.u32=i;const o=m=>new DataView(m.buffer,m.byteOffset,m.byteLength);e.createView=o;const a=(m,d)=>m<<32-d|m>>>d;e.rotr=a;const f=(m,d)=>m<<d|m>>>32-d>>>0;e.rotl=f,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const u=m=>m<<24&4278190080|m<<8&16711680|m>>>8&65280|m>>>24&255;e.byteSwap=u,e.byteSwapIfBE=e.isLE?m=>m:m=>(0,e.byteSwap)(m);function l(m){for(let d=0;d<m.length;d++)m[d]=(0,e.byteSwap)(m[d])}const p=Array.from({length:256},(m,d)=>d.toString(16).padStart(2,"0"));function _(m){(0,r.bytes)(m);let d="";for(let c=0;c<m.length;c++)d+=p[m[c]];return d}const b={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function T(m){if(m>=b._0&&m<=b._9)return m-b._0;if(m>=b._A&&m<=b._F)return m-(b._A-10);if(m>=b._a&&m<=b._f)return m-(b._a-10)}function P(m){if(typeof m!="string")throw new Error("hex string expected, got "+typeof m);const d=m.length,c=d/2;if(d%2)throw new Error("padded hex string expected, got unpadded hex of length "+d);const h=new Uint8Array(c);for(let y=0,v=0;y<c;y++,v+=2){const S=T(m.charCodeAt(v)),B=T(m.charCodeAt(v+1));if(S===void 0||B===void 0){const L=m[v]+m[v+1];throw new Error('hex string expected, got non-hex character "'+L+'" at index '+v)}h[y]=S*16+B}return h}const $=async()=>{};e.nextTick=$;async function j(m,d,c){let h=Date.now();for(let y=0;y<m;y++){c(y);const v=Date.now()-h;v>=0&&v<d||(await(0,e.nextTick)(),h+=v)}}function F(m){if(typeof m!="string")throw new Error(`utf8ToBytes expected string, got ${typeof m}`);return new Uint8Array(new TextEncoder().encode(m))}function k(m){return typeof m=="string"&&(m=F(m)),(0,r.bytes)(m),m}function C(...m){let d=0;for(let h=0;h<m.length;h++){const y=m[h];(0,r.bytes)(y),d+=y.length}const c=new Uint8Array(d);for(let h=0,y=0;h<m.length;h++){const v=m[h];c.set(v,y),y+=v.length}return c}class X{clone(){return this._cloneInto()}}e.Hash=X;const Q={}.toString;function Z(m,d){if(d!==void 0&&Q.call(d)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(m,d)}function z(m){const d=h=>m().update(k(h)).digest(),c=m();return d.outputLen=c.outputLen,d.blockLen=c.blockLen,d.create=()=>m(),d}function G(m){const d=(h,y)=>m(y).update(k(h)).digest(),c=m({});return d.outputLen=c.outputLen,d.blockLen=c.blockLen,d.create=h=>m(h),d}function D(m){const d=(h,y)=>m(y).update(k(h)).digest(),c=m({});return d.outputLen=c.outputLen,d.blockLen=c.blockLen,d.create=h=>m(h),d}function V(m=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(m));if(t.crypto&&typeof t.crypto.randomBytes=="function")return t.crypto.randomBytes(m);throw new Error("crypto.getRandomValues must be defined")}}(_v),Object.defineProperty(rr,"__esModule",{value:!0}),rr.shake256=rr.shake128=rr.keccak_512=rr.keccak_384=rr.keccak_256=rr.keccak_224=rr.sha3_512=rr.sha3_384=rr.sha3_256=rr.sha3_224=rr.Keccak=void 0,rr.keccakP=Iv;const sa=Jn,vc=dt,zi=_v,Ev=[],xv=[],Sv=[],O5=BigInt(0),_c=BigInt(1),$5=BigInt(2),M5=BigInt(7),N5=BigInt(256),P5=BigInt(113);for(let e=0,t=_c,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Ev.push(2*(5*n+r)),xv.push((e+1)*(e+2)/2%64);let s=O5;for(let i=0;i<7;i++)t=(t<<_c^(t>>M5)*P5)%N5,t&$5&&(s^=_c<<(_c<<BigInt(i))-_c);Sv.push(s)}const[U5,F5]=(0,vc.split)(Sv,!0),Av=(e,t,r)=>r>32?(0,vc.rotlBH)(e,t,r):(0,vc.rotlSH)(e,t,r),Bv=(e,t,r)=>r>32?(0,vc.rotlBL)(e,t,r):(0,vc.rotlSL)(e,t,r);function Iv(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)r[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,f=(o+2)%10,u=r[f],l=r[f+1],p=Av(u,l,1)^r[a],_=Bv(u,l,1)^r[a+1];for(let b=0;b<50;b+=10)e[o+b]^=p,e[o+b+1]^=_}let s=e[2],i=e[3];for(let o=0;o<24;o++){const a=xv[o],f=Av(s,i,a),u=Bv(s,i,a),l=Ev[o];s=e[l],i=e[l+1],e[l]=f,e[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=U5[n],e[1]^=F5[n]}r.fill(0)}class Ec extends zi.Hash{constructor(t,r,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,sa.number)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,zi.u32)(this.state)}keccak(){zi.isLE||(0,zi.byteSwap32)(this.state32),Iv(this.state32,this.rounds),zi.isLE||(0,zi.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,sa.exists)(this);const{blockLen:r,state:n}=this;t=(0,zi.toBytes)(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:r,pos:n,blockLen:s}=this;t[n]^=r,r&128&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){(0,sa.exists)(this,!1),(0,sa.bytes)(t),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);t.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,sa.number)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,sa.output)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Ec(r,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}rr.Keccak=Ec;const Ts=(e,t,r)=>(0,zi.wrapConstructor)(()=>new Ec(t,e,r));rr.sha3_224=Ts(6,144,224/8),rr.sha3_256=Ts(6,136,256/8),rr.sha3_384=Ts(6,104,384/8),rr.sha3_512=Ts(6,72,512/8),rr.keccak_224=Ts(1,144,224/8),rr.keccak_256=Ts(1,136,256/8),rr.keccak_384=Ts(1,104,384/8),rr.keccak_512=Ts(1,72,512/8);const Tv=(e,t,r)=>(0,zi.wrapXOFConstructorWithOpts)((n={})=>new Ec(t,e,n.dkLen===void 0?r:n.dkLen,!0));rr.shake128=Tv(31,168,128/8),rr.shake256=Tv(31,136,256/8);var Rv;function ju(){return Rv||(Rv=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.remove0x=e.add0x=e.isValidChecksumAddress=e.getChecksumAddress=e.isValidHexAddress=e.assertIsStrictHexString=e.assertIsHexString=e.isStrictHexString=e.isHexString=e.HexChecksumAddressStruct=e.HexAddressStruct=e.StrictHexStruct=e.HexStruct=void 0;const t=Xn,r=rr,n=Gr,s=_0();e.HexStruct=(0,t.pattern)((0,t.string)(),/^(?:0x)?[0-9a-f]+$/iu),e.StrictHexStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]+$/iu),e.HexAddressStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-f]{40}$/u),e.HexChecksumAddressStruct=(0,t.pattern)((0,t.string)(),/^0x[0-9a-fA-F]{40}$/u);function i(T){return(0,t.is)(T,e.HexStruct)}e.isHexString=i;function o(T){return(0,t.is)(T,e.StrictHexStruct)}e.isStrictHexString=o;function a(T){(0,n.assert)(i(T),"Value must be a hexadecimal string.")}e.assertIsHexString=a;function f(T){(0,n.assert)(o(T),'Value must be a hexadecimal string, starting with "0x".')}e.assertIsStrictHexString=f;function u(T){return(0,t.is)(T,e.HexAddressStruct)||p(T)}e.isValidHexAddress=u;function l(T){(0,n.assert)((0,t.is)(T,e.HexChecksumAddressStruct),"Invalid hex address.");const P=b(T.toLowerCase()),$=b((0,s.bytesToHex)((0,r.keccak_256)(P)));return`0x${P.split("").map((j,F)=>{const k=$[F];return(0,n.assert)((0,t.is)(k,(0,t.string)()),"Hash shorter than address."),parseInt(k,16)>7?j.toUpperCase():j}).join("")}`}e.getChecksumAddress=l;function p(T){return(0,t.is)(T,e.HexChecksumAddressStruct)?l(T)===T:!1}e.isValidChecksumAddress=p;function _(T){return T.startsWith("0x")?T:T.startsWith("0X")?`0x${T.substring(2)}`:`0x${T}`}e.add0x=_;function b(T){return T.startsWith("0x")||T.startsWith("0X")?T.substring(2):T}e.remove0x=b}(w0)),w0}var kv;function _0(){if(kv)return St;kv=1,Object.defineProperty(St,"__esModule",{value:!0}),St.createDataView=St.concatBytes=St.valueToBytes=St.base64ToBytes=St.stringToBytes=St.numberToBytes=St.signedBigIntToBytes=St.bigIntToBytes=St.hexToBytes=St.bytesToBase64=St.bytesToString=St.bytesToNumber=St.bytesToSignedBigInt=St.bytesToBigInt=St.bytesToHex=St.assertIsBytes=St.isBytes=void 0;const e=y0,t=Gr,r=ju(),n=48,s=58,i=87;function o(){const D=[];return()=>{if(D.length===0)for(let V=0;V<256;V++)D.push(V.toString(16).padStart(2,"0"));return D}}const a=o();function f(D){return D instanceof Uint8Array}St.isBytes=f;function u(D){(0,t.assert)(f(D),"Value must be a Uint8Array.")}St.assertIsBytes=u;function l(D){if(u(D),D.length===0)return"0x";const V=a(),m=new Array(D.length);for(let d=0;d<D.length;d++)m[d]=V[D[d]];return(0,r.add0x)(m.join(""))}St.bytesToHex=l;function p(D){u(D);const V=l(D);return BigInt(V)}St.bytesToBigInt=p;function _(D){u(D);let V=BigInt(0);for(const m of D)V=(V<<BigInt(8))+BigInt(m);return BigInt.asIntN(D.length*8,V)}St.bytesToSignedBigInt=_;function b(D){u(D);const V=p(D);return(0,t.assert)(V<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(V)}St.bytesToNumber=b;function T(D){return u(D),new TextDecoder().decode(D)}St.bytesToString=T;function P(D){return u(D),e.base64.encode(D)}St.bytesToBase64=P;function $(D){if(D?.toLowerCase?.()==="0x")return new Uint8Array;(0,r.assertIsHexString)(D);const V=(0,r.remove0x)(D).toLowerCase(),m=V.length%2===0?V:`0${V}`,d=new Uint8Array(m.length/2);for(let c=0;c<d.length;c++){const h=m.charCodeAt(c*2),y=m.charCodeAt(c*2+1),v=h-(h<s?n:i),S=y-(y<s?n:i);d[c]=v*16+S}return d}St.hexToBytes=$;function j(D){(0,t.assert)(typeof D=="bigint","Value must be a bigint."),(0,t.assert)(D>=BigInt(0),"Value must be a non-negative bigint.");const V=D.toString(16);return $(V)}St.bigIntToBytes=j;function F(D,V){(0,t.assert)(V>0);const m=D>>BigInt(31);return!((~D&m)+(D&~m)>>BigInt(V*8+-1))}function k(D,V){(0,t.assert)(typeof D=="bigint","Value must be a bigint."),(0,t.assert)(typeof V=="number","Byte length must be a number."),(0,t.assert)(V>0,"Byte length must be greater than 0."),(0,t.assert)(F(D,V),"Byte length is too small to represent the given value.");let m=D;const d=new Uint8Array(V);for(let c=0;c<d.length;c++)d[c]=Number(BigInt.asUintN(8,m)),m>>=BigInt(8);return d.reverse()}St.signedBigIntToBytes=k;function C(D){(0,t.assert)(typeof D=="number","Value must be a number."),(0,t.assert)(D>=0,"Value must be a non-negative number."),(0,t.assert)(Number.isSafeInteger(D),"Value is not a safe integer. Use `bigIntToBytes` instead.");const V=D.toString(16);return $(V)}St.numberToBytes=C;function X(D){return(0,t.assert)(typeof D=="string","Value must be a string."),new TextEncoder().encode(D)}St.stringToBytes=X;function Q(D){return(0,t.assert)(typeof D=="string","Value must be a string."),e.base64.decode(D)}St.base64ToBytes=Q;function Z(D){if(typeof D=="bigint")return j(D);if(typeof D=="number")return C(D);if(typeof D=="string")return D.startsWith("0x")?$(D):X(D);if(f(D))return D;throw new TypeError(`Unsupported value type: "${typeof D}".`)}St.valueToBytes=Z;function z(D){const V=new Array(D.length);let m=0;for(let c=0;c<D.length;c++){const h=Z(D[c]);V[c]=h,m+=h.length}const d=new Uint8Array(m);for(let c=0,h=0;c<V.length;c++)d.set(V[c],h),h+=V[c].length;return d}St.concatBytes=z;function G(D){if(typeof se.Buffer<"u"&&D instanceof se.Buffer){const V=D.buffer.slice(D.byteOffset,D.byteOffset+D.byteLength);return new DataView(V)}return new DataView(D.buffer,D.byteOffset,D.byteLength)}return St.createDataView=G,St}var Lv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toCaipChainId=e.parseCaipAccountId=e.parseCaipChainId=e.isCaipAssetId=e.isCaipAssetType=e.isCaipAccountAddress=e.isCaipAccountId=e.isCaipReference=e.isCaipNamespace=e.isCaipChainId=e.KnownCaipNamespace=e.CaipAssetIdStruct=e.CaipAssetTypeStruct=e.CaipAccountAddressStruct=e.CaipAccountIdStruct=e.CaipReferenceStruct=e.CaipNamespaceStruct=e.CaipChainIdStruct=e.CAIP_ASSET_ID_REGEX=e.CAIP_ASSET_TYPE_REGEX=e.CAIP_ACCOUNT_ADDRESS_REGEX=e.CAIP_ACCOUNT_ID_REGEX=e.CAIP_REFERENCE_REGEX=e.CAIP_NAMESPACE_REGEX=e.CAIP_CHAIN_ID_REGEX=void 0;const t=Xn;e.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,e.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,e.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,e.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,e.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,e.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,e.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,e.CaipChainIdStruct=(0,t.pattern)((0,t.string)(),e.CAIP_CHAIN_ID_REGEX),e.CaipNamespaceStruct=(0,t.pattern)((0,t.string)(),e.CAIP_NAMESPACE_REGEX),e.CaipReferenceStruct=(0,t.pattern)((0,t.string)(),e.CAIP_REFERENCE_REGEX),e.CaipAccountIdStruct=(0,t.pattern)((0,t.string)(),e.CAIP_ACCOUNT_ID_REGEX),e.CaipAccountAddressStruct=(0,t.pattern)((0,t.string)(),e.CAIP_ACCOUNT_ADDRESS_REGEX),e.CaipAssetTypeStruct=(0,t.pattern)((0,t.string)(),e.CAIP_ASSET_TYPE_REGEX),e.CaipAssetIdStruct=(0,t.pattern)((0,t.string)(),e.CAIP_ASSET_ID_REGEX),function(_){_.Bip122="bip122",_.Eip155="eip155",_.Wallet="wallet"}(e.KnownCaipNamespace||(e.KnownCaipNamespace={}));function r(_){return(0,t.is)(_,e.CaipChainIdStruct)}e.isCaipChainId=r;function n(_){return(0,t.is)(_,e.CaipNamespaceStruct)}e.isCaipNamespace=n;function s(_){return(0,t.is)(_,e.CaipReferenceStruct)}e.isCaipReference=s;function i(_){return(0,t.is)(_,e.CaipAccountIdStruct)}e.isCaipAccountId=i;function o(_){return(0,t.is)(_,e.CaipAccountAddressStruct)}e.isCaipAccountAddress=o;function a(_){return(0,t.is)(_,e.CaipAssetTypeStruct)}e.isCaipAssetType=a;function f(_){return(0,t.is)(_,e.CaipAssetIdStruct)}e.isCaipAssetId=f;function u(_){const b=e.CAIP_CHAIN_ID_REGEX.exec(_);if(!b?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:b.groups.namespace,reference:b.groups.reference}}e.parseCaipChainId=u;function l(_){const b=e.CAIP_ACCOUNT_ID_REGEX.exec(_);if(!b?.groups)throw new Error("Invalid CAIP account ID.");return{address:b.groups.accountAddress,chainId:b.groups.chainId,chain:{namespace:b.groups.namespace,reference:b.groups.reference}}}e.parseCaipAccountId=l;function p(_,b){if(!n(_))throw new Error(`Invalid "namespace", must match: ${e.CAIP_NAMESPACE_REGEX.toString()}`);if(!s(b))throw new Error(`Invalid "reference", must match: ${e.CAIP_REFERENCE_REGEX.toString()}`);return`${_}:${b}`}e.toCaipChainId=p})(Lv);var Du={};Object.defineProperty(Du,"__esModule",{value:!0}),Du.ChecksumStruct=void 0;const Cv=Xn,H5=bc;Du.ChecksumStruct=(0,Cv.size)((0,H5.base64)((0,Cv.string)(),{paddingRequired:!0}),44,44);var mi={};Object.defineProperty(mi,"__esModule",{value:!0}),mi.createHex=mi.createBytes=mi.createBigInt=mi.createNumber=void 0;const pr=Xn,j5=Gr,Ov=_0(),zu=ju(),$v=(0,pr.union)([(0,pr.number)(),(0,pr.bigint)(),(0,pr.string)(),zu.StrictHexStruct]),D5=(0,pr.coerce)((0,pr.number)(),$v,Number),z5=(0,pr.coerce)((0,pr.bigint)(),$v,BigInt);(0,pr.union)([zu.StrictHexStruct,(0,pr.instance)(Uint8Array)]);const q5=(0,pr.coerce)((0,pr.instance)(Uint8Array),(0,pr.union)([zu.StrictHexStruct]),Ov.hexToBytes),V5=(0,pr.coerce)(zu.StrictHexStruct,(0,pr.instance)(Uint8Array),Ov.bytesToHex);function K5(e){try{const t=(0,pr.create)(e,D5);return(0,j5.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){throw t instanceof pr.StructError?new Error(`Expected a number-like value, got "${e}".`):t}}mi.createNumber=K5;function W5(e){try{return(0,pr.create)(e,z5)}catch(t){throw t instanceof pr.StructError?new Error(`Expected a number-like value, got "${String(t.value)}".`):t}}mi.createBigInt=W5;function Z5(e){if(typeof e=="string"&&e.toLowerCase()==="0x")return new Uint8Array;try{return(0,pr.create)(e,q5)}catch(t){throw t instanceof pr.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}mi.createBytes=Z5;function G5(e){if(e instanceof Uint8Array&&e.length===0||typeof e=="string"&&e.toLowerCase()==="0x")return"0x";try{return(0,pr.create)(e,V5)}catch(t){throw t instanceof pr.StructError?new Error(`Expected a bytes-like value, got "${String(t.value)}".`):t}}mi.createHex=G5;var oa={},ln=Pe&&Pe.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Mv=Pe&&Pe.__classPrivateFieldSet||function(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r},Qn,bi;Object.defineProperty(oa,"__esModule",{value:!0}),oa.FrozenSet=oa.FrozenMap=void 0;class E0{get size(){return ln(this,Qn,"f").size}[(Qn=new WeakMap,Symbol.iterator)](){return ln(this,Qn,"f")[Symbol.iterator]()}constructor(t){Qn.set(this,void 0),Mv(this,Qn,new Map(t),"f"),Object.freeze(this)}entries(){return ln(this,Qn,"f").entries()}forEach(t,r){return ln(this,Qn,"f").forEach((n,s,i)=>t.call(r,n,s,this))}get(t){return ln(this,Qn,"f").get(t)}has(t){return ln(this,Qn,"f").has(t)}keys(){return ln(this,Qn,"f").keys()}values(){return ln(this,Qn,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([t,r])=>`${String(t)} => ${String(r)}`).join(", ")} `:""}}`}}oa.FrozenMap=E0;class x0{get size(){return ln(this,bi,"f").size}[(bi=new WeakMap,Symbol.iterator)](){return ln(this,bi,"f")[Symbol.iterator]()}constructor(t){bi.set(this,void 0),Mv(this,bi,new Set(t),"f"),Object.freeze(this)}entries(){return ln(this,bi,"f").entries()}forEach(t,r){return ln(this,bi,"f").forEach((n,s,i)=>t.call(r,n,s,this))}has(t){return ln(this,bi,"f").has(t)}keys(){return ln(this,bi,"f").keys()}values(){return ln(this,bi,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(t=>String(t)).join(", ")} `:""}}`}}oa.FrozenSet=x0,Object.freeze(E0),Object.freeze(E0.prototype),Object.freeze(x0),Object.freeze(x0.prototype);var Nv={};Object.defineProperty(Nv,"__esModule",{value:!0});var Pv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getJsonRpcIdValidator=e.assertIsJsonRpcError=e.isJsonRpcError=e.assertIsJsonRpcFailure=e.isJsonRpcFailure=e.assertIsJsonRpcSuccess=e.isJsonRpcSuccess=e.assertIsJsonRpcResponse=e.isJsonRpcResponse=e.assertIsPendingJsonRpcResponse=e.isPendingJsonRpcResponse=e.JsonRpcResponseStruct=e.JsonRpcFailureStruct=e.JsonRpcSuccessStruct=e.PendingJsonRpcResponseStruct=e.assertIsJsonRpcRequest=e.isJsonRpcRequest=e.assertIsJsonRpcNotification=e.isJsonRpcNotification=e.JsonRpcNotificationStruct=e.JsonRpcRequestStruct=e.JsonRpcParamsStruct=e.JsonRpcErrorStruct=e.JsonRpcIdStruct=e.JsonRpcVersionStruct=e.jsonrpc2=e.getJsonSize=e.getSafeJson=e.isValidJson=e.JsonStruct=e.UnsafeJsonStruct=e.exactOptional=e.object=void 0;const t=Xn,r=Gr,n=Pu,s=D=>(0,t.object)(D);e.object=s;function i({path:D,branch:V}){const m=D[D.length-1];return(0,n.hasProperty)(V[V.length-2],m)}function o(D){return new t.Struct({...D,type:`optional ${D.type}`,validator:(V,m)=>!i(m)||D.validator(V,m),refiner:(V,m)=>!i(m)||D.refiner(V,m)})}e.exactOptional=o;const a=()=>(0,t.define)("finite number",D=>(0,t.is)(D,(0,t.number)())&&Number.isFinite(D));e.UnsafeJsonStruct=(0,t.union)([(0,t.literal)(null),(0,t.boolean)(),a(),(0,t.string)(),(0,t.array)((0,t.lazy)(()=>e.UnsafeJsonStruct)),(0,t.record)((0,t.string)(),(0,t.lazy)(()=>e.UnsafeJsonStruct))]),e.JsonStruct=(0,t.coerce)(e.UnsafeJsonStruct,(0,t.any)(),D=>((0,r.assertStruct)(D,e.UnsafeJsonStruct),JSON.parse(JSON.stringify(D,(V,m)=>{if(!(V==="__proto__"||V==="constructor"))return m}))));function f(D){try{return u(D),!0}catch{return!1}}e.isValidJson=f;function u(D){return(0,t.create)(D,e.JsonStruct)}e.getSafeJson=u;function l(D){(0,r.assertStruct)(D,e.JsonStruct,"Invalid JSON value");const V=JSON.stringify(D);return new TextEncoder().encode(V).byteLength}e.getJsonSize=l,e.jsonrpc2="2.0",e.JsonRpcVersionStruct=(0,t.literal)(e.jsonrpc2),e.JsonRpcIdStruct=(0,t.nullable)((0,t.union)([(0,t.number)(),(0,t.string)()])),e.JsonRpcErrorStruct=(0,e.object)({code:(0,t.integer)(),message:(0,t.string)(),data:o(e.JsonStruct),stack:o((0,t.string)())}),e.JsonRpcParamsStruct=(0,t.union)([(0,t.record)((0,t.string)(),e.JsonStruct),(0,t.array)(e.JsonStruct)]),e.JsonRpcRequestStruct=(0,e.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:o(e.JsonRpcParamsStruct)}),e.JsonRpcNotificationStruct=(0,e.object)({jsonrpc:e.JsonRpcVersionStruct,method:(0,t.string)(),params:o(e.JsonRpcParamsStruct)});function p(D){return(0,t.is)(D,e.JsonRpcNotificationStruct)}e.isJsonRpcNotification=p;function _(D,V){(0,r.assertStruct)(D,e.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",V)}e.assertIsJsonRpcNotification=_;function b(D){return(0,t.is)(D,e.JsonRpcRequestStruct)}e.isJsonRpcRequest=b;function T(D,V){(0,r.assertStruct)(D,e.JsonRpcRequestStruct,"Invalid JSON-RPC request",V)}e.assertIsJsonRpcRequest=T,e.PendingJsonRpcResponseStruct=(0,t.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:(0,t.optional)((0,t.unknown)()),error:(0,t.optional)(e.JsonRpcErrorStruct)}),e.JsonRpcSuccessStruct=(0,e.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,result:e.JsonStruct}),e.JsonRpcFailureStruct=(0,e.object)({id:e.JsonRpcIdStruct,jsonrpc:e.JsonRpcVersionStruct,error:e.JsonRpcErrorStruct}),e.JsonRpcResponseStruct=(0,t.union)([e.JsonRpcSuccessStruct,e.JsonRpcFailureStruct]);function P(D){return(0,t.is)(D,e.PendingJsonRpcResponseStruct)}e.isPendingJsonRpcResponse=P;function $(D,V){(0,r.assertStruct)(D,e.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",V)}e.assertIsPendingJsonRpcResponse=$;function j(D){return(0,t.is)(D,e.JsonRpcResponseStruct)}e.isJsonRpcResponse=j;function F(D,V){(0,r.assertStruct)(D,e.JsonRpcResponseStruct,"Invalid JSON-RPC response",V)}e.assertIsJsonRpcResponse=F;function k(D){return(0,t.is)(D,e.JsonRpcSuccessStruct)}e.isJsonRpcSuccess=k;function C(D,V){(0,r.assertStruct)(D,e.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",V)}e.assertIsJsonRpcSuccess=C;function X(D){return(0,t.is)(D,e.JsonRpcFailureStruct)}e.isJsonRpcFailure=X;function Q(D,V){(0,r.assertStruct)(D,e.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",V)}e.assertIsJsonRpcFailure=Q;function Z(D){return(0,t.is)(D,e.JsonRpcErrorStruct)}e.isJsonRpcError=Z;function z(D,V){(0,r.assertStruct)(D,e.JsonRpcErrorStruct,"Invalid JSON-RPC error",V)}e.assertIsJsonRpcError=z;function G(D){const{permitEmptyString:V,permitFractions:m,permitNull:d}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...D};return h=>!!(typeof h=="number"&&(m||Number.isInteger(h))||typeof h=="string"&&(V||h.length>0)||d&&h===null)}e.getJsonRpcIdValidator=G})(Pv);var Uv={};Object.defineProperty(Uv,"__esModule",{value:!0});var aa={},S0={exports:{}},A0,Fv;function Y5(){if(Fv)return A0;Fv=1;var e=1e3,t=e*60,r=t*60,n=r*24,s=n*7,i=n*365.25;A0=function(l,p){p=p||{};var _=typeof l;if(_==="string"&&l.length>0)return o(l);if(_==="number"&&isFinite(l))return p.long?f(l):a(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function o(l){if(l=String(l),!(l.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(p){var _=parseFloat(p[1]),b=(p[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return _*i;case"weeks":case"week":case"w":return _*s;case"days":case"day":case"d":return _*n;case"hours":case"hour":case"hrs":case"hr":case"h":return _*r;case"minutes":case"minute":case"mins":case"min":case"m":return _*t;case"seconds":case"second":case"secs":case"sec":case"s":return _*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return _;default:return}}}}function a(l){var p=Math.abs(l);return p>=n?Math.round(l/n)+"d":p>=r?Math.round(l/r)+"h":p>=t?Math.round(l/t)+"m":p>=e?Math.round(l/e)+"s":l+"ms"}function f(l){var p=Math.abs(l);return p>=n?u(l,p,n,"day"):p>=r?u(l,p,r,"hour"):p>=t?u(l,p,t,"minute"):p>=e?u(l,p,e,"second"):l+" ms"}function u(l,p,_,b){var T=p>=_*1.5;return Math.round(l/_)+" "+b+(T?"s":"")}return A0}function X5(e){r.debug=r,r.default=r,r.coerce=f,r.disable=i,r.enable=s,r.enabled=o,r.humanize=Y5(),r.destroy=u,Object.keys(e).forEach(l=>{r[l]=e[l]}),r.names=[],r.skips=[],r.formatters={};function t(l){let p=0;for(let _=0;_<l.length;_++)p=(p<<5)-p+l.charCodeAt(_),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=t;function r(l){let p,_=null,b,T;function P(...$){if(!P.enabled)return;const j=P,F=Number(new Date),k=F-(p||F);j.diff=k,j.prev=p,j.curr=F,p=F,$[0]=r.coerce($[0]),typeof $[0]!="string"&&$.unshift("%O");let C=0;$[0]=$[0].replace(/%([a-zA-Z%])/g,(Q,Z)=>{if(Q==="%%")return"%";C++;const z=r.formatters[Z];if(typeof z=="function"){const G=$[C];Q=z.call(j,G),$.splice(C,1),C--}return Q}),r.formatArgs.call(j,$),(j.log||r.log).apply(j,$)}return P.namespace=l,P.useColors=r.useColors(),P.color=r.selectColor(l),P.extend=n,P.destroy=r.destroy,Object.defineProperty(P,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(b!==r.namespaces&&(b=r.namespaces,T=r.enabled(l)),T),set:$=>{_=$}}),typeof r.init=="function"&&r.init(P),P}function n(l,p){const _=r(this.namespace+(typeof p>"u"?":":p)+l);return _.log=this.log,_}function s(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let p;const _=(typeof l=="string"?l:"").split(/[\s,]+/),b=_.length;for(p=0;p<b;p++)_[p]&&(l=_[p].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function i(){const l=[...r.names.map(a),...r.skips.map(a).map(p=>"-"+p)].join(",");return r.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let p,_;for(p=0,_=r.skips.length;p<_;p++)if(r.skips[p].test(l))return!1;for(p=0,_=r.names.length;p<_;p++)if(r.names[p].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function f(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var J5=X5;(function(e,t){t.formatArgs=n,t.save=s,t.load=i,t.useColors=r,t.storage=o(),t.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let f;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(f=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(f[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;f.splice(1,0,u,"color: inherit");let l=0,p=0;f[0].replace(/%[a-zA-Z%]/g,_=>{_!=="%%"&&(l++,_==="%c"&&(p=l))}),f.splice(p,0,u)}t.log=console.debug||console.log||(()=>{});function s(f){try{f?t.storage.setItem("debug",f):t.storage.removeItem("debug")}catch{}}function i(){let f;try{f=t.storage.getItem("debug")}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=process.env.DEBUG),f}function o(){try{return localStorage}catch{}}e.exports=J5(t);const{formatters:a}=e.exports;a.j=function(f){try{return JSON.stringify(f)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(S0,S0.exports);var Q5=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(aa,"__esModule",{value:!0}),aa.createModuleLogger=aa.createProjectLogger=void 0;const ek=(0,Q5(S0.exports).default)("metamask");function tk(e){return ek.extend(e)}aa.createProjectLogger=tk;function rk(e,t){return e.extend(t)}aa.createModuleLogger=rk;var vi={};Object.defineProperty(vi,"__esModule",{value:!0}),vi.hexToBigInt=vi.hexToNumber=vi.bigIntToHex=vi.numberToHex=void 0;const ca=Gr,xc=ju(),nk=e=>((0,ca.assert)(typeof e=="number","Value must be a number."),(0,ca.assert)(e>=0,"Value must be a non-negative number."),(0,ca.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,xc.add0x)(e.toString(16)));vi.numberToHex=nk;const ik=e=>((0,ca.assert)(typeof e=="bigint","Value must be a bigint."),(0,ca.assert)(e>=0,"Value must be a non-negative bigint."),(0,xc.add0x)(e.toString(16)));vi.bigIntToHex=ik;const sk=e=>{(0,xc.assertIsHexString)(e);const t=parseInt(e,16);return(0,ca.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};vi.hexToNumber=sk;const ok=e=>((0,xc.assertIsHexString)(e),BigInt((0,xc.add0x)(e)));vi.hexToBigInt=ok;var Hv={};Object.defineProperty(Hv,"__esModule",{value:!0});var qu={};Object.defineProperty(qu,"__esModule",{value:!0}),qu.createDeferredPromise=void 0;function ak({suppressUnhandledRejection:e=!1}={}){let t,r;const n=new Promise((s,i)=>{t=s,r=i});return e&&n.catch(s=>{}),{promise:n,resolve:t,reject:r}}qu.createDeferredPromise=ak;var jv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeSince=e.inMilliseconds=e.Duration=void 0,function(i){i[i.Millisecond=1]="Millisecond",i[i.Second=1e3]="Second",i[i.Minute=6e4]="Minute",i[i.Hour=36e5]="Hour",i[i.Day=864e5]="Day",i[i.Week=6048e5]="Week",i[i.Year=31536e6]="Year"}(e.Duration||(e.Duration={}));const t=i=>Number.isInteger(i)&&i>=0,r=(i,o)=>{if(!t(i))throw new Error(`"${o}" must be a non-negative integer. Received: "${i}".`)};function n(i,o){return r(i,"count"),i*o}e.inMilliseconds=n;function s(i){return r(i,"timestamp"),Date.now()-i}e.timeSince=s})(jv);var Dv={};Object.defineProperty(Dv,"__esModule",{value:!0});var zv={},uo={exports:{}};const ck="2.0.0",qv=256,fk=Number.MAX_SAFE_INTEGER||9007199254740991,uk=16,lk=qv-6;var Vu={MAX_LENGTH:qv,MAX_SAFE_COMPONENT_LENGTH:uk,MAX_SAFE_BUILD_LENGTH:lk,MAX_SAFE_INTEGER:fk,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:ck,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Ku=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=Vu,i=Ku;t=e.exports={};const o=t.re=[],a=t.safeRe=[],f=t.src=[],u=t.t={};let l=0;const p="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",s],[p,n]],b=P=>{for(const[$,j]of _)P=P.split(`${$}*`).join(`${$}{0,${j}}`).split(`${$}+`).join(`${$}{1,${j}}`);return P},T=(P,$,j)=>{const F=b($),k=l++;i(P,k,$),u[P]=k,f[k]=$,o[k]=new RegExp($,j?"g":void 0),a[k]=new RegExp(F,j?"g":void 0)};T("NUMERICIDENTIFIER","0|[1-9]\\d*"),T("NUMERICIDENTIFIERLOOSE","\\d+"),T("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),T("MAINVERSION",`(${f[u.NUMERICIDENTIFIER]})\\.(${f[u.NUMERICIDENTIFIER]})\\.(${f[u.NUMERICIDENTIFIER]})`),T("MAINVERSIONLOOSE",`(${f[u.NUMERICIDENTIFIERLOOSE]})\\.(${f[u.NUMERICIDENTIFIERLOOSE]})\\.(${f[u.NUMERICIDENTIFIERLOOSE]})`),T("PRERELEASEIDENTIFIER",`(?:${f[u.NUMERICIDENTIFIER]}|${f[u.NONNUMERICIDENTIFIER]})`),T("PRERELEASEIDENTIFIERLOOSE",`(?:${f[u.NUMERICIDENTIFIERLOOSE]}|${f[u.NONNUMERICIDENTIFIER]})`),T("PRERELEASE",`(?:-(${f[u.PRERELEASEIDENTIFIER]}(?:\\.${f[u.PRERELEASEIDENTIFIER]})*))`),T("PRERELEASELOOSE",`(?:-?(${f[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${f[u.PRERELEASEIDENTIFIERLOOSE]})*))`),T("BUILDIDENTIFIER",`${p}+`),T("BUILD",`(?:\\+(${f[u.BUILDIDENTIFIER]}(?:\\.${f[u.BUILDIDENTIFIER]})*))`),T("FULLPLAIN",`v?${f[u.MAINVERSION]}${f[u.PRERELEASE]}?${f[u.BUILD]}?`),T("FULL",`^${f[u.FULLPLAIN]}$`),T("LOOSEPLAIN",`[v=\\s]*${f[u.MAINVERSIONLOOSE]}${f[u.PRERELEASELOOSE]}?${f[u.BUILD]}?`),T("LOOSE",`^${f[u.LOOSEPLAIN]}$`),T("GTLT","((?:<|>)?=?)"),T("XRANGEIDENTIFIERLOOSE",`${f[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),T("XRANGEIDENTIFIER",`${f[u.NUMERICIDENTIFIER]}|x|X|\\*`),T("XRANGEPLAIN",`[v=\\s]*(${f[u.XRANGEIDENTIFIER]})(?:\\.(${f[u.XRANGEIDENTIFIER]})(?:\\.(${f[u.XRANGEIDENTIFIER]})(?:${f[u.PRERELEASE]})?${f[u.BUILD]}?)?)?`),T("XRANGEPLAINLOOSE",`[v=\\s]*(${f[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[u.XRANGEIDENTIFIERLOOSE]})(?:${f[u.PRERELEASELOOSE]})?${f[u.BUILD]}?)?)?`),T("XRANGE",`^${f[u.GTLT]}\\s*${f[u.XRANGEPLAIN]}$`),T("XRANGELOOSE",`^${f[u.GTLT]}\\s*${f[u.XRANGEPLAINLOOSE]}$`),T("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),T("COERCE",`${f[u.COERCEPLAIN]}(?:$|[^\\d])`),T("COERCEFULL",f[u.COERCEPLAIN]+`(?:${f[u.PRERELEASE]})?(?:${f[u.BUILD]})?(?:$|[^\\d])`),T("COERCERTL",f[u.COERCE],!0),T("COERCERTLFULL",f[u.COERCEFULL],!0),T("LONETILDE","(?:~>?)"),T("TILDETRIM",`(\\s*)${f[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",T("TILDE",`^${f[u.LONETILDE]}${f[u.XRANGEPLAIN]}$`),T("TILDELOOSE",`^${f[u.LONETILDE]}${f[u.XRANGEPLAINLOOSE]}$`),T("LONECARET","(?:\\^)"),T("CARETTRIM",`(\\s*)${f[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",T("CARET",`^${f[u.LONECARET]}${f[u.XRANGEPLAIN]}$`),T("CARETLOOSE",`^${f[u.LONECARET]}${f[u.XRANGEPLAINLOOSE]}$`),T("COMPARATORLOOSE",`^${f[u.GTLT]}\\s*(${f[u.LOOSEPLAIN]})$|^$`),T("COMPARATOR",`^${f[u.GTLT]}\\s*(${f[u.FULLPLAIN]})$|^$`),T("COMPARATORTRIM",`(\\s*)${f[u.GTLT]}\\s*(${f[u.LOOSEPLAIN]}|${f[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",T("HYPHENRANGE",`^\\s*(${f[u.XRANGEPLAIN]})\\s+-\\s+(${f[u.XRANGEPLAIN]})\\s*$`),T("HYPHENRANGELOOSE",`^\\s*(${f[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${f[u.XRANGEPLAINLOOSE]})\\s*$`),T("STAR","(<|>)?=?\\s*\\*"),T("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),T("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(uo,uo.exports);const hk=Object.freeze({loose:!0}),dk=Object.freeze({});var B0=e=>e?typeof e!="object"?hk:e:dk;const Vv=/^[0-9]+$/,Kv=(e,t)=>{const r=Vv.test(e),n=Vv.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var Wv={compareIdentifiers:Kv,rcompareIdentifiers:(e,t)=>Kv(t,e)};const Wu=Ku,{MAX_LENGTH:Zv,MAX_SAFE_INTEGER:Zu}=Vu,{safeRe:Gv,t:Yv}=uo.exports,pk=B0,{compareIdentifiers:fa}=Wv;class ei{constructor(t,r){if(r=pk(r),t instanceof ei){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Zv)throw new TypeError(`version is longer than ${Zv} characters`);Wu("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?Gv[Yv.LOOSE]:Gv[Yv.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Zu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Zu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Zu||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<Zu)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Wu("SemVer.compare",this.version,this.options,t),!(t instanceof ei)){if(typeof t=="string"&&t===this.version)return 0;t=new ei(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ei||(t=new ei(t,this.options)),fa(this.major,t.major)||fa(this.minor,t.minor)||fa(this.patch,t.patch)}comparePre(t){if(t instanceof ei||(t=new ei(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],s=t.prerelease[r];if(Wu("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return fa(n,s)}while(++r)}compareBuild(t){t instanceof ei||(t=new ei(t,this.options));let r=0;do{const n=this.build[r],s=t.build[r];if(Wu("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return fa(n,s)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),fa(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}var hn=ei;const Xv=hn;var ua=(e,t,r=!1)=>{if(e instanceof Xv)return e;try{return new Xv(e,t)}catch(n){if(!r)return null;throw n}};const gk=ua;var yk=(e,t)=>{const r=gk(e,t);return r?r.version:null};const wk=ua;var mk=(e,t)=>{const r=wk(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};const Jv=hn;var bk=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new Jv(e instanceof Jv?e.version:e,r).inc(t,n,s).version}catch{return null}};const Qv=ua;var vk=(e,t)=>{const r=Qv(e,null,!0),n=Qv(t,null,!0),s=r.compare(n);if(s===0)return null;const i=s>0,o=i?r:n,a=i?n:r,f=!!o.prerelease.length;if(!!a.prerelease.length&&!f)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";const l=f?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};const _k=hn;var Ek=(e,t)=>new _k(e,t).major;const xk=hn;var Sk=(e,t)=>new xk(e,t).minor;const Ak=hn;var Bk=(e,t)=>new Ak(e,t).patch;const Ik=ua;var Tk=(e,t)=>{const r=Ik(e,t);return r&&r.prerelease.length?r.prerelease:null};const e_=hn;var ti=(e,t,r)=>new e_(e,r).compare(new e_(t,r));const Rk=ti;var kk=(e,t,r)=>Rk(t,e,r);const Lk=ti;var Ck=(e,t)=>Lk(e,t,!0);const t_=hn;var I0=(e,t,r)=>{const n=new t_(e,r),s=new t_(t,r);return n.compare(s)||n.compareBuild(s)};const Ok=I0;var $k=(e,t)=>e.sort((r,n)=>Ok(r,n,t));const Mk=I0;var Nk=(e,t)=>e.sort((r,n)=>Mk(n,r,t));const Pk=ti;var Gu=(e,t,r)=>Pk(e,t,r)>0;const Uk=ti;var T0=(e,t,r)=>Uk(e,t,r)<0;const Fk=ti;var r_=(e,t,r)=>Fk(e,t,r)===0;const Hk=ti;var n_=(e,t,r)=>Hk(e,t,r)!==0;const jk=ti;var R0=(e,t,r)=>jk(e,t,r)>=0;const Dk=ti;var k0=(e,t,r)=>Dk(e,t,r)<=0;const zk=r_,qk=n_,Vk=Gu,Kk=R0,Wk=T0,Zk=k0;var i_=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return zk(e,r,n);case"!=":return qk(e,r,n);case">":return Vk(e,r,n);case">=":return Kk(e,r,n);case"<":return Wk(e,r,n);case"<=":return Zk(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};const Gk=hn,Yk=ua,{safeRe:Yu,t:Xu}=uo.exports;var Xk=(e,t)=>{if(e instanceof Gk)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Yu[Xu.COERCEFULL]:Yu[Xu.COERCE]);else{const f=t.includePrerelease?Yu[Xu.COERCERTLFULL]:Yu[Xu.COERCERTL];let u;for(;(u=f.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),f.lastIndex=u.index+u[1].length+u[2].length;f.lastIndex=-1}if(r===null)return null;const n=r[2],s=r[3]||"0",i=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return Yk(`${n}.${s}.${i}${o}${a}`,t)};class Jk{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}}var Qk=Jk,L0,s_;function ri(){if(s_)return L0;s_=1;const e=/\s+/g;class t{constructor(h,y){if(y=s(y),h instanceof t)return h.loose===!!y.loose&&h.includePrerelease===!!y.includePrerelease?h:new t(h.raw,y);if(h instanceof i)return this.raw=h.value,this.set=[[h]],this.formatted=void 0,this;if(this.options=y,this.loose=!!y.loose,this.includePrerelease=!!y.includePrerelease,this.raw=h.trim().replace(e," "),this.set=this.raw.split("||").map(v=>this.parseRange(v.trim())).filter(v=>v.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const v=this.set[0];if(this.set=this.set.filter(S=>!P(S[0])),this.set.length===0)this.set=[v];else if(this.set.length>1){for(const S of this.set)if(S.length===1&&$(S[0])){this.set=[S];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let h=0;h<this.set.length;h++){h>0&&(this.formatted+="||");const y=this.set[h];for(let v=0;v<y.length;v++)v>0&&(this.formatted+=" "),this.formatted+=y[v].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(h){const v=((this.options.includePrerelease&&b)|(this.options.loose&&T))+":"+h,S=n.get(v);if(S)return S;const B=this.options.loose,L=B?f[u.HYPHENRANGELOOSE]:f[u.HYPHENRANGE];h=h.replace(L,m(this.options.includePrerelease)),o("hyphen replace",h),h=h.replace(f[u.COMPARATORTRIM],l),o("comparator trim",h),h=h.replace(f[u.TILDETRIM],p),o("tilde trim",h),h=h.replace(f[u.CARETTRIM],_),o("caret trim",h);let I=h.split(" ").map(K=>F(K,this.options)).join(" ").split(/\s+/).map(K=>V(K,this.options));B&&(I=I.filter(K=>(o("loose invalid filter",K,this.options),!!K.match(f[u.COMPARATORLOOSE])))),o("range list",I);const w=new Map,R=I.map(K=>new i(K,this.options));for(const K of R){if(P(K))return[K];w.set(K.value,K)}w.size>1&&w.has("")&&w.delete("");const Y=[...w.values()];return n.set(v,Y),Y}intersects(h,y){if(!(h instanceof t))throw new TypeError("a Range is required");return this.set.some(v=>j(v,y)&&h.set.some(S=>j(S,y)&&v.every(B=>S.every(L=>B.intersects(L,y)))))}test(h){if(!h)return!1;if(typeof h=="string")try{h=new a(h,this.options)}catch{return!1}for(let y=0;y<this.set.length;y++)if(d(this.set[y],h,this.options))return!0;return!1}}L0=t;const r=Qk,n=new r,s=B0,i=Ju(),o=Ku,a=hn,{safeRe:f,t:u,comparatorTrimReplace:l,tildeTrimReplace:p,caretTrimReplace:_}=uo.exports,{FLAG_INCLUDE_PRERELEASE:b,FLAG_LOOSE:T}=Vu,P=c=>c.value==="<0.0.0-0",$=c=>c.value==="",j=(c,h)=>{let y=!0;const v=c.slice();let S=v.pop();for(;y&&v.length;)y=v.every(B=>S.intersects(B,h)),S=v.pop();return y},F=(c,h)=>(o("comp",c,h),c=Q(c,h),o("caret",c),c=C(c,h),o("tildes",c),c=z(c,h),o("xrange",c),c=D(c,h),o("stars",c),c),k=c=>!c||c.toLowerCase()==="x"||c==="*",C=(c,h)=>c.trim().split(/\s+/).map(y=>X(y,h)).join(" "),X=(c,h)=>{const y=h.loose?f[u.TILDELOOSE]:f[u.TILDE];return c.replace(y,(v,S,B,L,I)=>{o("tilde",c,v,S,B,L,I);let w;return k(S)?w="":k(B)?w=`>=${S}.0.0 <${+S+1}.0.0-0`:k(L)?w=`>=${S}.${B}.0 <${S}.${+B+1}.0-0`:I?(o("replaceTilde pr",I),w=`>=${S}.${B}.${L}-${I} <${S}.${+B+1}.0-0`):w=`>=${S}.${B}.${L} <${S}.${+B+1}.0-0`,o("tilde return",w),w})},Q=(c,h)=>c.trim().split(/\s+/).map(y=>Z(y,h)).join(" "),Z=(c,h)=>{o("caret",c,h);const y=h.loose?f[u.CARETLOOSE]:f[u.CARET],v=h.includePrerelease?"-0":"";return c.replace(y,(S,B,L,I,w)=>{o("caret",c,S,B,L,I,w);let R;return k(B)?R="":k(L)?R=`>=${B}.0.0${v} <${+B+1}.0.0-0`:k(I)?B==="0"?R=`>=${B}.${L}.0${v} <${B}.${+L+1}.0-0`:R=`>=${B}.${L}.0${v} <${+B+1}.0.0-0`:w?(o("replaceCaret pr",w),B==="0"?L==="0"?R=`>=${B}.${L}.${I}-${w} <${B}.${L}.${+I+1}-0`:R=`>=${B}.${L}.${I}-${w} <${B}.${+L+1}.0-0`:R=`>=${B}.${L}.${I}-${w} <${+B+1}.0.0-0`):(o("no pr"),B==="0"?L==="0"?R=`>=${B}.${L}.${I}${v} <${B}.${L}.${+I+1}-0`:R=`>=${B}.${L}.${I}${v} <${B}.${+L+1}.0-0`:R=`>=${B}.${L}.${I} <${+B+1}.0.0-0`),o("caret return",R),R})},z=(c,h)=>(o("replaceXRanges",c,h),c.split(/\s+/).map(y=>G(y,h)).join(" ")),G=(c,h)=>{c=c.trim();const y=h.loose?f[u.XRANGELOOSE]:f[u.XRANGE];return c.replace(y,(v,S,B,L,I,w)=>{o("xRange",c,v,S,B,L,I,w);const R=k(B),Y=R||k(L),K=Y||k(I),ne=K;return S==="="&&ne&&(S=""),w=h.includePrerelease?"-0":"",R?S===">"||S==="<"?v="<0.0.0-0":v="*":S&&ne?(Y&&(L=0),I=0,S===">"?(S=">=",Y?(B=+B+1,L=0,I=0):(L=+L+1,I=0)):S==="<="&&(S="<",Y?B=+B+1:L=+L+1),S==="<"&&(w="-0"),v=`${S+B}.${L}.${I}${w}`):Y?v=`>=${B}.0.0${w} <${+B+1}.0.0-0`:K&&(v=`>=${B}.${L}.0${w} <${B}.${+L+1}.0-0`),o("xRange return",v),v})},D=(c,h)=>(o("replaceStars",c,h),c.trim().replace(f[u.STAR],"")),V=(c,h)=>(o("replaceGTE0",c,h),c.trim().replace(f[h.includePrerelease?u.GTE0PRE:u.GTE0],"")),m=c=>(h,y,v,S,B,L,I,w,R,Y,K,ne)=>(k(v)?y="":k(S)?y=`>=${v}.0.0${c?"-0":""}`:k(B)?y=`>=${v}.${S}.0${c?"-0":""}`:L?y=`>=${y}`:y=`>=${y}${c?"-0":""}`,k(R)?w="":k(Y)?w=`<${+R+1}.0.0-0`:k(K)?w=`<${R}.${+Y+1}.0-0`:ne?w=`<=${R}.${Y}.${K}-${ne}`:c?w=`<${R}.${Y}.${+K+1}-0`:w=`<=${w}`,`${y} ${w}`.trim()),d=(c,h,y)=>{for(let v=0;v<c.length;v++)if(!c[v].test(h))return!1;if(h.prerelease.length&&!y.includePrerelease){for(let v=0;v<c.length;v++)if(o(c[v].semver),c[v].semver!==i.ANY&&c[v].semver.prerelease.length>0){const S=c[v].semver;if(S.major===h.major&&S.minor===h.minor&&S.patch===h.patch)return!0}return!1}return!0};return L0}var C0,o_;function Ju(){if(o_)return C0;o_=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(l,p){if(p=r(p),l instanceof t){if(l.loose===!!p.loose)return l;l=l.value}l=l.trim().split(/\s+/).join(" "),o("comparator",l,p),this.options=p,this.loose=!!p.loose,this.parse(l),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(l){const p=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],_=l.match(p);if(!_)throw new TypeError(`Invalid comparator: ${l}`);this.operator=_[1]!==void 0?_[1]:"",this.operator==="="&&(this.operator=""),_[2]?this.semver=new a(_[2],this.options.loose):this.semver=e}toString(){return this.value}test(l){if(o("Comparator.test",l,this.options.loose),this.semver===e||l===e)return!0;if(typeof l=="string")try{l=new a(l,this.options)}catch{return!1}return i(l,this.operator,this.semver,this.options)}intersects(l,p){if(!(l instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new f(l.value,p).test(this.value):l.operator===""?l.value===""?!0:new f(this.value,p).test(l.semver):(p=r(p),p.includePrerelease&&(this.value==="<0.0.0-0"||l.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||l.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&l.operator.startsWith(">")||this.operator.startsWith("<")&&l.operator.startsWith("<")||this.semver.version===l.semver.version&&this.operator.includes("=")&&l.operator.includes("=")||i(this.semver,"<",l.semver,p)&&this.operator.startsWith(">")&&l.operator.startsWith("<")||i(this.semver,">",l.semver,p)&&this.operator.startsWith("<")&&l.operator.startsWith(">")))}}C0=t;const r=B0,{safeRe:n,t:s}=uo.exports,i=i_,o=Ku,a=hn,f=ri();return C0}const eL=ri();var Qu=(e,t,r)=>{try{t=new eL(t,r)}catch{return!1}return t.test(e)};const tL=ri();var rL=(e,t)=>new tL(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));const nL=hn,iL=ri();var sL=(e,t,r)=>{let n=null,s=null,i=null;try{i=new iL(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new nL(n,r))}),n};const oL=hn,aL=ri();var cL=(e,t,r)=>{let n=null,s=null,i=null;try{i=new aL(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new oL(n,r))}),n};const O0=hn,fL=ri(),a_=Gu;var uL=(e,t)=>{e=new fL(e,t);let r=new O0("0.0.0");if(e.test(r)||(r=new O0("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const s=e.set[n];let i=null;s.forEach(o=>{const a=new O0(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||a_(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||a_(r,i))&&(r=i)}return r&&e.test(r)?r:null};const lL=ri();var hL=(e,t)=>{try{return new lL(e,t).range||"*"}catch{return null}};const dL=hn,c_=Ju(),{ANY:pL}=c_,gL=ri(),yL=Qu,f_=Gu,u_=T0,wL=k0,mL=R0;var $0=(e,t,r,n)=>{e=new dL(e,n),t=new gL(t,n);let s,i,o,a,f;switch(r){case">":s=f_,i=wL,o=u_,a=">",f=">=";break;case"<":s=u_,i=mL,o=f_,a="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yL(e,t,n))return!1;for(let u=0;u<t.set.length;++u){const l=t.set[u];let p=null,_=null;if(l.forEach(b=>{b.semver===pL&&(b=new c_(">=0.0.0")),p=p||b,_=_||b,s(b.semver,p.semver,n)?p=b:o(b.semver,_.semver,n)&&(_=b)}),p.operator===a||p.operator===f||(!_.operator||_.operator===a)&&i(e,_.semver))return!1;if(_.operator===f&&o(e,_.semver))return!1}return!0};const bL=$0;var vL=(e,t,r)=>bL(e,t,">",r);const _L=$0;var EL=(e,t,r)=>_L(e,t,"<",r);const l_=ri();var xL=(e,t,r)=>(e=new l_(e,r),t=new l_(t,r),e.intersects(t,r));const SL=Qu,AL=ti;var BL=(e,t,r)=>{const n=[];let s=null,i=null;const o=e.sort((l,p)=>AL(l,p,r));for(const l of o)SL(l,t,r)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const a=[];for(const[l,p]of n)l===p?a.push(l):!p&&l===o[0]?a.push("*"):p?l===o[0]?a.push(`<=${p}`):a.push(`${l} - ${p}`):a.push(`>=${l}`);const f=a.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return f.length<u.length?f:t};const h_=ri(),M0=Ju(),{ANY:N0}=M0,Sc=Qu,P0=ti,IL=(e,t,r={})=>{if(e===t)return!0;e=new h_(e,r),t=new h_(t,r);let n=!1;e:for(const s of e.set){for(const i of t.set){const o=RL(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},TL=[new M0(">=0.0.0-0")],d_=[new M0(">=0.0.0")],RL=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===N0){if(t.length===1&&t[0].semver===N0)return!0;r.includePrerelease?e=TL:e=d_}if(t.length===1&&t[0].semver===N0){if(r.includePrerelease)return!0;t=d_}const n=new Set;let s,i;for(const b of e)b.operator===">"||b.operator===">="?s=p_(s,b,r):b.operator==="<"||b.operator==="<="?i=g_(i,b,r):n.add(b.semver);if(n.size>1)return null;let o;if(s&&i){if(o=P0(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const b of n){if(s&&!Sc(b,String(s),r)||i&&!Sc(b,String(i),r))return null;for(const T of t)if(!Sc(b,String(T),r))return!1;return!0}let a,f,u,l,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,_=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;p&&p.prerelease.length===1&&i.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(const b of t){if(l=l||b.operator===">"||b.operator===">=",u=u||b.operator==="<"||b.operator==="<=",s){if(_&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===_.major&&b.semver.minor===_.minor&&b.semver.patch===_.patch&&(_=!1),b.operator===">"||b.operator===">="){if(a=p_(s,b,r),a===b&&a!==s)return!1}else if(s.operator===">="&&!Sc(s.semver,String(b),r))return!1}if(i){if(p&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===p.major&&b.semver.minor===p.minor&&b.semver.patch===p.patch&&(p=!1),b.operator==="<"||b.operator==="<="){if(f=g_(i,b,r),f===b&&f!==i)return!1}else if(i.operator==="<="&&!Sc(i.semver,String(b),r))return!1}if(!b.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&l&&!s&&o!==0||_||p)},p_=(e,t,r)=>{if(!e)return t;const n=P0(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},g_=(e,t,r)=>{if(!e)return t;const n=P0(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var kL=IL;const U0=uo.exports,y_=Vu,LL=hn,w_=Wv,CL=ua,OL=yk,$L=mk,ML=bk,NL=vk,PL=Ek,UL=Sk,FL=Bk,HL=Tk,jL=ti,DL=kk,zL=Ck,qL=I0,VL=$k,KL=Nk,WL=Gu,ZL=T0,GL=r_,YL=n_,XL=R0,JL=k0,QL=i_,eC=Xk,tC=Ju(),rC=ri();var nC={parse:CL,valid:OL,clean:$L,inc:ML,diff:NL,major:PL,minor:UL,patch:FL,prerelease:HL,compare:jL,rcompare:DL,compareLoose:zL,compareBuild:qL,sort:VL,rsort:KL,gt:WL,lt:ZL,eq:GL,neq:YL,gte:XL,lte:JL,cmp:QL,coerce:eC,Comparator:tC,Range:rC,satisfies:Qu,toComparators:rL,maxSatisfying:sL,minSatisfying:cL,minVersion:uL,validRange:hL,outside:$0,gtr:vL,ltr:EL,intersects:xL,simplifyRange:BL,subset:kL,SemVer:LL,re:U0.re,src:U0.src,tokens:U0.t,SEMVER_SPEC_VERSION:y_.SEMVER_SPEC_VERSION,RELEASE_TYPES:y_.RELEASE_TYPES,compareIdentifiers:w_.compareIdentifiers,rcompareIdentifiers:w_.rcompareIdentifiers};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.satisfiesVersionRange=e.gtRange=e.gtVersion=e.assertIsSemVerRange=e.assertIsSemVerVersion=e.isValidSemVerRange=e.isValidSemVerVersion=e.VersionRangeStruct=e.VersionStruct=void 0;const t=Xn,r=nC,n=Gr;e.VersionStruct=(0,t.refine)((0,t.string)(),"Version",p=>(0,r.valid)(p)===null?`Expected SemVer version, got "${p}"`:!0),e.VersionRangeStruct=(0,t.refine)((0,t.string)(),"Version range",p=>(0,r.validRange)(p)===null?`Expected SemVer range, got "${p}"`:!0);function s(p){return(0,t.is)(p,e.VersionStruct)}e.isValidSemVerVersion=s;function i(p){return(0,t.is)(p,e.VersionRangeStruct)}e.isValidSemVerRange=i;function o(p){(0,n.assertStruct)(p,e.VersionStruct)}e.assertIsSemVerVersion=o;function a(p){(0,n.assertStruct)(p,e.VersionRangeStruct)}e.assertIsSemVerRange=a;function f(p,_){return(0,r.gt)(p,_)}e.gtVersion=f;function u(p,_){return(0,r.gtr)(p,_)}e.gtRange=u;function l(p,_){return(0,r.satisfies)(p,_,{includePrerelease:!0})}e.satisfiesVersionRange=l})(zv),function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Pe&&Pe.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(Gr,e),r(bc,e),r(_0(),e),r(Lv,e),r(Du,e),r(mi,e),r(oa,e),r(Nv,e),r(Rn,e),r(ju(),e),r(Pv,e),r(Uv,e),r(aa,e),r(Pu,e),r(vi,e),r(Hv,e),r(qu,e),r(jv,e),r(Dv,e),r(zv,e)}(Zr),Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.normalize=Wr.recoverPublicKey=Wr.concatSig=Wr.legacyToBuffer=Wr.isNullish=Wr.padWithZeroes=void 0;const qi=Uf,la=Zr;function F0(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}Wr.padWithZeroes=F0;function m_(e){return e==null}Wr.isNullish=m_;function iC(e){return typeof e=="string"&&!(0,qi.isHexString)(e)?se.Buffer.from(e):(0,qi.toBuffer)(e)}Wr.legacyToBuffer=iC;function sC(e,t,r){const n=(0,qi.fromSigned)(t),s=(0,qi.fromSigned)(r),i=(0,qi.bufferToInt)(e),o=F0((0,qi.toUnsigned)(n).toString("hex"),64),a=F0((0,qi.toUnsigned)(s).toString("hex"),64),f=(0,la.remove0x)((0,la.numberToHex)(i));return(0,la.add0x)(o.concat(a,f))}Wr.concatSig=sC;function oC(e,t){const r=(0,qi.fromRpcSig)(t);return(0,qi.ecrecover)(e,r.v,r.r,r.s)}Wr.recoverPublicKey=oC;function aC(e){if(!m_(e)){if(typeof e=="number"){if(e<0)return"0x";const t=(0,la.numberToBytes)(e);e=(0,la.bytesToHex)(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return(0,la.add0x)(e.toLowerCase())}}Wr.normalize=aC,Object.defineProperty(ns,"__esModule",{value:!0}),ns.extractPublicKey=ns.recoverPersonalSignature=ns.personalSign=void 0;const ha=Uf,_i=Wr;function cC({privateKey:e,data:t}){if((0,_i.isNullish)(t))throw new Error("Missing data parameter");if((0,_i.isNullish)(e))throw new Error("Missing privateKey parameter");const r=(0,_i.legacyToBuffer)(t),n=(0,ha.hashPersonalMessage)(r),s=(0,ha.ecsign)(n,e);return(0,_i.concatSig)((0,ha.toBuffer)(s.v),s.r,s.s)}ns.personalSign=cC;function fC({data:e,signature:t}){if((0,_i.isNullish)(e))throw new Error("Missing data parameter");if((0,_i.isNullish)(t))throw new Error("Missing signature parameter");const r=b_(e,t),n=(0,ha.publicToAddress)(r);return(0,ha.bufferToHex)(n)}ns.recoverPersonalSignature=fC;function uC({data:e,signature:t}){if((0,_i.isNullish)(e))throw new Error("Missing data parameter");if((0,_i.isNullish)(t))throw new Error("Missing signature parameter");return`0x${b_(e,t).toString("hex")}`}ns.extractPublicKey=uC;function b_(e,t){const r=(0,ha.hashPersonalMessage)((0,_i.legacyToBuffer)(e));return(0,_i.recoverPublicKey)(r,t)}var v_={},__={},E_={},ni={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParserError=e.getErrorStack=e.getErrorMessage=void 0;const t=Zr,r=i=>typeof i=="string"?i:i instanceof Error||(0,t.isObject)(i)&&(0,t.hasProperty)(i,"message")&&typeof i.message=="string"?i.message:"Unknown error.";e.getErrorMessage=r;const n=i=>{if(i instanceof Error)return i.stack};e.getErrorStack=n;class s extends Error{constructor(o,a){super(o),this.name="ParserError";const f=(0,e.getErrorStack)(a);f&&(this.stack=f)}}e.ParserError=s})(ni);var H0={},el={};Object.defineProperty(el,"__esModule",{value:!0}),el.iterate=void 0;const x_=Zr,lC=function*(e,t=32){for(let r=0;r<e.length;r+=t){const n=i=>{(0,x_.assert)(i>=0,"Cannot skip a negative number of bytes."),(0,x_.assert)(i%t===0,"Length must be a multiple of the size."),r+=i},s=e.subarray(r);yield{skip:n,value:s}}return{skip:()=>{},value:new Uint8Array}};el.iterate=lC;var j0={},S_={},Rs={},ks={};Object.defineProperty(ks,"__esModule",{value:!0}),ks.padEnd=ks.padStart=ks.set=void 0;const D0=Zr,A_=32,hC=(e,t,r)=>(0,D0.concatBytes)([e.subarray(0,r),t,e.subarray(r+t.length)]);ks.set=hC;const dC=(e,t=A_)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,D0.concatBytes)([r,e])};ks.padStart=dC;const pC=(e,t=A_)=>{const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,D0.concatBytes)([e,r])};ks.padEnd=pC,function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Pe&&Pe.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(ks,e)}(Rs),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.address=e.getAddress=void 0;const t=Zr,r=ni,n=Rs,s=i=>{const o=(0,t.createBytes)(i);return(0,t.assert)(o.length<=20,new r.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${o.length} bytes.`)),(0,n.padStart)(o,20)};e.getAddress=s,e.address={isDynamic:!1,isType:i=>i==="address",getByteLength(){return 32},encode({buffer:i,value:o,packed:a}){const f=(0,e.getAddress)(o);if(a)return(0,t.concatBytes)([i,f]);const u=(0,n.padStart)(f);return(0,t.concatBytes)([i,u])},decode({value:i}){return(0,t.add0x)((0,t.bytesToHex)(i.slice(12,32)))}}}(S_);var z0={},tl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fixedBytes=e.getByteLength=void 0;const t=Zr,r=ni,n=Rs,s=/^bytes([0-9]{1,2})$/u,i=o=>{const a=o.match(s)?.[1];(0,t.assert)(a,`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`);const f=Number(a);return(0,t.assert)(f>0&&f<=32,new r.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`)),f};e.getByteLength=i,e.fixedBytes={isDynamic:!1,isType(o){return s.test(o)},getByteLength(){return 32},encode({type:o,buffer:a,value:f,packed:u}){const l=(0,e.getByteLength)(o),p=(0,t.createBytes)(f);return(0,t.assert)(p.length<=l,new r.ParserError(`Expected a value of length ${l}, but received a value of length ${p.length}.`)),u?(0,t.concatBytes)([a,(0,n.padEnd)(p,l)]):(0,t.concatBytes)([a,(0,n.padEnd)(p)])},decode({type:o,value:a}){const f=(0,e.getByteLength)(o);return a.slice(0,f)}}})(tl);var q0={},B_;function I_(){return B_||(B_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.tuple=e.getTupleElements=void 0;const t=Zr,r=ni,n=K0(),s=/^\((.+)\)$/u,i=a=>s.test(a),o=a=>{(0,t.assert)(a.startsWith("(")&&a.endsWith(")"),new r.ParserError(`Invalid tuple type. Expected tuple type, but received "${a}".`));const f=[];let u="",l=0;for(let p=1;p<a.length-1;p++){const _=a[p];_===","&&l===0?(f.push(u.trim()),u=""):(u+=_,_==="("?l+=1:_===")"&&(l-=1))}return u.trim()&&f.push(u.trim()),f};e.getTupleElements=o,e.tuple={isDynamic(a){return(0,e.getTupleElements)(a).some(u=>{const l=(0,n.getParser)(u);return(0,n.isDynamicParser)(l,u)})},isType(a){return i(a)},getByteLength(a){return(0,n.isDynamicParser)(this,a)?32:(0,e.getTupleElements)(a).reduce((u,l)=>u+(0,n.getParser)(l).getByteLength(l),0)},encode({type:a,buffer:f,value:u,packed:l,tight:p}){const _=(0,e.getTupleElements)(a);return(0,n.pack)({types:_,values:u,byteArray:f,packed:l,tight:p})},decode({type:a,value:f,skip:u}){const l=(0,e.getTupleElements)(a),p=this.getByteLength(a)-32;return u(p),(0,n.unpack)(l,f)}}}(q0)),q0}var T_;function gC(){return T_||(T_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.array=e.getTupleType=e.getArrayType=e.isArrayType=void 0;const t=Zr,r=ni,n=K0(),s=Rs,i=tl,o=I_(),a=/^(?<type>.*)\[(?<length>\d*?)\]$/u,f=p=>a.test(p);e.isArrayType=f;const u=p=>{const _=p.match(a);return(0,t.assert)(_?.groups?.type,new r.ParserError(`Invalid array type. Expected an array type, but received "${p}".`)),[_.groups.type,_.groups.length?parseInt(_.groups.length,10):void 0]};e.getArrayType=u;const l=(p,_)=>`(${new Array(_).fill(p).join(",")})`;e.getTupleType=l,e.array={isDynamic(p){const[_,b]=(0,e.getArrayType)(p);return b===void 0||(0,n.isDynamicParser)((0,n.getParser)(_),_)},isType(p){return(0,e.isArrayType)(p)},getByteLength(p){(0,t.assert)((0,e.isArrayType)(p),new r.ParserError(`Expected an array type, but received "${p}".`));const[_,b]=(0,e.getArrayType)(p);return!(0,n.isDynamicParser)(this,p)&&b!==void 0?o.tuple.getByteLength((0,e.getTupleType)(_,b)):32},encode({type:p,buffer:_,value:b,packed:T,tight:P}){const[$,j]=(0,e.getArrayType)(p);if((0,t.assert)(!T||!(0,e.isArrayType)($),new r.ParserError("Cannot pack nested arrays.")),T&&(0,n.isDynamicParser)((0,n.getParser)($),$))return(0,n.pack)({types:new Array(b.length).fill($),values:b,byteArray:_,packed:T,arrayPacked:!0,tight:P});if(j)return(0,t.assert)(j===b.length,new r.ParserError(`Array length does not match type length. Expected a length of ${j}, but received ${b.length}.`)),o.tuple.encode({type:(0,e.getTupleType)($,j),buffer:_,value:b,packed:i.fixedBytes.isType($)&&P,tight:P});if(T)return(0,n.pack)({types:new Array(b.length).fill($),values:b,byteArray:_,packed:i.fixedBytes.isType($)&&P,arrayPacked:!0,tight:P});const F=(0,s.padStart)((0,t.numberToBytes)(b.length));return(0,n.pack)({types:new Array(b.length).fill($),values:b,byteArray:(0,t.concatBytes)([_,F]),packed:T,tight:P})},decode({type:p,value:_,...b}){const[T,P]=(0,e.getArrayType)(p);if(P){const j=o.tuple.decode({type:(0,e.getTupleType)(T,P),value:_,...b});return(0,t.assert)(j.length===P,new r.ParserError(`Array length does not match type length. Expected a length of ${P}, but received ${j.length}.`)),j}const $=(0,t.bytesToNumber)(_.subarray(0,32));return(0,n.unpack)(new Array($).fill(T),_.subarray(32))}}}(z0)),z0}var R_={},V0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.number=e.getBigInt=e.assertNumberLength=e.getLength=e.isSigned=void 0;const t=Zr,r=ni,n=Rs,s=/^u?int(?<length>[0-9]*)?$/u,i=u=>!u.startsWith("u");e.isSigned=i;const o=u=>{if(u==="int"||u==="uint")return 256;const l=u.match(s);(0,t.assert)(l?.groups?.length,new r.ParserError(`Invalid number type. Expected a number type, but received "${u}".`));const p=parseInt(l.groups.length,10);return(0,t.assert)(p>=8&&p<=256,new r.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${u}".`)),(0,t.assert)(p%8===0,new r.ParserError(`Invalid number length. Expected a multiple of 8, but received "${u}".`)),p};e.getLength=o;const a=(u,l)=>{const p=(0,e.getLength)(l),_=BigInt(2)**BigInt(p-((0,e.isSigned)(l)?1:0))-BigInt(1);if((0,e.isSigned)(l)){(0,t.assert)(u>=-(_+BigInt(1))&&u<=_,new r.ParserError(`Number "${u}" is out of range for type "${l}".`));return}(0,t.assert)(u<=_,new r.ParserError(`Number "${u}" is out of range for type "${l}".`))};e.assertNumberLength=a;const f=u=>{try{return(0,t.createBigInt)(u)}catch{throw new r.ParserError(`Invalid number. Expected a valid number value, but received "${u}".`)}};e.getBigInt=f,e.number={isDynamic:!1,isType(u){return s.test(u)},getByteLength(){return 32},encode({type:u,buffer:l,value:p,packed:_}){const b=(0,e.getBigInt)(p);if((0,e.assertNumberLength)(b,u),(0,e.isSigned)(u)){if(_){const T=(0,e.getLength)(u)/8;return(0,t.concatBytes)([l,(0,t.signedBigIntToBytes)(b,T)])}return(0,t.concatBytes)([l,(0,n.padStart)((0,t.signedBigIntToBytes)(b,32))])}if(_){const T=(0,e.getLength)(u)/8;return(0,t.concatBytes)([l,(0,n.padStart)((0,t.bigIntToBytes)(b),T)])}return(0,t.concatBytes)([l,(0,n.padStart)((0,t.bigIntToBytes)(b))])},decode({type:u,value:l}){const p=l.subarray(0,32);if((0,e.isSigned)(u)){const b=(0,t.bytesToSignedBigInt)(p);return(0,e.assertNumberLength)(b,u),b}const _=(0,t.bytesToBigInt)(p);return(0,e.assertNumberLength)(_,u),_}}})(V0),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bool=e.getBooleanValue=void 0;const t=Xn,r=Zr,n=ni,s=V0,i=(0,t.coerce)((0,t.boolean)(),(0,t.union)([(0,t.literal)("true"),(0,t.literal)("false")]),a=>a==="true"),o=a=>{try{return(0,t.create)(a,i)?BigInt(1):BigInt(0)}catch{throw new n.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${a}".`)}};e.getBooleanValue=o,e.bool={isDynamic:!1,isType:a=>a==="bool",getByteLength(){return 32},encode({buffer:a,value:f,packed:u,tight:l}){const p=(0,e.getBooleanValue)(f);return u?(0,r.concatBytes)([a,(0,r.bigIntToBytes)(p)]):s.number.encode({type:"uint256",buffer:a,value:p,packed:u,tight:l})},decode(a){return s.number.decode({...a,type:"uint256"})===BigInt(1)}}}(R_);var Ac={};Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.bytes=void 0;const Bc=Zr,k_=Rs;Ac.bytes={isDynamic:!0,isType:e=>e==="bytes",getByteLength(){return 32},encode({buffer:e,value:t,packed:r}){const n=(0,Bc.createBytes)(t);if(r)return(0,Bc.concatBytes)([e,n]);const s=Math.ceil(n.byteLength/32)*32;return(0,Bc.concatBytes)([e,(0,k_.padStart)((0,Bc.numberToBytes)(n.byteLength)),(0,k_.padEnd)(n,s)])},decode({value:e}){const t=e.subarray(0,32),r=(0,Bc.bytesToNumber)(t);return e.slice(32,32+r)}};var L_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fn=e.getFunction=void 0;const t=Xn,r=Zr,n=ni,s=tl,i=(0,t.coerce)((0,t.object)({address:r.StrictHexStruct,selector:r.StrictHexStruct}),(0,t.union)([r.StrictHexStruct,(0,t.instance)(Uint8Array)]),a=>{const f=(0,r.createBytes)(a);return(0,r.assert)(f.length===24,new n.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${f.length} bytes.`)),{address:(0,r.bytesToHex)(f.subarray(0,20)),selector:(0,r.bytesToHex)(f.subarray(20,24))}}),o=a=>{const f=(0,t.create)(a,i);return(0,r.concatBytes)([(0,r.hexToBytes)(f.address),(0,r.hexToBytes)(f.selector)])};e.getFunction=o,e.fn={isDynamic:!1,isType:a=>a==="function",getByteLength(){return 32},encode({buffer:a,value:f,packed:u,tight:l}){const p=(0,e.getFunction)(f);return s.fixedBytes.encode({type:"bytes24",buffer:a,value:p,packed:u,tight:l})},decode({value:a}){return{address:(0,r.bytesToHex)(a.slice(0,20)),selector:(0,r.bytesToHex)(a.slice(20,24))}}}})(L_);var C_={};Object.defineProperty(C_,"__esModule",{value:!0});var rl={};Object.defineProperty(rl,"__esModule",{value:!0}),rl.string=void 0;const O_=Zr,$_=Ac;rl.string={isDynamic:!0,isType:e=>e==="string",getByteLength(){return 32},encode({buffer:e,value:t,packed:r,tight:n}){return $_.bytes.encode({type:"bytes",buffer:e,value:(0,O_.stringToBytes)(t),packed:r,tight:n})},decode(e){return(0,O_.bytesToString)($_.bytes.decode(e))}};var M_;function N_(){return M_||(M_=1,function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Pe&&Pe.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(S_,e),r(gC(),e),r(R_,e),r(Ac,e),r(tl,e),r(L_,e),r(V0,e),r(C_,e),r(rl,e),r(I_(),e)}(j0)),j0}var P_;function K0(){return P_||(P_=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.unpack=e.pack=e.isDynamicParser=e.getParser=void 0;const t=Zr,r=ni,n=el,s=N_(),i=Rs,o=l=>{const p={address:s.address,array:s.array,bool:s.bool,bytes:s.bytes,fixedBytes:s.fixedBytes,function:s.fn,number:s.number,string:s.string,tuple:s.tuple},_=p[l];if(_)return _;const b=Object.values(p).find(T=>T.isType(l));if(b)return b;throw new r.ParserError(`The type "${l}" is not supported.`)};e.getParser=o;const a=(l,p)=>{const{isDynamic:_}=l;return typeof _=="function"?_(p):_};e.isDynamicParser=a;const f=({types:l,values:p,packed:_=!1,tight:b=!1,arrayPacked:T=!1,byteArray:P=new Uint8Array})=>{(0,t.assert)(l.length===p.length,new r.ParserError(`The number of types (${l.length}) does not match the number of values (${p.length}).`));const{staticBuffer:$,dynamicBuffer:j,pointers:F}=l.reduce(({staticBuffer:X,dynamicBuffer:Q,pointers:Z},z,G)=>{const D=(0,e.getParser)(z),V=p[G];if(_||T||!(0,e.isDynamicParser)(D,z))return{staticBuffer:D.encode({buffer:X,value:V,type:z,packed:_,tight:b}),dynamicBuffer:Q,pointers:Z};const m=(0,t.concatBytes)([X,new Uint8Array(32)]),d=D.encode({buffer:Q,value:V,type:z,packed:_,tight:b});return{staticBuffer:m,dynamicBuffer:d,pointers:[...Z,{position:X.length,pointer:Q.length}]}},{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,t.assert)(!_&&!T||j.length===0,new r.ParserError("Invalid pack state."));const k=$.length,C=F.reduce((X,{pointer:Q,position:Z})=>{const z=(0,i.padStart)((0,t.numberToBytes)(k+Q));return(0,i.set)(X,z,Z)},$);return(0,t.concatBytes)([P,C,j])};e.pack=f;const u=(l,p)=>{const _=(0,n.iterate)(p);return l.map(b=>{const{value:{value:T,skip:P},done:$}=_.next();(0,t.assert)(!$,new r.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${b}".`));const j=(0,e.getParser)(b);if((0,e.isDynamicParser)(j,b)){const k=(0,t.bytesToNumber)(T.subarray(0,32)),C=p.subarray(k);return j.decode({type:b,value:C,skip:P})}return j.decode({type:b,value:T,skip:P})})};e.unpack=u}(H0)),H0}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeSingle=e.decode=e.encodePacked=e.encodeSingle=e.encode=void 0;const t=Zr,r=ni,n=K0(),s=(u,l,p,_)=>{try{return(0,n.pack)({types:u,values:l,packed:p,tight:_})}catch(b){throw b instanceof r.ParserError?new r.ParserError(`Unable to encode value: ${b.message}`,b):new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(b)}`,b)}};e.encode=s;const i=(u,l)=>(0,e.encode)([u],[l]);e.encodeSingle=i;const o=(u,l,p)=>(0,e.encode)(u,l,!0,p);e.encodePacked=o;const a=(u,l)=>{const p=(0,t.createBytes)(l);try{return(0,n.unpack)(u,p)}catch(_){throw _ instanceof r.ParserError?new r.ParserError(`Unable to decode value: ${_.message}`,_):new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(_)}`,_)}};e.decode=a;const f=(u,l)=>{const p=(0,e.decode)([u],l);return(0,t.assert)(p.length===1,new r.ParserError("Decoded value array has unexpected length.")),p[0]};e.decodeSingle=f})(E_);var U_={},F_={};Object.defineProperty(F_,"__esModule",{value:!0}),function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Pe&&Pe.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(F_,e)}(U_),function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}:function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]}),r=Pe&&Pe.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),r(E_,e),r(ni,e),r(U_,e)}(__);var Ei={},Qt={},Lr={};Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.output=Lr.exists=Lr.hash=Lr.bytes=Lr.bool=Lr.number=Lr.isBytes=void 0;function nl(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}Lr.number=nl;function H_(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}Lr.bool=H_;function j_(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}Lr.isBytes=j_;function W0(e,...t){if(!j_(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}Lr.bytes=W0;function D_(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");nl(e.outputLen),nl(e.blockLen)}Lr.hash=D_;function z_(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Lr.exists=z_;function q_(e,t){W0(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Lr.output=q_;const yC={number:nl,bool:H_,bytes:W0,hash:D_,exists:z_,output:q_};Lr.default=yC;var ct={};Object.defineProperty(ct,"__esModule",{value:!0}),ct.add5L=ct.add5H=ct.add4H=ct.add4L=ct.add3H=ct.add3L=ct.add=ct.rotlBL=ct.rotlBH=ct.rotlSL=ct.rotlSH=ct.rotr32L=ct.rotr32H=ct.rotrBL=ct.rotrBH=ct.rotrSL=ct.rotrSH=ct.shrSL=ct.shrSH=ct.toBig=ct.split=ct.fromBig=void 0;const il=BigInt(2**32-1),Z0=BigInt(32);function G0(e,t=!1){return t?{h:Number(e&il),l:Number(e>>Z0&il)}:{h:Number(e>>Z0&il)|0,l:Number(e&il)|0}}ct.fromBig=G0;function V_(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=G0(e[s],t);[r[s],n[s]]=[i,o]}return[r,n]}ct.split=V_;const K_=(e,t)=>BigInt(e>>>0)<<Z0|BigInt(t>>>0);ct.toBig=K_;const W_=(e,t,r)=>e>>>r;ct.shrSH=W_;const Z_=(e,t,r)=>e<<32-r|t>>>r;ct.shrSL=Z_;const G_=(e,t,r)=>e>>>r|t<<32-r;ct.rotrSH=G_;const Y_=(e,t,r)=>e<<32-r|t>>>r;ct.rotrSL=Y_;const X_=(e,t,r)=>e<<64-r|t>>>r-32;ct.rotrBH=X_;const J_=(e,t,r)=>e>>>r-32|t<<64-r;ct.rotrBL=J_;const Q_=(e,t)=>t;ct.rotr32H=Q_;const e2=(e,t)=>e;ct.rotr32L=e2;const t2=(e,t,r)=>e<<r|t>>>32-r;ct.rotlSH=t2;const r2=(e,t,r)=>t<<r|e>>>32-r;ct.rotlSL=r2;const n2=(e,t,r)=>t<<r-32|e>>>64-r;ct.rotlBH=n2;const i2=(e,t,r)=>e<<r-32|t>>>64-r;ct.rotlBL=i2;function s2(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:s|0}}ct.add=s2;const o2=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);ct.add3L=o2;const a2=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;ct.add3H=a2;const c2=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);ct.add4L=c2;const f2=(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0;ct.add4H=f2;const u2=(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0);ct.add5L=u2;const l2=(e,t,r,n,s,i)=>t+r+n+s+i+(e/2**32|0)|0;ct.add5H=l2;const wC={fromBig:G0,split:V_,toBig:K_,shrSH:W_,shrSL:Z_,rotrSH:G_,rotrSL:Y_,rotrBH:X_,rotrBL:J_,rotr32H:Q_,rotr32L:e2,rotlSH:t2,rotlSL:r2,rotlBH:n2,rotlBL:i2,add:s2,add3L:o2,add3H:a2,add4L:c2,add4H:f2,add5H:l2,add5L:u2};ct.default=wC;var sl={},ol={};Object.defineProperty(ol,"__esModule",{value:!0}),ol.crypto=void 0,ol.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.byteSwap32=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=e.isBytes=void 0;const t=ol,r=Lr;function n(m){return m instanceof Uint8Array||m!=null&&typeof m=="object"&&m.constructor.name==="Uint8Array"}e.isBytes=n;const s=m=>new Uint8Array(m.buffer,m.byteOffset,m.byteLength);e.u8=s;const i=m=>new Uint32Array(m.buffer,m.byteOffset,Math.floor(m.byteLength/4));e.u32=i;const o=m=>new DataView(m.buffer,m.byteOffset,m.byteLength);e.createView=o;const a=(m,d)=>m<<32-d|m>>>d;e.rotr=a;const f=(m,d)=>m<<d|m>>>32-d>>>0;e.rotl=f,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const u=m=>m<<24&4278190080|m<<8&16711680|m>>>8&65280|m>>>24&255;e.byteSwap=u,e.byteSwapIfBE=e.isLE?m=>m:m=>(0,e.byteSwap)(m);function l(m){for(let d=0;d<m.length;d++)m[d]=(0,e.byteSwap)(m[d])}e.byteSwap32=l;const p=Array.from({length:256},(m,d)=>d.toString(16).padStart(2,"0"));function _(m){(0,r.bytes)(m);let d="";for(let c=0;c<m.length;c++)d+=p[m[c]];return d}e.bytesToHex=_;const b={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function T(m){if(m>=b._0&&m<=b._9)return m-b._0;if(m>=b._A&&m<=b._F)return m-(b._A-10);if(m>=b._a&&m<=b._f)return m-(b._a-10)}function P(m){if(typeof m!="string")throw new Error("hex string expected, got "+typeof m);const d=m.length,c=d/2;if(d%2)throw new Error("padded hex string expected, got unpadded hex of length "+d);const h=new Uint8Array(c);for(let y=0,v=0;y<c;y++,v+=2){const S=T(m.charCodeAt(v)),B=T(m.charCodeAt(v+1));if(S===void 0||B===void 0){const L=m[v]+m[v+1];throw new Error('hex string expected, got non-hex character "'+L+'" at index '+v)}h[y]=S*16+B}return h}e.hexToBytes=P;const $=async()=>{};e.nextTick=$;async function j(m,d,c){let h=Date.now();for(let y=0;y<m;y++){c(y);const v=Date.now()-h;v>=0&&v<d||(await(0,e.nextTick)(),h+=v)}}e.asyncLoop=j;function F(m){if(typeof m!="string")throw new Error(`utf8ToBytes expected string, got ${typeof m}`);return new Uint8Array(new TextEncoder().encode(m))}e.utf8ToBytes=F;function k(m){return typeof m=="string"&&(m=F(m)),(0,r.bytes)(m),m}e.toBytes=k;function C(...m){let d=0;for(let h=0;h<m.length;h++){const y=m[h];(0,r.bytes)(y),d+=y.length}const c=new Uint8Array(d);for(let h=0,y=0;h<m.length;h++){const v=m[h];c.set(v,y),y+=v.length}return c}e.concatBytes=C;class X{clone(){return this._cloneInto()}}e.Hash=X;const Q={}.toString;function Z(m,d){if(d!==void 0&&Q.call(d)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(m,d)}e.checkOpts=Z;function z(m){const d=h=>m().update(k(h)).digest(),c=m();return d.outputLen=c.outputLen,d.blockLen=c.blockLen,d.create=()=>m(),d}e.wrapConstructor=z;function G(m){const d=(h,y)=>m(y).update(k(h)).digest(),c=m({});return d.outputLen=c.outputLen,d.blockLen=c.blockLen,d.create=h=>m(h),d}e.wrapConstructorWithOpts=G;function D(m){const d=(h,y)=>m(y).update(k(h)).digest(),c=m({});return d.outputLen=c.outputLen,d.blockLen=c.blockLen,d.create=h=>m(h),d}e.wrapXOFConstructorWithOpts=D;function V(m=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(m));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=V}(sl),Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.shake256=Qt.shake128=Qt.keccak_512=Qt.keccak_384=Qt.keccak_256=Qt.keccak_224=Qt.sha3_512=Qt.sha3_384=Qt.sha3_256=Qt.sha3_224=Qt.Keccak=Qt.keccakP=void 0;const da=Lr,Ic=ct,Vi=sl,h2=[],d2=[],p2=[],mC=BigInt(0),Tc=BigInt(1),bC=BigInt(2),vC=BigInt(7),_C=BigInt(256),EC=BigInt(113);for(let e=0,t=Tc,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],h2.push(2*(5*n+r)),d2.push((e+1)*(e+2)/2%64);let s=mC;for(let i=0;i<7;i++)t=(t<<Tc^(t>>vC)*EC)%_C,t&bC&&(s^=Tc<<(Tc<<BigInt(i))-Tc);p2.push(s)}const[xC,SC]=(0,Ic.split)(p2,!0),g2=(e,t,r)=>r>32?(0,Ic.rotlBH)(e,t,r):(0,Ic.rotlSH)(e,t,r),y2=(e,t,r)=>r>32?(0,Ic.rotlBL)(e,t,r):(0,Ic.rotlSL)(e,t,r);function w2(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)r[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,f=(o+2)%10,u=r[f],l=r[f+1],p=g2(u,l,1)^r[a],_=y2(u,l,1)^r[a+1];for(let b=0;b<50;b+=10)e[o+b]^=p,e[o+b+1]^=_}let s=e[2],i=e[3];for(let o=0;o<24;o++){const a=d2[o],f=g2(s,i,a),u=y2(s,i,a),l=h2[o];s=e[l],i=e[l+1],e[l]=f,e[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=e[o+a];for(let a=0;a<10;a++)e[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=xC[n],e[1]^=SC[n]}r.fill(0)}Qt.keccakP=w2;class Rc extends Vi.Hash{constructor(t,r,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,da.number)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Vi.u32)(this.state)}keccak(){Vi.isLE||(0,Vi.byteSwap32)(this.state32),w2(this.state32,this.rounds),Vi.isLE||(0,Vi.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,da.exists)(this);const{blockLen:r,state:n}=this;t=(0,Vi.toBytes)(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:r,pos:n,blockLen:s}=this;t[n]^=r,r&128&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){(0,da.exists)(this,!1),(0,da.bytes)(t),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);t.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,da.number)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,da.output)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Rc(r,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}Qt.Keccak=Rc;const Ls=(e,t,r)=>(0,Vi.wrapConstructor)(()=>new Rc(t,e,r));Qt.sha3_224=Ls(6,144,224/8),Qt.sha3_256=Ls(6,136,256/8),Qt.sha3_384=Ls(6,104,384/8),Qt.sha3_512=Ls(6,72,512/8),Qt.keccak_224=Ls(1,144,224/8),Qt.keccak_256=Ls(1,136,256/8),Qt.keccak_384=Ls(1,104,384/8),Qt.keccak_512=Ls(1,72,512/8);const m2=(e,t,r)=>(0,Vi.wrapXOFConstructorWithOpts)((n={})=>new Rc(t,e,n.dkLen===void 0?r:n.dkLen,!0));Qt.shake128=m2(31,168,128/8),Qt.shake256=m2(31,136,256/8);var Y0={exports:{}};(function(e,t){var r=Pe&&Pe.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0,t.bytesToUtf8=f,t.hexToBytes=u,t.equalsBytes=l,t.wrapHash=p;const n=r(Lr),s=sl,i=n.default.bool;t.assertBool=i;const o=n.default.bytes;t.assertBytes=o;var a=sl;Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return a.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return a.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return a.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return a.utf8ToBytes}});function f(_){if(!(_ instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof _}`);return new TextDecoder().decode(_)}function u(_){const b=_.startsWith("0x")?_.substring(2):_;return(0,s.hexToBytes)(b)}function l(_,b){if(_.length!==b.length)return!1;for(let T=0;T<_.length;T++)if(_[T]!==b[T])return!1;return!0}function p(_){return b=>(n.default.bytes(b),_(b))}t.crypto=(()=>{const _=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,b=typeof Da=="function"&&Da.bind(e);return{node:b&&!_?b("crypto"):void 0,web:_}})()})(Y0,Y0.exports),Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.keccak512=Ei.keccak384=Ei.keccak256=Ei.keccak224=void 0;const kc=Qt,al=Y0.exports;Ei.keccak224=(0,al.wrapHash)(kc.keccak_224),Ei.keccak256=(()=>{const e=(0,al.wrapHash)(kc.keccak_256);return e.create=kc.keccak_256.create,e})(),Ei.keccak384=(0,al.wrapHash)(kc.keccak_384),Ei.keccak512=(0,al.wrapHash)(kc.keccak_512),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.recoverTypedSignature=e.signTypedData=e.typedSignatureHash=e.TypedDataUtils=e.TYPED_MESSAGE_SCHEMA=e.SignTypedDataVersion=void 0;const t=Uf,r=__,n=N_(),s=Rs,i=Zr,o=Ei,a=Wr;var f;(function(m){m.V1="V1",m.V3="V3",m.V4="V4"})(f=e.SignTypedDataVersion||(e.SignTypedDataVersion={})),e.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function u(m,d){if(Object.keys(f).includes(m)){if(d&&!d.includes(m))throw new Error(`SignTypedDataVersion not allowed: '${m}'. Allowed versions are: ${d.join(", ")}`)}else throw new Error(`Invalid version: '${m}'`)}function l(m,d){(0,i.assert)(d!==null,`Unable to encode value: Invalid number. Expected a valid number value, but received "${d}".`);const c=BigInt(d),h=(0,n.getLength)(m),y=BigInt(2)**BigInt(h)-BigInt(1);return(0,i.assert)(c>=-y&&c<=y,`Unable to encode value: Number "${d}" is out of range for type "${m}".`),c}function p(m){let d=BigInt(0);for(let c=0;c<m.length;c++){const h=BigInt(m.charCodeAt(c)-48);d*=BigInt(10),h>=49?d+=h-BigInt(49)+BigInt(10):h>=17?d+=h-BigInt(17)+BigInt(10):d+=h}return(0,s.padStart)((0,i.bigIntToBytes)(d),20)}function _(m,d,c,h,y){if(u(y,[f.V3,f.V4]),m[c]!==void 0)return["bytes32",y===f.V4&&h==null?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,t.arrToBufArr)((0,o.keccak256)(b(c,h,m,y)))];if(c==="function")throw new Error('Unsupported or invalid type: "function"');if(h===void 0)throw new Error(`missing value for field ${d} of type ${c}`);if(c==="address"){if(typeof h=="number")return["address",(0,s.padStart)((0,i.numberToBytes)(h),20)];if((0,i.isStrictHexString)(h))return["address",(0,i.add0x)(h)];if(typeof h=="string")return["address",p(h).subarray(0,20)]}if(c==="bool")return["bool",!!h];if(c==="bytes")return typeof h=="number"?h=(0,i.numberToBytes)(h):(0,i.isStrictHexString)(h)||h==="0x"?h=(0,i.hexToBytes)(h):typeof h=="string"&&(h=(0,i.stringToBytes)(h)),["bytes32",(0,t.arrToBufArr)((0,o.keccak256)(h))];if(c.startsWith("bytes")&&c!=="bytes"&&!c.includes("["))return typeof h=="number"?h<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,i.bigIntToBytes)(BigInt(h))]:(0,i.isStrictHexString)(h)?["bytes32",(0,i.hexToBytes)(h)]:["bytes32",h];if(c.startsWith("int")&&!c.includes("[")){const v=l(c,h);return v>=BigInt(0)?["uint256",v]:["int256",v]}if(c==="string")return typeof h=="number"?h=(0,i.numberToBytes)(h):h=(0,i.stringToBytes)(h??""),["bytes32",(0,t.arrToBufArr)((0,o.keccak256)(h))];if(c.endsWith("]")){if(y===f.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const v=c.slice(0,c.lastIndexOf("[")),S=h.map(B=>_(m,d,v,B,y));return["bytes32",(0,t.arrToBufArr)((0,o.keccak256)((0,r.encode)(S.map(([B])=>B),S.map(([,B])=>B))))]}return[c,h]}function b(m,d,c,h){u(h,[f.V3,f.V4]);const y=["bytes32"],v=[j(m,c)];for(const S of c[m]){if(h===f.V3&&d[S.name]===void 0)continue;const[B,L]=_(c,S.name,S.type,d[S.name],h);y.push(B),v.push(L)}return(0,t.arrToBufArr)((0,r.encode)(y,v))}function T(m,d){let c="";const h=P(m,d);h.delete(m);const y=[m,...Array.from(h).sort()];for(const v of y){if(!d[v])throw new Error(`No type definition specified: ${v}`);c+=`${v}(${d[v].map(({name:B,type:L})=>`${L} ${B}`).join(",")})`}return c}function P(m,d,c=new Set){if(typeof m!="string")throw new Error(`Invalid findTypeDependencies input ${JSON.stringify(m)}`);if([m]=m.match(/^\w*/u),c.has(m)||d[m]===void 0)return c;c.add(m);for(const y of d[m])P(y.type,d,c);return c}function $(m,d,c,h){u(h,[f.V3,f.V4]);const y=b(m,d,c,h),v=(0,o.keccak256)(y);return(0,t.arrToBufArr)(v)}function j(m,d){const c=(0,i.stringToBytes)(T(m,d));return(0,t.arrToBufArr)((0,o.keccak256)(c))}function F(m){const d={};for(const c in e.TYPED_MESSAGE_SCHEMA.properties)m[c]&&(d[c]=m[c]);return"types"in d&&(d.types=Object.assign({EIP712Domain:[]},d.types)),d}function k(m,d){u(d,[f.V3,f.V4]);const c=F(m),{domain:h}=c,y={EIP712Domain:c.types.EIP712Domain};return $("EIP712Domain",h,y,d)}function C(m,d){u(d,[f.V3,f.V4]);const c=F(m),h=[(0,i.hexToBytes)("1901")];return h.push(k(m,d)),c.primaryType!=="EIP712Domain"&&h.push($(c.primaryType,c.message,c.types,d)),(0,t.arrToBufArr)((0,o.keccak256)((0,i.concatBytes)(h)))}e.TypedDataUtils={encodeData:b,encodeType:T,findTypeDependencies:P,hashStruct:$,hashType:j,sanitizeData:F,eip712Hash:C,eip712DomainHash:k};function X(m){const d=G(m);return(0,i.bytesToHex)(d)}e.typedSignatureHash=X;function Q(m,d){if((0,n.isArrayType)(m)&&Array.isArray(d)){const[c]=(0,n.getArrayType)(m);return d.map(h=>Q(c,h))}if(m==="address"){if(typeof d=="number")return(0,s.padStart)((0,i.numberToBytes)(d),20);if((0,i.isStrictHexString)(d))return(0,s.padStart)((0,i.hexToBytes)(d).subarray(0,20),20);if(d instanceof Uint8Array)return(0,s.padStart)(d.subarray(0,20),20)}if(m==="bool")return!!d;if(m.startsWith("bytes")&&m!=="bytes"){const c=(0,n.getByteLength)(m);if(typeof d=="number")return d<0?new Uint8Array:(0,i.numberToBytes)(d).subarray(0,c);if((0,i.isStrictHexString)(d))return(0,i.hexToBytes)(d).subarray(0,c);if(d instanceof Uint8Array)return d.subarray(0,c)}if(m.startsWith("uint")&&typeof d=="number")return Math.abs(d);if(m.startsWith("int")&&typeof d=="number"){const c=(0,n.getLength)(m);return BigInt.asIntN(c,BigInt(d))}return d}function Z(m){return m.map(d=>typeof d=="number"?(0,s.padStart)((0,i.numberToBytes)(d),32):(0,i.isStrictHexString)(d)?(0,s.padStart)((0,i.hexToBytes)(d).subarray(0,32),32):d instanceof Uint8Array?(0,s.padStart)(d.subarray(0,32),32):d)}function z(m,d){return d.map(c=>{if(typeof c=="string"||typeof c=="number"||typeof c=="bigint"){const h=l(m,c);if(h>=BigInt(0))return(0,s.padStart)((0,i.bigIntToBytes)(h),32);const y=(0,n.getLength)(m),v=BigInt.asIntN(y,h);return(0,i.signedBigIntToBytes)(v,32)}return c})}function G(m){const d=new Error("Expect argument to be non-empty array");if(typeof m!="object"||!("length"in m)||!m.length)throw d;const c=m.map(({name:S,type:B,value:L})=>{if(B==="address[]")return{name:S,type:"bytes32[]",value:Z(L)};if(B.startsWith("int")&&(0,n.isArrayType)(B)){const[I,w]=(0,n.getArrayType)(B);return{name:S,type:`bytes32[${w??""}]`,value:z(I,L)}}return{name:S,type:B,value:Q(B,L)}}),h=c.map(S=>S.type!=="bytes"?S.value:(0,a.legacyToBuffer)(S.value)),y=c.map(S=>{if(S.type==="function")throw new Error('Unsupported or invalid type: "function"');return S.type}),v=m.map(S=>{if(!S.name)throw d;return`${S.type} ${S.name}`});return(0,t.arrToBufArr)((0,o.keccak256)((0,r.encodePacked)(["bytes32","bytes32"],[(0,o.keccak256)((0,r.encodePacked)(["string[]"],[v],!0)),(0,o.keccak256)((0,r.encodePacked)(y,h,!0))])))}function D({privateKey:m,data:d,version:c}){if(u(c),(0,a.isNullish)(d))throw new Error("Missing data parameter");if((0,a.isNullish)(m))throw new Error("Missing private key parameter");const h=c===f.V1?G(d):e.TypedDataUtils.eip712Hash(d,c),y=(0,t.ecsign)(h,m);return(0,a.concatSig)((0,t.arrToBufArr)((0,i.bigIntToBytes)(y.v)),y.r,y.s)}e.signTypedData=D;function V({data:m,signature:d,version:c}){if(u(c),(0,a.isNullish)(m))throw new Error("Missing data parameter");if((0,a.isNullish)(d))throw new Error("Missing signature parameter");const h=c===f.V1?G(m):e.TypedDataUtils.eip712Hash(m,c),y=(0,a.recoverPublicKey)(h,d),v=(0,t.publicToAddress)(y);return(0,i.bytesToHex)(v)}e.recoverTypedSignature=V}(v_);var qn={},b2={exports:{}};(function(e){(function(t){var r=function(A){var M,N=new Float64Array(16);if(A)for(M=0;M<A.length;M++)N[M]=A[M];return N},n=function(){throw new Error("no PRNG")},s=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var o=r(),a=r([1]),f=r([56129,1]),u=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),p=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),b=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function T(A,M,N,g){A[M]=N>>24&255,A[M+1]=N>>16&255,A[M+2]=N>>8&255,A[M+3]=N&255,A[M+4]=g>>24&255,A[M+5]=g>>16&255,A[M+6]=g>>8&255,A[M+7]=g&255}function P(A,M,N,g,U){var ee,J=0;for(ee=0;ee<U;ee++)J|=A[M+ee]^N[g+ee];return(1&J-1>>>8)-1}function $(A,M,N,g){return P(A,M,N,g,16)}function j(A,M,N,g){return P(A,M,N,g,32)}function F(A,M,N,g){for(var U=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,ee=N[0]&255|(N[1]&255)<<8|(N[2]&255)<<16|(N[3]&255)<<24,J=N[4]&255|(N[5]&255)<<8|(N[6]&255)<<16|(N[7]&255)<<24,fe=N[8]&255|(N[9]&255)<<8|(N[10]&255)<<16|(N[11]&255)<<24,ve=N[12]&255|(N[13]&255)<<8|(N[14]&255)<<16|(N[15]&255)<<24,xe=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,_e=M[0]&255|(M[1]&255)<<8|(M[2]&255)<<16|(M[3]&255)<<24,At=M[4]&255|(M[5]&255)<<8|(M[6]&255)<<16|(M[7]&255)<<24,Le=M[8]&255|(M[9]&255)<<8|(M[10]&255)<<16|(M[11]&255)<<24,Ge=M[12]&255|(M[13]&255)<<8|(M[14]&255)<<16|(M[15]&255)<<24,Qe=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,lt=N[16]&255|(N[17]&255)<<8|(N[18]&255)<<16|(N[19]&255)<<24,ut=N[20]&255|(N[21]&255)<<8|(N[22]&255)<<16|(N[23]&255)<<24,et=N[24]&255|(N[25]&255)<<8|(N[26]&255)<<16|(N[27]&255)<<24,nt=N[28]&255|(N[29]&255)<<8|(N[30]&255)<<16|(N[31]&255)<<24,tt=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,Ce=U,Fe=ee,Te=J,$e=fe,Ne=ve,Ae=xe,ae=_e,ce=At,de=Le,le=Ge,he=Qe,be=lt,Ke=ut,gt=et,wt=nt,yt=tt,q,_t=0;_t<20;_t+=2)q=Ce+Ke|0,Ne^=q<<7|q>>>32-7,q=Ne+Ce|0,de^=q<<9|q>>>32-9,q=de+Ne|0,Ke^=q<<13|q>>>32-13,q=Ke+de|0,Ce^=q<<18|q>>>32-18,q=Ae+Fe|0,le^=q<<7|q>>>32-7,q=le+Ae|0,gt^=q<<9|q>>>32-9,q=gt+le|0,Fe^=q<<13|q>>>32-13,q=Fe+gt|0,Ae^=q<<18|q>>>32-18,q=he+ae|0,wt^=q<<7|q>>>32-7,q=wt+he|0,Te^=q<<9|q>>>32-9,q=Te+wt|0,ae^=q<<13|q>>>32-13,q=ae+Te|0,he^=q<<18|q>>>32-18,q=yt+be|0,$e^=q<<7|q>>>32-7,q=$e+yt|0,ce^=q<<9|q>>>32-9,q=ce+$e|0,be^=q<<13|q>>>32-13,q=be+ce|0,yt^=q<<18|q>>>32-18,q=Ce+$e|0,Fe^=q<<7|q>>>32-7,q=Fe+Ce|0,Te^=q<<9|q>>>32-9,q=Te+Fe|0,$e^=q<<13|q>>>32-13,q=$e+Te|0,Ce^=q<<18|q>>>32-18,q=Ae+Ne|0,ae^=q<<7|q>>>32-7,q=ae+Ae|0,ce^=q<<9|q>>>32-9,q=ce+ae|0,Ne^=q<<13|q>>>32-13,q=Ne+ce|0,Ae^=q<<18|q>>>32-18,q=he+le|0,be^=q<<7|q>>>32-7,q=be+he|0,de^=q<<9|q>>>32-9,q=de+be|0,le^=q<<13|q>>>32-13,q=le+de|0,he^=q<<18|q>>>32-18,q=yt+wt|0,Ke^=q<<7|q>>>32-7,q=Ke+yt|0,gt^=q<<9|q>>>32-9,q=gt+Ke|0,wt^=q<<13|q>>>32-13,q=wt+gt|0,yt^=q<<18|q>>>32-18;Ce=Ce+U|0,Fe=Fe+ee|0,Te=Te+J|0,$e=$e+fe|0,Ne=Ne+ve|0,Ae=Ae+xe|0,ae=ae+_e|0,ce=ce+At|0,de=de+Le|0,le=le+Ge|0,he=he+Qe|0,be=be+lt|0,Ke=Ke+ut|0,gt=gt+et|0,wt=wt+nt|0,yt=yt+tt|0,A[0]=Ce>>>0&255,A[1]=Ce>>>8&255,A[2]=Ce>>>16&255,A[3]=Ce>>>24&255,A[4]=Fe>>>0&255,A[5]=Fe>>>8&255,A[6]=Fe>>>16&255,A[7]=Fe>>>24&255,A[8]=Te>>>0&255,A[9]=Te>>>8&255,A[10]=Te>>>16&255,A[11]=Te>>>24&255,A[12]=$e>>>0&255,A[13]=$e>>>8&255,A[14]=$e>>>16&255,A[15]=$e>>>24&255,A[16]=Ne>>>0&255,A[17]=Ne>>>8&255,A[18]=Ne>>>16&255,A[19]=Ne>>>24&255,A[20]=Ae>>>0&255,A[21]=Ae>>>8&255,A[22]=Ae>>>16&255,A[23]=Ae>>>24&255,A[24]=ae>>>0&255,A[25]=ae>>>8&255,A[26]=ae>>>16&255,A[27]=ae>>>24&255,A[28]=ce>>>0&255,A[29]=ce>>>8&255,A[30]=ce>>>16&255,A[31]=ce>>>24&255,A[32]=de>>>0&255,A[33]=de>>>8&255,A[34]=de>>>16&255,A[35]=de>>>24&255,A[36]=le>>>0&255,A[37]=le>>>8&255,A[38]=le>>>16&255,A[39]=le>>>24&255,A[40]=he>>>0&255,A[41]=he>>>8&255,A[42]=he>>>16&255,A[43]=he>>>24&255,A[44]=be>>>0&255,A[45]=be>>>8&255,A[46]=be>>>16&255,A[47]=be>>>24&255,A[48]=Ke>>>0&255,A[49]=Ke>>>8&255,A[50]=Ke>>>16&255,A[51]=Ke>>>24&255,A[52]=gt>>>0&255,A[53]=gt>>>8&255,A[54]=gt>>>16&255,A[55]=gt>>>24&255,A[56]=wt>>>0&255,A[57]=wt>>>8&255,A[58]=wt>>>16&255,A[59]=wt>>>24&255,A[60]=yt>>>0&255,A[61]=yt>>>8&255,A[62]=yt>>>16&255,A[63]=yt>>>24&255}function k(A,M,N,g){for(var U=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,ee=N[0]&255|(N[1]&255)<<8|(N[2]&255)<<16|(N[3]&255)<<24,J=N[4]&255|(N[5]&255)<<8|(N[6]&255)<<16|(N[7]&255)<<24,fe=N[8]&255|(N[9]&255)<<8|(N[10]&255)<<16|(N[11]&255)<<24,ve=N[12]&255|(N[13]&255)<<8|(N[14]&255)<<16|(N[15]&255)<<24,xe=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,_e=M[0]&255|(M[1]&255)<<8|(M[2]&255)<<16|(M[3]&255)<<24,At=M[4]&255|(M[5]&255)<<8|(M[6]&255)<<16|(M[7]&255)<<24,Le=M[8]&255|(M[9]&255)<<8|(M[10]&255)<<16|(M[11]&255)<<24,Ge=M[12]&255|(M[13]&255)<<8|(M[14]&255)<<16|(M[15]&255)<<24,Qe=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,lt=N[16]&255|(N[17]&255)<<8|(N[18]&255)<<16|(N[19]&255)<<24,ut=N[20]&255|(N[21]&255)<<8|(N[22]&255)<<16|(N[23]&255)<<24,et=N[24]&255|(N[25]&255)<<8|(N[26]&255)<<16|(N[27]&255)<<24,nt=N[28]&255|(N[29]&255)<<8|(N[30]&255)<<16|(N[31]&255)<<24,tt=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,Ce=U,Fe=ee,Te=J,$e=fe,Ne=ve,Ae=xe,ae=_e,ce=At,de=Le,le=Ge,he=Qe,be=lt,Ke=ut,gt=et,wt=nt,yt=tt,q,_t=0;_t<20;_t+=2)q=Ce+Ke|0,Ne^=q<<7|q>>>32-7,q=Ne+Ce|0,de^=q<<9|q>>>32-9,q=de+Ne|0,Ke^=q<<13|q>>>32-13,q=Ke+de|0,Ce^=q<<18|q>>>32-18,q=Ae+Fe|0,le^=q<<7|q>>>32-7,q=le+Ae|0,gt^=q<<9|q>>>32-9,q=gt+le|0,Fe^=q<<13|q>>>32-13,q=Fe+gt|0,Ae^=q<<18|q>>>32-18,q=he+ae|0,wt^=q<<7|q>>>32-7,q=wt+he|0,Te^=q<<9|q>>>32-9,q=Te+wt|0,ae^=q<<13|q>>>32-13,q=ae+Te|0,he^=q<<18|q>>>32-18,q=yt+be|0,$e^=q<<7|q>>>32-7,q=$e+yt|0,ce^=q<<9|q>>>32-9,q=ce+$e|0,be^=q<<13|q>>>32-13,q=be+ce|0,yt^=q<<18|q>>>32-18,q=Ce+$e|0,Fe^=q<<7|q>>>32-7,q=Fe+Ce|0,Te^=q<<9|q>>>32-9,q=Te+Fe|0,$e^=q<<13|q>>>32-13,q=$e+Te|0,Ce^=q<<18|q>>>32-18,q=Ae+Ne|0,ae^=q<<7|q>>>32-7,q=ae+Ae|0,ce^=q<<9|q>>>32-9,q=ce+ae|0,Ne^=q<<13|q>>>32-13,q=Ne+ce|0,Ae^=q<<18|q>>>32-18,q=he+le|0,be^=q<<7|q>>>32-7,q=be+he|0,de^=q<<9|q>>>32-9,q=de+be|0,le^=q<<13|q>>>32-13,q=le+de|0,he^=q<<18|q>>>32-18,q=yt+wt|0,Ke^=q<<7|q>>>32-7,q=Ke+yt|0,gt^=q<<9|q>>>32-9,q=gt+Ke|0,wt^=q<<13|q>>>32-13,q=wt+gt|0,yt^=q<<18|q>>>32-18;A[0]=Ce>>>0&255,A[1]=Ce>>>8&255,A[2]=Ce>>>16&255,A[3]=Ce>>>24&255,A[4]=Ae>>>0&255,A[5]=Ae>>>8&255,A[6]=Ae>>>16&255,A[7]=Ae>>>24&255,A[8]=he>>>0&255,A[9]=he>>>8&255,A[10]=he>>>16&255,A[11]=he>>>24&255,A[12]=yt>>>0&255,A[13]=yt>>>8&255,A[14]=yt>>>16&255,A[15]=yt>>>24&255,A[16]=ae>>>0&255,A[17]=ae>>>8&255,A[18]=ae>>>16&255,A[19]=ae>>>24&255,A[20]=ce>>>0&255,A[21]=ce>>>8&255,A[22]=ce>>>16&255,A[23]=ce>>>24&255,A[24]=de>>>0&255,A[25]=de>>>8&255,A[26]=de>>>16&255,A[27]=de>>>24&255,A[28]=le>>>0&255,A[29]=le>>>8&255,A[30]=le>>>16&255,A[31]=le>>>24&255}function C(A,M,N,g){F(A,M,N,g)}function X(A,M,N,g){k(A,M,N,g)}var Q=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Z(A,M,N,g,U,ee,J){var fe=new Uint8Array(16),ve=new Uint8Array(64),xe,_e;for(_e=0;_e<16;_e++)fe[_e]=0;for(_e=0;_e<8;_e++)fe[_e]=ee[_e];for(;U>=64;){for(C(ve,fe,J,Q),_e=0;_e<64;_e++)A[M+_e]=N[g+_e]^ve[_e];for(xe=1,_e=8;_e<16;_e++)xe=xe+(fe[_e]&255)|0,fe[_e]=xe&255,xe>>>=8;U-=64,M+=64,g+=64}if(U>0)for(C(ve,fe,J,Q),_e=0;_e<U;_e++)A[M+_e]=N[g+_e]^ve[_e];return 0}function z(A,M,N,g,U){var ee=new Uint8Array(16),J=new Uint8Array(64),fe,ve;for(ve=0;ve<16;ve++)ee[ve]=0;for(ve=0;ve<8;ve++)ee[ve]=g[ve];for(;N>=64;){for(C(J,ee,U,Q),ve=0;ve<64;ve++)A[M+ve]=J[ve];for(fe=1,ve=8;ve<16;ve++)fe=fe+(ee[ve]&255)|0,ee[ve]=fe&255,fe>>>=8;N-=64,M+=64}if(N>0)for(C(J,ee,U,Q),ve=0;ve<N;ve++)A[M+ve]=J[ve];return 0}function G(A,M,N,g,U){var ee=new Uint8Array(32);X(ee,g,U,Q);for(var J=new Uint8Array(8),fe=0;fe<8;fe++)J[fe]=g[fe+16];return z(A,M,N,J,ee)}function D(A,M,N,g,U,ee,J){var fe=new Uint8Array(32);X(fe,ee,J,Q);for(var ve=new Uint8Array(8),xe=0;xe<8;xe++)ve[xe]=ee[xe+16];return Z(A,M,N,g,U,ve,fe)}var V=function(A){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var M,N,g,U,ee,J,fe,ve;M=A[0]&255|(A[1]&255)<<8,this.r[0]=M&8191,N=A[2]&255|(A[3]&255)<<8,this.r[1]=(M>>>13|N<<3)&8191,g=A[4]&255|(A[5]&255)<<8,this.r[2]=(N>>>10|g<<6)&7939,U=A[6]&255|(A[7]&255)<<8,this.r[3]=(g>>>7|U<<9)&8191,ee=A[8]&255|(A[9]&255)<<8,this.r[4]=(U>>>4|ee<<12)&255,this.r[5]=ee>>>1&8190,J=A[10]&255|(A[11]&255)<<8,this.r[6]=(ee>>>14|J<<2)&8191,fe=A[12]&255|(A[13]&255)<<8,this.r[7]=(J>>>11|fe<<5)&8065,ve=A[14]&255|(A[15]&255)<<8,this.r[8]=(fe>>>8|ve<<8)&8191,this.r[9]=ve>>>5&127,this.pad[0]=A[16]&255|(A[17]&255)<<8,this.pad[1]=A[18]&255|(A[19]&255)<<8,this.pad[2]=A[20]&255|(A[21]&255)<<8,this.pad[3]=A[22]&255|(A[23]&255)<<8,this.pad[4]=A[24]&255|(A[25]&255)<<8,this.pad[5]=A[26]&255|(A[27]&255)<<8,this.pad[6]=A[28]&255|(A[29]&255)<<8,this.pad[7]=A[30]&255|(A[31]&255)<<8};V.prototype.blocks=function(A,M,N){for(var g=this.fin?0:2048,U,ee,J,fe,ve,xe,_e,At,Le,Ge,Qe,lt,ut,et,nt,tt,Ce,Fe,Te,$e=this.h[0],Ne=this.h[1],Ae=this.h[2],ae=this.h[3],ce=this.h[4],de=this.h[5],le=this.h[6],he=this.h[7],be=this.h[8],Ke=this.h[9],gt=this.r[0],wt=this.r[1],yt=this.r[2],q=this.r[3],_t=this.r[4],Ct=this.r[5],Ot=this.r[6],vt=this.r[7],kt=this.r[8],Lt=this.r[9];N>=16;)U=A[M+0]&255|(A[M+1]&255)<<8,$e+=U&8191,ee=A[M+2]&255|(A[M+3]&255)<<8,Ne+=(U>>>13|ee<<3)&8191,J=A[M+4]&255|(A[M+5]&255)<<8,Ae+=(ee>>>10|J<<6)&8191,fe=A[M+6]&255|(A[M+7]&255)<<8,ae+=(J>>>7|fe<<9)&8191,ve=A[M+8]&255|(A[M+9]&255)<<8,ce+=(fe>>>4|ve<<12)&8191,de+=ve>>>1&8191,xe=A[M+10]&255|(A[M+11]&255)<<8,le+=(ve>>>14|xe<<2)&8191,_e=A[M+12]&255|(A[M+13]&255)<<8,he+=(xe>>>11|_e<<5)&8191,At=A[M+14]&255|(A[M+15]&255)<<8,be+=(_e>>>8|At<<8)&8191,Ke+=At>>>5|g,Le=0,Ge=Le,Ge+=$e*gt,Ge+=Ne*(5*Lt),Ge+=Ae*(5*kt),Ge+=ae*(5*vt),Ge+=ce*(5*Ot),Le=Ge>>>13,Ge&=8191,Ge+=de*(5*Ct),Ge+=le*(5*_t),Ge+=he*(5*q),Ge+=be*(5*yt),Ge+=Ke*(5*wt),Le+=Ge>>>13,Ge&=8191,Qe=Le,Qe+=$e*wt,Qe+=Ne*gt,Qe+=Ae*(5*Lt),Qe+=ae*(5*kt),Qe+=ce*(5*vt),Le=Qe>>>13,Qe&=8191,Qe+=de*(5*Ot),Qe+=le*(5*Ct),Qe+=he*(5*_t),Qe+=be*(5*q),Qe+=Ke*(5*yt),Le+=Qe>>>13,Qe&=8191,lt=Le,lt+=$e*yt,lt+=Ne*wt,lt+=Ae*gt,lt+=ae*(5*Lt),lt+=ce*(5*kt),Le=lt>>>13,lt&=8191,lt+=de*(5*vt),lt+=le*(5*Ot),lt+=he*(5*Ct),lt+=be*(5*_t),lt+=Ke*(5*q),Le+=lt>>>13,lt&=8191,ut=Le,ut+=$e*q,ut+=Ne*yt,ut+=Ae*wt,ut+=ae*gt,ut+=ce*(5*Lt),Le=ut>>>13,ut&=8191,ut+=de*(5*kt),ut+=le*(5*vt),ut+=he*(5*Ot),ut+=be*(5*Ct),ut+=Ke*(5*_t),Le+=ut>>>13,ut&=8191,et=Le,et+=$e*_t,et+=Ne*q,et+=Ae*yt,et+=ae*wt,et+=ce*gt,Le=et>>>13,et&=8191,et+=de*(5*Lt),et+=le*(5*kt),et+=he*(5*vt),et+=be*(5*Ot),et+=Ke*(5*Ct),Le+=et>>>13,et&=8191,nt=Le,nt+=$e*Ct,nt+=Ne*_t,nt+=Ae*q,nt+=ae*yt,nt+=ce*wt,Le=nt>>>13,nt&=8191,nt+=de*gt,nt+=le*(5*Lt),nt+=he*(5*kt),nt+=be*(5*vt),nt+=Ke*(5*Ot),Le+=nt>>>13,nt&=8191,tt=Le,tt+=$e*Ot,tt+=Ne*Ct,tt+=Ae*_t,tt+=ae*q,tt+=ce*yt,Le=tt>>>13,tt&=8191,tt+=de*wt,tt+=le*gt,tt+=he*(5*Lt),tt+=be*(5*kt),tt+=Ke*(5*vt),Le+=tt>>>13,tt&=8191,Ce=Le,Ce+=$e*vt,Ce+=Ne*Ot,Ce+=Ae*Ct,Ce+=ae*_t,Ce+=ce*q,Le=Ce>>>13,Ce&=8191,Ce+=de*yt,Ce+=le*wt,Ce+=he*gt,Ce+=be*(5*Lt),Ce+=Ke*(5*kt),Le+=Ce>>>13,Ce&=8191,Fe=Le,Fe+=$e*kt,Fe+=Ne*vt,Fe+=Ae*Ot,Fe+=ae*Ct,Fe+=ce*_t,Le=Fe>>>13,Fe&=8191,Fe+=de*q,Fe+=le*yt,Fe+=he*wt,Fe+=be*gt,Fe+=Ke*(5*Lt),Le+=Fe>>>13,Fe&=8191,Te=Le,Te+=$e*Lt,Te+=Ne*kt,Te+=Ae*vt,Te+=ae*Ot,Te+=ce*Ct,Le=Te>>>13,Te&=8191,Te+=de*_t,Te+=le*q,Te+=he*yt,Te+=be*wt,Te+=Ke*gt,Le+=Te>>>13,Te&=8191,Le=(Le<<2)+Le|0,Le=Le+Ge|0,Ge=Le&8191,Le=Le>>>13,Qe+=Le,$e=Ge,Ne=Qe,Ae=lt,ae=ut,ce=et,de=nt,le=tt,he=Ce,be=Fe,Ke=Te,M+=16,N-=16;this.h[0]=$e,this.h[1]=Ne,this.h[2]=Ae,this.h[3]=ae,this.h[4]=ce,this.h[5]=de,this.h[6]=le,this.h[7]=he,this.h[8]=be,this.h[9]=Ke},V.prototype.finish=function(A,M){var N=new Uint16Array(10),g,U,ee,J;if(this.leftover){for(J=this.leftover,this.buffer[J++]=1;J<16;J++)this.buffer[J]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(g=this.h[1]>>>13,this.h[1]&=8191,J=2;J<10;J++)this.h[J]+=g,g=this.h[J]>>>13,this.h[J]&=8191;for(this.h[0]+=g*5,g=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=g,g=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=g,N[0]=this.h[0]+5,g=N[0]>>>13,N[0]&=8191,J=1;J<10;J++)N[J]=this.h[J]+g,g=N[J]>>>13,N[J]&=8191;for(N[9]-=8192,U=(g^1)-1,J=0;J<10;J++)N[J]&=U;for(U=~U,J=0;J<10;J++)this.h[J]=this.h[J]&U|N[J];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,ee=this.h[0]+this.pad[0],this.h[0]=ee&65535,J=1;J<8;J++)ee=(this.h[J]+this.pad[J]|0)+(ee>>>16)|0,this.h[J]=ee&65535;A[M+0]=this.h[0]>>>0&255,A[M+1]=this.h[0]>>>8&255,A[M+2]=this.h[1]>>>0&255,A[M+3]=this.h[1]>>>8&255,A[M+4]=this.h[2]>>>0&255,A[M+5]=this.h[2]>>>8&255,A[M+6]=this.h[3]>>>0&255,A[M+7]=this.h[3]>>>8&255,A[M+8]=this.h[4]>>>0&255,A[M+9]=this.h[4]>>>8&255,A[M+10]=this.h[5]>>>0&255,A[M+11]=this.h[5]>>>8&255,A[M+12]=this.h[6]>>>0&255,A[M+13]=this.h[6]>>>8&255,A[M+14]=this.h[7]>>>0&255,A[M+15]=this.h[7]>>>8&255},V.prototype.update=function(A,M,N){var g,U;if(this.leftover){for(U=16-this.leftover,U>N&&(U=N),g=0;g<U;g++)this.buffer[this.leftover+g]=A[M+g];if(N-=U,M+=U,this.leftover+=U,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(N>=16&&(U=N-N%16,this.blocks(A,M,U),M+=U,N-=U),N){for(g=0;g<N;g++)this.buffer[this.leftover+g]=A[M+g];this.leftover+=N}};function m(A,M,N,g,U,ee){var J=new V(ee);return J.update(N,g,U),J.finish(A,M),0}function d(A,M,N,g,U,ee){var J=new Uint8Array(16);return m(J,0,N,g,U,ee),$(A,M,J,0)}function c(A,M,N,g,U){var ee;if(N<32)return-1;for(D(A,0,M,0,N,g,U),m(A,16,A,32,N-32,A),ee=0;ee<16;ee++)A[ee]=0;return 0}function h(A,M,N,g,U){var ee,J=new Uint8Array(32);if(N<32||(G(J,0,32,g,U),d(M,16,M,32,N-32,J)!==0))return-1;for(D(A,0,M,0,N,g,U),ee=0;ee<32;ee++)A[ee]=0;return 0}function y(A,M){var N;for(N=0;N<16;N++)A[N]=M[N]|0}function v(A){var M,N,g=1;for(M=0;M<16;M++)N=A[M]+g+65535,g=Math.floor(N/65536),A[M]=N-g*65536;A[0]+=g-1+37*(g-1)}function S(A,M,N){for(var g,U=~(N-1),ee=0;ee<16;ee++)g=U&(A[ee]^M[ee]),A[ee]^=g,M[ee]^=g}function B(A,M){var N,g,U,ee=r(),J=r();for(N=0;N<16;N++)J[N]=M[N];for(v(J),v(J),v(J),g=0;g<2;g++){for(ee[0]=J[0]-65517,N=1;N<15;N++)ee[N]=J[N]-65535-(ee[N-1]>>16&1),ee[N-1]&=65535;ee[15]=J[15]-32767-(ee[14]>>16&1),U=ee[15]>>16&1,ee[14]&=65535,S(J,ee,1-U)}for(N=0;N<16;N++)A[2*N]=J[N]&255,A[2*N+1]=J[N]>>8}function L(A,M){var N=new Uint8Array(32),g=new Uint8Array(32);return B(N,A),B(g,M),j(N,0,g,0)}function I(A){var M=new Uint8Array(32);return B(M,A),M[0]&1}function w(A,M){var N;for(N=0;N<16;N++)A[N]=M[2*N]+(M[2*N+1]<<8);A[15]&=32767}function R(A,M,N){for(var g=0;g<16;g++)A[g]=M[g]+N[g]}function Y(A,M,N){for(var g=0;g<16;g++)A[g]=M[g]-N[g]}function K(A,M,N){var g,U,ee=0,J=0,fe=0,ve=0,xe=0,_e=0,At=0,Le=0,Ge=0,Qe=0,lt=0,ut=0,et=0,nt=0,tt=0,Ce=0,Fe=0,Te=0,$e=0,Ne=0,Ae=0,ae=0,ce=0,de=0,le=0,he=0,be=0,Ke=0,gt=0,wt=0,yt=0,q=N[0],_t=N[1],Ct=N[2],Ot=N[3],vt=N[4],kt=N[5],Lt=N[6],Ar=N[7],qt=N[8],_r=N[9],Er=N[10],xr=N[11],Cr=N[12],sn=N[13],on=N[14],an=N[15];g=M[0],ee+=g*q,J+=g*_t,fe+=g*Ct,ve+=g*Ot,xe+=g*vt,_e+=g*kt,At+=g*Lt,Le+=g*Ar,Ge+=g*qt,Qe+=g*_r,lt+=g*Er,ut+=g*xr,et+=g*Cr,nt+=g*sn,tt+=g*on,Ce+=g*an,g=M[1],J+=g*q,fe+=g*_t,ve+=g*Ct,xe+=g*Ot,_e+=g*vt,At+=g*kt,Le+=g*Lt,Ge+=g*Ar,Qe+=g*qt,lt+=g*_r,ut+=g*Er,et+=g*xr,nt+=g*Cr,tt+=g*sn,Ce+=g*on,Fe+=g*an,g=M[2],fe+=g*q,ve+=g*_t,xe+=g*Ct,_e+=g*Ot,At+=g*vt,Le+=g*kt,Ge+=g*Lt,Qe+=g*Ar,lt+=g*qt,ut+=g*_r,et+=g*Er,nt+=g*xr,tt+=g*Cr,Ce+=g*sn,Fe+=g*on,Te+=g*an,g=M[3],ve+=g*q,xe+=g*_t,_e+=g*Ct,At+=g*Ot,Le+=g*vt,Ge+=g*kt,Qe+=g*Lt,lt+=g*Ar,ut+=g*qt,et+=g*_r,nt+=g*Er,tt+=g*xr,Ce+=g*Cr,Fe+=g*sn,Te+=g*on,$e+=g*an,g=M[4],xe+=g*q,_e+=g*_t,At+=g*Ct,Le+=g*Ot,Ge+=g*vt,Qe+=g*kt,lt+=g*Lt,ut+=g*Ar,et+=g*qt,nt+=g*_r,tt+=g*Er,Ce+=g*xr,Fe+=g*Cr,Te+=g*sn,$e+=g*on,Ne+=g*an,g=M[5],_e+=g*q,At+=g*_t,Le+=g*Ct,Ge+=g*Ot,Qe+=g*vt,lt+=g*kt,ut+=g*Lt,et+=g*Ar,nt+=g*qt,tt+=g*_r,Ce+=g*Er,Fe+=g*xr,Te+=g*Cr,$e+=g*sn,Ne+=g*on,Ae+=g*an,g=M[6],At+=g*q,Le+=g*_t,Ge+=g*Ct,Qe+=g*Ot,lt+=g*vt,ut+=g*kt,et+=g*Lt,nt+=g*Ar,tt+=g*qt,Ce+=g*_r,Fe+=g*Er,Te+=g*xr,$e+=g*Cr,Ne+=g*sn,Ae+=g*on,ae+=g*an,g=M[7],Le+=g*q,Ge+=g*_t,Qe+=g*Ct,lt+=g*Ot,ut+=g*vt,et+=g*kt,nt+=g*Lt,tt+=g*Ar,Ce+=g*qt,Fe+=g*_r,Te+=g*Er,$e+=g*xr,Ne+=g*Cr,Ae+=g*sn,ae+=g*on,ce+=g*an,g=M[8],Ge+=g*q,Qe+=g*_t,lt+=g*Ct,ut+=g*Ot,et+=g*vt,nt+=g*kt,tt+=g*Lt,Ce+=g*Ar,Fe+=g*qt,Te+=g*_r,$e+=g*Er,Ne+=g*xr,Ae+=g*Cr,ae+=g*sn,ce+=g*on,de+=g*an,g=M[9],Qe+=g*q,lt+=g*_t,ut+=g*Ct,et+=g*Ot,nt+=g*vt,tt+=g*kt,Ce+=g*Lt,Fe+=g*Ar,Te+=g*qt,$e+=g*_r,Ne+=g*Er,Ae+=g*xr,ae+=g*Cr,ce+=g*sn,de+=g*on,le+=g*an,g=M[10],lt+=g*q,ut+=g*_t,et+=g*Ct,nt+=g*Ot,tt+=g*vt,Ce+=g*kt,Fe+=g*Lt,Te+=g*Ar,$e+=g*qt,Ne+=g*_r,Ae+=g*Er,ae+=g*xr,ce+=g*Cr,de+=g*sn,le+=g*on,he+=g*an,g=M[11],ut+=g*q,et+=g*_t,nt+=g*Ct,tt+=g*Ot,Ce+=g*vt,Fe+=g*kt,Te+=g*Lt,$e+=g*Ar,Ne+=g*qt,Ae+=g*_r,ae+=g*Er,ce+=g*xr,de+=g*Cr,le+=g*sn,he+=g*on,be+=g*an,g=M[12],et+=g*q,nt+=g*_t,tt+=g*Ct,Ce+=g*Ot,Fe+=g*vt,Te+=g*kt,$e+=g*Lt,Ne+=g*Ar,Ae+=g*qt,ae+=g*_r,ce+=g*Er,de+=g*xr,le+=g*Cr,he+=g*sn,be+=g*on,Ke+=g*an,g=M[13],nt+=g*q,tt+=g*_t,Ce+=g*Ct,Fe+=g*Ot,Te+=g*vt,$e+=g*kt,Ne+=g*Lt,Ae+=g*Ar,ae+=g*qt,ce+=g*_r,de+=g*Er,le+=g*xr,he+=g*Cr,be+=g*sn,Ke+=g*on,gt+=g*an,g=M[14],tt+=g*q,Ce+=g*_t,Fe+=g*Ct,Te+=g*Ot,$e+=g*vt,Ne+=g*kt,Ae+=g*Lt,ae+=g*Ar,ce+=g*qt,de+=g*_r,le+=g*Er,he+=g*xr,be+=g*Cr,Ke+=g*sn,gt+=g*on,wt+=g*an,g=M[15],Ce+=g*q,Fe+=g*_t,Te+=g*Ct,$e+=g*Ot,Ne+=g*vt,Ae+=g*kt,ae+=g*Lt,ce+=g*Ar,de+=g*qt,le+=g*_r,he+=g*Er,be+=g*xr,Ke+=g*Cr,gt+=g*sn,wt+=g*on,yt+=g*an,ee+=38*Fe,J+=38*Te,fe+=38*$e,ve+=38*Ne,xe+=38*Ae,_e+=38*ae,At+=38*ce,Le+=38*de,Ge+=38*le,Qe+=38*he,lt+=38*be,ut+=38*Ke,et+=38*gt,nt+=38*wt,tt+=38*yt,U=1,g=ee+U+65535,U=Math.floor(g/65536),ee=g-U*65536,g=J+U+65535,U=Math.floor(g/65536),J=g-U*65536,g=fe+U+65535,U=Math.floor(g/65536),fe=g-U*65536,g=ve+U+65535,U=Math.floor(g/65536),ve=g-U*65536,g=xe+U+65535,U=Math.floor(g/65536),xe=g-U*65536,g=_e+U+65535,U=Math.floor(g/65536),_e=g-U*65536,g=At+U+65535,U=Math.floor(g/65536),At=g-U*65536,g=Le+U+65535,U=Math.floor(g/65536),Le=g-U*65536,g=Ge+U+65535,U=Math.floor(g/65536),Ge=g-U*65536,g=Qe+U+65535,U=Math.floor(g/65536),Qe=g-U*65536,g=lt+U+65535,U=Math.floor(g/65536),lt=g-U*65536,g=ut+U+65535,U=Math.floor(g/65536),ut=g-U*65536,g=et+U+65535,U=Math.floor(g/65536),et=g-U*65536,g=nt+U+65535,U=Math.floor(g/65536),nt=g-U*65536,g=tt+U+65535,U=Math.floor(g/65536),tt=g-U*65536,g=Ce+U+65535,U=Math.floor(g/65536),Ce=g-U*65536,ee+=U-1+37*(U-1),U=1,g=ee+U+65535,U=Math.floor(g/65536),ee=g-U*65536,g=J+U+65535,U=Math.floor(g/65536),J=g-U*65536,g=fe+U+65535,U=Math.floor(g/65536),fe=g-U*65536,g=ve+U+65535,U=Math.floor(g/65536),ve=g-U*65536,g=xe+U+65535,U=Math.floor(g/65536),xe=g-U*65536,g=_e+U+65535,U=Math.floor(g/65536),_e=g-U*65536,g=At+U+65535,U=Math.floor(g/65536),At=g-U*65536,g=Le+U+65535,U=Math.floor(g/65536),Le=g-U*65536,g=Ge+U+65535,U=Math.floor(g/65536),Ge=g-U*65536,g=Qe+U+65535,U=Math.floor(g/65536),Qe=g-U*65536,g=lt+U+65535,U=Math.floor(g/65536),lt=g-U*65536,g=ut+U+65535,U=Math.floor(g/65536),ut=g-U*65536,g=et+U+65535,U=Math.floor(g/65536),et=g-U*65536,g=nt+U+65535,U=Math.floor(g/65536),nt=g-U*65536,g=tt+U+65535,U=Math.floor(g/65536),tt=g-U*65536,g=Ce+U+65535,U=Math.floor(g/65536),Ce=g-U*65536,ee+=U-1+37*(U-1),A[0]=ee,A[1]=J,A[2]=fe,A[3]=ve,A[4]=xe,A[5]=_e,A[6]=At,A[7]=Le,A[8]=Ge,A[9]=Qe,A[10]=lt,A[11]=ut,A[12]=et,A[13]=nt,A[14]=tt,A[15]=Ce}function ne(A,M){K(A,M,M)}function Re(A,M){var N=r(),g;for(g=0;g<16;g++)N[g]=M[g];for(g=253;g>=0;g--)ne(N,N),g!==2&&g!==4&&K(N,N,M);for(g=0;g<16;g++)A[g]=N[g]}function ge(A,M){var N=r(),g;for(g=0;g<16;g++)N[g]=M[g];for(g=250;g>=0;g--)ne(N,N),g!==1&&K(N,N,M);for(g=0;g<16;g++)A[g]=N[g]}function ye(A,M,N){var g=new Uint8Array(32),U=new Float64Array(80),ee,J,fe=r(),ve=r(),xe=r(),_e=r(),At=r(),Le=r();for(J=0;J<31;J++)g[J]=M[J];for(g[31]=M[31]&127|64,g[0]&=248,w(U,N),J=0;J<16;J++)ve[J]=U[J],_e[J]=fe[J]=xe[J]=0;for(fe[0]=_e[0]=1,J=254;J>=0;--J)ee=g[J>>>3]>>>(J&7)&1,S(fe,ve,ee),S(xe,_e,ee),R(At,fe,xe),Y(fe,fe,xe),R(xe,ve,_e),Y(ve,ve,_e),ne(_e,At),ne(Le,fe),K(fe,xe,fe),K(xe,ve,At),R(At,fe,xe),Y(fe,fe,xe),ne(ve,fe),Y(xe,_e,Le),K(fe,xe,f),R(fe,fe,_e),K(xe,xe,fe),K(fe,_e,Le),K(_e,ve,U),ne(ve,At),S(fe,ve,ee),S(xe,_e,ee);for(J=0;J<16;J++)U[J+16]=fe[J],U[J+32]=xe[J],U[J+48]=ve[J],U[J+64]=_e[J];var Ge=U.subarray(32),Qe=U.subarray(16);return Re(Ge,Ge),K(Qe,Qe,Ge),B(A,Qe),0}function Ye(A,M){return ye(A,M,i)}function Me(A,M){return n(M,32),Ye(A,M)}function He(A,M,N){var g=new Uint8Array(32);return ye(g,N,M),X(A,s,g,Q)}var we=c,me=h;function ke(A,M,N,g,U,ee){var J=new Uint8Array(32);return He(J,U,ee),we(A,M,N,g,J)}function Bt(A,M,N,g,U,ee){var J=new Uint8Array(32);return He(J,U,ee),me(A,M,N,g,J)}var De=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function st(A,M,N,g){for(var U=new Int32Array(16),ee=new Int32Array(16),J,fe,ve,xe,_e,At,Le,Ge,Qe,lt,ut,et,nt,tt,Ce,Fe,Te,$e,Ne,Ae,ae,ce,de,le,he,be,Ke=A[0],gt=A[1],wt=A[2],yt=A[3],q=A[4],_t=A[5],Ct=A[6],Ot=A[7],vt=M[0],kt=M[1],Lt=M[2],Ar=M[3],qt=M[4],_r=M[5],Er=M[6],xr=M[7],Cr=0;g>=128;){for(Ne=0;Ne<16;Ne++)Ae=8*Ne+Cr,U[Ne]=N[Ae+0]<<24|N[Ae+1]<<16|N[Ae+2]<<8|N[Ae+3],ee[Ne]=N[Ae+4]<<24|N[Ae+5]<<16|N[Ae+6]<<8|N[Ae+7];for(Ne=0;Ne<80;Ne++)if(J=Ke,fe=gt,ve=wt,xe=yt,_e=q,At=_t,Le=Ct,Ge=Ot,Qe=vt,lt=kt,ut=Lt,et=Ar,nt=qt,tt=_r,Ce=Er,Fe=xr,ae=Ot,ce=xr,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=(q>>>14|qt<<32-14)^(q>>>18|qt<<32-18)^(qt>>>41-32|q<<32-(41-32)),ce=(qt>>>14|q<<32-14)^(qt>>>18|q<<32-18)^(q>>>41-32|qt<<32-(41-32)),de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,ae=q&_t^~q&Ct,ce=qt&_r^~qt&Er,de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,ae=De[Ne*2],ce=De[Ne*2+1],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,ae=U[Ne%16],ce=ee[Ne%16],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,Te=he&65535|be<<16,$e=de&65535|le<<16,ae=Te,ce=$e,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=(Ke>>>28|vt<<32-28)^(vt>>>34-32|Ke<<32-(34-32))^(vt>>>39-32|Ke<<32-(39-32)),ce=(vt>>>28|Ke<<32-28)^(Ke>>>34-32|vt<<32-(34-32))^(Ke>>>39-32|vt<<32-(39-32)),de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,ae=Ke&gt^Ke&wt^gt&wt,ce=vt&kt^vt&Lt^kt&Lt,de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,Ge=he&65535|be<<16,Fe=de&65535|le<<16,ae=xe,ce=et,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=Te,ce=$e,de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,xe=he&65535|be<<16,et=de&65535|le<<16,gt=J,wt=fe,yt=ve,q=xe,_t=_e,Ct=At,Ot=Le,Ke=Ge,kt=Qe,Lt=lt,Ar=ut,qt=et,_r=nt,Er=tt,xr=Ce,vt=Fe,Ne%16===15)for(Ae=0;Ae<16;Ae++)ae=U[Ae],ce=ee[Ae],de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=U[(Ae+9)%16],ce=ee[(Ae+9)%16],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,Te=U[(Ae+1)%16],$e=ee[(Ae+1)%16],ae=(Te>>>1|$e<<32-1)^(Te>>>8|$e<<32-8)^Te>>>7,ce=($e>>>1|Te<<32-1)^($e>>>8|Te<<32-8)^($e>>>7|Te<<32-7),de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,Te=U[(Ae+14)%16],$e=ee[(Ae+14)%16],ae=(Te>>>19|$e<<32-19)^($e>>>61-32|Te<<32-(61-32))^Te>>>6,ce=($e>>>19|Te<<32-19)^(Te>>>61-32|$e<<32-(61-32))^($e>>>6|Te<<32-6),de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,U[Ae]=he&65535|be<<16,ee[Ae]=de&65535|le<<16;ae=Ke,ce=vt,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=A[0],ce=M[0],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,A[0]=Ke=he&65535|be<<16,M[0]=vt=de&65535|le<<16,ae=gt,ce=kt,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=A[1],ce=M[1],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,A[1]=gt=he&65535|be<<16,M[1]=kt=de&65535|le<<16,ae=wt,ce=Lt,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=A[2],ce=M[2],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,A[2]=wt=he&65535|be<<16,M[2]=Lt=de&65535|le<<16,ae=yt,ce=Ar,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=A[3],ce=M[3],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,A[3]=yt=he&65535|be<<16,M[3]=Ar=de&65535|le<<16,ae=q,ce=qt,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=A[4],ce=M[4],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,A[4]=q=he&65535|be<<16,M[4]=qt=de&65535|le<<16,ae=_t,ce=_r,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=A[5],ce=M[5],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,A[5]=_t=he&65535|be<<16,M[5]=_r=de&65535|le<<16,ae=Ct,ce=Er,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=A[6],ce=M[6],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,A[6]=Ct=he&65535|be<<16,M[6]=Er=de&65535|le<<16,ae=Ot,ce=xr,de=ce&65535,le=ce>>>16,he=ae&65535,be=ae>>>16,ae=A[7],ce=M[7],de+=ce&65535,le+=ce>>>16,he+=ae&65535,be+=ae>>>16,le+=de>>>16,he+=le>>>16,be+=he>>>16,A[7]=Ot=he&65535|be<<16,M[7]=xr=de&65535|le<<16,Cr+=128,g-=128}return g}function Ut(A,M,N){var g=new Int32Array(8),U=new Int32Array(8),ee=new Uint8Array(256),J,fe=N;for(g[0]=1779033703,g[1]=3144134277,g[2]=1013904242,g[3]=2773480762,g[4]=1359893119,g[5]=2600822924,g[6]=528734635,g[7]=1541459225,U[0]=4089235720,U[1]=2227873595,U[2]=4271175723,U[3]=1595750129,U[4]=2917565137,U[5]=725511199,U[6]=4215389547,U[7]=327033209,st(g,U,M,N),N%=128,J=0;J<N;J++)ee[J]=M[fe-N+J];for(ee[N]=128,N=256-128*(N<112?1:0),ee[N-9]=0,T(ee,N-8,fe/536870912|0,fe<<3),st(g,U,ee,N),J=0;J<8;J++)T(A,8*J,g[J],U[J]);return 0}function ft(A,M){var N=r(),g=r(),U=r(),ee=r(),J=r(),fe=r(),ve=r(),xe=r(),_e=r();Y(N,A[1],A[0]),Y(_e,M[1],M[0]),K(N,N,_e),R(g,A[0],A[1]),R(_e,M[0],M[1]),K(g,g,_e),K(U,A[3],M[3]),K(U,U,l),K(ee,A[2],M[2]),R(ee,ee,ee),Y(J,g,N),Y(fe,ee,U),R(ve,ee,U),R(xe,g,N),K(A[0],J,fe),K(A[1],xe,ve),K(A[2],ve,fe),K(A[3],J,xe)}function pt(A,M,N){var g;for(g=0;g<4;g++)S(A[g],M[g],N)}function Ft(A,M){var N=r(),g=r(),U=r();Re(U,M[2]),K(N,M[0],U),K(g,M[1],U),B(A,g),A[31]^=I(N)<<7}function Et(A,M,N){var g,U;for(y(A[0],o),y(A[1],a),y(A[2],a),y(A[3],o),U=255;U>=0;--U)g=N[U/8|0]>>(U&7)&1,pt(A,M,g),ft(M,A),ft(A,A),pt(A,M,g)}function It(A,M){var N=[r(),r(),r(),r()];y(N[0],p),y(N[1],_),y(N[2],a),K(N[3],p,_),Et(A,N,M)}function Zt(A,M,N){var g=new Uint8Array(64),U=[r(),r(),r(),r()],ee;for(N||n(M,32),Ut(g,M,32),g[0]&=248,g[31]&=127,g[31]|=64,It(U,g),Ft(A,U),ee=0;ee<32;ee++)M[ee+32]=A[ee];return 0}var Tt=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function O(A,M){var N,g,U,ee;for(g=63;g>=32;--g){for(N=0,U=g-32,ee=g-12;U<ee;++U)M[U]+=N-16*M[g]*Tt[U-(g-32)],N=Math.floor((M[U]+128)/256),M[U]-=N*256;M[U]+=N,M[g]=0}for(N=0,U=0;U<32;U++)M[U]+=N-(M[31]>>4)*Tt[U],N=M[U]>>8,M[U]&=255;for(U=0;U<32;U++)M[U]-=N*Tt[U];for(g=0;g<32;g++)M[g+1]+=M[g]>>8,A[g]=M[g]&255}function E(A){var M=new Float64Array(64),N;for(N=0;N<64;N++)M[N]=A[N];for(N=0;N<64;N++)A[N]=0;O(A,M)}function x(A,M,N,g){var U=new Uint8Array(64),ee=new Uint8Array(64),J=new Uint8Array(64),fe,ve,xe=new Float64Array(64),_e=[r(),r(),r(),r()];Ut(U,g,32),U[0]&=248,U[31]&=127,U[31]|=64;var At=N+64;for(fe=0;fe<N;fe++)A[64+fe]=M[fe];for(fe=0;fe<32;fe++)A[32+fe]=U[32+fe];for(Ut(J,A.subarray(32),N+32),E(J),It(_e,J),Ft(A,_e),fe=32;fe<64;fe++)A[fe]=g[fe];for(Ut(ee,A,N+64),E(ee),fe=0;fe<64;fe++)xe[fe]=0;for(fe=0;fe<32;fe++)xe[fe]=J[fe];for(fe=0;fe<32;fe++)for(ve=0;ve<32;ve++)xe[fe+ve]+=ee[fe]*U[ve];return O(A.subarray(32),xe),At}function H(A,M){var N=r(),g=r(),U=r(),ee=r(),J=r(),fe=r(),ve=r();return y(A[2],a),w(A[1],M),ne(U,A[1]),K(ee,U,u),Y(U,U,A[2]),R(ee,A[2],ee),ne(J,ee),ne(fe,J),K(ve,fe,J),K(N,ve,U),K(N,N,ee),ge(N,N),K(N,N,U),K(N,N,ee),K(N,N,ee),K(A[0],N,ee),ne(g,A[0]),K(g,g,ee),L(g,U)&&K(A[0],A[0],b),ne(g,A[0]),K(g,g,ee),L(g,U)?-1:(I(A[0])===M[31]>>7&&Y(A[0],o,A[0]),K(A[3],A[0],A[1]),0)}function W(A,M,N,g){var U,ee=new Uint8Array(32),J=new Uint8Array(64),fe=[r(),r(),r(),r()],ve=[r(),r(),r(),r()];if(N<64||H(ve,g))return-1;for(U=0;U<N;U++)A[U]=M[U];for(U=0;U<32;U++)A[U+32]=g[U];if(Ut(J,A,N),E(J),Et(fe,ve,J),It(ve,M.subarray(32)),ft(fe,ve),Ft(ee,fe),N-=64,j(M,0,ee,0)){for(U=0;U<N;U++)A[U]=0;return-1}for(U=0;U<N;U++)A[U]=M[U+64];return N}var te=32,oe=24,Xe=32,Je=16,Ze=32,Ht=32,ze=32,er=32,ba=32,gr=oe,br=Xe,dl=Je,jt=64,Wt=32,Wi=64,cr=32,fr=64;t.lowlevel={crypto_core_hsalsa20:X,crypto_stream_xor:D,crypto_stream:G,crypto_stream_salsa20_xor:Z,crypto_stream_salsa20:z,crypto_onetimeauth:m,crypto_onetimeauth_verify:d,crypto_verify_16:$,crypto_verify_32:j,crypto_secretbox:c,crypto_secretbox_open:h,crypto_scalarmult:ye,crypto_scalarmult_base:Ye,crypto_box_beforenm:He,crypto_box_afternm:we,crypto_box:ke,crypto_box_open:Bt,crypto_box_keypair:Me,crypto_hash:Ut,crypto_sign:x,crypto_sign_keypair:Zt,crypto_sign_open:W,crypto_secretbox_KEYBYTES:te,crypto_secretbox_NONCEBYTES:oe,crypto_secretbox_ZEROBYTES:Xe,crypto_secretbox_BOXZEROBYTES:Je,crypto_scalarmult_BYTES:Ze,crypto_scalarmult_SCALARBYTES:Ht,crypto_box_PUBLICKEYBYTES:ze,crypto_box_SECRETKEYBYTES:er,crypto_box_BEFORENMBYTES:ba,crypto_box_NONCEBYTES:gr,crypto_box_ZEROBYTES:br,crypto_box_BOXZEROBYTES:dl,crypto_sign_BYTES:jt,crypto_sign_PUBLICKEYBYTES:Wt,crypto_sign_SECRETKEYBYTES:Wi,crypto_sign_SEEDBYTES:cr,crypto_hash_BYTES:fr,gf:r,D:u,L:Tt,pack25519:B,unpack25519:w,M:K,A:R,S:ne,Z:Y,pow2523:ge,add:ft,set25519:y,modL:O,scalarmult:Et,scalarbase:It};function Mc(A,M){if(A.length!==te)throw new Error("bad key size");if(M.length!==oe)throw new Error("bad nonce size")}function vr(A,M){if(A.length!==ze)throw new Error("bad public key size");if(M.length!==er)throw new Error("bad secret key size")}function Rt(){for(var A=0;A<arguments.length;A++)if(!(arguments[A]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Nc(A){for(var M=0;M<A.length;M++)A[M]=0}t.randomBytes=function(A){var M=new Uint8Array(A);return n(M,A),M},t.secretbox=function(A,M,N){Rt(A,M,N),Mc(N,M);for(var g=new Uint8Array(Xe+A.length),U=new Uint8Array(g.length),ee=0;ee<A.length;ee++)g[ee+Xe]=A[ee];return c(U,g,g.length,M,N),U.subarray(Je)},t.secretbox.open=function(A,M,N){Rt(A,M,N),Mc(N,M);for(var g=new Uint8Array(Je+A.length),U=new Uint8Array(g.length),ee=0;ee<A.length;ee++)g[ee+Je]=A[ee];return g.length<32||h(U,g,g.length,M,N)!==0?null:U.subarray(Xe)},t.secretbox.keyLength=te,t.secretbox.nonceLength=oe,t.secretbox.overheadLength=Je,t.scalarMult=function(A,M){if(Rt(A,M),A.length!==Ht)throw new Error("bad n size");if(M.length!==Ze)throw new Error("bad p size");var N=new Uint8Array(Ze);return ye(N,A,M),N},t.scalarMult.base=function(A){if(Rt(A),A.length!==Ht)throw new Error("bad n size");var M=new Uint8Array(Ze);return Ye(M,A),M},t.scalarMult.scalarLength=Ht,t.scalarMult.groupElementLength=Ze,t.box=function(A,M,N,g){var U=t.box.before(N,g);return t.secretbox(A,M,U)},t.box.before=function(A,M){Rt(A,M),vr(A,M);var N=new Uint8Array(ba);return He(N,A,M),N},t.box.after=t.secretbox,t.box.open=function(A,M,N,g){var U=t.box.before(N,g);return t.secretbox.open(A,M,U)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var A=new Uint8Array(ze),M=new Uint8Array(er);return Me(A,M),{publicKey:A,secretKey:M}},t.box.keyPair.fromSecretKey=function(A){if(Rt(A),A.length!==er)throw new Error("bad secret key size");var M=new Uint8Array(ze);return Ye(M,A),{publicKey:M,secretKey:new Uint8Array(A)}},t.box.publicKeyLength=ze,t.box.secretKeyLength=er,t.box.sharedKeyLength=ba,t.box.nonceLength=gr,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(A,M){if(Rt(A,M),M.length!==Wi)throw new Error("bad secret key size");var N=new Uint8Array(jt+A.length);return x(N,A,A.length,M),N},t.sign.open=function(A,M){if(Rt(A,M),M.length!==Wt)throw new Error("bad public key size");var N=new Uint8Array(A.length),g=W(N,A,A.length,M);if(g<0)return null;for(var U=new Uint8Array(g),ee=0;ee<U.length;ee++)U[ee]=N[ee];return U},t.sign.detached=function(A,M){for(var N=t.sign(A,M),g=new Uint8Array(jt),U=0;U<g.length;U++)g[U]=N[U];return g},t.sign.detached.verify=function(A,M,N){if(Rt(A,M,N),M.length!==jt)throw new Error("bad signature size");if(N.length!==Wt)throw new Error("bad public key size");var g=new Uint8Array(jt+A.length),U=new Uint8Array(jt+A.length),ee;for(ee=0;ee<jt;ee++)g[ee]=M[ee];for(ee=0;ee<A.length;ee++)g[ee+jt]=A[ee];return W(U,g,g.length,N)>=0},t.sign.keyPair=function(){var A=new Uint8Array(Wt),M=new Uint8Array(Wi);return Zt(A,M),{publicKey:A,secretKey:M}},t.sign.keyPair.fromSecretKey=function(A){if(Rt(A),A.length!==Wi)throw new Error("bad secret key size");for(var M=new Uint8Array(Wt),N=0;N<M.length;N++)M[N]=A[32+N];return{publicKey:M,secretKey:new Uint8Array(A)}},t.sign.keyPair.fromSeed=function(A){if(Rt(A),A.length!==cr)throw new Error("bad seed size");for(var M=new Uint8Array(Wt),N=new Uint8Array(Wi),g=0;g<32;g++)N[g]=A[g];return Zt(M,N,!0),{publicKey:M,secretKey:N}},t.sign.publicKeyLength=Wt,t.sign.secretKeyLength=Wi,t.sign.seedLength=cr,t.sign.signatureLength=jt,t.hash=function(A){Rt(A);var M=new Uint8Array(fr);return Ut(M,A,A.length),M},t.hash.hashLength=fr,t.verify=function(A,M){return Rt(A,M),A.length===0||M.length===0||A.length!==M.length?!1:P(A,0,M,0,A.length)===0},t.setPRNG=function(A){n=A},function(){var A=typeof self<"u"?self.crypto||self.msCrypto:null;if(A&&A.getRandomValues){var M=65536;t.setPRNG(function(N,g){var U,ee=new Uint8Array(g);for(U=0;U<g;U+=M)A.getRandomValues(ee.subarray(U,U+Math.min(g-U,M)));for(U=0;U<g;U++)N[U]=ee[U];Nc(ee)})}else typeof Da<"u"&&(A=Mp,A&&A.randomBytes&&t.setPRNG(function(N,g){var U,ee=A.randomBytes(g);for(U=0;U<g;U++)N[U]=ee[U];Nc(ee)}))}()})(e.exports?e.exports:self.nacl=self.nacl||{})})(b2);var AC=Pe&&Pe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),BC=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),IC=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&AC(t,e,r);return BC(t,e),t};Object.defineProperty(qn,"__esModule",{value:!0}),qn.getEncryptionPublicKey=qn.decryptSafely=qn.decrypt=qn.encryptSafely=qn.encrypt=void 0;const xi=y0,lo=IC(b2.exports),Si=Wr;function v2({publicKey:e,data:t,version:r}){if((0,Si.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,Si.isNullish)(t))throw new Error("Missing data parameter");if((0,Si.isNullish)(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");const n=lo.box.keyPair();let s;try{s=xi.base64.decode(e)}catch{throw new Error("Bad public key")}const i=xi.utf8.decode(t),o=lo.randomBytes(lo.box.nonceLength),a=lo.box(i,o,s,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:xi.base64.encode(o),ephemPublicKey:xi.base64.encode(n.publicKey),ciphertext:xi.base64.encode(a)}}default:throw new Error("Encryption type/version not supported")}}qn.encrypt=v2;function TC({publicKey:e,data:t,version:r}){if((0,Si.isNullish)(e))throw new Error("Missing publicKey parameter");if((0,Si.isNullish)(t))throw new Error("Missing data parameter");if((0,Si.isNullish)(r))throw new Error("Missing version parameter");const n=2**11,s=16;if(typeof t=="object"&&t&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:t,padding:""},a=se.Buffer.byteLength(JSON.stringify(i),"utf-8")%n;let f=0;a>0&&(f=n-a-s),i.padding="0".repeat(f);const u=JSON.stringify(i);return v2({publicKey:e,data:u,version:r})}qn.encryptSafely=TC;function _2({encryptedData:e,privateKey:t}){if((0,Si.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,Si.isNullish)(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{const r=se.Buffer.from(t,"hex"),n=lo.box.keyPair.fromSecretKey(r).secretKey,s=xi.base64.decode(e.nonce),i=xi.base64.decode(e.ciphertext),o=xi.base64.decode(e.ephemPublicKey),a=lo.box.open(i,s,o,n);try{if(!a)throw new Error;const f=xi.utf8.encode(a);if(!f)throw new Error;return f}catch(f){throw f&&typeof f.message=="string"&&f.message.length?new Error(`Decryption failed: ${f.message}`):new Error("Decryption failed.")}}default:throw new Error("Encryption type/version not supported.")}}qn.decrypt=_2;function RC({encryptedData:e,privateKey:t}){if((0,Si.isNullish)(e))throw new Error("Missing encryptedData parameter");if((0,Si.isNullish)(t))throw new Error("Missing privateKey parameter");return JSON.parse(_2({encryptedData:e,privateKey:t})).data}qn.decryptSafely=RC;function kC(e){const t=se.Buffer.from(e,"hex"),r=lo.box.keyPair.fromSecretKey(t).publicKey;return xi.base64.encode(r)}qn.getEncryptionPublicKey=kC,function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(s,i,o,a){a===void 0&&(a=o);var f=Object.getOwnPropertyDescriptor(i,o);(!f||("get"in f?!i.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(s,a,f)}:function(s,i,o,a){a===void 0&&(a=o),s[a]=i[o]}),r=Pe&&Pe.__exportStar||function(s,i){for(var o in s)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,s,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.normalize=e.concatSig=void 0,r(ns,e),r(v_,e),r(qn,e);var n=Wr;Object.defineProperty(e,"concatSig",{enumerable:!0,get:function(){return n.concatSig}}),Object.defineProperty(e,"normalize",{enumerable:!0,get:function(){return n.normalize}})}(Po);class E2 extends Error{constructor(t,r){super(),this.code=t,this.message=r}toString(){return`${this.message} (${this.code})`}}var LC=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},CC=(e,t,r)=>(LC(e,t,"read from private field"),r?r.call(e):t.get(e)),OC=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},X0;const pa=class{constructor(e){OC(this,X0,["eth_newFilter","eth_newBlockFilter","eth_newPendingTransactionFilter","eth_uninstallFilter","eth_subscribe"]),this.provider=e}static isUTF8(e){try{return new TextDecoder("utf8",{fatal:!0}).decode(e),!0}catch{return!1}}static bufferToHex(e){return"0x"+se.Buffer.from(e).toString("hex")}static messageToBuffer(e){let t=se.Buffer.from([]);try{typeof e=="string"?t=se.Buffer.from(e.replace("0x",""),"hex"):t=se.Buffer.from(e)}catch(r){console.log(`messageToBuffer error: ${r}`)}return t}async request(e){if(CC(this,X0).includes(e.method))return Promise.reject(new E2(4200,`EthereumProvider does not support calling ${e.method}`));switch(e.method){case"wallet_requestPermissions":return this.provider.internalRequest({method:"wallet_requestPermissions",params:e.params});case"eth_requestAccounts":return this.provider.internalRequest({method:"requestAccounts",params:{}});case"eth_sign":return this.ethSign(e.params);case"personal_sign":return this.personalSign(e.params);case"personal_ecRecover":return this.personalECRecover(e.params);case"eth_signTypedData_v3":return this.ethSignTypedData(e.params,Po.SignTypedDataVersion.V3);case"eth_signTypedData_v4":return this.ethSignTypedData(e.params,Po.SignTypedDataVersion.V4);case"eth_signTypedData":return this.ethSignTypedData(e.params,Po.SignTypedDataVersion.V1);case"eth_sendTransaction":return this.provider.internalRequest({method:"signTransaction",params:e.params[0]});case"wallet_watchAsset":{const{options:t,type:r}=e.params,{address:n,symbol:s,decimals:i}=t;return this.provider.internalRequest({method:"watchAsset",params:{type:r,contract:n,symbol:s,decimals:i||0}})}case"wallet_addEthereumChain":return this.provider.internalRequest({method:"addEthereumChain",params:e.params[0]});case"wallet_switchEthereumChain":return this.provider.internalRequest({method:"switchEthereumChain",params:e.params[0]});default:return await this.provider.getRPC().call({method:e.method,jsonrpc:"2.0",params:e.params})}}personalECRecover(e){return this.provider.internalRequest({method:"ecRecover",params:{signature:e[1],message:e[0]}})}async personalSign(e){const[t]=await this.provider.request({method:"eth_accounts"});if(!t)throw new Error("Unable to execute personal_sign");let[r,n]=e;typeof r=="string"&&t.toLowerCase()===r.toLowerCase()&&(r=e[1],n=e[0]);const s=pa.messageToBuffer(r);return this.provider.internalRequest({method:"signPersonalMessage",params:{data:s.length===0?pa.bufferToHex(r):r,address:n}})}ethSign(e){if(!e)throw new Error("Missing params");const[t,r]=e,n=pa.messageToBuffer(r),s=pa.bufferToHex(n);return this.provider.internalRequest({method:pa.isUTF8(n)?"signPersonalMessage":"signMessage",params:{data:s,address:t,isEthSign:!0}})}async ethSignTypedData(e,t){const[r]=await this.provider.request({method:"eth_accounts"});if(!r)throw new Error("Unable to execute ethSignTypedData, address is not present");let[n,s]=e;typeof n=="string"&&r.toLowerCase()===n.toLowerCase()&&(n=e[1],s=e[0]);const i=typeof n=="string"?JSON.parse(n):n,{chainId:o}=i.domain||{};if(typeof o<"u"&&Number(o)!==Number(this.provider.getChainId()))throw new Error("Provided chainId does not match the currently active chain");const a=t!==Po.SignTypedDataVersion.V1?Po.TypedDataUtils.eip712Hash(i,t):"";return this.provider.internalRequest({method:"signTypedMessage",params:{data:"0x"+a.toString("hex"),raw:typeof n=="string"?n:JSON.stringify(n),address:s,version:t}})}};let $C=pa;X0=new WeakMap;var MC=Object.defineProperty,x2=Object.getOwnPropertySymbols,NC=Object.prototype.hasOwnProperty,PC=Object.prototype.propertyIsEnumerable,S2=(e,t,r)=>t in e?MC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,UC=(e,t)=>{for(var r in t||(t={}))NC.call(t,r)&&S2(e,r,t[r]);if(x2)for(var r of x2(t))PC.call(t,r)&&S2(e,r,t[r]);return e},A2=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},FC=(e,t,r)=>(A2(e,t,"read from private field"),r?r.call(e):t.get(e)),HC=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},jC=(e,t,r,n)=>(A2(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),cl;class B2{constructor(t){HC(this,cl,void 0),jC(this,cl,t)}async getBlockNumber(){return(await this.call({jsonrpc:"2.0",method:"eth_blockNumber",params:[]})).result}async getBlockByNumber(t){return(await this.call({jsonrpc:"2.0",method:"eth_getBlockByNumber",params:[t,!1]})).result}getFilterLogs(t){return this.call({jsonrpc:"2.0",method:"eth_getLogs",params:[t]})}async call(t){const r=await(await fetch(FC(this,cl),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(UC({id:new Date().getTime()+Math.floor(Math.random()*1e3)},t))})).json();if(!r.result&&r.error)throw new Error(r.error.message||"rpc error");return r.result}}cl=new WeakMap;var I2=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},kn=(e,t,r)=>(I2(e,t,"read from private field"),r?r.call(e):t.get(e)),ga=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Ln=(e,t,r,n)=>(I2(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ki,ya,fl,Lc,Cs,wa;const T2=class extends jc{constructor(e){super(),ga(this,Ki,void 0),ga(this,ya,void 0),ga(this,fl,!1),ga(this,Lc,!1),ga(this,Cs,void 0),ga(this,wa,void 0),this.isTrust=!0,this.isTrustWallet=!0,this.request=this.request.bind(this),e&&(e.chainId&&Ln(this,Ki,e.chainId),(e.rpc||e.rpcUrl)&&Ln(this,ya,e.rpc||e.rpcUrl),typeof e.overwriteMetamask<"u"&&Ln(this,Lc,e.overwriteMetamask),typeof e.disableMobileAdapter<"u"&&Ln(this,fl,e.disableMobileAdapter),typeof e.isTrust<"u"&&(this.isTrust=e.isTrust,this.isTrustWallet=e.isTrust),Ln(this,wa,new B2(kn(this,ya)))),kn(this,fl)||(this.mobileAdapter=new $C(this)),super.on("onResponseReady",this.onResponseReady.bind(this)),this.connect()}connect(){this.emit("connect",{chainId:kn(this,Ki)})}enable(){return this.request({method:"eth_requestAccounts"})}sendAsync(e,t){Array.isArray(e)?Promise.all(e.map(r=>this.request(r))).then(r=>t(null,r)).catch(r=>t(r,null)):this.request(e).then(r=>t(null,r)).catch(r=>t(r,null))}_send(e){const t={jsonrpc:"2.0",result:null};switch(e.method){case"eth_accounts":case"eth_coinbase":case"net_version":case"eth_chainId":t.result=this.handleStaticRequests({method:"eth_accounts"});break;default:throw new E2(4200,`Trust does not support calling ${e.method} synchronously without a callback. Please provide a callback parameter to call ${e.method} asynchronously.`)}return t}send(e,t){if(typeof e=="string"&&(!t||Array.isArray(t))){const r=this;return new Promise((n,s)=>{try{const i=r.request({method:e,params:t});i instanceof Promise?i.then(n).catch(s):n(i)}catch(i){s(i)}})}else if(e&&typeof e=="object"&&typeof t=="function")return this.request(e).then(t);return this._send(e)}internalRequest(e){return super.request(e)}request(e){const t=()=>this.internalRequest(e);if(this.mobileAdapter){const r=this.handleStaticRequests(e,()=>this.mobileAdapter.request(e));return r instanceof Promise?r:Promise.resolve(r)}return this.handleStaticRequests(e,t)}handleStaticRequests(e,t){switch(e.method){case"net_version":return kn(this,Ki)?parseInt(kn(this,Ki)):void 0;case"eth_chainId":return kn(this,Ki);case"eth_accounts":case"eth_coinbase":return kn(this,Cs)?[kn(this,Cs)]:[]}if(t)return t()}onResponseReady(e,t){var r,n,s,i;if(t)switch(e.method){case"eth_requestAccounts":case"requestAccounts":Ln(this,Cs,t[0]);break;case"wallet_requestPermissions":Ln(this,Cs,(i=(s=(n=(r=t[0])==null?void 0:r.caveats)==null?void 0:n[0])==null?void 0:s.value)==null?void 0:i[0]);break}}getNetwork(){return T2.NETWORK}get connected(){return!0}get isMetaMask(){return kn(this,Lc)}getChainId(){return kn(this,Ki)}getNetworkVersion(){return this.handleStaticRequests({method:"net_version "})}setChainId(e){Ln(this,Ki,e)}setRPCUrl(e){Ln(this,ya,e),Ln(this,wa,new B2(kn(this,ya)))}getRPC(){return kn(this,wa)}setOverwriteMetamask(e){Ln(this,Lc,e)}getAddress(){return kn(this,Cs)}setAddress(e){Ln(this,Cs,e)}setRPC(e){Ln(this,wa,e)}};let R2=T2;Ki=new WeakMap,ya=new WeakMap,fl=new WeakMap,Lc=new WeakMap,Cs=new WeakMap,wa=new WeakMap,R2.NETWORK="ethereum";class DC{constructor(t){this.provider=t}async request(t,r){if(t.method==="getKey"){const s=await this.provider.internalRequest({method:"requestAccounts",params:t.params}),i=JSON.parse(s);return{algo:"secp256k1",address:i.address,bech32Address:i.address,pubKey:se.Buffer.from(i.pubKey,"hex")}}const n={signAmino:"signTransaction",signDirect:"signTransaction",signArbitrary:"signMessage",sendTx:"sendTransaction"};return n[t.method]?this.provider.internalRequest({method:n[t.method],params:t.params}):r()}}var k2=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},L2=(e,t,r)=>(k2(e,t,"read from private field"),r?r.call(e):t.get(e)),zC=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},qC=(e,t,r,n)=>(k2(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Cc;const Oc=class extends jc{constructor(e){super(),zC(this,Cc,!1),this.isKeplr=!0,this.isTrust=!0,this.isTrustWallet=!0,e&&(typeof e.disableMobileAdapter<"u"&&qC(this,Cc,e.disableMobileAdapter),typeof e.isKeplr<"u"&&(this.isKeplr=e.isKeplr),typeof e.isTrust<"u"&&(this.isTrust=e.isTrust,this.isTrustWallet=e.isTrust)),L2(this,Cc)||(this.mobileAdapter=new DC(this))}static bufferToHex(e){return"0x"+se.Buffer.from(e).toString("hex")}getNetwork(){return Oc.NETWORK}isMobileAdapterEnabled(){return!L2(this,Cc)}enable(e){return this.request({method:"enable",params:{chainIds:e}})}internalRequest(e){return super.request(e)}request(e){const t=()=>this.internalRequest(e);return this.mobileAdapter?this.mobileAdapter.request(e,t):t()}getKey(e){return this.request({method:"getKey",params:{chainId:e}})}async sendTx(e,t,r){const n=se.Buffer.from(t).toString("base64"),s=await this.request({method:"sendTx",params:{raw:n,chainId:e,mode:r}});return new Uint8Array(se.Buffer.from(s,"hex"))}async signArbitrary(e,t,r){const n=se.Buffer.from(r),s=Oc.bufferToHex(n);return await this.request({method:"signArbitrary",params:{chainId:e,data:s,signerAddress:t}})}async signAmino(e,t,r){const n=await this.request({method:"signAmino",params:{chainId:e,sign_doc:r}}),{signed:s,signature:i}=JSON.parse(n);return{signed:s,signature:i}}async signDirect(e,t,r){const n={bodyBytes:Oc.bufferToHex(r.bodyBytes),authInfoBytes:Oc.bufferToHex(r.authInfoBytes)},s=await this.request({method:"signDirect",params:{signerAddress:t,chainId:e,sign_doc:n}}),{signature:i}=JSON.parse(s);return{signed:r,signature:i}}experimentalSuggestChain(){}getOfflineSignerDirect(e){return{getAccounts:async()=>[await this.getKey(e)],signDirect:async(t,r)=>{if(e!==r.chainId)throw new Error("Unmatched chain id with the offline signer");if((await this.getKey(r.chainId)).address!==t)throw new Error("Unknown signer address");return await this.signDirect(e,t,r)}}}getOfflineSigner(e){return this.getOfflineSignerAmino(e)}getOfflineSignerAuto(e){return this.getOfflineSignerAmino(e)}getOfflineSignerAmino(e){return{getAccounts:async()=>{const t=await this.getKey(e);return[{address:t.bech32Address,algo:"secp256k1",pubkey:t.pubKey}]},sign:(t,r)=>this.signAmino(e,t,r),signAmino:(t,r)=>this.signAmino(e,t,r)}}};let C2=Oc;Cc=new WeakMap,C2.NETWORK="cosmos";var J0={exports:{}},ma=typeof Reflect=="object"?Reflect:null,O2=ma&&typeof ma.apply=="function"?ma.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},ul;ma&&typeof ma.ownKeys=="function"?ul=ma.ownKeys:Object.getOwnPropertySymbols?ul=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ul=function(e){return Object.getOwnPropertyNames(e)};function VC(e){console&&console.warn&&console.warn(e)}var $2=Number.isNaN||function(e){return e!==e};function Kt(){Kt.init.call(this)}J0.exports=Kt,J0.exports.once=GC,Kt.EventEmitter=Kt,Kt.prototype._events=void 0,Kt.prototype._eventsCount=0,Kt.prototype._maxListeners=void 0;var M2=10;function ll(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Kt,"defaultMaxListeners",{enumerable:!0,get:function(){return M2},set:function(e){if(typeof e!="number"||e<0||$2(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");M2=e}}),Kt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Kt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||$2(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function N2(e){return e._maxListeners===void 0?Kt.defaultMaxListeners:e._maxListeners}Kt.prototype.getMaxListeners=function(){return N2(this)},Kt.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}var a=s[e];if(a===void 0)return!1;if(typeof a=="function")O2(a,this,t);else for(var f=a.length,u=j2(a,f),r=0;r<f;++r)O2(u[r],this,t);return!0};function P2(e,t,r,n){var s,i,o;if(ll(r),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),o===void 0)o=i[t]=r,++e._eventsCount;else if(typeof o=="function"?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=N2(e),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,VC(a)}return e}Kt.prototype.addListener=function(e,t){return P2(this,e,t,!1)},Kt.prototype.on=Kt.prototype.addListener,Kt.prototype.prependListener=function(e,t){return P2(this,e,t,!0)};function KC(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function U2(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},s=KC.bind(n);return s.listener=r,n.wrapFn=s,s}Kt.prototype.once=function(e,t){return ll(t),this.on(e,U2(this,e,t)),this},Kt.prototype.prependOnceListener=function(e,t){return ll(t),this.prependListener(e,U2(this,e,t)),this},Kt.prototype.removeListener=function(e,t){var r,n,s,i,o;if(ll(t),n=this._events,n===void 0)return this;if(r=n[e],r===void 0)return this;if(r===t||r.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(s=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){o=r[i].listener,s=i;break}if(s<0)return this;s===0?r.shift():WC(r,s),r.length===1&&(n[e]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",e,o||t)}return this},Kt.prototype.off=Kt.prototype.removeListener,Kt.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),i;for(n=0;n<s.length;++n)i=s[n],i!=="removeListener"&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this};function F2(e,t,r){var n=e._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?ZC(s):j2(s,s.length)}Kt.prototype.listeners=function(e){return F2(this,e,!0)},Kt.prototype.rawListeners=function(e){return F2(this,e,!1)},Kt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):H2.call(e,t)},Kt.prototype.listenerCount=H2;function H2(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Kt.prototype.eventNames=function(){return this._eventsCount>0?ul(this._events):[]};function j2(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function WC(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function ZC(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function GC(e,t){return new Promise(function(r,n){function s(o){e.removeListener(t,i),n(o)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",s),r([].slice.call(arguments))}D2(e,t,i,{once:!0}),t!=="error"&&YC(e,s,{once:!0})})}function YC(e,t,r){typeof e.on=="function"&&D2(e,"error",t,r)}function D2(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(i){n.once&&e.removeEventListener(t,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}const z2={PROMISES:"PROMISES",CALLBACK:"CALLBACK"};class XC extends J0.exports.EventEmitter{setAdapter(t){return this.adapter=t,this}async request(t){try{if(!this.adapter)throw new Error("No adapter set, maybe you forgot to register the provider?");const r=await this.adapter.request(t,this.getNetwork());return this.emit("onResponseReady",t,r),r}catch(r){throw r}}sendResponse(t,r){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==z2.CALLBACK)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendResponse(t,r)}sendError(t,r){if(!this.adapter)throw new Error("Adapter not found");if(this.adapter.getStrategy()!==z2.CALLBACK)throw new Error("Trying to send callback request on promisified adapter");this.adapter.sendError(t,r)}}const $c=class extends XC{constructor(e){super(),this._isConnected=!1,this.chainId=null,this.address=null,e&&e.network&&(this._network=e.network,e.chainId&&(this.chainId=e.chainId))}static bufferToHex(e){return"0x"+se.Buffer.from(e).toString("hex")}static messageToBuffer(e){let t=se.Buffer.from([]);try{typeof e=="string"?t=se.Buffer.from(e.replace("0x",""),"hex"):t=se.Buffer.from(e)}catch(r){console.log(`messageToBuffer error: ${r}`)}return t}setConfig(e){this._network=e.network,this.address=e.address,this.chainId=e.chainId}async connect(){const e=await this.account();return this._isConnected=!0,this.emit("connect"),e}disconnect(){this._isConnected=!1,this.emit("disconnect")}isConnected(){return this._isConnected}async account(){const e=await this.request({method:"requestAccounts",params:{}});return JSON.parse(e)}network(){return this._network}getNetwork(){return $c.NETWORK}async signMessage(e){const t="APTOS",r=(await this.account()).address;let n=t;const s=window.location.protocol+"//"+window.location.hostname;e.address&&(n+=`
address: `+r),e.application&&(n+=`
application: `+s),e.chainId&&(n+=`
chainId: `+this.chainId),n+=`
message: `+e.message,n+=`
nonce: `+e.nonce;const i=se.Buffer.from(n),o=$c.bufferToHex(i);return this.request({method:"signMessage",params:{data:o}}).then(a=>({address:r,application:s,chainId:this.chainId,fullMessage:n,message:e.message,nonce:e.nonce,prefix:t,signature:a}))}async signAndSubmitTransaction(e){const t=await this.signTransaction(e),r=await this.request({method:"sendTransaction",params:{tx:t}});return{hash:$c.messageToBuffer(r).toString()}}async signTransaction(e){const t=await this.request({method:"signTransaction",params:{data:e}});return JSON.parse($c.messageToBuffer(t).toString())}};let q2=$c;q2.NETWORK="aptos";var JC=Object.defineProperty,QC=Object.defineProperties,eO=Object.getOwnPropertyDescriptors,hl=Object.getOwnPropertySymbols,V2=Object.prototype.hasOwnProperty,K2=Object.prototype.propertyIsEnumerable,W2=(e,t,r)=>t in e?JC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Q0=(e,t)=>{for(var r in t||(t={}))V2.call(t,r)&&W2(e,r,t[r]);if(hl)for(var r of hl(t))K2.call(t,r)&&W2(e,r,t[r]);return e},tO=(e,t)=>QC(e,eO(t)),Z2=(e,t)=>{var r={};for(var n in e)V2.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&hl)for(var n of hl(e))t.indexOf(n)<0&&K2.call(e,n)&&(r[n]=e[n]);return r};class ep{constructor(t){this.provider=t}static mapToCamelCase(t){return Q0(Q0({},t),t!=null&&t.messages?{messages:(t?.messages||[]).map(r=>{var n=r,{state_init:s}=n,i=Z2(n,["state_init"]);return tO(Q0({},i),{stateInit:s})})}:{})}async request(t,r){switch(t){case"tonConnect_connect":{const n=await this.provider.internalRequest("requestAccounts",r);return JSON.parse(n).map(s=>s.name==="ton_addr"?Z2(s,["nonBounceable"]):s)}case"tonConnect_reconnect":{const n=await this.provider.internalRequest("tonConnect_reconnect",r);return JSON.parse(n)}case"ton_rawSign":return this.provider.internalRequest("signMessage",r);case"ton_sendTransaction":case"tonConnect_sendTransaction":{const n=await this.provider.internalRequest("signTransaction",ep.mapToCamelCase(r[0])),{nonce:s,hash:i}=JSON.parse(n);return t==="ton_sendTransaction"?s:i}case"ton_requestAccounts":{const n=await this.provider.internalRequest("requestAccounts",r),[{nonBounceable:s}]=JSON.parse(n);return[s]}case"ton_requestWallets":{const n=await this.provider.internalRequest("requestAccounts",r),[{nonBounceable:s,publicKey:i}]=JSON.parse(n);return[{address:s,publicKey:i,version:this.provider.version}]}default:return this.provider.internalRequest(t,r)}}}const G2=class extends jc{constructor(e){super(),this.version="v4R2",e&&e.version&&(this.version=e.version),e!=null&&e.disableMobileAdapter||(this.mobileAdapter=new ep(this))}disconnect(){return this.send("tonConnect_disconnect",{})}isConnected(){return Promise.resolve(!0)}async send(e,t){const r=()=>this.internalRequest(e,t);return this.mobileAdapter?await this.mobileAdapter.request(e,t):await r()}internalRequest(e,t){return super.request({method:e,params:t})}getNetwork(){return G2.NETWORK}};let Y2=G2;Y2.NETWORK="ton";class tp extends Error{constructor(t,r){super(t),this.code=r}}const X2=e=>{var t;return{event:"connect_error",payload:{code:(t=e.code)!=null?t:0,message:e.message}}};class rO{constructor(t,r){this.protocolVersion=2,this.isWalletBrowser=!0,this.callbacks=[],this.listen=n=>(this.callbacks.push(n),()=>{this.callbacks=this.callbacks.filter(s=>s!=n)}),t&&(typeof t.isWalletBrowser<"u"&&(this.isWalletBrowser=t.isWalletBrowser),t.walletInfo&&(this.walletInfo=t.walletInfo),t.deviceInfo&&(this.deviceInfo=t.deviceInfo)),this.provider=r}async connect(t,r){try{t>this.protocolVersion&&new tp("Unsupported protocol version",1);const n=await this.provider.send("tonConnect_connect",r);return n?.event==="connect_error"?this.emit(n):this.emit({event:"connect",payload:{items:n,device:this.deviceInfo}})}catch(n){return this.parseError(n,{id:0})}}async disconnect(){return await this.provider.send("tonConnect_disconnect",{}),this.emit({event:"disconnect",payload:{}})}emit(t){return this.callbacks.forEach(r=>r(t)),t}async restoreConnection(){var t;try{const r=await this.provider.send("tonConnect_reconnect",[{name:"ton_addr"}]);return this.emit({event:"connect",payload:{items:r,device:this.deviceInfo}})}catch(r){return r instanceof tp?this.emit(X2(r)):this.emit(X2(new tp((t=r.message)!=null?t:"Unknown error")))}}async send(t){try{return{result:await this.provider.send(`tonConnect_${t.method}`,t.params.map(r=>JSON.parse(r))),id:t.id.toString()}}catch(r){return this.parseError(r,{id:t.id})}}parseError(t,r){var n,s,i;return t?.code===4001?{error:{message:"User Rejected the transaction",code:300},id:(n=String(r.id))!=null?n:0}:t?.code===-32002?{error:{message:"Bad request, a transaction is already pending",code:1},id:(s=String(r.id))!=null?s:0}:(t&&![0,1,100,300,400].includes(t.code)&&(t.code=0),{error:t,id:(i=String(r.id))!=null?i:0})}}const nO=(e,t)=>new _E({strategy:e,handler:t}),iO=e=>new l1(e),sO=e=>new C2(e),oO=e=>new R2(e),aO=e=>new q2(e),cO=e=>new Y2(e),fO=(e,t)=>new rO(e,t);window.trustwallet={core:nO,solana:iO,cosmos:sO,ethereum:oO,aptos:aO,ton:cO,tonBridge:fO}});
